/*! For license information please see main.73626626.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,s)=>{var r=s(853),a=s(43),n=s(950);function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function o(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(s=t.return),e=t.return}while(e)}return 3===t.tag?s:null}function d(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(o(e)!==e)throw Error(l(188))}function u(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=u(e)))return t;e=e.sibling}return null}var m=Object.assign,x=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),j=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var E=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var A=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var T=Symbol.for("react.client.reference");function L(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===T?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case b:return"Profiler";case f:return"StrictMode";case w:return"Suspense";case _:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case h:return"Portal";case j:return(e.displayName||"Context")+".Provider";case v:return(e._context.displayName||"Context")+".Consumer";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:L(e.type)||"Memo";case S:t=e._payload,e=e._init;try{return L(e(t))}catch(s){}}return null}var F=Array.isArray,D=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},R=[],M=-1;function I(e){return{current:e}}function U(e){0>M||(e.current=R[M],R[M]=null,M--)}function B(e,t){M++,R[M]=e.current,e.current=t}var $=I(null),H=I(null),q=I(null),W=I(null);function V(e,t){switch(B(q,t),B(H,e),B($,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?au(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=nu(t=au(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U($),B($,e)}function G(){U($),U(H),U(q)}function K(e){null!==e.memoizedState&&B(W,e);var t=$.current,s=nu(t,e.type);t!==s&&(B(H,e),B($,s))}function Q(e){H.current===e&&(U($),U(H)),W.current===e&&(U(W),Ku._currentValue=z)}var Y=Object.prototype.hasOwnProperty,J=r.unstable_scheduleCallback,Z=r.unstable_cancelCallback,X=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,se=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ae=r.unstable_UserBlockingPriority,ne=r.unstable_NormalPriority,le=r.unstable_LowPriority,ie=r.unstable_IdlePriority,oe=r.log,de=r.unstable_setDisableYieldValue,ce=null,ue=null;function me(e){if("function"===typeof oe&&de(e),ue&&"function"===typeof ue.setStrictMode)try{ue.setStrictMode(ce,e)}catch(t){}}var xe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/he|0)|0},pe=Math.log,he=Math.LN2;var ge=256,fe=4194304;function be(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ye(e,t,s){var r=e.pendingLanes;if(0===r)return 0;var a=0,n=e.suspendedLanes,l=e.pingedLanes;e=e.warmLanes;var i=134217727&r;return 0!==i?0!==(r=i&~n)?a=be(r):0!==(l&=i)?a=be(l):s||0!==(s=i&~e)&&(a=be(s)):0!==(i=r&~n)?a=be(i):0!==l?a=be(l):s||0!==(s=r&~e)&&(a=be(s)),0===a?0:0!==t&&t!==a&&0===(t&n)&&((n=a&-a)>=(s=t&-t)||32===n&&0!==(4194048&s))?t:a}function ve(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function je(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ne(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function we(){var e=fe;return 0===(62914560&(fe<<=1))&&(fe=4194304),e}function _e(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function ke(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Se(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-xe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&s}function Ce(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var r=31-xe(s),a=1<<r;a&t|e[r]&t&&(e[r]|=t),s&=~a}}function Ee(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ae(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Pe(){var e=O.p;return 0!==e?e:void 0===(e=window.event)?32:dm(e.type)}var Te=Math.random().toString(36).slice(2),Le="__reactFiber$"+Te,Fe="__reactProps$"+Te,De="__reactContainer$"+Te,Oe="__reactEvents$"+Te,ze="__reactListeners$"+Te,Re="__reactHandles$"+Te,Me="__reactResources$"+Te,Ie="__reactMarker$"+Te;function Ue(e){delete e[Le],delete e[Fe],delete e[Oe],delete e[ze],delete e[Re]}function Be(e){var t=e[Le];if(t)return t;for(var s=e.parentNode;s;){if(t=s[De]||s[Le]){if(s=t.alternate,null!==t.child||null!==s&&null!==s.child)for(e=yu(e);null!==e;){if(s=e[Le])return s;e=yu(e)}return t}s=(e=s).parentNode}return null}function $e(e){if(e=e[Le]||e[De]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function He(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(l(33))}function qe(e){var t=e[Me];return t||(t=e[Me]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[Ie]=!0}var Ve=new Set,Ge={};function Ke(e,t){Qe(e,t),Qe(e+"Capture",t)}function Qe(e,t){for(Ge[e]=t,e=0;e<t.length;e++)Ve.add(t[e])}var Ye,Je,Ze=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xe={},et={};function tt(e,t,s){if(a=t,Y.call(et,a)||!Y.call(Xe,a)&&(Ze.test(a)?et[a]=!0:(Xe[a]=!0,0)))if(null===s)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+s)}var a}function st(e,t,s){if(null===s)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+s)}}function rt(e,t,s,r){if(null===r)e.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(s)}e.setAttributeNS(t,s,""+r)}}function at(e){if(void 0===Ye)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Ye=t&&t[1]||"",Je=-1<s.stack.indexOf("\n    at")?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ye+e+Je}var nt=!1;function lt(e,t){if(!e||nt)return"";nt=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var s=function(){throw Error()};if(Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(s,[])}catch(a){var r=a}Reflect.construct(e,[],s)}else{try{s.call()}catch(n){r=n}e.call(s.prototype)}}else{try{throw Error()}catch(l){r=l}(s=e())&&"function"===typeof s.catch&&s.catch(function(){})}}catch(i){if(i&&r&&"string"===typeof i.stack)return[i.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var n=r.DetermineComponentFrameRoot(),l=n[0],i=n[1];if(l&&i){var o=l.split("\n"),d=i.split("\n");for(a=r=0;r<o.length&&!o[r].includes("DetermineComponentFrameRoot");)r++;for(;a<d.length&&!d[a].includes("DetermineComponentFrameRoot");)a++;if(r===o.length||a===d.length)for(r=o.length-1,a=d.length-1;1<=r&&0<=a&&o[r]!==d[a];)a--;for(;1<=r&&0<=a;r--,a--)if(o[r]!==d[a]){if(1!==r||1!==a)do{if(r--,0>--a||o[r]!==d[a]){var c="\n"+o[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=a);break}}}finally{nt=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?at(s):""}function it(e){switch(e.tag){case 26:case 27:case 5:return at(e.type);case 16:return at("Lazy");case 13:return at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return lt(e.type,!1);case 11:return lt(e.type.render,!1);case 1:return lt(e.type,!0);case 31:return at("Activity");default:return""}}function ot(e){try{var t="";do{t+=it(e),e=e.return}while(e);return t}catch(s){return"\nError generating stack: "+s.message+"\n"+s.stack}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ut(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof s&&"function"===typeof s.get&&"function"===typeof s.set){var a=s.get,n=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,n.call(this,e)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function mt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),r="";return e&&(r=ct(e)?e.checked?"true":"false":e.value),(e=r)!==s&&(t.setValue(e),!0)}function xt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function ht(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,s,r,a,n,l,i){e.name="",null!=l&&"function"!==typeof l&&"symbol"!==typeof l&&"boolean"!==typeof l?e.type=l:e.removeAttribute("type"),null!=t?"number"===l?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==l&&"reset"!==l||e.removeAttribute("value"),null!=t?bt(e,l,dt(t)):null!=s?bt(e,l,dt(s)):null!=r&&e.removeAttribute("value"),null==a&&null!=n&&(e.defaultChecked=!!n),null!=a&&(e.checked=a&&"function"!==typeof a&&"symbol"!==typeof a),null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.name=""+dt(i):e.removeAttribute("name")}function ft(e,t,s,r,a,n,l,i){if(null!=n&&"function"!==typeof n&&"symbol"!==typeof n&&"boolean"!==typeof n&&(e.type=n),null!=t||null!=s){if(!("submit"!==n&&"reset"!==n||void 0!==t&&null!==t))return;s=null!=s?""+dt(s):"",t=null!=t?""+dt(t):s,i||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:a)&&"symbol"!==typeof r&&!!r,e.checked=i?e.checked:!!r,e.defaultChecked=!!r,null!=l&&"function"!==typeof l&&"symbol"!==typeof l&&"boolean"!==typeof l&&(e.name=l)}function bt(e,t,s){"number"===t&&xt(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function yt(e,t,s,r){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&r&&(e[s].defaultSelected=!0)}else{for(s=""+dt(s),t=null,a=0;a<e.length;a++){if(e[a].value===s)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function vt(e,t,s){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=s)?e.defaultValue=null!=s?""+dt(s):"":e.defaultValue!==t&&(e.defaultValue=t)}function jt(e,t,s,r){if(null==t){if(null!=r){if(null!=s)throw Error(l(92));if(F(r)){if(1<r.length)throw Error(l(93));r=r[0]}s=r}null==s&&(s=""),t=s}s=dt(t),e.defaultValue=s,(r=e.textContent)===s&&""!==r&&null!==r&&(e.value=r)}function Nt(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&3===s.nodeType)return void(s.nodeValue=t)}e.textContent=t}var wt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _t(e,t,s){var r=0===t.indexOf("--");null==s||"boolean"===typeof s||""===s?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,s):"number"!==typeof s||0===s||wt.has(t)?"float"===t?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function kt(e,t,s){if(null!=t&&"object"!==typeof t)throw Error(l(62));if(e=e.style,null!=s){for(var r in s)!s.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var a in t)r=t[a],t.hasOwnProperty(a)&&s[a]!==r&&_t(e,a,r)}else for(var n in t)t.hasOwnProperty(n)&&_t(e,n,t[n])}function St(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Et=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return Et.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Pt=null;function Tt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Lt=null,Ft=null;function Dt(e){var t=$e(e);if(t&&(e=t.stateNode)){var s=e[Fe]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,"radio"===s.type&&null!=t){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ht(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var r=s[t];if(r!==e&&r.form===e.form){var a=r[Fe]||null;if(!a)throw Error(l(90));gt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<s.length;t++)(r=s[t]).form===e.form&&mt(r)}break e;case"textarea":vt(e,s.value,s.defaultValue);break e;case"select":null!=(t=s.value)&&yt(e,!!s.multiple,t,!1)}}}var Ot=!1;function zt(e,t,s){if(Ot)return e(t,s);Ot=!0;try{return e(t)}finally{if(Ot=!1,(null!==Lt||null!==Ft)&&(Bd(),Lt&&(t=Lt,e=Ft,Ft=Lt=null,Dt(t),e)))for(t=0;t<e.length;t++)Dt(e[t])}}function Rt(e,t){var s=e.stateNode;if(null===s)return null;var r=s[Fe]||null;if(null===r)return null;s=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(s&&"function"!==typeof s)throw Error(l(231,t,typeof s));return s}var Mt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),It=!1;if(Mt)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){It=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(Fm){It=!1}var Bt=null,$t=null,Ht=null;function qt(){if(Ht)return Ht;var e,t,s=$t,r=s.length,a="value"in Bt?Bt.value:Bt.textContent,n=a.length;for(e=0;e<r&&s[e]===a[e];e++);var l=r-e;for(t=1;t<=l&&s[r-t]===a[n-t];t++);return Ht=a.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Vt(){return!0}function Gt(){return!1}function Kt(e){function t(t,s,r,a,n){for(var l in this._reactName=t,this._targetInst=r,this.type=s,this.nativeEvent=a,this.target=n,this.currentTarget=null,e)e.hasOwnProperty(l)&&(t=e[l],this[l]=t?t(a):a[l]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Vt:Gt,this.isPropagationStopped=Gt,this}return m(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Vt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Vt)},persist:function(){},isPersistent:Vt}),t}var Qt,Yt,Jt,Zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xt=Kt(Zt),es=m({},Zt,{view:0,detail:0}),ts=Kt(es),ss=m({},es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xs,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jt&&(Jt&&"mousemove"===e.type?(Qt=e.screenX-Jt.screenX,Yt=e.screenY-Jt.screenY):Yt=Qt=0,Jt=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:Yt}}),rs=Kt(ss),as=Kt(m({},ss,{dataTransfer:0})),ns=Kt(m({},es,{relatedTarget:0})),ls=Kt(m({},Zt,{animationName:0,elapsedTime:0,pseudoElement:0})),is=Kt(m({},Zt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),os=Kt(m({},Zt,{data:0})),ds={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},us={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ms(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=us[e])&&!!t[e]}function xs(){return ms}var ps=Kt(m({},es,{key:function(e){if(e.key){var t=ds[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?cs[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xs,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),hs=Kt(m({},ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gs=Kt(m({},es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xs})),fs=Kt(m({},Zt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bs=Kt(m({},ss,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),ys=Kt(m({},Zt,{newState:0,oldState:0})),vs=[9,13,27,32],js=Mt&&"CompositionEvent"in window,Ns=null;Mt&&"documentMode"in document&&(Ns=document.documentMode);var ws=Mt&&"TextEvent"in window&&!Ns,_s=Mt&&(!js||Ns&&8<Ns&&11>=Ns),ks=String.fromCharCode(32),Ss=!1;function Cs(e,t){switch(e){case"keyup":return-1!==vs.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Es(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var As=!1;var Ps={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ts(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ps[e.type]:"textarea"===t}function Ls(e,t,s,r){Lt?Ft?Ft.push(r):Ft=[r]:Lt=r,0<(t=qc(t,"onChange")).length&&(s=new Xt("onChange","change",null,s,r),e.push({event:s,listeners:t}))}var Fs=null,Ds=null;function Os(e){zc(e,0)}function zs(e){if(mt(He(e)))return e}function Rs(e,t){if("change"===e)return t}var Ms=!1;if(Mt){var Is;if(Mt){var Us="oninput"in document;if(!Us){var Bs=document.createElement("div");Bs.setAttribute("oninput","return;"),Us="function"===typeof Bs.oninput}Is=Us}else Is=!1;Ms=Is&&(!document.documentMode||9<document.documentMode)}function $s(){Fs&&(Fs.detachEvent("onpropertychange",Hs),Ds=Fs=null)}function Hs(e){if("value"===e.propertyName&&zs(Ds)){var t=[];Ls(t,Ds,e,Tt(e)),zt(Os,t)}}function qs(e,t,s){"focusin"===e?($s(),Ds=s,(Fs=t).attachEvent("onpropertychange",Hs)):"focusout"===e&&$s()}function Ws(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return zs(Ds)}function Vs(e,t){if("click"===e)return zs(t)}function Gs(e,t){if("input"===e||"change"===e)return zs(t)}var Ks="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Qs(e,t){if(Ks(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var a=s[r];if(!Y.call(t,a)||!Ks(e[a],t[a]))return!1}return!0}function Ys(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Js(e,t){var s,r=Ys(e);for(e=0;r;){if(3===r.nodeType){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ys(r)}}function Zs(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zs(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Xs(e){for(var t=xt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var s="string"===typeof t.contentWindow.location.href}catch(r){s=!1}if(!s)break;t=xt((e=t.contentWindow).document)}return t}function er(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var tr=Mt&&"documentMode"in document&&11>=document.documentMode,sr=null,rr=null,ar=null,nr=!1;function lr(e,t,s){var r=s.window===s?s.document:9===s.nodeType?s:s.ownerDocument;nr||null==sr||sr!==xt(r)||("selectionStart"in(r=sr)&&er(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ar&&Qs(ar,r)||(ar=r,0<(r=qc(rr,"onSelect")).length&&(t=new Xt("onSelect","select",null,t,s),e.push({event:t,listeners:r}),t.target=sr)))}function ir(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var or={animationend:ir("Animation","AnimationEnd"),animationiteration:ir("Animation","AnimationIteration"),animationstart:ir("Animation","AnimationStart"),transitionrun:ir("Transition","TransitionRun"),transitionstart:ir("Transition","TransitionStart"),transitioncancel:ir("Transition","TransitionCancel"),transitionend:ir("Transition","TransitionEnd")},dr={},cr={};function ur(e){if(dr[e])return dr[e];if(!or[e])return e;var t,s=or[e];for(t in s)if(s.hasOwnProperty(t)&&t in cr)return dr[e]=s[t];return e}Mt&&(cr=document.createElement("div").style,"AnimationEvent"in window||(delete or.animationend.animation,delete or.animationiteration.animation,delete or.animationstart.animation),"TransitionEvent"in window||delete or.transitionend.transition);var mr=ur("animationend"),xr=ur("animationiteration"),pr=ur("animationstart"),hr=ur("transitionrun"),gr=ur("transitionstart"),fr=ur("transitioncancel"),br=ur("transitionend"),yr=new Map,vr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){yr.set(e,t),Ke(t,[e])}vr.push("scrollEnd");var Nr=new WeakMap;function wr(e,t){if("object"===typeof e&&null!==e){var s=Nr.get(e);return void 0!==s?s:(t={value:e,source:t,stack:ot(t)},Nr.set(e,t),t)}return{value:e,source:t,stack:ot(t)}}var _r=[],kr=0,Sr=0;function Cr(){for(var e=kr,t=Sr=kr=0;t<e;){var s=_r[t];_r[t++]=null;var r=_r[t];_r[t++]=null;var a=_r[t];_r[t++]=null;var n=_r[t];if(_r[t++]=null,null!==r&&null!==a){var l=r.pending;null===l?a.next=a:(a.next=l.next,l.next=a),r.pending=a}0!==n&&Tr(s,a,n)}}function Er(e,t,s,r){_r[kr++]=e,_r[kr++]=t,_r[kr++]=s,_r[kr++]=r,Sr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ar(e,t,s,r){return Er(e,t,s,r),Lr(e)}function Pr(e,t){return Er(e,null,null,t),Lr(e)}function Tr(e,t,s){e.lanes|=s;var r=e.alternate;null!==r&&(r.lanes|=s);for(var a=!1,n=e.return;null!==n;)n.childLanes|=s,null!==(r=n.alternate)&&(r.childLanes|=s),22===n.tag&&(null===(e=n.stateNode)||1&e._visibility||(a=!0)),e=n,n=n.return;return 3===e.tag?(n=e.stateNode,a&&null!==t&&(a=31-xe(s),null===(r=(e=n.hiddenUpdates)[a])?e[a]=[t]:r.push(t),t.lane=536870912|s),n):null}function Lr(e){if(50<Ld)throw Ld=0,Fd=null,Error(l(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Fr={};function Dr(e,t,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(e,t,s,r){return new Dr(e,t,s,r)}function zr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rr(e,t){var s=e.alternate;return null===s?((s=Or(e.tag,t,e.key,e.mode)).elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=65011712&e.flags,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Mr(e,t){e.flags&=65011714;var s=e.alternate;return null===s?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ir(e,t,s,r,a,n){var i=0;if(r=e,"function"===typeof e)zr(e)&&(i=1);else if("string"===typeof e)i=function(e,t,s){if(1===s||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,s,$.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Or(31,s,t,a)).elementType=C,e.lanes=n,e;case g:return Ur(s.children,a,n,t);case f:i=8,a|=24;break;case b:return(e=Or(12,s,t,2|a)).elementType=b,e.lanes=n,e;case w:return(e=Or(13,s,t,a)).elementType=w,e.lanes=n,e;case _:return(e=Or(19,s,t,a)).elementType=_,e.lanes=n,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case y:case j:i=10;break e;case v:i=9;break e;case N:i=11;break e;case k:i=14;break e;case S:i=16,r=null;break e}i=29,s=Error(l(130,null===e?"null":typeof e,"")),r=null}return(t=Or(i,s,t,a)).elementType=e,t.type=r,t.lanes=n,t}function Ur(e,t,s,r){return(e=Or(7,e,r,t)).lanes=s,e}function Br(e,t,s){return(e=Or(6,e,null,t)).lanes=s,e}function $r(e,t,s){return(t=Or(4,null!==e.children?e.children:[],e.key,t)).lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],qr=0,Wr=null,Vr=0,Gr=[],Kr=0,Qr=null,Yr=1,Jr="";function Zr(e,t){Hr[qr++]=Vr,Hr[qr++]=Wr,Wr=e,Vr=t}function Xr(e,t,s){Gr[Kr++]=Yr,Gr[Kr++]=Jr,Gr[Kr++]=Qr,Qr=e;var r=Yr;e=Jr;var a=32-xe(r)-1;r&=~(1<<a),s+=1;var n=32-xe(t)+a;if(30<n){var l=a-a%5;n=(r&(1<<l)-1).toString(32),r>>=l,a-=l,Yr=1<<32-xe(t)+a|s<<a|r,Jr=n+e}else Yr=1<<n|s<<a|r,Jr=e}function ea(e){null!==e.return&&(Zr(e,1),Xr(e,1,0))}function ta(e){for(;e===Wr;)Wr=Hr[--qr],Hr[qr]=null,Vr=Hr[--qr],Hr[qr]=null;for(;e===Qr;)Qr=Gr[--Kr],Gr[Kr]=null,Jr=Gr[--Kr],Gr[Kr]=null,Yr=Gr[--Kr],Gr[Kr]=null}var sa=null,ra=null,aa=!1,na=null,la=!1,ia=Error(l(519));function oa(e){throw pa(wr(Error(l(418,"")),e)),ia}function da(e){var t=e.stateNode,s=e.type,r=e.memoizedProps;switch(t[Le]=e,t[Fe]=r,s){case"dialog":Rc("cancel",t),Rc("close",t);break;case"iframe":case"object":case"embed":Rc("load",t);break;case"video":case"audio":for(s=0;s<Dc.length;s++)Rc(Dc[s],t);break;case"source":Rc("error",t);break;case"img":case"image":case"link":Rc("error",t),Rc("load",t);break;case"details":Rc("toggle",t);break;case"input":Rc("invalid",t),ft(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ut(t);break;case"select":Rc("invalid",t);break;case"textarea":Rc("invalid",t),jt(t,r.value,r.defaultValue,r.children),ut(t)}"string"!==typeof(s=r.children)&&"number"!==typeof s&&"bigint"!==typeof s||t.textContent===""+s||!0===r.suppressHydrationWarning||Yc(t.textContent,s)?(null!=r.popover&&(Rc("beforetoggle",t),Rc("toggle",t)),null!=r.onScroll&&Rc("scroll",t),null!=r.onScrollEnd&&Rc("scrollend",t),null!=r.onClick&&(t.onclick=Jc),t=!0):t=!1,t||oa(e)}function ca(e){for(sa=e.return;sa;)switch(sa.tag){case 5:case 13:return void(la=!1);case 27:case 3:return void(la=!0);default:sa=sa.return}}function ua(e){if(e!==sa)return!1;if(!aa)return ca(e),aa=!0,!1;var t,s=e.tag;if((t=3!==s&&27!==s)&&((t=5===s)&&(t=!("form"!==(t=e.type)&&"button"!==t)||lu(e.type,e.memoizedProps)),t=!t),t&&ra&&oa(e),ca(e),13===s){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(l(317));e:{for(e=e.nextSibling,s=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===s){ra=fu(e.nextSibling);break e}s--}else"$"!==t&&"$!"!==t&&"$?"!==t||s++;e=e.nextSibling}ra=null}}else 27===s?(s=ra,xu(e.type)?(e=bu,bu=null,ra=e):ra=s):ra=sa?fu(e.stateNode.nextSibling):null;return!0}function ma(){ra=sa=null,aa=!1}function xa(){var e=na;return null!==e&&(null===yd?yd=e:yd.push.apply(yd,e),na=null),e}function pa(e){null===na?na=[e]:na.push(e)}var ha=I(null),ga=null,fa=null;function ba(e,t,s){B(ha,t._currentValue),t._currentValue=s}function ya(e){e._currentValue=ha.current,U(ha)}function va(e,t,s){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===s)break;e=e.return}}function ja(e,t,s,r){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var n=a.dependencies;if(null!==n){var i=a.child;n=n.firstContext;e:for(;null!==n;){var o=n;n=a;for(var d=0;d<t.length;d++)if(o.context===t[d]){n.lanes|=s,null!==(o=n.alternate)&&(o.lanes|=s),va(n.return,s,e),r||(i=null);break e}n=o.next}}else if(18===a.tag){if(null===(i=a.return))throw Error(l(341));i.lanes|=s,null!==(n=i.alternate)&&(n.lanes|=s),va(i,s,e),i=null}else i=a.child;if(null!==i)i.return=a;else for(i=a;null!==i;){if(i===e){i=null;break}if(null!==(a=i.sibling)){a.return=i.return,i=a;break}i=i.return}a=i}}function Na(e,t,s,r){e=null;for(var a=t,n=!1;null!==a;){if(!n)if(0!==(524288&a.flags))n=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var i=a.alternate;if(null===i)throw Error(l(387));if(null!==(i=i.memoizedProps)){var o=a.type;Ks(a.pendingProps.value,i.value)||(null!==e?e.push(o):e=[o])}}else if(a===W.current){if(null===(i=a.alternate))throw Error(l(387));i.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(Ku):e=[Ku])}a=a.return}null!==e&&ja(t,e,s,r),t.flags|=262144}function wa(e){for(e=e.firstContext;null!==e;){if(!Ks(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _a(e){ga=e,fa=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function ka(e){return Ca(ga,e)}function Sa(e,t){return null===ga&&_a(e),Ca(e,t)}function Ca(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},null===fa){if(null===e)throw Error(l(308));fa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else fa=fa.next=t;return s}var Ea="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Aa=r.unstable_scheduleCallback,Pa=r.unstable_NormalPriority,Ta={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function La(){return{controller:new Ea,data:new Map,refCount:0}}function Fa(e){e.refCount--,0===e.refCount&&Aa(Pa,function(){e.controller.abort()})}var Da=null,Oa=0,za=0,Ra=null;function Ma(){if(0===--Oa&&null!==Da){null!==Ra&&(Ra.status="fulfilled");var e=Da;Da=null,za=0,Ra=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ia=D.S;D.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Da){var s=Da=[];Oa=0,za=Ac(),Ra={status:"pending",value:void 0,then:function(e){s.push(e)}}}Oa++,t.then(Ma,Ma)}(0,t),null!==Ia&&Ia(e,t)};var Ua=I(null);function Ba(){var e=Ua.current;return null!==e?e:rd.pooledCache}function $a(e,t){B(Ua,null===t?Ua.current:t.pool)}function Ha(){var e=Ba();return null===e?null:{parent:Ta._currentValue,pool:e}}var qa=Error(l(460)),Wa=Error(l(474)),Va=Error(l(542)),Ga={then:function(){}};function Ka(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Qa(){}function Ya(e,t,s){switch(void 0===(s=e[s])?e.push(t):s!==t&&(t.then(Qa,Qa),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw Xa(e=t.reason),e;default:if("string"===typeof t.status)t.then(Qa,Qa);else{if(null!==(e=rd)&&100<e.shellSuspendCounter)throw Error(l(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var s=t;s.status="fulfilled",s.value=e}},function(e){if("pending"===t.status){var s=t;s.status="rejected",s.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw Xa(e=t.reason),e}throw Ja=t,qa}}var Ja=null;function Za(){if(null===Ja)throw Error(l(459));var e=Ja;return Ja=null,e}function Xa(e){if(e===qa||e===Va)throw Error(l(483))}var en=!1;function tn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function rn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function an(e,t,s){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&sd)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=Lr(e),Tr(e,null,s),t}return Er(e,r,t,s),Lr(e)}function nn(e,t,s){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&s))){var r=t.lanes;s|=r&=e.pendingLanes,t.lanes=s,Ce(e,s)}}function ln(e,t){var s=e.updateQueue,r=e.alternate;if(null!==r&&s===(r=r.updateQueue)){var a=null,n=null;if(null!==(s=s.firstBaseUpdate)){do{var l={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};null===n?a=n=l:n=n.next=l,s=s.next}while(null!==s);null===n?a=n=t:n=n.next=t}else a=n=t;return s={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:n,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=s)}null===(e=s.lastBaseUpdate)?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var on=!1;function dn(){if(on){if(null!==Ra)throw Ra}}function cn(e,t,s,r){on=!1;var a=e.updateQueue;en=!1;var n=a.firstBaseUpdate,l=a.lastBaseUpdate,i=a.shared.pending;if(null!==i){a.shared.pending=null;var o=i,d=o.next;o.next=null,null===l?n=d:l.next=d,l=o;var c=e.alternate;null!==c&&((i=(c=c.updateQueue).lastBaseUpdate)!==l&&(null===i?c.firstBaseUpdate=d:i.next=d,c.lastBaseUpdate=o))}if(null!==n){var u=a.baseState;for(l=0,c=d=o=null,i=n;;){var x=-536870913&i.lane,p=x!==i.lane;if(p?(nd&x)===x:(r&x)===x){0!==x&&x===za&&(on=!0),null!==c&&(c=c.next={lane:0,tag:i.tag,payload:i.payload,callback:null,next:null});e:{var h=e,g=i;x=t;var f=s;switch(g.tag){case 1:if("function"===typeof(h=g.payload)){u=h.call(f,u,x);break e}u=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(x="function"===typeof(h=g.payload)?h.call(f,u,x):h)||void 0===x)break e;u=m({},u,x);break e;case 2:en=!0}}null!==(x=i.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=a.callbacks)?a.callbacks=[x]:p.push(x))}else p={lane:x,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===c?(d=c=p,o=u):c=c.next=p,l|=x;if(null===(i=i.next)){if(null===(i=a.shared.pending))break;i=(p=i).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}null===c&&(o=u),a.baseState=o,a.firstBaseUpdate=d,a.lastBaseUpdate=c,null===n&&(a.shared.lanes=0),xd|=l,e.lanes=l,e.memoizedState=u}}function un(e,t){if("function"!==typeof e)throw Error(l(191,e));e.call(t)}function mn(e,t){var s=e.callbacks;if(null!==s)for(e.callbacks=null,e=0;e<s.length;e++)un(s[e],t)}var xn=I(null),pn=I(0);function hn(e,t){B(pn,e=ud),B(xn,t),ud=e|t.baseLanes}function gn(){B(pn,ud),B(xn,xn.current)}function fn(){ud=pn.current,U(xn),U(pn)}var bn=0,yn=null,vn=null,jn=null,Nn=!1,wn=!1,_n=!1,kn=0,Sn=0,Cn=null,En=0;function An(){throw Error(l(321))}function Pn(e,t){if(null===t)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Ks(e[s],t[s]))return!1;return!0}function Tn(e,t,s,r,a,n){return bn=n,yn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=null===e||null===e.memoizedState?Wl:Vl,_n=!1,n=s(r,a),_n=!1,wn&&(n=Fn(t,s,r,a)),Ln(e),n}function Ln(e){D.H=ql;var t=null!==vn&&null!==vn.next;if(bn=0,jn=vn=yn=null,Nn=!1,Sn=0,Cn=null,t)throw Error(l(300));null===e||Si||null!==(e=e.dependencies)&&wa(e)&&(Si=!0)}function Fn(e,t,s,r){yn=e;var a=0;do{if(wn&&(Cn=null),Sn=0,wn=!1,25<=a)throw Error(l(301));if(a+=1,jn=vn=null,null!=e.updateQueue){var n=e.updateQueue;n.lastEffect=null,n.events=null,n.stores=null,null!=n.memoCache&&(n.memoCache.index=0)}D.H=Gl,n=t(s,r)}while(wn);return n}function Dn(){var e=D.H,t=e.useState()[0];return t="function"===typeof t.then?Un(t):t,e=e.useState()[0],(null!==vn?vn.memoizedState:null)!==e&&(yn.flags|=1024),t}function On(){var e=0!==kn;return kn=0,e}function zn(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function Rn(e){if(Nn){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Nn=!1}bn=0,jn=vn=yn=null,wn=!1,Sn=kn=0,Cn=null}function Mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===jn?yn.memoizedState=jn=e:jn=jn.next=e,jn}function In(){if(null===vn){var e=yn.alternate;e=null!==e?e.memoizedState:null}else e=vn.next;var t=null===jn?yn.memoizedState:jn.next;if(null!==t)jn=t,vn=e;else{if(null===e){if(null===yn.alternate)throw Error(l(467));throw Error(l(310))}e={memoizedState:(vn=e).memoizedState,baseState:vn.baseState,baseQueue:vn.baseQueue,queue:vn.queue,next:null},null===jn?yn.memoizedState=jn=e:jn=jn.next=e}return jn}function Un(e){var t=Sn;return Sn+=1,null===Cn&&(Cn=[]),e=Ya(Cn,e,t),t=yn,null===(null===jn?t.memoizedState:jn.next)&&(t=t.alternate,D.H=null===t||null===t.memoizedState?Wl:Vl),e}function Bn(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Un(e);if(e.$$typeof===j)return ka(e)}throw Error(l(438,String(e)))}function $n(e){var t=null,s=yn.updateQueue;if(null!==s&&(t=s.memoCache),null==t){var r=yn.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===s&&(s={lastEffect:null,events:null,stores:null,memoCache:null},yn.updateQueue=s),s.memoCache=t,void 0===(s=t.data[t.index]))for(s=t.data[t.index]=Array(e),r=0;r<e;r++)s[r]=E;return t.index++,s}function Hn(e,t){return"function"===typeof t?t(e):t}function qn(e){return Wn(In(),vn,e)}function Wn(e,t,s){var r=e.queue;if(null===r)throw Error(l(311));r.lastRenderedReducer=s;var a=e.baseQueue,n=r.pending;if(null!==n){if(null!==a){var i=a.next;a.next=n.next,n.next=i}t.baseQueue=a=n,r.pending=null}if(n=e.baseState,null===a)e.memoizedState=n;else{var o=i=null,d=null,c=t=a.next,u=!1;do{var m=-536870913&c.lane;if(m!==c.lane?(nd&m)===m:(bn&m)===m){var x=c.revertLane;if(0===x)null!==d&&(d=d.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),m===za&&(u=!0);else{if((bn&x)===x){c=c.next,x===za&&(u=!0);continue}m={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===d?(o=d=m,i=n):d=d.next=m,yn.lanes|=x,xd|=x}m=c.action,_n&&s(n,m),n=c.hasEagerState?c.eagerState:s(n,m)}else x={lane:m,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===d?(o=d=x,i=n):d=d.next=x,yn.lanes|=m,xd|=m;c=c.next}while(null!==c&&c!==t);if(null===d?i=n:d.next=o,!Ks(n,e.memoizedState)&&(Si=!0,u&&null!==(s=Ra)))throw s;e.memoizedState=n,e.baseState=i,e.baseQueue=d,r.lastRenderedState=n}return null===a&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Vn(e){var t=In(),s=t.queue;if(null===s)throw Error(l(311));s.lastRenderedReducer=e;var r=s.dispatch,a=s.pending,n=t.memoizedState;if(null!==a){s.pending=null;var i=a=a.next;do{n=e(n,i.action),i=i.next}while(i!==a);Ks(n,t.memoizedState)||(Si=!0),t.memoizedState=n,null===t.baseQueue&&(t.baseState=n),s.lastRenderedState=n}return[n,r]}function Gn(e,t,s){var r=yn,a=In(),n=aa;if(n){if(void 0===s)throw Error(l(407));s=s()}else s=t();var i=!Ks((vn||a).memoizedState,s);if(i&&(a.memoizedState=s,Si=!0),a=a.queue,gl(2048,8,Yn.bind(null,r,a,e),[e]),a.getSnapshot!==t||i||null!==jn&&1&jn.memoizedState.tag){if(r.flags|=2048,xl(9,{destroy:void 0,resource:void 0},Qn.bind(null,r,a,s,t),null),null===rd)throw Error(l(349));n||0!==(124&bn)||Kn(r,t,s)}return s}function Kn(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},null===(t=yn.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},yn.updateQueue=t,t.stores=[e]):null===(s=t.stores)?t.stores=[e]:s.push(e)}function Qn(e,t,s,r){t.value=s,t.getSnapshot=r,Jn(t)&&Zn(e)}function Yn(e,t,s){return s(function(){Jn(t)&&Zn(e)})}function Jn(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Ks(e,s)}catch(r){return!0}}function Zn(e){var t=Pr(e,2);null!==t&&zd(t,e,2)}function Xn(e){var t=Mn();if("function"===typeof e){var s=e;if(e=s(),_n){me(!0);try{s()}finally{me(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:e},t}function el(e,t,s,r){return e.baseState=s,Wn(e,vn,"function"===typeof r?r:Hn)}function tl(e,t,s,r,a){if(Bl(e))throw Error(l(485));if(null!==(e=t.action)){var n={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){n.listeners.push(e)}};null!==D.T?s(!0):n.isTransition=!1,r(n),null===(s=t.pending)?(n.next=t.pending=n,sl(t,n)):(n.next=s.next,t.pending=s.next=n)}}function sl(e,t){var s=t.action,r=t.payload,a=e.state;if(t.isTransition){var n=D.T,l={};D.T=l;try{var i=s(a,r),o=D.S;null!==o&&o(l,i),rl(e,t,i)}catch(d){nl(e,t,d)}finally{D.T=n}}else try{rl(e,t,n=s(a,r))}catch(c){nl(e,t,c)}}function rl(e,t,s){null!==s&&"object"===typeof s&&"function"===typeof s.then?s.then(function(s){al(e,t,s)},function(s){return nl(e,t,s)}):al(e,t,s)}function al(e,t,s){t.status="fulfilled",t.value=s,ll(t),e.state=s,null!==(t=e.pending)&&((s=t.next)===t?e.pending=null:(s=s.next,t.next=s,sl(e,s)))}function nl(e,t,s){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=s,ll(t),t=t.next}while(t!==r)}e.action=null}function ll(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function il(e,t){return t}function ol(e,t){if(aa){var s=rd.formState;if(null!==s){e:{var r=yn;if(aa){if(ra){t:{for(var a=ra,n=la;8!==a.nodeType;){if(!n){a=null;break t}if(null===(a=fu(a.nextSibling))){a=null;break t}}a="F!"===(n=a.data)||"F"===n?a:null}if(a){ra=fu(a.nextSibling),r="F!"===a.data;break e}}oa(r)}r=!1}r&&(t=s[0])}}return(s=Mn()).memoizedState=s.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:t},s.queue=r,s=Ml.bind(null,yn,r),r.dispatch=s,r=Xn(!1),n=Ul.bind(null,yn,!1,r.queue),a={state:t,dispatch:null,action:e,pending:null},(r=Mn()).queue=a,s=tl.bind(null,yn,a,n,s),a.dispatch=s,r.memoizedState=e,[t,s,!1]}function dl(e){return cl(In(),vn,e)}function cl(e,t,s){if(t=Wn(e,t,il)[0],e=qn(Hn)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Un(t)}catch(l){if(l===qa)throw Va;throw l}else r=t;var a=(t=In()).queue,n=a.dispatch;return s!==t.memoizedState&&(yn.flags|=2048,xl(9,{destroy:void 0,resource:void 0},ul.bind(null,a,s),null)),[r,n,e]}function ul(e,t){e.action=t}function ml(e){var t=In(),s=vn;if(null!==s)return cl(t,s,e);In(),t=t.memoizedState;var r=(s=In()).queue.dispatch;return s.memoizedState=e,[t,r,!1]}function xl(e,t,s,r){return e={tag:e,create:s,deps:r,inst:t,next:null},null===(t=yn.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},yn.updateQueue=t),null===(s=t.lastEffect)?t.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,t.lastEffect=e),e}function pl(){return In().memoizedState}function hl(e,t,s,r){var a=Mn();r=void 0===r?null:r,yn.flags|=e,a.memoizedState=xl(1|t,{destroy:void 0,resource:void 0},s,r)}function gl(e,t,s,r){var a=In();r=void 0===r?null:r;var n=a.memoizedState.inst;null!==vn&&null!==r&&Pn(r,vn.memoizedState.deps)?a.memoizedState=xl(t,n,s,r):(yn.flags|=e,a.memoizedState=xl(1|t,n,s,r))}function fl(e,t){hl(8390656,8,e,t)}function bl(e,t){gl(2048,8,e,t)}function yl(e,t){return gl(4,2,e,t)}function vl(e,t){return gl(4,4,e,t)}function jl(e,t){if("function"===typeof t){e=e();var s=t(e);return function(){"function"===typeof s?s():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Nl(e,t,s){s=null!==s&&void 0!==s?s.concat([e]):null,gl(4,4,jl.bind(null,t,e),s)}function wl(){}function _l(e,t){var s=In();t=void 0===t?null:t;var r=s.memoizedState;return null!==t&&Pn(t,r[1])?r[0]:(s.memoizedState=[e,t],e)}function kl(e,t){var s=In();t=void 0===t?null:t;var r=s.memoizedState;if(null!==t&&Pn(t,r[1]))return r[0];if(r=e(),_n){me(!0);try{e()}finally{me(!1)}}return s.memoizedState=[r,t],r}function Sl(e,t,s){return void 0===s||0!==(1073741824&bn)?e.memoizedState=t:(e.memoizedState=s,e=Od(),yn.lanes|=e,xd|=e,s)}function Cl(e,t,s,r){return Ks(s,t)?s:null!==xn.current?(e=Sl(e,s,r),Ks(e,t)||(Si=!0),e):0===(42&bn)?(Si=!0,e.memoizedState=s):(e=Od(),yn.lanes|=e,xd|=e,t)}function El(e,t,s,r,a){var n=O.p;O.p=0!==n&&8>n?n:8;var l=D.T,i={};D.T=i,Ul(e,!1,t,s);try{var o=a(),d=D.S;if(null!==d&&d(i,o),null!==o&&"object"===typeof o&&"function"===typeof o.then)Il(e,t,function(e,t){var s=[],r={status:"pending",value:null,reason:null,then:function(e){s.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<s.length;e++)(0,s[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<s.length;e++)(0,s[e])(void 0)}),r}(o,r),Dd());else Il(e,t,r,Dd())}catch(c){Il(e,t,{then:function(){},status:"rejected",reason:c},Dd())}finally{O.p=n,D.T=l}}function Al(){}function Pl(e,t,s,r){if(5!==e.tag)throw Error(l(476));var a=Tl(e).queue;El(e,a,t,z,null===s?Al:function(){return Ll(e),s(r)})}function Tl(e){var t=e.memoizedState;if(null!==t)return t;var s={};return(t={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:z},next:null}).next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:s},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ll(e){Il(e,Tl(e).next.queue,{},Dd())}function Fl(){return ka(Ku)}function Dl(){return In().memoizedState}function Ol(){return In().memoizedState}function zl(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var s=Dd(),r=an(t,e=rn(s),s);return null!==r&&(zd(r,t,s),nn(r,t,s)),t={cache:La()},void(e.payload=t)}t=t.return}}function Rl(e,t,s){var r=Dd();s={lane:r,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Bl(e)?$l(t,s):null!==(s=Ar(e,t,s,r))&&(zd(s,e,r),Hl(s,t,r))}function Ml(e,t,s){Il(e,t,s,Dd())}function Il(e,t,s,r){var a={lane:r,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Bl(e))$l(t,a);else{var n=e.alternate;if(0===e.lanes&&(null===n||0===n.lanes)&&null!==(n=t.lastRenderedReducer))try{var l=t.lastRenderedState,i=n(l,s);if(a.hasEagerState=!0,a.eagerState=i,Ks(i,l))return Er(e,t,a,0),null===rd&&Cr(),!1}catch(o){}if(null!==(s=Ar(e,t,a,r)))return zd(s,e,r),Hl(s,t,r),!0}return!1}function Ul(e,t,s,r){if(r={lane:2,revertLane:Ac(),action:r,hasEagerState:!1,eagerState:null,next:null},Bl(e)){if(t)throw Error(l(479))}else null!==(t=Ar(e,s,r,2))&&zd(t,e,2)}function Bl(e){var t=e.alternate;return e===yn||null!==t&&t===yn}function $l(e,t){wn=Nn=!0;var s=e.pending;null===s?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Hl(e,t,s){if(0!==(4194048&s)){var r=t.lanes;s|=r&=e.pendingLanes,t.lanes=s,Ce(e,s)}}var ql={readContext:ka,use:Bn,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useLayoutEffect:An,useInsertionEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useSyncExternalStore:An,useId:An,useHostTransitionStatus:An,useFormState:An,useActionState:An,useOptimistic:An,useMemoCache:An,useCacheRefresh:An},Wl={readContext:ka,use:Bn,useCallback:function(e,t){return Mn().memoizedState=[e,void 0===t?null:t],e},useContext:ka,useEffect:fl,useImperativeHandle:function(e,t,s){s=null!==s&&void 0!==s?s.concat([e]):null,hl(4194308,4,jl.bind(null,t,e),s)},useLayoutEffect:function(e,t){return hl(4194308,4,e,t)},useInsertionEffect:function(e,t){hl(4,2,e,t)},useMemo:function(e,t){var s=Mn();t=void 0===t?null:t;var r=e();if(_n){me(!0);try{e()}finally{me(!1)}}return s.memoizedState=[r,t],r},useReducer:function(e,t,s){var r=Mn();if(void 0!==s){var a=s(t);if(_n){me(!0);try{s(t)}finally{me(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=Rl.bind(null,yn,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Mn().memoizedState=e},useState:function(e){var t=(e=Xn(e)).queue,s=Ml.bind(null,yn,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:wl,useDeferredValue:function(e,t){return Sl(Mn(),e,t)},useTransition:function(){var e=Xn(!1);return e=El.bind(null,yn,e.queue,!0,!1),Mn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var r=yn,a=Mn();if(aa){if(void 0===s)throw Error(l(407));s=s()}else{if(s=t(),null===rd)throw Error(l(349));0!==(124&nd)||Kn(r,t,s)}a.memoizedState=s;var n={value:s,getSnapshot:t};return a.queue=n,fl(Yn.bind(null,r,n,e),[e]),r.flags|=2048,xl(9,{destroy:void 0,resource:void 0},Qn.bind(null,r,n,s,t),null),s},useId:function(){var e=Mn(),t=rd.identifierPrefix;if(aa){var s=Jr;t="\xab"+t+"R"+(s=(Yr&~(1<<32-xe(Yr)-1)).toString(32)+s),0<(s=kn++)&&(t+="H"+s.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(s=En++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Fl,useFormState:ol,useActionState:ol,useOptimistic:function(e){var t=Mn();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=Ul.bind(null,yn,!0,s),s.dispatch=t,[e,t]},useMemoCache:$n,useCacheRefresh:function(){return Mn().memoizedState=zl.bind(null,yn)}},Vl={readContext:ka,use:Bn,useCallback:_l,useContext:ka,useEffect:bl,useImperativeHandle:Nl,useInsertionEffect:yl,useLayoutEffect:vl,useMemo:kl,useReducer:qn,useRef:pl,useState:function(){return qn(Hn)},useDebugValue:wl,useDeferredValue:function(e,t){return Cl(In(),vn.memoizedState,e,t)},useTransition:function(){var e=qn(Hn)[0],t=In().memoizedState;return["boolean"===typeof e?e:Un(e),t]},useSyncExternalStore:Gn,useId:Dl,useHostTransitionStatus:Fl,useFormState:dl,useActionState:dl,useOptimistic:function(e,t){return el(In(),0,e,t)},useMemoCache:$n,useCacheRefresh:Ol},Gl={readContext:ka,use:Bn,useCallback:_l,useContext:ka,useEffect:bl,useImperativeHandle:Nl,useInsertionEffect:yl,useLayoutEffect:vl,useMemo:kl,useReducer:Vn,useRef:pl,useState:function(){return Vn(Hn)},useDebugValue:wl,useDeferredValue:function(e,t){var s=In();return null===vn?Sl(s,e,t):Cl(s,vn.memoizedState,e,t)},useTransition:function(){var e=Vn(Hn)[0],t=In().memoizedState;return["boolean"===typeof e?e:Un(e),t]},useSyncExternalStore:Gn,useId:Dl,useHostTransitionStatus:Fl,useFormState:ml,useActionState:ml,useOptimistic:function(e,t){var s=In();return null!==vn?el(s,0,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:$n,useCacheRefresh:Ol},Kl=null,Ql=0;function Yl(e){var t=Ql;return Ql+=1,null===Kl&&(Kl=[]),Ya(Kl,e,t)}function Jl(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Zl(e,t){if(t.$$typeof===x)throw Error(l(525));throw e=Object.prototype.toString.call(t),Error(l(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xl(e){return(0,e._init)(e._payload)}function ei(e){function t(t,s){if(e){var r=t.deletions;null===r?(t.deletions=[s],t.flags|=16):r.push(s)}}function s(s,r){if(!e)return null;for(;null!==r;)t(s,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Rr(e,t)).index=0,e.sibling=null,e}function n(t,s,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<s?(t.flags|=67108866,s):r:(t.flags|=67108866,s):(t.flags|=1048576,s)}function i(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function o(e,t,s,r){return null===t||6!==t.tag?((t=Br(s,e.mode,r)).return=e,t):((t=a(t,s)).return=e,t)}function d(e,t,s,r){var n=s.type;return n===g?u(e,t,s.props.children,r,s.key):null!==t&&(t.elementType===n||"object"===typeof n&&null!==n&&n.$$typeof===S&&Xl(n)===t.type)?(Jl(t=a(t,s.props),s),t.return=e,t):(Jl(t=Ir(s.type,s.key,s.props,null,e.mode,r),s),t.return=e,t)}function c(e,t,s,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==s.containerInfo||t.stateNode.implementation!==s.implementation?((t=$r(s,e.mode,r)).return=e,t):((t=a(t,s.children||[])).return=e,t)}function u(e,t,s,r,n){return null===t||7!==t.tag?((t=Ur(s,e.mode,r,n)).return=e,t):((t=a(t,s)).return=e,t)}function m(e,t,s){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Br(""+t,e.mode,s)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Jl(s=Ir(t.type,t.key,t.props,null,e.mode,s),t),s.return=e,s;case h:return(t=$r(t,e.mode,s)).return=e,t;case S:return m(e,t=(0,t._init)(t._payload),s)}if(F(t)||P(t))return(t=Ur(t,e.mode,s,null)).return=e,t;if("function"===typeof t.then)return m(e,Yl(t),s);if(t.$$typeof===j)return m(e,Sa(e,t),s);Zl(e,t)}return null}function x(e,t,s,r){var a=null!==t?t.key:null;if("string"===typeof s&&""!==s||"number"===typeof s||"bigint"===typeof s)return null!==a?null:o(e,t,""+s,r);if("object"===typeof s&&null!==s){switch(s.$$typeof){case p:return s.key===a?d(e,t,s,r):null;case h:return s.key===a?c(e,t,s,r):null;case S:return x(e,t,s=(a=s._init)(s._payload),r)}if(F(s)||P(s))return null!==a?null:u(e,t,s,r,null);if("function"===typeof s.then)return x(e,t,Yl(s),r);if(s.$$typeof===j)return x(e,t,Sa(e,s),r);Zl(e,s)}return null}function f(e,t,s,r,a){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return o(t,e=e.get(s)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return d(t,e=e.get(null===r.key?s:r.key)||null,r,a);case h:return c(t,e=e.get(null===r.key?s:r.key)||null,r,a);case S:return f(e,t,s,r=(0,r._init)(r._payload),a)}if(F(r)||P(r))return u(t,e=e.get(s)||null,r,a,null);if("function"===typeof r.then)return f(e,t,s,Yl(r),a);if(r.$$typeof===j)return f(e,t,s,Sa(t,r),a);Zl(t,r)}return null}function b(o,d,c,u){if("object"===typeof c&&null!==c&&c.type===g&&null===c.key&&(c=c.props.children),"object"===typeof c&&null!==c){switch(c.$$typeof){case p:e:{for(var y=c.key;null!==d;){if(d.key===y){if((y=c.type)===g){if(7===d.tag){s(o,d.sibling),(u=a(d,c.props.children)).return=o,o=u;break e}}else if(d.elementType===y||"object"===typeof y&&null!==y&&y.$$typeof===S&&Xl(y)===d.type){s(o,d.sibling),Jl(u=a(d,c.props),c),u.return=o,o=u;break e}s(o,d);break}t(o,d),d=d.sibling}c.type===g?((u=Ur(c.props.children,o.mode,u,c.key)).return=o,o=u):(Jl(u=Ir(c.type,c.key,c.props,null,o.mode,u),c),u.return=o,o=u)}return i(o);case h:e:{for(y=c.key;null!==d;){if(d.key===y){if(4===d.tag&&d.stateNode.containerInfo===c.containerInfo&&d.stateNode.implementation===c.implementation){s(o,d.sibling),(u=a(d,c.children||[])).return=o,o=u;break e}s(o,d);break}t(o,d),d=d.sibling}(u=$r(c,o.mode,u)).return=o,o=u}return i(o);case S:return b(o,d,c=(y=c._init)(c._payload),u)}if(F(c))return function(a,l,i,o){for(var d=null,c=null,u=l,p=l=0,h=null;null!==u&&p<i.length;p++){u.index>p?(h=u,u=null):h=u.sibling;var g=x(a,u,i[p],o);if(null===g){null===u&&(u=h);break}e&&u&&null===g.alternate&&t(a,u),l=n(g,l,p),null===c?d=g:c.sibling=g,c=g,u=h}if(p===i.length)return s(a,u),aa&&Zr(a,p),d;if(null===u){for(;p<i.length;p++)null!==(u=m(a,i[p],o))&&(l=n(u,l,p),null===c?d=u:c.sibling=u,c=u);return aa&&Zr(a,p),d}for(u=r(u);p<i.length;p++)null!==(h=f(u,a,p,i[p],o))&&(e&&null!==h.alternate&&u.delete(null===h.key?p:h.key),l=n(h,l,p),null===c?d=h:c.sibling=h,c=h);return e&&u.forEach(function(e){return t(a,e)}),aa&&Zr(a,p),d}(o,d,c,u);if(P(c)){if("function"!==typeof(y=P(c)))throw Error(l(150));return function(a,i,o,d){if(null==o)throw Error(l(151));for(var c=null,u=null,p=i,h=i=0,g=null,b=o.next();null!==p&&!b.done;h++,b=o.next()){p.index>h?(g=p,p=null):g=p.sibling;var y=x(a,p,b.value,d);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(a,p),i=n(y,i,h),null===u?c=y:u.sibling=y,u=y,p=g}if(b.done)return s(a,p),aa&&Zr(a,h),c;if(null===p){for(;!b.done;h++,b=o.next())null!==(b=m(a,b.value,d))&&(i=n(b,i,h),null===u?c=b:u.sibling=b,u=b);return aa&&Zr(a,h),c}for(p=r(p);!b.done;h++,b=o.next())null!==(b=f(p,a,h,b.value,d))&&(e&&null!==b.alternate&&p.delete(null===b.key?h:b.key),i=n(b,i,h),null===u?c=b:u.sibling=b,u=b);return e&&p.forEach(function(e){return t(a,e)}),aa&&Zr(a,h),c}(o,d,c=y.call(c),u)}if("function"===typeof c.then)return b(o,d,Yl(c),u);if(c.$$typeof===j)return b(o,d,Sa(o,c),u);Zl(o,c)}return"string"===typeof c&&""!==c||"number"===typeof c||"bigint"===typeof c?(c=""+c,null!==d&&6===d.tag?(s(o,d.sibling),(u=a(d,c)).return=o,o=u):(s(o,d),(u=Br(c,o.mode,u)).return=o,o=u),i(o)):s(o,d)}return function(e,t,s,r){try{Ql=0;var a=b(e,t,s,r);return Kl=null,a}catch(l){if(l===qa||l===Va)throw l;var n=Or(29,l,null,e.mode);return n.lanes=r,n.return=e,n}}}var ti=ei(!0),si=ei(!1),ri=I(null),ai=null;function ni(e){var t=e.alternate;B(di,1&di.current),B(ri,e),null===ai&&(null===t||null!==xn.current||null!==t.memoizedState)&&(ai=e)}function li(e){if(22===e.tag){if(B(di,di.current),B(ri,e),null===ai){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ai=e)}}else ii()}function ii(){B(di,di.current),B(ri,ri.current)}function oi(e){U(ri),ai===e&&(ai=null),U(di)}var di=I(0);function ci(e){for(var t=e;null!==t;){if(13===t.tag){var s=t.memoizedState;if(null!==s&&(null===(s=s.dehydrated)||"$?"===s.data||gu(s)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ui(e,t,s,r){s=null===(s=s(r,t=e.memoizedState))||void 0===s?t:m({},t,s),e.memoizedState=s,0===e.lanes&&(e.updateQueue.baseState=s)}var mi={enqueueSetState:function(e,t,s){e=e._reactInternals;var r=Dd(),a=rn(r);a.payload=t,void 0!==s&&null!==s&&(a.callback=s),null!==(t=an(e,a,r))&&(zd(t,e,r),nn(t,e,r))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var r=Dd(),a=rn(r);a.tag=1,a.payload=t,void 0!==s&&null!==s&&(a.callback=s),null!==(t=an(e,a,r))&&(zd(t,e,r),nn(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Dd(),r=rn(s);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=an(e,r,s))&&(zd(t,e,s),nn(t,e,s))}};function xi(e,t,s,r,a,n,l){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,n,l):!t.prototype||!t.prototype.isPureReactComponent||(!Qs(s,r)||!Qs(a,n))}function pi(e,t,s,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(s,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(s,r),t.state!==e&&mi.enqueueReplaceState(t,t.state,null)}function hi(e,t){var s=t;if("ref"in t)for(var r in s={},t)"ref"!==r&&(s[r]=t[r]);if(e=e.defaultProps)for(var a in s===t&&(s=m({},s)),e)void 0===s[a]&&(s[a]=e[a]);return s}var gi="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function fi(e){gi(e)}function bi(e){console.error(e)}function yi(e){gi(e)}function vi(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function ji(e,t,s){try{(0,e.onCaughtError)(s.value,{componentStack:s.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ni(e,t,s){return(s=rn(s)).tag=3,s.payload={element:null},s.callback=function(){vi(e,t)},s}function wi(e){return(e=rn(e)).tag=3,e}function _i(e,t,s,r){var a=s.type.getDerivedStateFromError;if("function"===typeof a){var n=r.value;e.payload=function(){return a(n)},e.callback=function(){ji(t,s,r)}}var l=s.stateNode;null!==l&&"function"===typeof l.componentDidCatch&&(e.callback=function(){ji(t,s,r),"function"!==typeof a&&(null===_d?_d=new Set([this]):_d.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var ki=Error(l(461)),Si=!1;function Ci(e,t,s,r){t.child=null===e?si(t,null,s,r):ti(t,e.child,s,r)}function Ei(e,t,s,r,a){s=s.render;var n=t.ref;if("ref"in r){var l={};for(var i in r)"ref"!==i&&(l[i]=r[i])}else l=r;return _a(t),r=Tn(e,t,s,l,n,a),i=On(),null===e||Si?(aa&&i&&ea(t),t.flags|=1,Ci(e,t,r,a),t.child):(zn(e,t,a),Ki(e,t,a))}function Ai(e,t,s,r,a){if(null===e){var n=s.type;return"function"!==typeof n||zr(n)||void 0!==n.defaultProps||null!==s.compare?((e=Ir(s.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=n,Pi(e,t,n,r,a))}if(n=e.child,!Qi(e,a)){var l=n.memoizedProps;if((s=null!==(s=s.compare)?s:Qs)(l,r)&&e.ref===t.ref)return Ki(e,t,a)}return t.flags|=1,(e=Rr(n,r)).ref=t.ref,e.return=t,t.child=e}function Pi(e,t,s,r,a){if(null!==e){var n=e.memoizedProps;if(Qs(n,r)&&e.ref===t.ref){if(Si=!1,t.pendingProps=r=n,!Qi(e,a))return t.lanes=e.lanes,Ki(e,t,a);0!==(131072&e.flags)&&(Si=!0)}}return Di(e,t,s,r,a)}function Ti(e,t,s){var r=t.pendingProps,a=r.children,n=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==n?n.baseLanes|s:s,null!==e){for(a=t.child=e.child,n=0;null!==a;)n=n|a.lanes|a.childLanes,a=a.sibling;t.childLanes=n&~r}else t.childLanes=0,t.child=null;return Li(e,t,r,s)}if(0===(536870912&s))return t.lanes=t.childLanes=536870912,Li(e,t,null!==n?n.baseLanes|s:s,s);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&$a(0,null!==n?n.cachePool:null),null!==n?hn(t,n):gn(),li(t)}else null!==n?($a(0,n.cachePool),hn(t,n),ii(),t.memoizedState=null):(null!==e&&$a(0,null),gn(),ii());return Ci(e,t,a,s),t.child}function Li(e,t,s,r){var a=Ba();return a=null===a?null:{parent:Ta._currentValue,pool:a},t.memoizedState={baseLanes:s,cachePool:a},null!==e&&$a(0,null),gn(),li(t),null!==e&&Na(e,t,r,!0),null}function Fi(e,t){var s=t.ref;if(null===s)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof s&&"object"!==typeof s)throw Error(l(284));null!==e&&e.ref===s||(t.flags|=4194816)}}function Di(e,t,s,r,a){return _a(t),s=Tn(e,t,s,r,void 0,a),r=On(),null===e||Si?(aa&&r&&ea(t),t.flags|=1,Ci(e,t,s,a),t.child):(zn(e,t,a),Ki(e,t,a))}function Oi(e,t,s,r,a,n){return _a(t),t.updateQueue=null,s=Fn(t,r,s,a),Ln(e),r=On(),null===e||Si?(aa&&r&&ea(t),t.flags|=1,Ci(e,t,s,n),t.child):(zn(e,t,n),Ki(e,t,n))}function zi(e,t,s,r,a){if(_a(t),null===t.stateNode){var n=Fr,l=s.contextType;"object"===typeof l&&null!==l&&(n=ka(l)),n=new s(r,n),t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,n.updater=mi,t.stateNode=n,n._reactInternals=t,(n=t.stateNode).props=r,n.state=t.memoizedState,n.refs={},tn(t),l=s.contextType,n.context="object"===typeof l&&null!==l?ka(l):Fr,n.state=t.memoizedState,"function"===typeof(l=s.getDerivedStateFromProps)&&(ui(t,s,l,r),n.state=t.memoizedState),"function"===typeof s.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(l=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),l!==n.state&&mi.enqueueReplaceState(n,n.state,null),cn(t,r,n,a),dn(),n.state=t.memoizedState),"function"===typeof n.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){n=t.stateNode;var i=t.memoizedProps,o=hi(s,i);n.props=o;var d=n.context,c=s.contextType;l=Fr,"object"===typeof c&&null!==c&&(l=ka(c));var u=s.getDerivedStateFromProps;c="function"===typeof u||"function"===typeof n.getSnapshotBeforeUpdate,i=t.pendingProps!==i,c||"function"!==typeof n.UNSAFE_componentWillReceiveProps&&"function"!==typeof n.componentWillReceiveProps||(i||d!==l)&&pi(t,n,r,l),en=!1;var m=t.memoizedState;n.state=m,cn(t,r,n,a),dn(),d=t.memoizedState,i||m!==d||en?("function"===typeof u&&(ui(t,s,u,r),d=t.memoizedState),(o=en||xi(t,s,o,r,m,d,l))?(c||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||("function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount()),"function"===typeof n.componentDidMount&&(t.flags|=4194308)):("function"===typeof n.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),n.props=r,n.state=d,n.context=l,r=o):("function"===typeof n.componentDidMount&&(t.flags|=4194308),r=!1)}else{n=t.stateNode,sn(e,t),c=hi(s,l=t.memoizedProps),n.props=c,u=t.pendingProps,m=n.context,d=s.contextType,o=Fr,"object"===typeof d&&null!==d&&(o=ka(d)),(d="function"===typeof(i=s.getDerivedStateFromProps)||"function"===typeof n.getSnapshotBeforeUpdate)||"function"!==typeof n.UNSAFE_componentWillReceiveProps&&"function"!==typeof n.componentWillReceiveProps||(l!==u||m!==o)&&pi(t,n,r,o),en=!1,m=t.memoizedState,n.state=m,cn(t,r,n,a),dn();var x=t.memoizedState;l!==u||m!==x||en||null!==e&&null!==e.dependencies&&wa(e.dependencies)?("function"===typeof i&&(ui(t,s,i,r),x=t.memoizedState),(c=en||xi(t,s,c,r,m,x,o)||null!==e&&null!==e.dependencies&&wa(e.dependencies))?(d||"function"!==typeof n.UNSAFE_componentWillUpdate&&"function"!==typeof n.componentWillUpdate||("function"===typeof n.componentWillUpdate&&n.componentWillUpdate(r,x,o),"function"===typeof n.UNSAFE_componentWillUpdate&&n.UNSAFE_componentWillUpdate(r,x,o)),"function"===typeof n.componentDidUpdate&&(t.flags|=4),"function"===typeof n.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof n.componentDidUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof n.getSnapshotBeforeUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),n.props=r,n.state=x,n.context=o,r=c):("function"!==typeof n.componentDidUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof n.getSnapshotBeforeUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return n=r,Fi(e,t),r=0!==(128&t.flags),n||r?(n=t.stateNode,s=r&&"function"!==typeof s.getDerivedStateFromError?null:n.render(),t.flags|=1,null!==e&&r?(t.child=ti(t,e.child,null,a),t.child=ti(t,null,s,a)):Ci(e,t,s,a),t.memoizedState=n.state,e=t.child):e=Ki(e,t,a),e}function Ri(e,t,s,r){return ma(),t.flags|=256,Ci(e,t,s,r),t.child}var Mi={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ii(e){return{baseLanes:e,cachePool:Ha()}}function Ui(e,t,s){return e=null!==e?e.childLanes&~s:0,t&&(e|=gd),e}function Bi(e,t,s){var r,a=t.pendingProps,n=!1,i=0!==(128&t.flags);if((r=i)||(r=(null===e||null!==e.memoizedState)&&0!==(2&di.current)),r&&(n=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(aa){if(n?ni(t):ii(),aa){var o,d=ra;if(o=d){e:{for(o=d,d=la;8!==o.nodeType;){if(!d){d=null;break e}if(null===(o=fu(o.nextSibling))){d=null;break e}}d=o}null!==d?(t.memoizedState={dehydrated:d,treeContext:null!==Qr?{id:Yr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},(o=Or(18,null,null,0)).stateNode=d,o.return=t,t.child=o,sa=t,ra=null,o=!0):o=!1}o||oa(t)}if(null!==(d=t.memoizedState)&&null!==(d=d.dehydrated))return gu(d)?t.lanes=32:t.lanes=536870912,null;oi(t)}return d=a.children,a=a.fallback,n?(ii(),d=Hi({mode:"hidden",children:d},n=t.mode),a=Ur(a,n,s,null),d.return=t,a.return=t,d.sibling=a,t.child=d,(n=t.child).memoizedState=Ii(s),n.childLanes=Ui(e,r,s),t.memoizedState=Mi,a):(ni(t),$i(t,d))}if(null!==(o=e.memoizedState)&&null!==(d=o.dehydrated)){if(i)256&t.flags?(ni(t),t.flags&=-257,t=qi(e,t,s)):null!==t.memoizedState?(ii(),t.child=e.child,t.flags|=128,t=null):(ii(),n=a.fallback,d=t.mode,a=Hi({mode:"visible",children:a.children},d),(n=Ur(n,d,s,null)).flags|=2,a.return=t,n.return=t,a.sibling=n,t.child=a,ti(t,e.child,null,s),(a=t.child).memoizedState=Ii(s),a.childLanes=Ui(e,r,s),t.memoizedState=Mi,t=n);else if(ni(t),gu(d)){if(r=d.nextSibling&&d.nextSibling.dataset)var c=r.dgst;r=c,(a=Error(l(419))).stack="",a.digest=r,pa({value:a,source:null,stack:null}),t=qi(e,t,s)}else if(Si||Na(e,t,s,!1),r=0!==(s&e.childLanes),Si||r){if(null!==(r=rd)&&(0!==(a=0!==((a=0!==(42&(a=s&-s))?1:Ee(a))&(r.suspendedLanes|s))?0:a)&&a!==o.retryLane))throw o.retryLane=a,Pr(e,a),zd(r,e,a),ki;"$?"===d.data||Gd(),t=qi(e,t,s)}else"$?"===d.data?(t.flags|=192,t.child=e.child,t=null):(e=o.treeContext,ra=fu(d.nextSibling),sa=t,aa=!0,na=null,la=!1,null!==e&&(Gr[Kr++]=Yr,Gr[Kr++]=Jr,Gr[Kr++]=Qr,Yr=e.id,Jr=e.overflow,Qr=t),(t=$i(t,a.children)).flags|=4096);return t}return n?(ii(),n=a.fallback,d=t.mode,c=(o=e.child).sibling,(a=Rr(o,{mode:"hidden",children:a.children})).subtreeFlags=65011712&o.subtreeFlags,null!==c?n=Rr(c,n):(n=Ur(n,d,s,null)).flags|=2,n.return=t,a.return=t,a.sibling=n,t.child=a,a=n,n=t.child,null===(d=e.child.memoizedState)?d=Ii(s):(null!==(o=d.cachePool)?(c=Ta._currentValue,o=o.parent!==c?{parent:c,pool:c}:o):o=Ha(),d={baseLanes:d.baseLanes|s,cachePool:o}),n.memoizedState=d,n.childLanes=Ui(e,r,s),t.memoizedState=Mi,a):(ni(t),e=(s=e.child).sibling,(s=Rr(s,{mode:"visible",children:a.children})).return=t,s.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s)}function $i(e,t){return(t=Hi({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Hi(e,t){return(e=Or(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function qi(e,t,s){return ti(t,e.child,null,s),(e=$i(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wi(e,t,s){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),va(e.return,t,s)}function Vi(e,t,s,r,a){var n=e.memoizedState;null===n?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:a}:(n.isBackwards=t,n.rendering=null,n.renderingStartTime=0,n.last=r,n.tail=s,n.tailMode=a)}function Gi(e,t,s){var r=t.pendingProps,a=r.revealOrder,n=r.tail;if(Ci(e,t,r.children,s),0!==(2&(r=di.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wi(e,s,t);else if(19===e.tag)Wi(e,s,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(B(di,r),a){case"forwards":for(s=t.child,a=null;null!==s;)null!==(e=s.alternate)&&null===ci(e)&&(a=s),s=s.sibling;null===(s=a)?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),Vi(t,!1,a,s,n);break;case"backwards":for(s=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ci(e)){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}Vi(t,!0,s,null,n);break;case"together":Vi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ki(e,t,s){if(null!==e&&(t.dependencies=e.dependencies),xd|=t.lanes,0===(s&t.childLanes)){if(null===e)return null;if(Na(e,t,s,!1),0===(s&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(l(153));if(null!==t.child){for(s=Rr(e=t.child,e.pendingProps),t.child=s,s.return=t;null!==e.sibling;)e=e.sibling,(s=s.sibling=Rr(e,e.pendingProps)).return=t;s.sibling=null}return t.child}function Qi(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!wa(e))}function Yi(e,t,s){if(null!==e)if(e.memoizedProps!==t.pendingProps)Si=!0;else{if(!Qi(e,s)&&0===(128&t.flags))return Si=!1,function(e,t,s){switch(t.tag){case 3:V(t,t.stateNode.containerInfo),ba(0,Ta,e.memoizedState.cache),ma();break;case 27:case 5:K(t);break;case 4:V(t,t.stateNode.containerInfo);break;case 10:ba(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(ni(t),t.flags|=128,null):0!==(s&t.child.childLanes)?Bi(e,t,s):(ni(t),null!==(e=Ki(e,t,s))?e.sibling:null);ni(t);break;case 19:var a=0!==(128&e.flags);if((r=0!==(s&t.childLanes))||(Na(e,t,s,!1),r=0!==(s&t.childLanes)),a){if(r)return Gi(e,t,s);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),B(di,di.current),r)break;return null;case 22:case 23:return t.lanes=0,Ti(e,t,s);case 24:ba(0,Ta,e.memoizedState.cache)}return Ki(e,t,s)}(e,t,s);Si=0!==(131072&e.flags)}else Si=!1,aa&&0!==(1048576&t.flags)&&Xr(t,Vr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,a=r._init;if(r=a(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((a=r.$$typeof)===N){t.tag=11,t=Ei(null,t,r,e,s);break e}if(a===k){t.tag=14,t=Ai(null,t,r,e,s);break e}}throw t=L(r)||r,Error(l(306,t,""))}zr(r)?(e=hi(r,e),t.tag=1,t=zi(null,t,r,e,s)):(t.tag=0,t=Di(null,t,r,e,s))}return t;case 0:return Di(e,t,t.type,t.pendingProps,s);case 1:return zi(e,t,r=t.type,a=hi(r,t.pendingProps),s);case 3:e:{if(V(t,t.stateNode.containerInfo),null===e)throw Error(l(387));r=t.pendingProps;var n=t.memoizedState;a=n.element,sn(e,t),cn(t,r,null,s);var i=t.memoizedState;if(r=i.cache,ba(0,Ta,r),r!==n.cache&&ja(t,[Ta],s,!0),dn(),r=i.element,n.isDehydrated){if(n={element:r,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=n,t.memoizedState=n,256&t.flags){t=Ri(e,t,r,s);break e}if(r!==a){pa(a=wr(Error(l(424)),t)),t=Ri(e,t,r,s);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ra=fu(e.firstChild),sa=t,aa=!0,na=null,la=!0,s=si(t,null,r,s),t.child=s;s;)s.flags=-3&s.flags|4096,s=s.sibling}else{if(ma(),r===a){t=Ki(e,t,s);break e}Ci(e,t,r,s)}t=t.child}return t;case 26:return Fi(e,t),null===e?(s=Eu(t.type,null,t.pendingProps,null))?t.memoizedState=s:aa||(s=t.type,e=t.pendingProps,(r=ru(q.current).createElement(s))[Le]=t,r[Fe]=e,eu(r,s,e),We(r),t.stateNode=r):t.memoizedState=Eu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return K(t),null===e&&aa&&(r=t.stateNode=vu(t.type,t.pendingProps,q.current),sa=t,la=!0,a=ra,xu(t.type)?(bu=a,ra=fu(r.firstChild)):ra=a),Ci(e,t,t.pendingProps.children,s),Fi(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&aa&&((a=r=ra)&&(null!==(r=function(e,t,s,r){for(;1===e.nodeType;){var a=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ie])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(n=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(n!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((n=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&n&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var n=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===n)return e}if(null===(e=fu(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,la))?(t.stateNode=r,sa=t,ra=fu(r.firstChild),la=!1,a=!0):a=!1),a||oa(t)),K(t),a=t.type,n=t.pendingProps,i=null!==e?e.memoizedProps:null,r=n.children,lu(a,n)?r=null:null!==i&&lu(a,i)&&(t.flags|=32),null!==t.memoizedState&&(a=Tn(e,t,Dn,null,null,s),Ku._currentValue=a),Fi(e,t),Ci(e,t,r,s),t.child;case 6:return null===e&&aa&&((e=s=ra)&&(null!==(s=function(e,t,s){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!s)return null;if(null===(e=fu(e.nextSibling)))return null}return e}(s,t.pendingProps,la))?(t.stateNode=s,sa=t,ra=null,e=!0):e=!1),e||oa(t)),null;case 13:return Bi(e,t,s);case 4:return V(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ti(t,null,r,s):Ci(e,t,r,s),t.child;case 11:return Ei(e,t,t.type,t.pendingProps,s);case 7:return Ci(e,t,t.pendingProps,s),t.child;case 8:case 12:return Ci(e,t,t.pendingProps.children,s),t.child;case 10:return r=t.pendingProps,ba(0,t.type,r.value),Ci(e,t,r.children,s),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,_a(t),r=r(a=ka(a)),t.flags|=1,Ci(e,t,r,s),t.child;case 14:return Ai(e,t,t.type,t.pendingProps,s);case 15:return Pi(e,t,t.type,t.pendingProps,s);case 19:return Gi(e,t,s);case 31:return r=t.pendingProps,s=t.mode,r={mode:r.mode,children:r.children},null===e?((s=Hi(r,s)).ref=t.ref,t.child=s,s.return=t,t=s):((s=Rr(e.child,r)).ref=t.ref,t.child=s,s.return=t,t=s),t;case 22:return Ti(e,t,s);case 24:return _a(t),r=ka(Ta),null===e?(null===(a=Ba())&&(a=rd,n=La(),a.pooledCache=n,n.refCount++,null!==n&&(a.pooledCacheLanes|=s),a=n),t.memoizedState={parent:r,cache:a},tn(t),ba(0,Ta,a)):(0!==(e.lanes&s)&&(sn(e,t),cn(t,null,null,s),dn()),a=e.memoizedState,n=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),ba(0,Ta,r)):(r=n.cache,ba(0,Ta,r),r!==a.cache&&ja(t,[Ta],s,!0))),Ci(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function Ji(e){e.flags|=4}function Zi(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Bu(t)){if(null!==(t=ri.current)&&((4194048&nd)===nd?null!==ai:(62914560&nd)!==nd&&0===(536870912&nd)||t!==ai))throw Ja=Ga,Wa;e.flags|=8192}}function Xi(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?we():536870912,e.lanes|=t,fd|=t)}function eo(e,t){if(!aa)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;null!==t;)null!==t.alternate&&(s=t),t=t.sibling;null===s?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;null!==s;)null!==s.alternate&&(r=s),s=s.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function to(e){var t=null!==e.alternate&&e.alternate.child===e.child,s=0,r=0;if(t)for(var a=e.child;null!==a;)s|=a.lanes|a.childLanes,r|=65011712&a.subtreeFlags,r|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)s|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=s,t}function so(e,t,s){var r=t.pendingProps;switch(ta(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return to(t),null;case 3:return s=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ya(Ta),G(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(ua(t)?Ji(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,xa())),to(t),null;case 26:return s=t.memoizedState,null===e?(Ji(t),null!==s?(to(t),Zi(t,s)):(to(t),t.flags&=-16777217)):s?s!==e.memoizedState?(Ji(t),to(t),Zi(t,s)):(to(t),t.flags&=-16777217):(e.memoizedProps!==r&&Ji(t),to(t),t.flags&=-16777217),null;case 27:Q(t),s=q.current;var a=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ji(t);else{if(!r){if(null===t.stateNode)throw Error(l(166));return to(t),null}e=$.current,ua(t)?da(t):(e=vu(a,r,s),t.stateNode=e,Ji(t))}return to(t),null;case 5:if(Q(t),s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ji(t);else{if(!r){if(null===t.stateNode)throw Error(l(166));return to(t),null}if(e=$.current,ua(t))da(t);else{switch(a=ru(q.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":(e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?a.createElement("select",{is:r.is}):a.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?a.createElement(s,{is:r.is}):a.createElement(s)}}e[Le]=t,e[Fe]=r;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(eu(e,s,r),s){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ji(t)}}return to(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Ji(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(l(166));if(e=q.current,ua(t)){if(e=t.stateNode,s=t.memoizedProps,r=null,null!==(a=sa))switch(a.tag){case 27:case 5:r=a.memoizedProps}e[Le]=t,(e=!!(e.nodeValue===s||null!==r&&!0===r.suppressHydrationWarning||Yc(e.nodeValue,s)))||oa(t)}else(e=ru(e).createTextNode(r))[Le]=t,t.stateNode=e}return to(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=ua(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(l(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(l(317));a[Le]=t}else ma(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;to(t),a=!1}else a=xa(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(oi(t),t):(oi(t),null)}if(oi(t),0!==(128&t.flags))return t.lanes=s,t;if(s=null!==r,e=null!==e&&null!==e.memoizedState,s){a=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(a=r.alternate.memoizedState.cachePool.pool);var n=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(n=r.memoizedState.cachePool.pool),n!==a&&(r.flags|=2048)}return s!==e&&s&&(t.child.flags|=8192),Xi(t,t.updateQueue),to(t),null;case 4:return G(),null===e&&Uc(t.stateNode.containerInfo),to(t),null;case 10:return ya(t.type),to(t),null;case 19:if(U(di),null===(a=t.memoizedState))return to(t),null;if(r=0!==(128&t.flags),null===(n=a.rendering))if(r)eo(a,!1);else{if(0!==md||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(n=ci(e))){for(t.flags|=128,eo(a,!1),e=n.updateQueue,t.updateQueue=e,Xi(t,e),t.subtreeFlags=0,e=s,s=t.child;null!==s;)Mr(s,e),s=s.sibling;return B(di,1&di.current|2),t.child}e=e.sibling}null!==a.tail&&te()>Nd&&(t.flags|=128,r=!0,eo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ci(n))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Xi(t,e),eo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!n.alternate&&!aa)return to(t),null}else 2*te()-a.renderingStartTime>Nd&&536870912!==s&&(t.flags|=128,r=!0,eo(a,!1),t.lanes=4194304);a.isBackwards?(n.sibling=t.child,t.child=n):(null!==(e=a.last)?e.sibling=n:t.child=n,a.last=n)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=te(),t.sibling=null,e=di.current,B(di,r?1&e|2:1&e),t):(to(t),null);case 22:case 23:return oi(t),fn(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&s)&&0===(128&t.flags)&&(to(t),6&t.subtreeFlags&&(t.flags|=8192)):to(t),null!==(s=t.updateQueue)&&Xi(t,s.retryQueue),s=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(s=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==s&&(t.flags|=2048),null!==e&&U(Ua),null;case 24:return s=null,null!==e&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),ya(Ta),to(t),null;case 25:case 30:return null}throw Error(l(156,t.tag))}function ro(e,t){switch(ta(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ya(Ta),G(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 13:if(oi(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(l(340));ma()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(di),null;case 4:return G(),null;case 10:return ya(t.type),null;case 22:case 23:return oi(t),fn(),null!==e&&U(Ua),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ya(Ta),null;default:return null}}function ao(e,t){switch(ta(t),t.tag){case 3:ya(Ta),G();break;case 26:case 27:case 5:Q(t);break;case 4:G();break;case 13:oi(t);break;case 19:U(di);break;case 10:ya(t.type);break;case 22:case 23:oi(t),fn(),null!==e&&U(Ua);break;case 24:ya(Ta)}}function no(e,t){try{var s=t.updateQueue,r=null!==s?s.lastEffect:null;if(null!==r){var a=r.next;s=a;do{if((s.tag&e)===e){r=void 0;var n=s.create,l=s.inst;r=n(),l.destroy=r}s=s.next}while(s!==a)}}catch(i){cc(t,t.return,i)}}function lo(e,t,s){try{var r=t.updateQueue,a=null!==r?r.lastEffect:null;if(null!==a){var n=a.next;r=n;do{if((r.tag&e)===e){var l=r.inst,i=l.destroy;if(void 0!==i){l.destroy=void 0,a=t;var o=s,d=i;try{d()}catch(c){cc(a,o,c)}}}r=r.next}while(r!==n)}}catch(c){cc(t,t.return,c)}}function io(e){var t=e.updateQueue;if(null!==t){var s=e.stateNode;try{mn(t,s)}catch(r){cc(e,e.return,r)}}}function oo(e,t,s){s.props=hi(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(r){cc(e,t,r)}}function co(e,t){try{var s=e.ref;if(null!==s){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof s?e.refCleanup=s(r):s.current=r}}catch(a){cc(e,t,a)}}function uo(e,t){var s=e.ref,r=e.refCleanup;if(null!==s)if("function"===typeof r)try{r()}catch(a){cc(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof s)try{s(null)}catch(n){cc(e,t,n)}else s.current=null}function mo(e){var t=e.type,s=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&r.focus();break e;case"img":s.src?r.src=s.src:s.srcSet&&(r.srcset=s.srcSet)}}catch(a){cc(e,e.return,a)}}function xo(e,t,s){try{var r=e.stateNode;!function(e,t,s,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,n=null,i=null,o=null,d=null,c=null,u=null;for(p in s){var m=s[p];if(s.hasOwnProperty(p)&&null!=m)switch(p){case"checked":case"value":break;case"defaultValue":d=m;default:r.hasOwnProperty(p)||Zc(e,t,p,null,r,m)}}for(var x in r){var p=r[x];if(m=s[x],r.hasOwnProperty(x)&&(null!=p||null!=m))switch(x){case"type":n=p;break;case"name":a=p;break;case"checked":c=p;break;case"defaultChecked":u=p;break;case"value":i=p;break;case"defaultValue":o=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(l(137,t));break;default:p!==m&&Zc(e,t,x,p,r,m)}}return void gt(e,i,o,d,c,u,n,a);case"select":for(n in p=i=o=x=null,s)if(d=s[n],s.hasOwnProperty(n)&&null!=d)switch(n){case"value":break;case"multiple":p=d;default:r.hasOwnProperty(n)||Zc(e,t,n,null,r,d)}for(a in r)if(n=r[a],d=s[a],r.hasOwnProperty(a)&&(null!=n||null!=d))switch(a){case"value":x=n;break;case"defaultValue":o=n;break;case"multiple":i=n;default:n!==d&&Zc(e,t,a,n,r,d)}return t=o,s=i,r=p,void(null!=x?yt(e,!!s,x,!1):!!r!==!!s&&(null!=t?yt(e,!!s,t,!0):yt(e,!!s,s?[]:"",!1)));case"textarea":for(o in p=x=null,s)if(a=s[o],s.hasOwnProperty(o)&&null!=a&&!r.hasOwnProperty(o))switch(o){case"value":case"children":break;default:Zc(e,t,o,null,r,a)}for(i in r)if(a=r[i],n=s[i],r.hasOwnProperty(i)&&(null!=a||null!=n))switch(i){case"value":x=a;break;case"defaultValue":p=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(l(91));break;default:a!==n&&Zc(e,t,i,a,r,n)}return void vt(e,x,p);case"option":for(var h in s)if(x=s[h],s.hasOwnProperty(h)&&null!=x&&!r.hasOwnProperty(h))if("selected"===h)e.selected=!1;else Zc(e,t,h,null,r,x);for(d in r)if(x=r[d],p=s[d],r.hasOwnProperty(d)&&x!==p&&(null!=x||null!=p))if("selected"===d)e.selected=x&&"function"!==typeof x&&"symbol"!==typeof x;else Zc(e,t,d,x,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in s)x=s[g],s.hasOwnProperty(g)&&null!=x&&!r.hasOwnProperty(g)&&Zc(e,t,g,null,r,x);for(c in r)if(x=r[c],p=s[c],r.hasOwnProperty(c)&&x!==p&&(null!=x||null!=p))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=x)throw Error(l(137,t));break;default:Zc(e,t,c,x,r,p)}return;default:if(St(t)){for(var f in s)x=s[f],s.hasOwnProperty(f)&&void 0!==x&&!r.hasOwnProperty(f)&&Xc(e,t,f,void 0,r,x);for(u in r)x=r[u],p=s[u],!r.hasOwnProperty(u)||x===p||void 0===x&&void 0===p||Xc(e,t,u,x,r,p);return}}for(var b in s)x=s[b],s.hasOwnProperty(b)&&null!=x&&!r.hasOwnProperty(b)&&Zc(e,t,b,null,r,x);for(m in r)x=r[m],p=s[m],!r.hasOwnProperty(m)||x===p||null==x&&null==p||Zc(e,t,m,x,r,p)}(r,e.type,s,t),r[Fe]=t}catch(a){cc(e,e.return,a)}}function po(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&xu(e.type)||4===e.tag}function ho(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||po(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&xu(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function go(e,t,s){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===s.nodeType?s.body:"HTML"===s.nodeName?s.ownerDocument.body:s).insertBefore(e,t):((t=9===s.nodeType?s.body:"HTML"===s.nodeName?s.ownerDocument.body:s).appendChild(e),null!==(s=s._reactRootContainer)&&void 0!==s||null!==t.onclick||(t.onclick=Jc));else if(4!==r&&(27===r&&xu(e.type)&&(s=e.stateNode,t=null),null!==(e=e.child)))for(go(e,t,s),e=e.sibling;null!==e;)go(e,t,s),e=e.sibling}function fo(e,t,s){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(4!==r&&(27===r&&xu(e.type)&&(s=e.stateNode),null!==(e=e.child)))for(fo(e,t,s),e=e.sibling;null!==e;)fo(e,t,s),e=e.sibling}function bo(e){var t=e.stateNode,s=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);eu(t,r,s),t[Le]=e,t[Fe]=s}catch(n){cc(e,e.return,n)}}var yo=!1,vo=!1,jo=!1,No="function"===typeof WeakSet?WeakSet:Set,wo=null;function _o(e,t,s){var r=s.flags;switch(s.tag){case 0:case 11:case 15:Ro(e,s),4&r&&no(5,s);break;case 1:if(Ro(e,s),4&r)if(e=s.stateNode,null===t)try{e.componentDidMount()}catch(l){cc(s,s.return,l)}else{var a=hi(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){cc(s,s.return,i)}}64&r&&io(s),512&r&&co(s,s.return);break;case 3:if(Ro(e,s),64&r&&null!==(e=s.updateQueue)){if(t=null,null!==s.child)switch(s.child.tag){case 27:case 5:case 1:t=s.child.stateNode}try{mn(e,t)}catch(l){cc(s,s.return,l)}}break;case 27:null===t&&4&r&&bo(s);case 26:case 5:Ro(e,s),null===t&&4&r&&mo(s),512&r&&co(s,s.return);break;case 12:Ro(e,s);break;case 13:Ro(e,s),4&r&&Po(e,s),64&r&&(null!==(e=s.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var s=e.ownerDocument;if("$?"!==e.data||"complete"===s.readyState)t();else{var r=function(){t(),s.removeEventListener("DOMContentLoaded",r)};s.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,s=pc.bind(null,s))));break;case 22:if(!(r=null!==s.memoizedState||yo)){t=null!==t&&null!==t.memoizedState||vo,a=yo;var n=vo;yo=r,(vo=t)&&!n?Io(e,s,0!==(8772&s.subtreeFlags)):Ro(e,s),yo=a,vo=n}break;case 30:break;default:Ro(e,s)}}function ko(e){var t=e.alternate;null!==t&&(e.alternate=null,ko(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ue(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var So=null,Co=!1;function Eo(e,t,s){for(s=s.child;null!==s;)Ao(e,t,s),s=s.sibling}function Ao(e,t,s){if(ue&&"function"===typeof ue.onCommitFiberUnmount)try{ue.onCommitFiberUnmount(ce,s)}catch(n){}switch(s.tag){case 26:vo||uo(s,t),Eo(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode).parentNode.removeChild(s);break;case 27:vo||uo(s,t);var r=So,a=Co;xu(s.type)&&(So=s.stateNode,Co=!1),Eo(e,t,s),ju(s.stateNode),So=r,Co=a;break;case 5:vo||uo(s,t);case 6:if(r=So,a=Co,So=null,Eo(e,t,s),Co=a,null!==(So=r))if(Co)try{(9===So.nodeType?So.body:"HTML"===So.nodeName?So.ownerDocument.body:So).removeChild(s.stateNode)}catch(l){cc(s,t,l)}else try{So.removeChild(s.stateNode)}catch(l){cc(s,t,l)}break;case 18:null!==So&&(Co?(pu(9===(e=So).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,s.stateNode),Cm(e)):pu(So,s.stateNode));break;case 4:r=So,a=Co,So=s.stateNode.containerInfo,Co=!0,Eo(e,t,s),So=r,Co=a;break;case 0:case 11:case 14:case 15:vo||lo(2,s,t),vo||lo(4,s,t),Eo(e,t,s);break;case 1:vo||(uo(s,t),"function"===typeof(r=s.stateNode).componentWillUnmount&&oo(s,t,r)),Eo(e,t,s);break;case 21:Eo(e,t,s);break;case 22:vo=(r=vo)||null!==s.memoizedState,Eo(e,t,s),vo=r;break;default:Eo(e,t,s)}}function Po(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Cm(e)}catch(s){cc(t,t.return,s)}}function To(e,t){var s=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new No),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new No),t;default:throw Error(l(435,e.tag))}}(e);t.forEach(function(t){var r=hc.bind(null,e,t);s.has(t)||(s.add(t),t.then(r,r))})}function Lo(e,t){var s=t.deletions;if(null!==s)for(var r=0;r<s.length;r++){var a=s[r],n=e,i=t,o=i;e:for(;null!==o;){switch(o.tag){case 27:if(xu(o.type)){So=o.stateNode,Co=!1;break e}break;case 5:So=o.stateNode,Co=!1;break e;case 3:case 4:So=o.stateNode.containerInfo,Co=!0;break e}o=o.return}if(null===So)throw Error(l(160));Ao(n,i,a),So=null,Co=!1,null!==(n=a.alternate)&&(n.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Do(t,e),t=t.sibling}var Fo=null;function Do(e,t){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Lo(t,e),Oo(e),4&r&&(lo(3,e,e.return),no(3,e),lo(5,e,e.return));break;case 1:Lo(t,e),Oo(e),512&r&&(vo||null===s||uo(s,s.return)),64&r&&yo&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===s?r:s.concat(r))));break;case 26:var a=Fo;if(Lo(t,e),Oo(e),512&r&&(vo||null===s||uo(s,s.return)),4&r){var n=null!==s?s.memoizedState:null;if(r=e.memoizedState,null===s)if(null===r)if(null===e.stateNode){e:{r=e.type,s=e.memoizedProps,a=a.ownerDocument||a;t:switch(r){case"title":(!(n=a.getElementsByTagName("title")[0])||n[Ie]||n[Le]||"http://www.w3.org/2000/svg"===n.namespaceURI||n.hasAttribute("itemprop"))&&(n=a.createElement(r),a.head.insertBefore(n,a.querySelector("head > title"))),eu(n,r,s),n[Le]=e,We(n),r=n;break e;case"link":var i=Iu("link","href",a).get(r+(s.href||""));if(i)for(var o=0;o<i.length;o++)if((n=i[o]).getAttribute("href")===(null==s.href||""===s.href?null:s.href)&&n.getAttribute("rel")===(null==s.rel?null:s.rel)&&n.getAttribute("title")===(null==s.title?null:s.title)&&n.getAttribute("crossorigin")===(null==s.crossOrigin?null:s.crossOrigin)){i.splice(o,1);break t}eu(n=a.createElement(r),r,s),a.head.appendChild(n);break;case"meta":if(i=Iu("meta","content",a).get(r+(s.content||"")))for(o=0;o<i.length;o++)if((n=i[o]).getAttribute("content")===(null==s.content?null:""+s.content)&&n.getAttribute("name")===(null==s.name?null:s.name)&&n.getAttribute("property")===(null==s.property?null:s.property)&&n.getAttribute("http-equiv")===(null==s.httpEquiv?null:s.httpEquiv)&&n.getAttribute("charset")===(null==s.charSet?null:s.charSet)){i.splice(o,1);break t}eu(n=a.createElement(r),r,s),a.head.appendChild(n);break;default:throw Error(l(468,r))}n[Le]=e,We(n),r=n}e.stateNode=r}else Uu(a,e.type,e.stateNode);else e.stateNode=Du(a,r,e.memoizedProps);else n!==r?(null===n?null!==s.stateNode&&(s=s.stateNode).parentNode.removeChild(s):n.count--,null===r?Uu(a,e.type,e.stateNode):Du(a,r,e.memoizedProps)):null===r&&null!==e.stateNode&&xo(e,e.memoizedProps,s.memoizedProps)}break;case 27:Lo(t,e),Oo(e),512&r&&(vo||null===s||uo(s,s.return)),null!==s&&4&r&&xo(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Lo(t,e),Oo(e),512&r&&(vo||null===s||uo(s,s.return)),32&e.flags){a=e.stateNode;try{Nt(a,"")}catch(p){cc(e,e.return,p)}}4&r&&null!=e.stateNode&&xo(e,a=e.memoizedProps,null!==s?s.memoizedProps:a),1024&r&&(jo=!0);break;case 6:if(Lo(t,e),Oo(e),4&r){if(null===e.stateNode)throw Error(l(162));r=e.memoizedProps,s=e.stateNode;try{s.nodeValue=r}catch(p){cc(e,e.return,p)}}break;case 3:if(Mu=null,a=Fo,Fo=_u(t.containerInfo),Lo(t,e),Fo=a,Oo(e),4&r&&null!==s&&s.memoizedState.isDehydrated)try{Cm(t.containerInfo)}catch(p){cc(e,e.return,p)}jo&&(jo=!1,zo(e));break;case 4:r=Fo,Fo=_u(e.stateNode.containerInfo),Lo(t,e),Oo(e),Fo=r;break;case 12:default:Lo(t,e),Oo(e);break;case 13:Lo(t,e),Oo(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==s&&null!==s.memoizedState)&&(jd=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,To(e,r)));break;case 22:a=null!==e.memoizedState;var d=null!==s&&null!==s.memoizedState,c=yo,u=vo;if(yo=c||a,vo=u||d,Lo(t,e),vo=u,yo=c,Oo(e),8192&r)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===s||d||yo||vo||Mo(e)),s=null,t=e;;){if(5===t.tag||26===t.tag){if(null===s){d=s=t;try{if(n=d.stateNode,a)"function"===typeof(i=n.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{o=d.stateNode;var m=d.memoizedProps.style,x=void 0!==m&&null!==m&&m.hasOwnProperty("display")?m.display:null;o.style.display=null==x||"boolean"===typeof x?"":(""+x).trim()}}catch(p){cc(d,d.return,p)}}}else if(6===t.tag){if(null===s){d=t;try{d.stateNode.nodeValue=a?"":d.memoizedProps}catch(p){cc(d,d.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(s=r.retryQueue)&&(r.retryQueue=null,To(e,s))));break;case 19:Lo(t,e),Oo(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,To(e,r)));case 30:case 21:}}function Oo(e){var t=e.flags;if(2&t){try{for(var s,r=e.return;null!==r;){if(po(r)){s=r;break}r=r.return}if(null==s)throw Error(l(160));switch(s.tag){case 27:var a=s.stateNode;fo(e,ho(e),a);break;case 5:var n=s.stateNode;32&s.flags&&(Nt(n,""),s.flags&=-33),fo(e,ho(e),n);break;case 3:case 4:var i=s.stateNode.containerInfo;go(e,ho(e),i);break;default:throw Error(l(161))}}catch(o){cc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function zo(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;zo(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ro(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)_o(e,t.alternate,t),t=t.sibling}function Mo(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:lo(4,t,t.return),Mo(t);break;case 1:uo(t,t.return);var s=t.stateNode;"function"===typeof s.componentWillUnmount&&oo(t,t.return,s),Mo(t);break;case 27:ju(t.stateNode);case 26:case 5:uo(t,t.return),Mo(t);break;case 22:null===t.memoizedState&&Mo(t);break;default:Mo(t)}e=e.sibling}}function Io(e,t,s){for(s=s&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,a=e,n=t,l=n.flags;switch(n.tag){case 0:case 11:case 15:Io(a,n,s),no(4,n);break;case 1:if(Io(a,n,s),"function"===typeof(a=(r=n).stateNode).componentDidMount)try{a.componentDidMount()}catch(d){cc(r,r.return,d)}if(null!==(a=(r=n).updateQueue)){var i=r.stateNode;try{var o=a.shared.hiddenCallbacks;if(null!==o)for(a.shared.hiddenCallbacks=null,a=0;a<o.length;a++)un(o[a],i)}catch(d){cc(r,r.return,d)}}s&&64&l&&io(n),co(n,n.return);break;case 27:bo(n);case 26:case 5:Io(a,n,s),s&&null===r&&4&l&&mo(n),co(n,n.return);break;case 12:Io(a,n,s);break;case 13:Io(a,n,s),s&&4&l&&Po(a,n);break;case 22:null===n.memoizedState&&Io(a,n,s),co(n,n.return);break;case 30:break;default:Io(a,n,s)}t=t.sibling}}function Uo(e,t){var s=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(s=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==s&&(null!=e&&e.refCount++,null!=s&&Fa(s))}function Bo(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Fa(e))}function $o(e,t,s,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Ho(e,t,s,r),t=t.sibling}function Ho(e,t,s,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:$o(e,t,s,r),2048&a&&no(9,t);break;case 1:case 13:default:$o(e,t,s,r);break;case 3:$o(e,t,s,r),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Fa(e)));break;case 12:if(2048&a){$o(e,t,s,r),e=t.stateNode;try{var n=t.memoizedProps,l=n.id,i=n.onPostCommit;"function"===typeof i&&i(l,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(o){cc(t,t.return,o)}}else $o(e,t,s,r);break;case 23:break;case 22:n=t.stateNode,l=t.alternate,null!==t.memoizedState?2&n._visibility?$o(e,t,s,r):Wo(e,t):2&n._visibility?$o(e,t,s,r):(n._visibility|=2,qo(e,t,s,r,0!==(10256&t.subtreeFlags))),2048&a&&Uo(l,t);break;case 24:$o(e,t,s,r),2048&a&&Bo(t.alternate,t)}}function qo(e,t,s,r,a){for(a=a&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var n=e,l=t,i=s,o=r,d=l.flags;switch(l.tag){case 0:case 11:case 15:qo(n,l,i,o,a),no(8,l);break;case 23:break;case 22:var c=l.stateNode;null!==l.memoizedState?2&c._visibility?qo(n,l,i,o,a):Wo(n,l):(c._visibility|=2,qo(n,l,i,o,a)),a&&2048&d&&Uo(l.alternate,l);break;case 24:qo(n,l,i,o,a),a&&2048&d&&Bo(l.alternate,l);break;default:qo(n,l,i,o,a)}t=t.sibling}}function Wo(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var s=e,r=t,a=r.flags;switch(r.tag){case 22:Wo(s,r),2048&a&&Uo(r.alternate,r);break;case 24:Wo(s,r),2048&a&&Bo(r.alternate,r);break;default:Wo(s,r)}t=t.sibling}}var Vo=8192;function Go(e){if(e.subtreeFlags&Vo)for(e=e.child;null!==e;)Ko(e),e=e.sibling}function Ko(e){switch(e.tag){case 26:Go(e),e.flags&Vo&&null!==e.memoizedState&&function(e,t,s){if(null===$u)throw Error(l(475));var r=$u;if("stylesheet"===t.type&&("string"!==typeof s.media||!1!==matchMedia(s.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var a=Au(s.href),n=e.querySelector(Pu(a));if(n)return null!==(e=n._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=qu.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=n,void We(n);n=e.ownerDocument||e,s=Tu(s),(a=Nu.get(a))&&zu(s,a),We(n=n.createElement("link"));var i=n;i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),eu(n,"link",s),t.instance=n}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=qu.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Fo,e.memoizedState,e.memoizedProps);break;case 5:default:Go(e);break;case 3:case 4:var t=Fo;Fo=_u(e.stateNode.containerInfo),Go(e),Fo=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Vo,Vo=16777216,Go(e),Vo=t):Go(e))}}function Qo(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Yo(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var s=0;s<t.length;s++){var r=t[s];wo=r,Xo(r,e)}Qo(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Jo(e),e=e.sibling}function Jo(e){switch(e.tag){case 0:case 11:case 15:Yo(e),2048&e.flags&&lo(9,e,e.return);break;case 3:case 12:default:Yo(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Zo(e)):Yo(e)}}function Zo(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var s=0;s<t.length;s++){var r=t[s];wo=r,Xo(r,e)}Qo(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:lo(8,t,t.return),Zo(t);break;case 22:2&(s=t.stateNode)._visibility&&(s._visibility&=-3,Zo(t));break;default:Zo(t)}e=e.sibling}}function Xo(e,t){for(;null!==wo;){var s=wo;switch(s.tag){case 0:case 11:case 15:lo(8,s,t);break;case 23:case 22:if(null!==s.memoizedState&&null!==s.memoizedState.cachePool){var r=s.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Fa(s.memoizedState.cache)}if(null!==(r=s.child))r.return=s,wo=r;else e:for(s=e;null!==wo;){var a=(r=wo).sibling,n=r.return;if(ko(r),r===s){wo=null;break e}if(null!==a){a.return=n,wo=a;break e}wo=n}}}var ed={getCacheForType:function(e){var t=ka(Ta),s=t.data.get(e);return void 0===s&&(s=e(),t.data.set(e,s)),s}},td="function"===typeof WeakMap?WeakMap:Map,sd=0,rd=null,ad=null,nd=0,ld=0,id=null,od=!1,dd=!1,cd=!1,ud=0,md=0,xd=0,pd=0,hd=0,gd=0,fd=0,bd=null,yd=null,vd=!1,jd=0,Nd=1/0,wd=null,_d=null,kd=0,Sd=null,Cd=null,Ed=0,Ad=0,Pd=null,Td=null,Ld=0,Fd=null;function Dd(){if(0!==(2&sd)&&0!==nd)return nd&-nd;if(null!==D.T){return 0!==za?za:Ac()}return Pe()}function Od(){0===gd&&(gd=0===(536870912&nd)||aa?Ne():536870912);var e=ri.current;return null!==e&&(e.flags|=32),gd}function zd(e,t,s){(e!==rd||2!==ld&&9!==ld)&&null===e.cancelPendingCommit||(Hd(e,0),Ud(e,nd,gd,!1)),ke(e,s),0!==(2&sd)&&e===rd||(e===rd&&(0===(2&sd)&&(pd|=s),4===md&&Ud(e,nd,gd,!1)),Nc(e))}function Rd(e,t,s){if(0!==(6&sd))throw Error(l(327));for(var r=!s&&0===(124&t)&&0===(t&e.expiredLanes)||ve(e,t),a=r?function(e,t){var s=sd;sd|=2;var r=Wd(),a=Vd();rd!==e||nd!==t?(wd=null,Nd=te()+500,Hd(e,t)):dd=ve(e,t);e:for(;;)try{if(0!==ld&&null!==ad){t=ad;var n=id;t:switch(ld){case 1:ld=0,id=null,Xd(e,t,n,1);break;case 2:case 9:if(Ka(n)){ld=0,id=null,Zd(t);break}t=function(){2!==ld&&9!==ld||rd!==e||(ld=7),Nc(e)},n.then(t,t);break e;case 3:ld=7;break e;case 4:ld=5;break e;case 7:Ka(n)?(ld=0,id=null,Zd(t)):(ld=0,id=null,Xd(e,t,n,7));break;case 5:var i=null;switch(ad.tag){case 26:i=ad.memoizedState;case 5:case 27:var o=ad;if(!i||Bu(i)){ld=0,id=null;var d=o.sibling;if(null!==d)ad=d;else{var c=o.return;null!==c?(ad=c,ec(c)):ad=null}break t}}ld=0,id=null,Xd(e,t,n,5);break;case 6:ld=0,id=null,Xd(e,t,n,6);break;case 8:$d(),md=6;break e;default:throw Error(l(462))}}Yd();break}catch(u){qd(e,u)}return fa=ga=null,D.H=r,D.A=a,sd=s,null!==ad?0:(rd=null,nd=0,Cr(),md)}(e,t):Kd(e,t,!0),n=r;;){if(0===a){dd&&!r&&Ud(e,t,0,!1);break}if(s=e.current.alternate,!n||Id(s)){if(2===a){if(n=t,e.errorRecoveryDisabledLanes&n)var i=0;else i=0!==(i=-536870913&e.pendingLanes)?i:536870912&i?536870912:0;if(0!==i){t=i;e:{var o=e;a=bd;var d=o.current.memoizedState.isDehydrated;if(d&&(Hd(o,i).flags|=256),2!==(i=Kd(o,i,!1))){if(cd&&!d){o.errorRecoveryDisabledLanes|=n,pd|=n,a=4;break e}n=yd,yd=a,null!==n&&(null===yd?yd=n:yd.push.apply(yd,n))}a=i}if(n=!1,2!==a)continue}}if(1===a){Hd(e,0),Ud(e,t,0,!0);break}e:{switch(r=e,n=a){case 0:case 1:throw Error(l(345));case 4:if((4194048&t)!==t)break;case 6:Ud(r,t,gd,!od);break e;case 2:yd=null;break;case 3:case 5:break;default:throw Error(l(329))}if((62914560&t)===t&&10<(a=jd+300-te())){if(Ud(r,t,gd,!od),0!==ye(r,0,!0))break e;r.timeoutHandle=ou(Md.bind(null,r,s,yd,wd,vd,t,gd,pd,fd,od,n,2,-0,0),a)}else Md(r,s,yd,wd,vd,t,gd,pd,fd,od,n,0,-0,0)}break}a=Kd(e,t,!1),n=!1}Nc(e)}function Md(e,t,s,r,a,n,i,o,d,c,u,m,x,p){if(e.timeoutHandle=-1,(8192&(m=t.subtreeFlags)||16785408===(16785408&m))&&($u={stylesheets:null,count:0,unsuspend:Hu},Ko(t),null!==(m=function(){if(null===$u)throw Error(l(475));var e=$u;return e.stylesheets&&0===e.count&&Vu(e,e.stylesheets),0<e.count?function(t){var s=setTimeout(function(){if(e.stylesheets&&Vu(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(s)}}:null}())))return e.cancelPendingCommit=m(sc.bind(null,e,t,n,s,r,a,i,o,d,u,1,x,p)),void Ud(e,n,i,!c);sc(e,t,n,s,r,a,i,o,d)}function Id(e){for(var t=e;;){var s=t.tag;if((0===s||11===s||15===s)&&16384&t.flags&&(null!==(s=t.updateQueue)&&null!==(s=s.stores)))for(var r=0;r<s.length;r++){var a=s[r],n=a.getSnapshot;a=a.value;try{if(!Ks(n(),a))return!1}catch(l){return!1}}if(s=t.child,16384&t.subtreeFlags&&null!==s)s.return=t,t=s;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ud(e,t,s,r){t&=~hd,t&=~pd,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var n=31-xe(a),l=1<<n;r[n]=-1,a&=~l}0!==s&&Se(e,s,t)}function Bd(){return 0!==(6&sd)||(wc(0,!1),!1)}function $d(){if(null!==ad){if(0===ld)var e=ad.return;else fa=ga=null,Rn(e=ad),Kl=null,Ql=0,e=ad;for(;null!==e;)ao(e.alternate,e),e=e.return;ad=null}}function Hd(e,t){var s=e.timeoutHandle;-1!==s&&(e.timeoutHandle=-1,du(s)),null!==(s=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,s()),$d(),rd=e,ad=s=Rr(e.current,null),nd=t,ld=0,id=null,od=!1,dd=ve(e,t),cd=!1,fd=gd=hd=pd=xd=md=0,yd=bd=null,vd=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var a=31-xe(r),n=1<<a;t|=e[a],r&=~n}return ud=t,Cr(),s}function qd(e,t){yn=null,D.H=ql,t===qa||t===Va?(t=Za(),ld=3):t===Wa?(t=Za(),ld=4):ld=t===ki?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,id=t,null===ad&&(md=1,vi(e,wr(t,e.current)))}function Wd(){var e=D.H;return D.H=ql,null===e?ql:e}function Vd(){var e=D.A;return D.A=ed,e}function Gd(){md=4,od||(4194048&nd)!==nd&&null!==ri.current||(dd=!0),0===(134217727&xd)&&0===(134217727&pd)||null===rd||Ud(rd,nd,gd,!1)}function Kd(e,t,s){var r=sd;sd|=2;var a=Wd(),n=Vd();rd===e&&nd===t||(wd=null,Hd(e,t)),t=!1;var l=md;e:for(;;)try{if(0!==ld&&null!==ad){var i=ad,o=id;switch(ld){case 8:$d(),l=6;break e;case 3:case 2:case 9:case 6:null===ri.current&&(t=!0);var d=ld;if(ld=0,id=null,Xd(e,i,o,d),s&&dd){l=0;break e}break;default:d=ld,ld=0,id=null,Xd(e,i,o,d)}}Qd(),l=md;break}catch(c){qd(e,c)}return t&&e.shellSuspendCounter++,fa=ga=null,sd=r,D.H=a,D.A=n,null===ad&&(rd=null,nd=0,Cr()),l}function Qd(){for(;null!==ad;)Jd(ad)}function Yd(){for(;null!==ad&&!X();)Jd(ad)}function Jd(e){var t=Yi(e.alternate,e,ud);e.memoizedProps=e.pendingProps,null===t?ec(e):ad=t}function Zd(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=Oi(s,t,t.pendingProps,t.type,void 0,nd);break;case 11:t=Oi(s,t,t.pendingProps,t.type.render,t.ref,nd);break;case 5:Rn(t);default:ao(s,t),t=Yi(s,t=ad=Mr(t,ud),ud)}e.memoizedProps=e.pendingProps,null===t?ec(e):ad=t}function Xd(e,t,s,r){fa=ga=null,Rn(t),Kl=null,Ql=0;var a=t.return;try{if(function(e,t,s,r,a){if(s.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=s.alternate)&&Na(t,s,a,!0),null!==(s=ri.current)){switch(s.tag){case 13:return null===ai?Gd():null===s.alternate&&0===md&&(md=3),s.flags&=-257,s.flags|=65536,s.lanes=a,r===Ga?s.flags|=16384:(null===(t=s.updateQueue)?s.updateQueue=new Set([r]):t.add(r),uc(e,r,a)),!1;case 22:return s.flags|=65536,r===Ga?s.flags|=16384:(null===(t=s.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},s.updateQueue=t):null===(s=t.retryQueue)?t.retryQueue=new Set([r]):s.add(r),uc(e,r,a)),!1}throw Error(l(435,s.tag))}return uc(e,r,a),Gd(),!1}if(aa)return null!==(t=ri.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==ia&&pa(wr(e=Error(l(422),{cause:r}),s))):(r!==ia&&pa(wr(t=Error(l(423),{cause:r}),s)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,r=wr(r,s),ln(e,a=Ni(e.stateNode,r,a)),4!==md&&(md=2)),!1;var n=Error(l(520),{cause:r});if(n=wr(n,s),null===bd?bd=[n]:bd.push(n),4!==md&&(md=2),null===t)return!0;r=wr(r,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=a&-a,s.lanes|=e,ln(s,e=Ni(s.stateNode,r,e)),!1;case 1:if(t=s.type,n=s.stateNode,0===(128&s.flags)&&("function"===typeof t.getDerivedStateFromError||null!==n&&"function"===typeof n.componentDidCatch&&(null===_d||!_d.has(n))))return s.flags|=65536,a&=-a,s.lanes|=a,_i(a=wi(a),e,s,r),ln(s,a),!1}s=s.return}while(null!==s);return!1}(e,a,t,s,nd))return md=1,vi(e,wr(s,e.current)),void(ad=null)}catch(n){if(null!==a)throw ad=a,n;return md=1,vi(e,wr(s,e.current)),void(ad=null)}32768&t.flags?(aa||1===r?e=!0:dd||0!==(536870912&nd)?e=!1:(od=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ri.current)&&13===r.tag&&(r.flags|=16384))),tc(t,e)):ec(t)}function ec(e){var t=e;do{if(0!==(32768&t.flags))return void tc(t,od);e=t.return;var s=so(t.alternate,t,ud);if(null!==s)return void(ad=s);if(null!==(t=t.sibling))return void(ad=t);ad=t=e}while(null!==t);0===md&&(md=5)}function tc(e,t){do{var s=ro(e.alternate,e);if(null!==s)return s.flags&=32767,void(ad=s);if(null!==(s=e.return)&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&null!==(e=e.sibling))return void(ad=e);ad=e=s}while(null!==e);md=6,ad=null}function sc(e,t,s,r,a,n,i,o,d){e.cancelPendingCommit=null;do{ic()}while(0!==kd);if(0!==(6&sd))throw Error(l(327));if(null!==t){if(t===e.current)throw Error(l(177));if(n=t.lanes|t.childLanes,function(e,t,s,r,a,n){var l=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var i=e.entanglements,o=e.expirationTimes,d=e.hiddenUpdates;for(s=l&~s;0<s;){var c=31-xe(s),u=1<<c;i[c]=0,o[c]=-1;var m=d[c];if(null!==m)for(d[c]=null,c=0;c<m.length;c++){var x=m[c];null!==x&&(x.lane&=-536870913)}s&=~u}0!==r&&Se(e,r,0),0!==n&&0===a&&0!==e.tag&&(e.suspendedLanes|=n&~(l&~t))}(e,s,n|=Sr,i,o,d),e===rd&&(ad=rd=null,nd=0),Cd=t,Sd=e,Ed=s,Ad=n,Pd=a,Td=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,J(ne,function(){return oc(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=D.T,D.T=null,a=O.p,O.p=2,i=sd,sd|=4;try{!function(e,t){if(e=e.containerInfo,tu=sm,er(e=Xs(e))){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(s=(s=e.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(r&&0!==r.rangeCount){s=r.anchorNode;var a=r.anchorOffset,n=r.focusNode;r=r.focusOffset;try{s.nodeType,n.nodeType}catch(g){s=null;break e}var i=0,o=-1,d=-1,c=0,u=0,m=e,x=null;t:for(;;){for(var p;m!==s||0!==a&&3!==m.nodeType||(o=i+a),m!==n||0!==r&&3!==m.nodeType||(d=i+r),3===m.nodeType&&(i+=m.nodeValue.length),null!==(p=m.firstChild);)x=m,m=p;for(;;){if(m===e)break t;if(x===s&&++c===a&&(o=i),x===n&&++u===r&&(d=i),null!==(p=m.nextSibling))break;x=(m=x).parentNode}m=p}s=-1===o||-1===d?null:{start:o,end:d}}else s=null}s=s||{start:0,end:0}}else s=null;for(su={focusedElem:e,selectionRange:s},sm=!1,wo=t;null!==wo;)if(e=(t=wo).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,wo=e;else for(;null!==wo;){switch(n=(t=wo).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==n){e=void 0,s=t,a=n.memoizedProps,n=n.memoizedState,r=s.stateNode;try{var h=hi(s.type,a,(s.elementType,s.type));e=r.getSnapshotBeforeUpdate(h,n),r.__reactInternalSnapshotBeforeUpdate=e}catch(f){cc(s,s.return,f)}}break;case 3:if(0!==(1024&e))if(9===(s=(e=t.stateNode.containerInfo).nodeType))hu(e);else if(1===s)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":hu(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(l(163))}if(null!==(e=t.sibling)){e.return=t.return,wo=e;break}wo=t.return}}(e,t)}finally{sd=i,O.p=a,D.T=r}}kd=1,rc(),ac(),nc()}}function rc(){if(1===kd){kd=0;var e=Sd,t=Cd,s=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||s){s=D.T,D.T=null;var r=O.p;O.p=2;var a=sd;sd|=4;try{Do(t,e);var n=su,l=Xs(e.containerInfo),i=n.focusedElem,o=n.selectionRange;if(l!==i&&i&&i.ownerDocument&&Zs(i.ownerDocument.documentElement,i)){if(null!==o&&er(i)){var d=o.start,c=o.end;if(void 0===c&&(c=d),"selectionStart"in i)i.selectionStart=d,i.selectionEnd=Math.min(c,i.value.length);else{var u=i.ownerDocument||document,m=u&&u.defaultView||window;if(m.getSelection){var x=m.getSelection(),p=i.textContent.length,h=Math.min(o.start,p),g=void 0===o.end?h:Math.min(o.end,p);!x.extend&&h>g&&(l=g,g=h,h=l);var f=Js(i,h),b=Js(i,g);if(f&&b&&(1!==x.rangeCount||x.anchorNode!==f.node||x.anchorOffset!==f.offset||x.focusNode!==b.node||x.focusOffset!==b.offset)){var y=u.createRange();y.setStart(f.node,f.offset),x.removeAllRanges(),h>g?(x.addRange(y),x.extend(b.node,b.offset)):(y.setEnd(b.node,b.offset),x.addRange(y))}}}}for(u=[],x=i;x=x.parentNode;)1===x.nodeType&&u.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<u.length;i++){var v=u[i];v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}sm=!!tu,su=tu=null}finally{sd=a,O.p=r,D.T=s}}e.current=t,kd=2}}function ac(){if(2===kd){kd=0;var e=Sd,t=Cd,s=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||s){s=D.T,D.T=null;var r=O.p;O.p=2;var a=sd;sd|=4;try{_o(e,t.alternate,t)}finally{sd=a,O.p=r,D.T=s}}kd=3}}function nc(){if(4===kd||3===kd){kd=0,ee();var e=Sd,t=Cd,s=Ed,r=Td;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?kd=5:(kd=0,Cd=Sd=null,lc(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(_d=null),Ae(s),t=t.stateNode,ue&&"function"===typeof ue.onCommitFiberRoot)try{ue.onCommitFiberRoot(ce,t,void 0,128===(128&t.current.flags))}catch(o){}if(null!==r){t=D.T,a=O.p,O.p=2,D.T=null;try{for(var n=e.onRecoverableError,l=0;l<r.length;l++){var i=r[l];n(i.value,{componentStack:i.stack})}}finally{D.T=t,O.p=a}}0!==(3&Ed)&&ic(),Nc(e),a=e.pendingLanes,0!==(4194090&s)&&0!==(42&a)?e===Fd?Ld++:(Ld=0,Fd=e):Ld=0,wc(0,!1)}}function lc(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Fa(t)))}function ic(e){return rc(),ac(),nc(),oc()}function oc(){if(5!==kd)return!1;var e=Sd,t=Ad;Ad=0;var s=Ae(Ed),r=D.T,a=O.p;try{O.p=32>s?32:s,D.T=null,s=Pd,Pd=null;var n=Sd,i=Ed;if(kd=0,Cd=Sd=null,Ed=0,0!==(6&sd))throw Error(l(331));var o=sd;if(sd|=4,Jo(n.current),Ho(n,n.current,i,s),sd=o,wc(0,!1),ue&&"function"===typeof ue.onPostCommitFiberRoot)try{ue.onPostCommitFiberRoot(ce,n)}catch(d){}return!0}finally{O.p=a,D.T=r,lc(e,t)}}function dc(e,t,s){t=wr(s,t),null!==(e=an(e,t=Ni(e.stateNode,t,2),2))&&(ke(e,2),Nc(e))}function cc(e,t,s){if(3===e.tag)dc(e,e,s);else for(;null!==t;){if(3===t.tag){dc(t,e,s);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===_d||!_d.has(r))){e=wr(s,e),null!==(r=an(t,s=wi(2),2))&&(_i(s,r,t,e),ke(r,2),Nc(r));break}}t=t.return}}function uc(e,t,s){var r=e.pingCache;if(null===r){r=e.pingCache=new td;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(s)||(cd=!0,a.add(s),e=mc.bind(null,e,t,s),t.then(e,e))}function mc(e,t,s){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,rd===e&&(nd&s)===s&&(4===md||3===md&&(62914560&nd)===nd&&300>te()-jd?0===(2&sd)&&Hd(e,0):hd|=s,fd===nd&&(fd=0)),Nc(e)}function xc(e,t){0===t&&(t=we()),null!==(e=Pr(e,t))&&(ke(e,t),Nc(e))}function pc(e){var t=e.memoizedState,s=0;null!==t&&(s=t.retryLane),xc(e,s)}function hc(e,t){var s=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(s=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(l(314))}null!==r&&r.delete(t),xc(e,s)}var gc=null,fc=null,bc=!1,yc=!1,vc=!1,jc=0;function Nc(e){e!==fc&&null===e.next&&(null===fc?gc=fc=e:fc=fc.next=e),yc=!0,bc||(bc=!0,uu(function(){0!==(6&sd)?J(re,_c):kc()}))}function wc(e,t){if(!vc&&yc){vc=!0;do{for(var s=!1,r=gc;null!==r;){if(!t)if(0!==e){var a=r.pendingLanes;if(0===a)var n=0;else{var l=r.suspendedLanes,i=r.pingedLanes;n=(1<<31-xe(42|e)+1)-1,n=201326741&(n&=a&~(l&~i))?201326741&n|1:n?2|n:0}0!==n&&(s=!0,Ec(r,n))}else n=nd,0===(3&(n=ye(r,r===rd?n:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||ve(r,n)||(s=!0,Ec(r,n));r=r.next}}while(s);vc=!1}}function _c(){kc()}function kc(){yc=bc=!1;var e=0;0!==jc&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==iu&&(iu=e,!0);return iu=null,!1}()&&(e=jc),jc=0);for(var t=te(),s=null,r=gc;null!==r;){var a=r.next,n=Sc(r,t);0===n?(r.next=null,null===s?gc=a:s.next=a,null===a&&(fc=s)):(s=r,(0!==e||0!==(3&n))&&(yc=!0)),r=a}wc(e,!1)}function Sc(e,t){for(var s=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,n=-62914561&e.pendingLanes;0<n;){var l=31-xe(n),i=1<<l,o=a[l];-1===o?0!==(i&s)&&0===(i&r)||(a[l]=je(i,t)):o<=t&&(e.expiredLanes|=i),n&=~i}if(s=nd,s=ye(e,e===(t=rd)?s:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===s||e===t&&(2===ld||9===ld)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&Z(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&s)||ve(e,s)){if((t=s&-s)===e.callbackPriority)return t;switch(null!==r&&Z(r),Ae(s)){case 2:case 8:s=ae;break;case 32:default:s=ne;break;case 268435456:s=ie}return r=Cc.bind(null,e),s=J(s,r),e.callbackPriority=t,e.callbackNode=s,t}return null!==r&&null!==r&&Z(r),e.callbackPriority=2,e.callbackNode=null,2}function Cc(e,t){if(0!==kd&&5!==kd)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(ic()&&e.callbackNode!==s)return null;var r=nd;return 0===(r=ye(e,e===rd?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Rd(e,r,t),Sc(e,te()),null!=e.callbackNode&&e.callbackNode===s?Cc.bind(null,e):null)}function Ec(e,t){if(ic())return null;Rd(e,t,!0)}function Ac(){return 0===jc&&(jc=Ne()),jc}function Pc(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function Tc(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}for(var Lc=0;Lc<vr.length;Lc++){var Fc=vr[Lc];jr(Fc.toLowerCase(),"on"+(Fc[0].toUpperCase()+Fc.slice(1)))}jr(mr,"onAnimationEnd"),jr(xr,"onAnimationIteration"),jr(pr,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(hr,"onTransitionRun"),jr(gr,"onTransitionStart"),jr(fr,"onTransitionCancel"),jr(br,"onTransitionEnd"),Qe("onMouseEnter",["mouseout","mouseover"]),Qe("onMouseLeave",["mouseout","mouseover"]),Qe("onPointerEnter",["pointerout","pointerover"]),Qe("onPointerLeave",["pointerout","pointerover"]),Ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dc));function zc(e,t){t=0!==(4&t);for(var s=0;s<e.length;s++){var r=e[s],a=r.event;r=r.listeners;e:{var n=void 0;if(t)for(var l=r.length-1;0<=l;l--){var i=r[l],o=i.instance,d=i.currentTarget;if(i=i.listener,o!==n&&a.isPropagationStopped())break e;n=i,a.currentTarget=d;try{n(a)}catch(c){gi(c)}a.currentTarget=null,n=o}else for(l=0;l<r.length;l++){if(o=(i=r[l]).instance,d=i.currentTarget,i=i.listener,o!==n&&a.isPropagationStopped())break e;n=i,a.currentTarget=d;try{n(a)}catch(c){gi(c)}a.currentTarget=null,n=o}}}}function Rc(e,t){var s=t[Oe];void 0===s&&(s=t[Oe]=new Set);var r=e+"__bubble";s.has(r)||(Bc(t,e,2,!1),s.add(r))}function Mc(e,t,s){var r=0;t&&(r|=4),Bc(s,e,r,t)}var Ic="_reactListening"+Math.random().toString(36).slice(2);function Uc(e){if(!e[Ic]){e[Ic]=!0,Ve.forEach(function(t){"selectionchange"!==t&&(Oc.has(t)||Mc(t,!1,e),Mc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ic]||(t[Ic]=!0,Mc("selectionchange",!1,t))}}function Bc(e,t,s,r){switch(dm(t)){case 2:var a=rm;break;case 8:a=am;break;default:a=nm}s=a.bind(null,t,s,e),a=void 0,!It||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):void 0!==a?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function $c(e,t,s,r,a){var n=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var l=r.tag;if(3===l||4===l){var i=r.stateNode.containerInfo;if(i===a)break;if(4===l)for(l=r.return;null!==l;){var d=l.tag;if((3===d||4===d)&&l.stateNode.containerInfo===a)return;l=l.return}for(;null!==i;){if(null===(l=Be(i)))return;if(5===(d=l.tag)||6===d||26===d||27===d){r=n=l;continue e}i=i.parentNode}}r=r.return}zt(function(){var r=n,a=Tt(s),l=[];e:{var i=yr.get(e);if(void 0!==i){var d=Xt,c=e;switch(e){case"keypress":if(0===Wt(s))break e;case"keydown":case"keyup":d=ps;break;case"focusin":c="focus",d=ns;break;case"focusout":c="blur",d=ns;break;case"beforeblur":case"afterblur":d=ns;break;case"click":if(2===s.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=rs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=as;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=gs;break;case mr:case xr:case pr:d=ls;break;case br:d=fs;break;case"scroll":case"scrollend":d=ts;break;case"wheel":d=bs;break;case"copy":case"cut":case"paste":d=is;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=hs;break;case"toggle":case"beforetoggle":d=ys}var u=0!==(4&t),m=!u&&("scroll"===e||"scrollend"===e),x=u?null!==i?i+"Capture":null:i;u=[];for(var p,h=r;null!==h;){var g=h;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===x||null!=(g=Rt(h,x))&&u.push(Hc(h,g,p)),m)break;h=h.return}0<u.length&&(i=new d(i,c,null,s,a),l.push({event:i,listeners:u}))}}if(0===(7&t)){if(d="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||s===Pt||!(c=s.relatedTarget||s.fromElement)||!Be(c)&&!c[De])&&(d||i)&&(i=a.window===a?a:(i=a.ownerDocument)?i.defaultView||i.parentWindow:window,d?(d=r,null!==(c=(c=s.relatedTarget||s.toElement)?Be(c):null)&&(m=o(c),u=c.tag,c!==m||5!==u&&27!==u&&6!==u)&&(c=null)):(d=null,c=r),d!==c)){if(u=rs,g="onMouseLeave",x="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(u=hs,g="onPointerLeave",x="onPointerEnter",h="pointer"),m=null==d?i:He(d),p=null==c?i:He(c),(i=new u(g,h+"leave",d,s,a)).target=m,i.relatedTarget=p,g=null,Be(a)===r&&((u=new u(x,h+"enter",c,s,a)).target=p,u.relatedTarget=m,g=u),m=g,d&&c)e:{for(x=c,h=0,p=u=d;p;p=Wc(p))h++;for(p=0,g=x;g;g=Wc(g))p++;for(;0<h-p;)u=Wc(u),h--;for(;0<p-h;)x=Wc(x),p--;for(;h--;){if(u===x||null!==x&&u===x.alternate)break e;u=Wc(u),x=Wc(x)}u=null}else u=null;null!==d&&Vc(l,i,d,u,!1),null!==c&&null!==m&&Vc(l,m,c,u,!0)}if("select"===(d=(i=r?He(r):window).nodeName&&i.nodeName.toLowerCase())||"input"===d&&"file"===i.type)var f=Rs;else if(Ts(i))if(Ms)f=Gs;else{f=Ws;var b=qs}else!(d=i.nodeName)||"input"!==d.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type?r&&St(r.elementType)&&(f=Rs):f=Vs;switch(f&&(f=f(e,r))?Ls(l,f,s,a):(b&&b(e,i,r),"focusout"===e&&r&&"number"===i.type&&null!=r.memoizedProps.value&&bt(i,"number",i.value)),b=r?He(r):window,e){case"focusin":(Ts(b)||"true"===b.contentEditable)&&(sr=b,rr=r,ar=null);break;case"focusout":ar=rr=sr=null;break;case"mousedown":nr=!0;break;case"contextmenu":case"mouseup":case"dragend":nr=!1,lr(l,s,a);break;case"selectionchange":if(tr)break;case"keydown":case"keyup":lr(l,s,a)}var y;if(js)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else As?Cs(e,s)&&(v="onCompositionEnd"):"keydown"===e&&229===s.keyCode&&(v="onCompositionStart");v&&(_s&&"ko"!==s.locale&&(As||"onCompositionStart"!==v?"onCompositionEnd"===v&&As&&(y=qt()):($t="value"in(Bt=a)?Bt.value:Bt.textContent,As=!0)),0<(b=qc(r,v)).length&&(v=new os(v,e,null,s,a),l.push({event:v,listeners:b}),y?v.data=y:null!==(y=Es(s))&&(v.data=y))),(y=ws?function(e,t){switch(e){case"compositionend":return Es(t);case"keypress":return 32!==t.which?null:(Ss=!0,ks);case"textInput":return(e=t.data)===ks&&Ss?null:e;default:return null}}(e,s):function(e,t){if(As)return"compositionend"===e||!js&&Cs(e,t)?(e=qt(),Ht=$t=Bt=null,As=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _s&&"ko"!==t.locale?null:t.data}}(e,s))&&(0<(v=qc(r,"onBeforeInput")).length&&(b=new os("onBeforeInput","beforeinput",null,s,a),l.push({event:b,listeners:v}),b.data=y)),function(e,t,s,r,a){if("submit"===t&&s&&s.stateNode===a){var n=Pc((a[Fe]||null).action),l=r.submitter;l&&null!==(t=(t=l[Fe]||null)?Pc(t.formAction):l.getAttribute("formAction"))&&(n=t,l=null);var i=new Xt("action","action",null,r,a);e.push({event:i,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==jc){var e=l?Tc(a,l):new FormData(a);Pl(s,{pending:!0,data:e,method:a.method,action:n},null,e)}}else"function"===typeof n&&(i.preventDefault(),e=l?Tc(a,l):new FormData(a),Pl(s,{pending:!0,data:e,method:a.method,action:n},n,e))},currentTarget:a}]})}}(l,e,r,s,a)}zc(l,t)})}function Hc(e,t,s){return{instance:e,listener:t,currentTarget:s}}function qc(e,t){for(var s=t+"Capture",r=[];null!==e;){var a=e,n=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===n||(null!=(a=Rt(e,s))&&r.unshift(Hc(e,a,n)),null!=(a=Rt(e,t))&&r.push(Hc(e,a,n))),3===e.tag)return r;e=e.return}return[]}function Wc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Vc(e,t,s,r,a){for(var n=t._reactName,l=[];null!==s&&s!==r;){var i=s,o=i.alternate,d=i.stateNode;if(i=i.tag,null!==o&&o===r)break;5!==i&&26!==i&&27!==i||null===d||(o=d,a?null!=(d=Rt(s,n))&&l.unshift(Hc(s,d,o)):a||null!=(d=Rt(s,n))&&l.push(Hc(s,d,o))),s=s.return}0!==l.length&&e.push({event:t,listeners:l})}var Gc=/\r\n?/g,Kc=/\u0000|\uFFFD/g;function Qc(e){return("string"===typeof e?e:""+e).replace(Gc,"\n").replace(Kc,"")}function Yc(e,t){return t=Qc(t),Qc(e)===t}function Jc(){}function Zc(e,t,s,r,a,n){switch(s){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Nt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Nt(e,""+r);break;case"className":st(e,"class",r);break;case"tabIndex":st(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":st(e,s,r);break;case"style":kt(e,r,n);break;case"data":if("object"!==t){st(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==s)){e.removeAttribute(s);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(s);break}r=At(""+r),e.setAttribute(s,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof n&&("formAction"===s?("input"!==t&&Zc(e,t,"name",a.name,a,null),Zc(e,t,"formEncType",a.formEncType,a,null),Zc(e,t,"formMethod",a.formMethod,a,null),Zc(e,t,"formTarget",a.formTarget,a,null)):(Zc(e,t,"encType",a.encType,a,null),Zc(e,t,"method",a.method,a,null),Zc(e,t,"target",a.target,a,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(s);break}r=At(""+r),e.setAttribute(s,r);break;case"onClick":null!=r&&(e.onclick=Jc);break;case"onScroll":null!=r&&Rc("scroll",e);break;case"onScrollEnd":null!=r&&Rc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(l(61));if(null!=(s=r.__html)){if(null!=a.children)throw Error(l(60));e.innerHTML=s}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}s=At(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(s,""+r):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":!0===r?e.setAttribute(s,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(s,r):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(s,r):e.removeAttribute(s);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(s):e.setAttribute(s,r);break;case"popover":Rc("beforetoggle",e),Rc("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<s.length)||"o"!==s[0]&&"O"!==s[0]||"n"!==s[1]&&"N"!==s[1])&&tt(e,s=Ct.get(s)||s,r)}}function Xc(e,t,s,r,a,n){switch(s){case"style":kt(e,r,n);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(l(61));if(null!=(s=r.__html)){if(null!=a.children)throw Error(l(60));e.innerHTML=s}}break;case"children":"string"===typeof r?Nt(e,r):("number"===typeof r||"bigint"===typeof r)&&Nt(e,""+r);break;case"onScroll":null!=r&&Rc("scroll",e);break;case"onScrollEnd":null!=r&&Rc("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Jc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ge.hasOwnProperty(s)||("o"!==s[0]||"n"!==s[1]||(a=s.endsWith("Capture"),t=s.slice(2,a?s.length-7:void 0),"function"===typeof(n=null!=(n=e[Fe]||null)?n[s]:null)&&e.removeEventListener(t,n,a),"function"!==typeof r)?s in e?e[s]=r:!0===r?e.setAttribute(s,""):tt(e,s,r):("function"!==typeof n&&null!==n&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,r,a)))}}function eu(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rc("error",e),Rc("load",e);var r,a=!1,n=!1;for(r in s)if(s.hasOwnProperty(r)){var i=s[r];if(null!=i)switch(r){case"src":a=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Zc(e,t,r,i,s,null)}}return n&&Zc(e,t,"srcSet",s.srcSet,s,null),void(a&&Zc(e,t,"src",s.src,s,null));case"input":Rc("invalid",e);var o=r=i=n=null,d=null,c=null;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];if(null!=u)switch(a){case"name":n=u;break;case"type":i=u;break;case"checked":d=u;break;case"defaultChecked":c=u;break;case"value":r=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(l(137,t));break;default:Zc(e,t,a,u,s,null)}}return ft(e,r,o,d,c,i,n,!1),void ut(e);case"select":for(n in Rc("invalid",e),a=i=r=null,s)if(s.hasOwnProperty(n)&&null!=(o=s[n]))switch(n){case"value":r=o;break;case"defaultValue":i=o;break;case"multiple":a=o;default:Zc(e,t,n,o,s,null)}return t=r,s=i,e.multiple=!!a,void(null!=t?yt(e,!!a,t,!1):null!=s&&yt(e,!!a,s,!0));case"textarea":for(i in Rc("invalid",e),r=n=a=null,s)if(s.hasOwnProperty(i)&&null!=(o=s[i]))switch(i){case"value":a=o;break;case"defaultValue":n=o;break;case"children":r=o;break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(l(91));break;default:Zc(e,t,i,o,s,null)}return jt(e,a,n,r),void ut(e);case"option":for(d in s)if(s.hasOwnProperty(d)&&null!=(a=s[d]))if("selected"===d)e.selected=a&&"function"!==typeof a&&"symbol"!==typeof a;else Zc(e,t,d,a,s,null);return;case"dialog":Rc("beforetoggle",e),Rc("toggle",e),Rc("cancel",e),Rc("close",e);break;case"iframe":case"object":Rc("load",e);break;case"video":case"audio":for(a=0;a<Dc.length;a++)Rc(Dc[a],e);break;case"image":Rc("error",e),Rc("load",e);break;case"details":Rc("toggle",e);break;case"embed":case"source":case"link":Rc("error",e),Rc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in s)if(s.hasOwnProperty(c)&&null!=(a=s[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Zc(e,t,c,a,s,null)}return;default:if(St(t)){for(u in s)s.hasOwnProperty(u)&&(void 0!==(a=s[u])&&Xc(e,t,u,a,s,void 0));return}}for(o in s)s.hasOwnProperty(o)&&(null!=(a=s[o])&&Zc(e,t,o,a,s,null))}var tu=null,su=null;function ru(e){return 9===e.nodeType?e:e.ownerDocument}function au(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nu(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function lu(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var iu=null;var ou="function"===typeof setTimeout?setTimeout:void 0,du="function"===typeof clearTimeout?clearTimeout:void 0,cu="function"===typeof Promise?Promise:void 0,uu="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof cu?function(e){return cu.resolve(null).then(e).catch(mu)}:ou;function mu(e){setTimeout(function(){throw e})}function xu(e){return"head"===e}function pu(e,t){var s=t,r=0,a=0;do{var n=s.nextSibling;if(e.removeChild(s),n&&8===n.nodeType)if("/$"===(s=n.data)){if(0<r&&8>r){s=r;var l=e.ownerDocument;if(1&s&&ju(l.documentElement),2&s&&ju(l.body),4&s)for(ju(s=l.head),l=s.firstChild;l;){var i=l.nextSibling,o=l.nodeName;l[Ie]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===l.rel.toLowerCase()||s.removeChild(l),l=i}}if(0===a)return e.removeChild(n),void Cm(t);a--}else"$"===s||"$?"===s||"$!"===s?a++:r=s.charCodeAt(0)-48;else r=0;s=n}while(s);Cm(t)}function hu(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":hu(s),Ue(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===s.rel.toLowerCase())continue}e.removeChild(s)}}function gu(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function fu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bu=null;function yu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var s=e.data;if("$"===s||"$!"===s||"$?"===s){if(0===t)return e;t--}else"/$"===s&&t++}e=e.previousSibling}return null}function vu(e,t,s){switch(t=ru(s),e){case"html":if(!(e=t.documentElement))throw Error(l(452));return e;case"head":if(!(e=t.head))throw Error(l(453));return e;case"body":if(!(e=t.body))throw Error(l(454));return e;default:throw Error(l(451))}}function ju(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ue(e)}var Nu=new Map,wu=new Set;function _u(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var ku=O.d;O.d={f:function(){var e=ku.f(),t=Bd();return e||t},r:function(e){var t=$e(e);null!==t&&5===t.tag&&"form"===t.type?Ll(t):ku.r(e)},D:function(e){ku.D(e),Cu("dns-prefetch",e,null)},C:function(e,t){ku.C(e,t),Cu("preconnect",e,t)},L:function(e,t,s){ku.L(e,t,s);var r=Su;if(r&&e&&t){var a='link[rel="preload"][as="'+ht(t)+'"]';"image"===t&&s&&s.imageSrcSet?(a+='[imagesrcset="'+ht(s.imageSrcSet)+'"]',"string"===typeof s.imageSizes&&(a+='[imagesizes="'+ht(s.imageSizes)+'"]')):a+='[href="'+ht(e)+'"]';var n=a;switch(t){case"style":n=Au(e);break;case"script":n=Lu(e)}Nu.has(n)||(e=m({rel:"preload",href:"image"===t&&s&&s.imageSrcSet?void 0:e,as:t},s),Nu.set(n,e),null!==r.querySelector(a)||"style"===t&&r.querySelector(Pu(n))||"script"===t&&r.querySelector(Fu(n))||(eu(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}},m:function(e,t){ku.m(e,t);var s=Su;if(s&&e){var r=t&&"string"===typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+ht(r)+'"][href="'+ht(e)+'"]',n=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":n=Lu(e)}if(!Nu.has(n)&&(e=m({rel:"modulepreload",href:e},t),Nu.set(n,e),null===s.querySelector(a))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Fu(n)))return}eu(r=s.createElement("link"),"link",e),We(r),s.head.appendChild(r)}}},X:function(e,t){ku.X(e,t);var s=Su;if(s&&e){var r=qe(s).hoistableScripts,a=Lu(e),n=r.get(a);n||((n=s.querySelector(Fu(a)))||(e=m({src:e,async:!0},t),(t=Nu.get(a))&&Ru(e,t),We(n=s.createElement("script")),eu(n,"link",e),s.head.appendChild(n)),n={type:"script",instance:n,count:1,state:null},r.set(a,n))}},S:function(e,t,s){ku.S(e,t,s);var r=Su;if(r&&e){var a=qe(r).hoistableStyles,n=Au(e);t=t||"default";var l=a.get(n);if(!l){var i={loading:0,preload:null};if(l=r.querySelector(Pu(n)))i.loading=5;else{e=m({rel:"stylesheet",href:e,"data-precedence":t},s),(s=Nu.get(n))&&zu(e,s);var o=l=r.createElement("link");We(o),eu(o,"link",e),o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),o.addEventListener("load",function(){i.loading|=1}),o.addEventListener("error",function(){i.loading|=2}),i.loading|=4,Ou(l,t,r)}l={type:"stylesheet",instance:l,count:1,state:i},a.set(n,l)}}},M:function(e,t){ku.M(e,t);var s=Su;if(s&&e){var r=qe(s).hoistableScripts,a=Lu(e),n=r.get(a);n||((n=s.querySelector(Fu(a)))||(e=m({src:e,async:!0,type:"module"},t),(t=Nu.get(a))&&Ru(e,t),We(n=s.createElement("script")),eu(n,"link",e),s.head.appendChild(n)),n={type:"script",instance:n,count:1,state:null},r.set(a,n))}}};var Su="undefined"===typeof document?null:document;function Cu(e,t,s){var r=Su;if(r&&"string"===typeof t&&t){var a=ht(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"===typeof s&&(a+='[crossorigin="'+s+'"]'),wu.has(a)||(wu.add(a),e={rel:e,crossOrigin:s,href:t},null===r.querySelector(a)&&(eu(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}}function Eu(e,t,s,r){var a,n,i,o,d=(d=q.current)?_u(d):null;if(!d)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof s.precedence&&"string"===typeof s.href?(t=Au(s.href),(r=(s=qe(d).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},s.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===s.rel&&"string"===typeof s.href&&"string"===typeof s.precedence){e=Au(s.href);var c=qe(d).hoistableStyles,u=c.get(e);if(u||(d=d.ownerDocument||d,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,u),(c=d.querySelector(Pu(e)))&&!c._p&&(u.instance=c,u.state.loading=5),Nu.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Nu.set(e,s),c||(a=d,n=e,i=s,o=u.state,a.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=a.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),eu(n,"link",i),We(n),a.head.appendChild(n))))),t&&null===r)throw Error(l(528,""));return u}if(t&&null!==r)throw Error(l(529,""));return null;case"script":return t=s.async,"string"===typeof(s=s.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Lu(s),(r=(s=qe(d).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},s.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Au(e){return'href="'+ht(e)+'"'}function Pu(e){return'link[rel="stylesheet"]['+e+"]"}function Tu(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function Lu(e){return'[src="'+ht(e)+'"]'}function Fu(e){return"script[async]"+e}function Du(e,t,s){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+ht(s.href)+'"]');if(r)return t.instance=r,We(r),r;var a=m({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return We(r=(e.ownerDocument||e).createElement("style")),eu(r,"style",a),Ou(r,s.precedence,e),t.instance=r;case"stylesheet":a=Au(s.href);var n=e.querySelector(Pu(a));if(n)return t.state.loading|=4,t.instance=n,We(n),n;r=Tu(s),(a=Nu.get(a))&&zu(r,a),We(n=(e.ownerDocument||e).createElement("link"));var i=n;return i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),eu(n,"link",r),t.state.loading|=4,Ou(n,s.precedence,e),t.instance=n;case"script":return n=Lu(s.src),(a=e.querySelector(Fu(n)))?(t.instance=a,We(a),a):(r=s,(a=Nu.get(n))&&Ru(r=m({},s),a),We(a=(e=e.ownerDocument||e).createElement("script")),eu(a,"link",r),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(l(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Ou(r,s.precedence,e));return t.instance}function Ou(e,t,s){for(var r=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,n=a,l=0;l<r.length;l++){var i=r[l];if(i.dataset.precedence===t)n=i;else if(n!==a)break}n?n.parentNode.insertBefore(e,n.nextSibling):(t=9===s.nodeType?s.head:s).insertBefore(e,t.firstChild)}function zu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Ru(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Mu=null;function Iu(e,t,s){if(null===Mu){var r=new Map,a=Mu=new Map;a.set(s,r)}else(r=(a=Mu).get(s))||(r=new Map,a.set(s,r));if(r.has(e))return r;for(r.set(e,null),s=s.getElementsByTagName(e),a=0;a<s.length;a++){var n=s[a];if(!(n[Ie]||n[Le]||"link"===e&&"stylesheet"===n.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==n.namespaceURI){var l=n.getAttribute(t)||"";l=e+l;var i=r.get(l);i?i.push(n):r.set(l,[n])}}return r}function Uu(e,t,s){(e=e.ownerDocument||e).head.insertBefore(s,"title"===t?e.querySelector("head > title"):null)}function Bu(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var $u=null;function Hu(){}function qu(){if(this.count--,0===this.count)if(this.stylesheets)Vu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Wu=null;function Vu(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Wu=new Map,t.forEach(Gu,e),Wu=null,qu.call(e))}function Gu(e,t){if(!(4&t.state.loading)){var s=Wu.get(e);if(s)var r=s.get(null);else{s=new Map,Wu.set(e,s);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),n=0;n<a.length;n++){var l=a[n];"LINK"!==l.nodeName&&"not all"===l.getAttribute("media")||(s.set(l.dataset.precedence,l),r=l)}r&&s.set(null,r)}l=(a=t.instance).getAttribute("data-precedence"),(n=s.get(l)||r)===r&&s.set(null,a),s.set(l,a),this.count++,r=qu.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),n?n.parentNode.insertBefore(a,n.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var Ku={$$typeof:j,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function Qu(e,t,s,r,a,n,l,i){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_e(0),this.hiddenUpdates=_e(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=n,this.onRecoverableError=l,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=i,this.incompleteTransitions=new Map}function Yu(e,t,s,r,a,n,l,i,o,d,c,u){return e=new Qu(e,t,s,l,i,o,d,u),t=1,!0===n&&(t|=24),n=Or(3,null,null,t),e.current=n,n.stateNode=e,(t=La()).refCount++,e.pooledCache=t,t.refCount++,n.memoizedState={element:r,isDehydrated:s,cache:t},tn(n),e}function Ju(e){return e?e=Fr:Fr}function Zu(e,t,s,r,a,n){a=Ju(a),null===r.context?r.context=a:r.pendingContext=a,(r=rn(t)).payload={element:s},null!==(n=void 0===n?null:n)&&(r.callback=n),null!==(s=an(e,r,t))&&(zd(s,0,t),nn(s,e,t))}function Xu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var s=e.retryLane;e.retryLane=0!==s&&s<t?s:t}}function em(e,t){Xu(e,t),(e=e.alternate)&&Xu(e,t)}function tm(e){if(13===e.tag){var t=Pr(e,67108864);null!==t&&zd(t,0,67108864),em(e,67108864)}}var sm=!0;function rm(e,t,s,r){var a=D.T;D.T=null;var n=O.p;try{O.p=2,nm(e,t,s,r)}finally{O.p=n,D.T=a}}function am(e,t,s,r){var a=D.T;D.T=null;var n=O.p;try{O.p=8,nm(e,t,s,r)}finally{O.p=n,D.T=a}}function nm(e,t,s,r){if(sm){var a=lm(r);if(null===a)$c(e,t,r,im,s),bm(e,r);else if(function(e,t,s,r,a){switch(t){case"focusin":return um=ym(um,e,t,s,r,a),!0;case"dragenter":return mm=ym(mm,e,t,s,r,a),!0;case"mouseover":return xm=ym(xm,e,t,s,r,a),!0;case"pointerover":var n=a.pointerId;return pm.set(n,ym(pm.get(n)||null,e,t,s,r,a)),!0;case"gotpointercapture":return n=a.pointerId,hm.set(n,ym(hm.get(n)||null,e,t,s,r,a)),!0}return!1}(a,e,t,s,r))r.stopPropagation();else if(bm(e,r),4&t&&-1<fm.indexOf(e)){for(;null!==a;){var n=$e(a);if(null!==n)switch(n.tag){case 3:if((n=n.stateNode).current.memoizedState.isDehydrated){var l=be(n.pendingLanes);if(0!==l){var i=n;for(i.pendingLanes|=2,i.entangledLanes|=2;l;){var o=1<<31-xe(l);i.entanglements[1]|=o,l&=~o}Nc(n),0===(6&sd)&&(Nd=te()+500,wc(0,!1))}}break;case 13:null!==(i=Pr(n,2))&&zd(i,0,2),Bd(),em(n,2)}if(null===(n=lm(r))&&$c(e,t,r,im,s),n===a)break;a=n}null!==a&&r.stopPropagation()}else $c(e,t,r,null,s)}}function lm(e){return om(e=Tt(e))}var im=null;function om(e){if(im=null,null!==(e=Be(e))){var t=o(e);if(null===t)e=null;else{var s=t.tag;if(13===s){if(null!==(e=d(t)))return e;e=null}else if(3===s){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return im=e,null}function dm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(se()){case re:return 2;case ae:return 8;case ne:case le:return 32;case ie:return 268435456;default:return 32}default:return 32}}var cm=!1,um=null,mm=null,xm=null,pm=new Map,hm=new Map,gm=[],fm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bm(e,t){switch(e){case"focusin":case"focusout":um=null;break;case"dragenter":case"dragleave":mm=null;break;case"mouseover":case"mouseout":xm=null;break;case"pointerover":case"pointerout":pm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hm.delete(t.pointerId)}}function ym(e,t,s,r,a,n){return null===e||e.nativeEvent!==n?(e={blockedOn:t,domEventName:s,eventSystemFlags:r,nativeEvent:n,targetContainers:[a]},null!==t&&(null!==(t=$e(t))&&tm(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function vm(e){var t=Be(e.target);if(null!==t){var s=o(t);if(null!==s)if(13===(t=s.tag)){if(null!==(t=d(s)))return e.blockedOn=t,void function(e,t){var s=O.p;try{return O.p=e,t()}finally{O.p=s}}(e.priority,function(){if(13===s.tag){var e=Dd();e=Ee(e);var t=Pr(s,e);null!==t&&zd(t,0,e),em(s,e)}})}else if(3===t&&s.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===s.tag?s.stateNode.containerInfo:null)}e.blockedOn=null}function jm(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var s=lm(e.nativeEvent);if(null!==s)return null!==(t=$e(s))&&tm(t),e.blockedOn=s,!1;var r=new(s=e.nativeEvent).constructor(s.type,s);Pt=r,s.target.dispatchEvent(r),Pt=null,t.shift()}return!0}function Nm(e,t,s){jm(e)&&s.delete(t)}function wm(){cm=!1,null!==um&&jm(um)&&(um=null),null!==mm&&jm(mm)&&(mm=null),null!==xm&&jm(xm)&&(xm=null),pm.forEach(Nm),hm.forEach(Nm)}function _m(e,t){e.blockedOn===t&&(e.blockedOn=null,cm||(cm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,wm)))}var km=null;function Sm(e){km!==e&&(km=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){km===e&&(km=null);for(var t=0;t<e.length;t+=3){var s=e[t],r=e[t+1],a=e[t+2];if("function"!==typeof r){if(null===om(r||s))continue;break}var n=$e(s);null!==n&&(e.splice(t,3),t-=3,Pl(n,{pending:!0,data:a,method:s.method,action:r},r,a))}}))}function Cm(e){function t(t){return _m(t,e)}null!==um&&_m(um,e),null!==mm&&_m(mm,e),null!==xm&&_m(xm,e),pm.forEach(t),hm.forEach(t);for(var s=0;s<gm.length;s++){var r=gm[s];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gm.length&&null===(s=gm[0]).blockedOn;)vm(s),null===s.blockedOn&&gm.shift();if(null!=(s=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<s.length;r+=3){var a=s[r],n=s[r+1],l=a[Fe]||null;if("function"===typeof n)l||Sm(s);else if(l){var i=null;if(n&&n.hasAttribute("formAction")){if(a=n,l=n[Fe]||null)i=l.formAction;else if(null!==om(a))continue}else i=l.action;"function"===typeof i?s[r+1]=i:(s.splice(r,3),r-=3),Sm(s)}}}function Em(e){this._internalRoot=e}function Am(e){this._internalRoot=e}Am.prototype.render=Em.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(l(409));Zu(t.current,Dd(),e,t,null,null)},Am.prototype.unmount=Em.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zu(e.current,2,null,e,null,null),Bd(),t[De]=null}},Am.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pe();e={blockedOn:null,target:e,priority:t};for(var s=0;s<gm.length&&0!==t&&t<gm[s].priority;s++);gm.splice(s,0,e),0===s&&vm(e)}};var Pm=a.version;if("19.1.1"!==Pm)throw Error(l(527,Pm,"19.1.1"));O.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(l(188));throw e=Object.keys(e).join(","),Error(l(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=o(e)))throw Error(l(188));return t!==e?null:e}for(var s=e,r=t;;){var a=s.return;if(null===a)break;var n=a.alternate;if(null===n){if(null!==(r=a.return)){s=r;continue}break}if(a.child===n.child){for(n=a.child;n;){if(n===s)return c(a),e;if(n===r)return c(a),t;n=n.sibling}throw Error(l(188))}if(s.return!==r.return)s=a,r=n;else{for(var i=!1,d=a.child;d;){if(d===s){i=!0,s=a,r=n;break}if(d===r){i=!0,r=a,s=n;break}d=d.sibling}if(!i){for(d=n.child;d;){if(d===s){i=!0,s=n,r=a;break}if(d===r){i=!0,r=n,s=a;break}d=d.sibling}if(!i)throw Error(l(189))}}if(s.alternate!==r)throw Error(l(190))}if(3!==s.tag)throw Error(l(188));return s.stateNode.current===s?e:t}(t),e=null===(e=null!==e?u(e):null)?null:e.stateNode};var Tm={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Lm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lm.isDisabled&&Lm.supportsFiber)try{ce=Lm.inject(Tm),ue=Lm}catch(Dm){}}t.createRoot=function(e,t){if(!i(e))throw Error(l(299));var s=!1,r="",a=fi,n=bi,o=yi;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(s=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(n=t.onCaughtError),void 0!==t.onRecoverableError&&(o=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Yu(e,1,!1,null,0,s,r,a,n,o,0,null),e[De]=t.current,Uc(e),new Em(t)},t.hydrateRoot=function(e,t,s){if(!i(e))throw Error(l(299));var r=!1,a="",n=fi,o=bi,d=yi,c=null;return null!==s&&void 0!==s&&(!0===s.unstable_strictMode&&(r=!0),void 0!==s.identifierPrefix&&(a=s.identifierPrefix),void 0!==s.onUncaughtError&&(n=s.onUncaughtError),void 0!==s.onCaughtError&&(o=s.onCaughtError),void 0!==s.onRecoverableError&&(d=s.onRecoverableError),void 0!==s.unstable_transitionCallbacks&&s.unstable_transitionCallbacks,void 0!==s.formState&&(c=s.formState)),(t=Yu(e,1,!0,t,0,r,a,n,o,d,0,c)).context=Ju(null),s=t.current,(a=rn(r=Ee(r=Dd()))).callback=null,an(s,a,r),s=r,t.current.lanes=s,ke(t,s),Nc(t),e[De]=t.current,Uc(e),new Am(t)},t.version="19.1.1"},43:(e,t,s)=>{e.exports=s(288)},288:(e,t)=>{var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),x=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,g={};function f(e,t,s){this.props=e,this.context=t,this.refs=g,this.updater=s||p}function b(){}function y(e,t,s){this.props=e,this.context=t,this.refs=g,this.updater=s||p}f.prototype.isReactComponent={},f.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},f.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=f.prototype;var v=y.prototype=new b;v.constructor=y,h(v,f.prototype),v.isPureReactComponent=!0;var j=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},w=Object.prototype.hasOwnProperty;function _(e,t,r,a,n,l){return r=l.ref,{$$typeof:s,type:e,key:t,ref:void 0!==r?r:null,props:l}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===s}var S=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(){}function A(e,t,a,n,l){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var o,d,c=!1;if(null===e)c=!0;else switch(i){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case s:case r:c=!0;break;case m:return A((c=e._init)(e._payload),t,a,n,l)}}if(c)return l=l(e),c=""===n?"."+C(e,0):n,j(l)?(a="",null!=c&&(a=c.replace(S,"$&/")+"/"),A(l,t,a,"",function(e){return e})):null!=l&&(k(l)&&(o=l,d=a+(null==l.key||e&&e.key===l.key?"":(""+l.key).replace(S,"$&/")+"/")+c,l=_(o.type,d,void 0,0,0,o.props)),t.push(l)),1;c=0;var u,p=""===n?".":n+":";if(j(e))for(var h=0;h<e.length;h++)c+=A(n=e[h],t,a,i=p+C(n,h),l);else if("function"===typeof(h=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=x&&u[x]||u["@@iterator"])?u:null))for(e=h.call(e),h=0;!(n=e.next()).done;)c+=A(n=n.value,t,a,i=p+C(n,h++),l);else if("object"===i){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(E,E):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,n,l);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function P(e,t,s){if(null==e)return e;var r=[],a=0;return A(e,r,"","",function(e){return t.call(s,e,a++)}),r}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function F(){}t.Children={map:P,forEach:function(e,t,s){P(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=f,t.Fragment=a,t.Profiler=l,t.PureComponent=y,t.StrictMode=n,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return N.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,s){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=h({},e.props),a=e.key;if(null!=t)for(n in void 0!==t.ref&&void 0,void 0!==t.key&&(a=""+t.key),t)!w.call(t,n)||"key"===n||"__self"===n||"__source"===n||"ref"===n&&void 0===t.ref||(r[n]=t[n]);var n=arguments.length-2;if(1===n)r.children=s;else if(1<n){for(var l=Array(n),i=0;i<n;i++)l[i]=arguments[i+2];r.children=l}return _(e.type,a,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:i,_context:e},e},t.createElement=function(e,t,s){var r,a={},n=null;if(null!=t)for(r in void 0!==t.key&&(n=""+t.key),t)w.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(a[r]=t[r]);var l=arguments.length-2;if(1===l)a.children=s;else if(1<l){for(var i=Array(l),o=0;o<l;o++)i[o]=arguments[o+2];a.children=i}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===a[r]&&(a[r]=l[r]);return _(e,n,void 0,0,0,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.T,s={};N.T=s;try{var r=e(),a=N.S;null!==a&&a(s,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(F,L)}catch(n){L(n)}finally{N.T=t}},t.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},t.use=function(e){return N.H.use(e)},t.useActionState=function(e,t,s){return N.H.useActionState(e,t,s)},t.useCallback=function(e,t){return N.H.useCallback(e,t)},t.useContext=function(e){return N.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return N.H.useDeferredValue(e,t)},t.useEffect=function(e,t,s){var r=N.H;if("function"===typeof s)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return N.H.useId()},t.useImperativeHandle=function(e,t,s){return N.H.useImperativeHandle(e,t,s)},t.useInsertionEffect=function(e,t){return N.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.H.useMemo(e,t)},t.useOptimistic=function(e,t){return N.H.useOptimistic(e,t)},t.useReducer=function(e,t,s){return N.H.useReducer(e,t,s)},t.useRef=function(e){return N.H.useRef(e)},t.useState=function(e){return N.H.useState(e)},t.useSyncExternalStore=function(e,t,s){return N.H.useSyncExternalStore(e,t,s)},t.useTransition=function(){return N.H.useTransition()},t.version="19.1.1"},391:(e,t,s)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=s(4)},579:(e,t,s)=>{e.exports=s(799)},672:(e,t,s)=>{var r=s(43);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var l={d:{f:n,r:function(){throw Error(a(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");var o=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,t.createPortal=function(e,t){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,s){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:i,key:null==r?null:""+r,children:e,containerInfo:t,implementation:s}}(e,t,null,s)},t.flushSync=function(e){var t=o.T,s=l.p;try{if(o.T=null,l.p=2,e)return e()}finally{o.T=t,l.p=s,l.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,l.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&l.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var s=t.as,r=d(s,t.crossOrigin),a="string"===typeof t.integrity?t.integrity:void 0,n="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===s?l.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:n}):"script"===s&&l.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:n,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var s=d(t.as,t.crossOrigin);l.d.M(e,{crossOrigin:s,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&l.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var s=t.as,r=d(s,t.crossOrigin);l.d.L(e,s,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var s=d(t.as,t.crossOrigin);l.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:s,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else l.d.m(e)},t.requestFormReset=function(e){l.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,s){return o.H.useFormState(e,t,s)},t.useFormStatus=function(){return o.H.useHostTransitionStatus()},t.version="19.1.1"},799:(e,t)=>{var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(e,t,r){var a=null;if(void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),"key"in t)for(var n in r={},t)"key"!==n&&(r[n]=t[n]);else r=t;return t=r.ref,{$$typeof:s,type:e,key:a,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=a,t.jsxs=a},853:(e,t,s)=>{e.exports=s(896)},896:(e,t)=>{function s(e,t){var s=e.length;e.push(t);e:for(;0<s;){var r=s-1>>>1,a=e[r];if(!(0<n(a,t)))break e;e[r]=t,e[s]=a,s=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],s=e.pop();if(s!==t){e[0]=s;e:for(var r=0,a=e.length,l=a>>>1;r<l;){var i=2*(r+1)-1,o=e[i],d=i+1,c=e[d];if(0>n(o,s))d<a&&0>n(c,o)?(e[r]=c,e[d]=s,r=d):(e[r]=o,e[i]=s,r=i);else{if(!(d<a&&0>n(c,s)))break e;e[r]=c,e[d]=s,r=d}}}return t}function n(e,t){var s=e.sortIndex-t.sortIndex;return 0!==s?s:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var d=[],c=[],u=1,m=null,x=3,p=!1,h=!1,g=!1,f=!1,b="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function j(e){for(var t=r(c);null!==t;){if(null===t.callback)a(c);else{if(!(t.startTime<=e))break;a(c),t.sortIndex=t.expirationTime,s(d,t)}t=r(c)}}function N(e){if(g=!1,j(e),!h)if(null!==r(d))h=!0,_||(_=!0,w());else{var t=r(c);null!==t&&L(N,t.startTime-e)}}var w,_=!1,k=-1,S=5,C=-1;function E(){return!!f||!(t.unstable_now()-C<S)}function A(){if(f=!1,_){var e=t.unstable_now();C=e;var s=!0;try{e:{h=!1,g&&(g=!1,y(k),k=-1),p=!0;var n=x;try{t:{for(j(e),m=r(d);null!==m&&!(m.expirationTime>e&&E());){var l=m.callback;if("function"===typeof l){m.callback=null,x=m.priorityLevel;var i=l(m.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof i){m.callback=i,j(e),s=!0;break t}m===r(d)&&a(d),j(e)}else a(d);m=r(d)}if(null!==m)s=!0;else{var o=r(c);null!==o&&L(N,o.startTime-e),s=!1}}break e}finally{m=null,x=n,p=!1}s=void 0}}finally{s?w():_=!1}}}if("function"===typeof v)w=function(){v(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,T=P.port2;P.port1.onmessage=A,w=function(){T.postMessage(null)}}else w=function(){b(A,0)};function L(e,s){k=b(function(){e(t.unstable_now())},s)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(e){switch(x){case 1:case 2:case 3:var t=3;break;default:t=x}var s=x;x=t;try{return e()}finally{x=s}},t.unstable_requestPaint=function(){f=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var s=x;x=e;try{return t()}finally{x=s}},t.unstable_scheduleCallback=function(e,a,n){var l=t.unstable_now();switch("object"===typeof n&&null!==n?n="number"===typeof(n=n.delay)&&0<n?l+n:l:n=l,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:n,expirationTime:i=n+i,sortIndex:-1},n>l?(e.sortIndex=n,s(c,e),null===r(d)&&e===r(c)&&(g?(y(k),k=-1):g=!0,L(N,n-l))):(e.sortIndex=i,s(d,e),h||p||(h=!0,_||(_=!0,w()))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=x;return function(){var s=x;x=t;try{return e.apply(this,arguments)}finally{x=s}}}},950:(e,t,s)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=s(672)}},t={};function s(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,s),n.exports}s.m=e,s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce((t,r)=>(s.f[r](e,t),t),[])),s.u=e=>"static/js/"+e+".2055e5f4.chunk.js",s.miniCssF=e=>{},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="centrix-frontend:";s.l=(r,a,n,l)=>{if(e[r])e[r].push(a);else{var i,o;if(void 0!==n)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+n){i=u;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,s.nc&&i.setAttribute("nonce",s.nc),i.setAttribute("data-webpack",t+n),i.src=r),e[r]=[a];var m=(t,s)=>{i.onerror=i.onload=null,clearTimeout(x);var a=e[r];if(delete e[r],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach(e=>e(s)),t)return t(s)},x=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),o&&document.head.appendChild(i)}}})(),s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="/",(()=>{var e={792:0};s.f.j=(t,r)=>{var a=s.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var n=new Promise((s,r)=>a=e[t]=[s,r]);r.push(a[2]=n);var l=s.p+s.u(t),i=new Error;s.l(l,r=>{if(s.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var n=r&&("load"===r.type?"missing":r.type),l=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+n+": "+l+")",i.name="ChunkLoadError",i.type=n,i.request=l,a[1](i)}},"chunk-"+t,t)}};var t=(t,r)=>{var a,n,l=r[0],i=r[1],o=r[2],d=0;if(l.some(t=>0!==e[t])){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(o)o(s)}for(t&&t(r);d<l.length;d++)n=l[d],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0},r=self.webpackChunkcentrix_frontend=self.webpackChunkcentrix_frontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=s(43),a=s(391);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://127.0.0.1:8000/api/v1",l={login:async e=>{const t=await fetch(`${n}/users/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json().catch(()=>({}));if(!t.ok)throw new Error(s.message||"Login failed");if("error"===s.status)throw new Error(s.message||"Login failed");return"success"===s.status?s.data:s},getCurrentUser:async()=>l.authenticatedRequest("/users/me",{method:"GET"}),getToken:()=>sessionStorage.getItem("authToken"),setToken:e=>{sessionStorage.setItem("authToken",e)},removeToken:()=>{sessionStorage.removeItem("authToken")},getAuthHeaders:()=>{const e=l.getToken(),t={"Content-Type":"application/json"};return e&&(t.Authorization=`Bearer ${e}`),t},authenticatedRequest:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=l.getAuthHeaders(),r=e.startsWith("/")?e.substring(1):e,a=`${n.endsWith("/")?n.slice(0,-1):n}/${r}`,i=await fetch(a,{...t,headers:{...s,...t.headers}}),o=await i.json().catch(()=>({}));if(!i.ok){const e=new Error(o.message||"Request failed");throw e.response={data:o},e}if("error"===o.status){const e=new Error(o.message||"Request failed");throw e.response={data:o},e}return"success"===o.status?e.includes("/switch/")?o:o.data:o},schools:{getAll:async function(){let e=arguments.length>2?arguments[2]:void 0,t=arguments.length>3?arguments[3]:void 0,s=`/schools?page=${arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}&page_size=${arguments.length>1&&void 0!==arguments[1]?arguments[1]:20}`;return e&&(s+=`&search=${encodeURIComponent(e)}`),t&&(s+=`&ordering=${encodeURIComponent(t)}`),l.authenticatedRequest(s,{method:"GET"})},detect:async e=>{const t=await fetch(`${n}/schools/detect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e})}),s=await t.json().catch(()=>({}));if(!t.ok)throw new Error(s.message||"Failed to detect school");if("error"===s.status)throw new Error(s.message||"Failed to detect school");return"success"===s.status?s.data:s},getById:async e=>{const t=await fetch(`${n}/schools/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}),s=await t.json().catch(()=>({}));if(!t.ok)throw new Error(s.message||"Failed to fetch school");if("error"===s.status)throw new Error(s.message||"Failed to fetch school");return"success"===s.status?s.data:s},create:async e=>l.authenticatedRequest("/schools/create",{method:"POST",body:JSON.stringify(e)})},students:{getAll:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{page:t=1,page_size:s=20,search:r,admission_year:a,boarding_status:n,class_on_admission:i,current_only:o,exempted_from_religious_instruction:d,gender:c,max_age:u,min_age:m,ordering:x}=e;let p=`/students/admissions?page=${t}&page_size=${s}`;return r&&(p+=`&search=${encodeURIComponent(r)}`),void 0!==a&&(p+=`&admission_year=${a}`),n&&(p+=`&boarding_status=${encodeURIComponent(n)}`),i&&(p+=`&class_on_admission=${encodeURIComponent(i)}`),o&&(p+=`&current_only=${encodeURIComponent(o)}`),void 0!==d&&(p+=`&exempted_from_religious_instruction=${d}`),c&&(p+=`&gender=${encodeURIComponent(c)}`),void 0!==u&&(p+=`&max_age=${u}`),void 0!==m&&(p+=`&min_age=${m}`),x&&(p+=`&ordering=${encodeURIComponent(x)}`),l.authenticatedRequest(p,{method:"GET"})},getById:async e=>l.authenticatedRequest(`/students/admissions/${e}`,{method:"GET"}),create:async e=>l.authenticatedRequest("/students/admissions",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>l.authenticatedRequest(`/students/admissions/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>l.authenticatedRequest(`/students/admissions/${e}`,{method:"DELETE"}),bulkCreate:async e=>l.authenticatedRequest("/students/bulk-create",{method:"POST",body:JSON.stringify({students:e})}),bulkUpdate:async e=>l.authenticatedRequest("/students/bulk-update",{method:"PUT",body:JSON.stringify({students:e})}),bulkDelete:async e=>l.authenticatedRequest("/students/bulk-delete",{method:"DELETE",body:JSON.stringify({student_ids:e})}),getStats:async()=>l.authenticatedRequest("/students/statistics",{method:"GET"}),getDetailedFeatureStatus:async()=>l.authenticatedRequest("/students/features/detailed-status",{method:"GET"}),getStreams:async()=>l.authenticatedRequest("/students/streams/",{method:"GET"}),createStream:async e=>l.authenticatedRequest("/students/streams/",{method:"POST",body:JSON.stringify(e)}),createClass:async e=>{const t={...e,stream_id:e.stream,stream:void 0};return l.authenticatedRequest("/students/classes/",{method:"POST",body:JSON.stringify(t)})},getClasses:async()=>l.authenticatedRequest("/students/classes/",{method:"GET"}),updateClass:async(e,t)=>{const s={...t};return t.stream&&(s.stream_id=t.stream,delete s.stream),l.authenticatedRequest(`/students/classes/${e}/`,{method:"PUT",body:JSON.stringify(s)})},updateStream:async(e,t)=>l.authenticatedRequest(`/students/streams/${e}/`,{method:"PUT",body:JSON.stringify(t)}),deleteStream:async e=>l.authenticatedRequest(`/students/streams/${e}/`,{method:"DELETE"}),deleteClass:async e=>l.authenticatedRequest(`/students/classes/${e}/`,{method:"DELETE"}),associateParent:async(e,t)=>l.authenticatedRequest(`/students/admissions/${e}/parents`,{method:"POST",body:JSON.stringify(t)}),getParents:async e=>l.authenticatedRequest(`/students/admissions/${e}/parents`,{method:"GET"}),disassociateParent:async(e,t)=>l.authenticatedRequest(`/students/admissions/${e}/parents/${t}`,{method:"DELETE"})},featureFlags:{getAll:async()=>{const e=l.getAuthHeaders(),t=`${n}/switch/flags/`,s=await fetch(t,{method:"GET",headers:{...e}}),r=await s.json().catch(()=>({}));if(!s.ok){const e=new Error(r.message||"Request failed");throw e.response={data:r},e}if("error"===r.status){const e=new Error(r.message||"Request failed");throw e.response={data:r},e}return r},getById:async e=>l.authenticatedRequest(`/switch/flags/${e}/`,{method:"GET"}),checkFeature:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return l.authenticatedRequest("/switch/check",{method:"POST",body:JSON.stringify({feature_name:e,scope_type:t,scope_id:s})})},checkFeaturesBulk:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return l.authenticatedRequest("/switch/check/bulk",{method:"POST",body:JSON.stringify({features:e,scope_type:t,scope_id:s})})},getFeatureFlagStates:async(e,t,s)=>{let r="/switch/states/";const a=new URLSearchParams;return e&&a.append("feature_flag",e),t&&a.append("scope_type",t),s&&a.append("scope_id",s),a.toString()&&(r+=`?${a.toString()}`),l.authenticatedRequest(r,{method:"GET"})},create:async e=>l.authenticatedRequest("/switch/flags/",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>l.authenticatedRequest(`/switch/flags/${e}/`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>l.authenticatedRequest(`/switch/flags/${e}/`,{method:"DELETE"}),toggle:async e=>l.authenticatedRequest(`/switch/flags/${e}/toggle`,{method:"POST"})},featureFlagStates:{getAll:async()=>{const e=l.getAuthHeaders(),t=`${n}/switch/states/`,s=await fetch(t,{method:"GET",headers:{...e}}),r=await s.json().catch(()=>({}));if(!s.ok){const e=new Error(r.message||"Request failed");throw e.response={data:r},e}if("error"===r.status){const e=new Error(r.message||"Request failed");throw e.response={data:r},e}return r},getById:async e=>l.authenticatedRequest(`/switch/states/${e}/`,{method:"GET"}),create:async e=>l.authenticatedRequest("/switch/states/",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>l.authenticatedRequest(`/switch/states/${e}/`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>l.authenticatedRequest(`/switch/states/${e}/`,{method:"DELETE"})},users:{getAll:async e=>{const t=new URLSearchParams;null!==e&&void 0!==e&&e.page&&t.append("page",e.page.toString()),null!==e&&void 0!==e&&e.page_size&&t.append("page_size",e.page_size.toString()),null!==e&&void 0!==e&&e.search&&t.append("search",e.search),null!==e&&void 0!==e&&e.sort_by&&t.append("sort_by",e.sort_by),null!==e&&void 0!==e&&e.sort_direction&&t.append("sort_direction",e.sort_direction);const s=t.toString(),r=s?`/users/?${s}`:"/users/";return l.authenticatedRequest(r,{method:"GET"})},getById:async e=>l.authenticatedRequest(`/users/${e}`,{method:"GET"}),create:async e=>l.authenticatedRequest("/users/",{method:"POST",body:JSON.stringify(e)}),signup:async e=>l.authenticatedRequest("/users/signup",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>l.authenticatedRequest(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>l.authenticatedRequest(`/users/${e}`,{method:"DELETE"}),resetPassword:async(e,t)=>l.authenticatedRequest(`/users/password/reset/${e}`,{method:"POST",body:JSON.stringify({password:t})}),signinAs:async e=>l.authenticatedRequest("/users/signin-as",{method:"POST",body:JSON.stringify({user_id:e})})},parents:{getAll:async e=>{const t=new URLSearchParams;null!==e&&void 0!==e&&e.page&&t.append("page",e.page.toString()),null!==e&&void 0!==e&&e.page_size&&t.append("page_size",e.page_size.toString()),null!==e&&void 0!==e&&e.search&&t.append("search",e.search),null!==e&&void 0!==e&&e.relationship&&t.append("relationship",e.relationship),null!==e&&void 0!==e&&e.ordering&&t.append("ordering",e.ordering);const s=t.toString(),r=s?`/parents/?${s}`:"/parents/";return l.authenticatedRequest(r,{method:"GET"})},getById:async e=>l.authenticatedRequest(`/parents/${e}`,{method:"GET"}),create:async e=>l.authenticatedRequest("/parents/",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>l.authenticatedRequest(`/parents/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>l.authenticatedRequest(`/parents/${e}`,{method:"DELETE"}),getStudents:async e=>l.authenticatedRequest(`/students/parents/${e}/students`,{method:"GET"}),generateLoginCredentials:async e=>l.authenticatedRequest("/users/register/parent",{method:"POST",body:JSON.stringify({parent_id:e})}),resetPassword:async(e,t)=>l.authenticatedRequest(`/users/password/reset/${e}`,{method:"POST",body:JSON.stringify({password:t})})}},i=l;var o=s(579);const d=(0,r.createContext)(void 0),c=()=>{const e=(0,r.useContext)(d);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},u=e=>{let{children:t}=e;const[s,a]=(0,r.useState)({user:null,isAuthenticated:!1,isLoading:!0,error:null});(0,r.useEffect)(()=>{if(l.getToken()){(async()=>{try{var e,t;const s=await l.getCurrentUser(),r={id:s.id||"unknown",email:s.email||"",username:s.first_name||s.username||"user",is_pin_set:s.is_pin_set||!1,school_id:(null===(e=s.school)||void 0===e?void 0:e.id)||"",school_name:(null===(t=s.school)||void 0===t?void 0:t.name)||"",role:s.role||"user"};a(e=>({...e,user:r,isAuthenticated:!0,isLoading:!1}))}catch(s){console.error("Failed to fetch user data on app load:",s),l.removeToken(),a(e=>({...e,user:null,isAuthenticated:!1,isLoading:!1}))}})()}else a(e=>({...e,isLoading:!1}))},[]);const n={...s,login:async e=>{a(e=>({...e,isLoading:!0,error:null}));try{var t,s;const r={...e},n=await l.login(r);sessionStorage.removeItem("authToken"),n&&n.token&&sessionStorage.setItem("authToken",n.token);const i=await l.getCurrentUser(),o={id:i.id||"unknown",email:i.email||"",username:i.first_name||i.username||"user",is_pin_set:i.is_pin_set||!1,school_id:(null===(t=i.school)||void 0===t?void 0:t.id)||"",school_name:(null===(s=i.school)||void 0===s?void 0:s.name)||"",role:i.role||"user"};a({user:o,isAuthenticated:!0,isLoading:!1,error:null})}catch(r){console.error("Login error in AuthContext:",r),a(e=>({...e,isLoading:!1,error:r instanceof Error?r.message:"Login failed. Please try again."}))}},register:async e=>{a(e=>({...e,isLoading:!0,error:null}));try{await new Promise(e=>setTimeout(e,1e3));const t={id:"1",email:e.email,username:e.name,is_pin_set:!1,school_id:"",school_name:""};a({user:t,isAuthenticated:!0,isLoading:!1,error:null})}catch(t){a(e=>({...e,isLoading:!1,error:"Registration failed. Please try again."}))}},logout:()=>{l.removeToken(),a({user:null,isAuthenticated:!1,isLoading:!1,error:null})},signinAs:async e=>{a(e=>({...e,isLoading:!0,error:null}));try{var t,s;const r=await l.users.signinAs(e);sessionStorage.removeItem("authToken"),r&&r.token&&sessionStorage.setItem("authToken",r.token);const n=await l.getCurrentUser(),i={id:n.id||"unknown",email:n.email||"",username:n.first_name||n.username||"user",is_pin_set:n.is_pin_set||!1,school_id:(null===(t=n.school)||void 0===t?void 0:t.id)||"",school_name:(null===(s=n.school)||void 0===s?void 0:s.name)||"",role:n.role||"user"};a({user:i,isAuthenticated:!0,isLoading:!1,error:null})}catch(r){console.error("Signin as error in AuthContext:",r),a(e=>({...e,isLoading:!1,error:r instanceof Error?r.message:"Signin as failed. Please try again."}))}}};return(0,o.jsx)(d.Provider,{value:n,children:t})},m=(0,r.createContext)(void 0),x=e=>{let{children:t}=e;const{user:s}=c(),[a,n]=(0,r.useState)(null),[l,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(s&&s.school_id&&s.school_name){const e={id:s.school_id,name:s.school_name};n(e),sessionStorage.setItem("currentSchool",JSON.stringify(e))}else{const t=sessionStorage.getItem("currentSchool");if(t)try{n(JSON.parse(t))}catch(e){console.error("Error parsing stored school:",e)}}i(!1)},[s]);return(0,o.jsx)(m.Provider,{value:{currentSchool:a,setCurrentSchool:e=>{n(e),e?sessionStorage.setItem("currentSchool",JSON.stringify(e)):sessionStorage.removeItem("currentSchool")},isLoading:l},children:t})},p={root:["create_school","view_all_schools","view_own_school","register_users","assign_root_super_admin","assign_admin","student_crud","view_students","view_all_users","view_school_users","manage_users","access_reports","access_fees","access_settings","access_customer_support","access_admin_panel","access_billing","manage_billing_features","manage_billing_plans","view_billing_dashboard","manage_school_subscriptions","view_invoices","manage_invoices"],super_admin:["view_own_school","assign_admin","student_crud","view_students","view_school_users","manage_users","access_reports","access_fees","access_settings","access_customer_support","access_admin_panel","access_billing","manage_billing_features","manage_billing_plans","view_billing_dashboard","manage_school_subscriptions","view_invoices","manage_invoices"],admin:["view_own_school","student_crud","view_students","access_reports","access_fees","access_settings"],user:["view_own_school","view_students"],parent:["view_students"]},h=(0,r.createContext)(void 0),g=()=>{const e=(0,r.useContext)(h);if(void 0===e)throw new Error("useRBAC must be used within an RBACProvider");return e},f=e=>{let{children:t}=e;const{user:s}=c(),a=(0,r.useMemo)(()=>{if(null===s||void 0===s||!s.role)return"user";return["root","super_admin","admin","user","parent"].includes(s.role)?s.role:"user"},[null===s||void 0===s?void 0:s.role]),n=e=>(p[a]||[]).includes(e),l=e=>e.some(e=>n(e)),i={userRole:a,hasPermission:n,hasAnyPermission:l,hasAllPermissions:e=>e.every(e=>n(e)),canAccess:e=>0===e.length||l(e),getRequiredRole:e=>{const t=["root","super_admin","admin","user","parent"];for(const s of t)if(p[s].includes(e))return s;return null}};return(0,o.jsx)(h.Provider,{value:i,children:t})};var b={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},y=r.createContext&&r.createContext(b),v=["attr","size","title"];function j(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;s[r]=e[r]}return s}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},N.apply(this,arguments)}function w(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?w(Object(s),!0).forEach(function(t){k(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):w(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function k(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function S(e){return e&&e.map((e,t)=>r.createElement(e.tag,_({key:t},e.attr),S(e.child)))}function C(e){return t=>r.createElement(E,N({attr:_({},e.attr)},t),S(e.child))}function E(e){var t=t=>{var s,{attr:a,size:n,title:l}=e,i=j(e,v),o=n||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),r.createElement("svg",N({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,i,{className:s,style:_(_({color:e.color||t.color},t.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),l&&r.createElement("title",null,l),e.children)};return void 0!==y?r.createElement(y.Consumer,null,e=>t(e)):t(b)}function A(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.034 8 8 119.033 8 256s111.034 248 248 248 248-111.034 248-248S392.967 8 256 8zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676zM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676z"},child:[]}]})(e)}function P(e){return C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(e)}function T(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(e)}function L(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(e)}function F(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(e)}function D(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(e)}function O(e){return C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function z(e){return C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(e)}function R(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(e)}function M(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(e)}function I(e){return C({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M512.1 191l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0L552 6.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zm-10.5-58.8c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.7-82.4 14.3-52.8 52.8zM386.3 286.1l33.7 16.8c10.1 5.8 14.5 18.1 10.5 29.1-8.9 24.2-26.4 46.4-42.6 65.8-7.4 8.9-20.2 11.1-30.3 5.3l-29.1-16.8c-16 13.7-34.6 24.6-54.9 31.7v33.6c0 11.6-8.3 21.6-19.7 23.6-24.6 4.2-50.4 4.4-75.9 0-11.5-2-20-11.9-20-23.6V418c-20.3-7.2-38.9-18-54.9-31.7L74 403c-10 5.8-22.9 3.6-30.3-5.3-16.2-19.4-33.3-41.6-42.2-65.7-4-10.9.4-23.2 10.5-29.1l33.3-16.8c-3.9-20.9-3.9-42.4 0-63.4L12 205.8c-10.1-5.8-14.6-18.1-10.5-29 8.9-24.2 26-46.4 42.2-65.8 7.4-8.9 20.2-11.1 30.3-5.3l29.1 16.8c16-13.7 34.6-24.6 54.9-31.7V57.1c0-11.5 8.2-21.5 19.6-23.5 24.6-4.2 50.5-4.4 76-.1 11.5 2 20 11.9 20 23.6v33.6c20.3 7.2 38.9 18 54.9 31.7l29.1-16.8c10-5.8 22.9-3.6 30.3 5.3 16.2 19.4 33.2 41.6 42.1 65.8 4 10.9.1 23.2-10 29.1l-33.7 16.8c3.9 21 3.9 42.5 0 63.5zm-117.6 21.1c59.2-77-28.7-164.9-105.7-105.7-59.2 77 28.7 164.9 105.7 105.7zm243.4 182.7l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0l8.2-14.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zM501.6 431c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.6-82.4 14.3-52.8 52.8z"},child:[]}]})(e)}function U(e){return C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(e)}function B(e){return C({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(e)}function $(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(e)}function H(e){return C({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function q(e){return C({tag:"svg",attr:{viewBox:"0 0 192 512"},child:[{tag:"path",attr:{d:"M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z"},child:[]}]})(e)}function W(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(e)}function V(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 168v-16c0-13.255 10.745-24 24-24h360V80c0-21.367 25.899-32.042 40.971-16.971l80 80c9.372 9.373 9.372 24.569 0 33.941l-80 80C409.956 271.982 384 261.456 384 240v-48H24c-13.255 0-24-10.745-24-24zm488 152H128v-48c0-21.314-25.862-32.08-40.971-16.971l-80 80c-9.372 9.373-9.372 24.569 0 33.941l80 80C102.057 463.997 128 453.437 128 432v-48h360c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24z"},child:[]}]})(e)}function G(e){return C({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function K(e){return C({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(e)}function Q(e){return C({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function Y(e){return C({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(e)}function J(e){return C({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"},child:[]}]})(e)}function Z(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(e)}function X(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(e)}function ee(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 176.001C512 273.203 433.202 352 336 352c-11.22 0-22.19-1.062-32.827-3.069l-24.012 27.014A23.999 23.999 0 0 1 261.223 384H224v40c0 13.255-10.745 24-24 24h-40v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-78.059c0-6.365 2.529-12.47 7.029-16.971l161.802-161.802C163.108 213.814 160 195.271 160 176 160 78.798 238.797.001 335.999 0 433.488-.001 512 78.511 512 176.001zM336 128c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z"},child:[]}]})(e)}function te(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(e)}function se(e){return C({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(e)}function re(e){return C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function ae(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(e)}function ne(e){return C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(e)}function le(e){return C({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M0 224v272c0 8.84 7.16 16 16 16h80V192H32c-17.67 0-32 14.33-32 32zm360-48h-24v-40c0-4.42-3.58-8-8-8h-16c-4.42 0-8 3.58-8 8v64c0 4.42 3.58 8 8 8h48c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zm137.75-63.96l-160-106.67a32.02 32.02 0 0 0-35.5 0l-160 106.67A32.002 32.002 0 0 0 128 138.66V512h128V368c0-8.84 7.16-16 16-16h96c8.84 0 16 7.16 16 16v144h128V138.67c0-10.7-5.35-20.7-14.25-26.63zM320 256c-44.18 0-80-35.82-80-80s35.82-80 80-80 80 35.82 80 80-35.82 80-80 80zm288-64h-64v320h80c8.84 0 16-7.16 16-16V224c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function ie(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function oe(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"},child:[]}]})(e)}function de(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(e)}function ce(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z"},child:[]}]})(e)}function ue(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"},child:[]}]})(e)}function me(e){return C({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function xe(e){return C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function pe(e){return C({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"},child:[]}]})(e)}function he(e){return C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M319.4 320.6L224 416l-95.4-95.4C57.1 323.7 0 382.2 0 454.4v9.6c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-9.6c0-72.2-57.1-130.7-128.6-133.8zM13.6 79.8l6.4 1.5v58.4c-7 4.2-12 11.5-12 20.3 0 8.4 4.6 15.4 11.1 19.7L3.5 242c-1.7 6.9 2.1 14 7.6 14h41.8c5.5 0 9.3-7.1 7.6-14l-15.6-62.3C51.4 175.4 56 168.4 56 160c0-8.8-5-16.1-12-20.3V87.1l66 15.9c-8.6 17.2-14 36.4-14 57 0 70.7 57.3 128 128 128s128-57.3 128-128c0-20.6-5.3-39.8-14-57l96.3-23.2c18.2-4.4 18.2-27.1 0-31.5l-190.4-46c-13-3.1-26.7-3.1-39.7 0L13.6 48.2c-18.1 4.4-18.1 27.2 0 31.6z"},child:[]}]})(e)}function ge(e){return C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function fe(e){return C({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}const be=e=>{let{currentPage:t,onPageChange:s}=e;const{logout:r}=c(),{userRole:a,hasPermission:n}=g(),l=[{id:"students",label:"Students",icon:he,requiredPermissions:["view_students"]},..."root"===a||"super_admin"===a?[{id:"fees",label:"Fees",icon:se,requiredPermissions:["access_fees"]}]:[],{id:"reports",label:"Reports",icon:T,requiredPermissions:["access_reports"]},{id:"admin-panel",label:"Admin Panel",icon:M,requiredPermissions:["access_admin_panel"],children:[{id:"admin-users",label:"Users",icon:fe},{id:"admin-parents",label:"Parents",icon:pe},..."super_admin"!==a?[{id:"admin-schools",label:"Schools",icon:le}]:[],..."super_admin"!==a?[{id:"admin-features",label:"Switch Board",icon:M}]:[],{id:"admin-activity-log",label:"Activity Log",icon:Z,requiredPermissions:["access_admin_panel"]},{id:"admin-billing",label:"Billing",icon:B,requiredPermissions:["access_billing"],children:[{id:"admin-billing-dashboard",label:"Dashboard",icon:L},..."root"===a?[{id:"admin-billing-plans",label:"Billing Plans",icon:I}]:[]]}]}];return(0,o.jsxs)("div",{className:"w-56 bg-white h-screen shadow-lg border-r border-gray-200",children:[(0,o.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,o.jsxs)("button",{onClick:r,className:"flex items-center space-x-2 hover:bg-gray-50 rounded-lg p-2 transition-all duration-200 group",title:"Click to logout",children:[(0,o.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:(i={className:"w-5 h-5 text-white"},C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"},child:[]}]})(i))}),(0,o.jsx)("h1",{className:"text-lg font-bold text-gray-800 group-hover:text-blue-600 transition-colors duration-200",children:"Centrix"})]})}),(0,o.jsx)("nav",{className:"p-3",children:(0,o.jsx)("ul",{className:"space-y-1",children:l.map(e=>!e.requiredPermissions||e.requiredPermissions.some(e=>n(e))?(0,o.jsxs)("li",{children:[(0,o.jsxs)("button",{onClick:()=>{"admin-panel"===e.id?s("admin-users"):"admin-billing"===e.id?s("admin-billing-dashboard"):s(e.id)},className:"w-full flex items-center justify-between px-3 py-2 rounded-md text-left transition-all duration-200 group "+(t===e.id||e.children&&e.children.some(e=>e.id===t)?"bg-blue-50 text-blue-700 border-l-4 border-blue-500 shadow-sm":"text-gray-600 hover:bg-gray-50 hover:text-gray-800"),children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[e.icon({className:"w-4 h-4 "+(t===e.id||e.children&&e.children.some(e=>e.id===t)?"text-blue-600":"text-gray-400 group-hover:text-gray-600")}),(0,o.jsx)("span",{className:"text-xs font-medium",children:e.label})]}),e.children&&O({className:"w-3 h-3 transition-transform duration-200 "+(t===e.id||e.children&&e.children.some(e=>e.id===t)?"text-blue-600":"text-gray-400")})]}),e.children&&(0,o.jsx)("ul",{className:"mt-1 ml-4 space-y-1",children:e.children.map(e=>!e.requiredPermissions||e.requiredPermissions.some(e=>n(e))?(0,o.jsxs)("li",{children:[(0,o.jsxs)("button",{onClick:()=>{"admin-billing"===e.id?s("admin-billing-dashboard"):s(e.id)},className:"w-full flex items-center space-x-2 px-2 py-1 rounded text-left transition-all duration-200 "+(t===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:bg-gray-50 hover:text-gray-800"),children:[e.icon({className:"w-3 h-3 "+(t===e.id?"text-blue-600":"text-gray-400")}),(0,o.jsx)("span",{className:"text-xs",children:e.label})]}),e.children&&(t===e.id||e.children.some(e=>e.id===t))&&(0,o.jsx)("ul",{className:"mt-1 ml-4 space-y-1",children:e.children.map(e=>(0,o.jsx)("li",{children:(0,o.jsxs)("button",{onClick:()=>s(e.id),className:"w-full flex items-center space-x-2 px-2 py-1 rounded text-left transition-all duration-200 "+(t===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:bg-gray-50 hover:text-gray-800"),children:[e.icon({className:"w-3 h-3 "+(t===e.id?"text-blue-600":"text-gray-400")}),(0,o.jsx)("span",{className:"text-xs",children:e.label})]})},e.id))})]},e.id):null)})]},e.id):null)})})]});var i},ye=e=>{let{pageTitle:t}=e;const{logout:s,user:a}=c(),n=r.useMemo(()=>(null===a||void 0===a?void 0:a.username)||"User",[null===a||void 0===a?void 0:a.username]),l=r.useMemo(()=>`${(null===a||void 0===a?void 0:a.role)||"User"} \u2022 ${(null===a||void 0===a?void 0:a.school_name)||"Default School"}`,[null===a||void 0===a?void 0:a.role,null===a||void 0===a?void 0:a.school_name]);return(0,o.jsx)("div",{className:"bg-white border-b border-gray-200 px-4 py-3",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsx)("div",{children:(0,o.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:t})}),(0,o.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1 bg-blue-50 rounded-lg",children:[(i={className:"w-4 h-4 text-blue-600"},C({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"},child:[]}]})(i)),(0,o.jsx)("div",{className:"text-sm",children:(0,o.jsx)("p",{className:"font-medium text-blue-900",children:(null===a||void 0===a?void 0:a.school_name)||"Default School"})})]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("button",{className:"p-1.5 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-md transition-all duration-200",children:J({className:"w-4 h-4"})}),(0,o.jsx)("button",{className:"p-1.5 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-md transition-all duration-200",children:ce({className:"w-4 h-4"})}),(0,o.jsxs)("button",{className:"p-1.5 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-md transition-all duration-200 relative",children:[P({className:"w-4 h-4"}),(0,o.jsx)("span",{className:"absolute -top-0.5 -right-0.5 bg-red-500 text-white text-xs rounded-full w-3 h-3 flex items-center justify-center",children:"3"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsx)("p",{className:"text-xs font-medium text-gray-900",children:n}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:l})]}),(0,o.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:ge({className:"w-4 h-4 text-white"})}),(0,o.jsx)("button",{onClick:s,className:"p-1.5 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-md transition-all duration-200",title:"Logout",children:de({className:"w-4 h-4"})})]})]})]})});var i};var ve=s(950);const je=e=>{var t,s,a,n;let{student:i,isOpen:d,onClose:c}=e;const[u,m]=(0,r.useState)([]),[x,p]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),[f,b]=(0,r.useState)([]),[y,v]=(0,r.useState)(!1),[j,N]=(0,r.useState)({parent_id:"",relationship_type:"",is_primary_contact:!1,is_emergency_contact:!1,can_pick_up:!1,notes:""}),[w,_]=(0,r.useState)({}),[k,S]=(0,r.useState)(""),[C,E]=(0,r.useState)(!1),A=(0,r.useCallback)(async()=>{if(null!==i&&void 0!==i&&i.id){p(!0);try{console.log("Fetching parents for student:",i.id);const e=await l.students.getParents(i.id);let t;if(console.log("API response:",e),e.data&&e.data.results)t=e.data.results,console.log("Using wrapped response format");else{if(!e.results)return void console.error("Unexpected response format:",e);t=e.results,console.log("Using direct response format")}console.log("Parents results:",t),console.log("Setting studentParents state with:",t),m(t)}catch(e){console.error("Error fetching student parents:",e)}finally{p(!1)}}},[null===i||void 0===i?void 0:i.id]),P=()=>{g(!1),N({parent_id:"",relationship_type:"",is_primary_contact:!1,is_emergency_contact:!1,can_pick_up:!1,notes:""}),_({}),S(""),E(!1)},T=async()=>{v(!0);try{const e=await l.parents.getAll({page:1,page_size:100});b(e.results||[])}catch(e){console.error("Error fetching parents list:",e)}finally{v(!1)}},L=e=>w[e]&&w[e].length>0?w[e][0]:null;return(0,r.useEffect)(()=>{d&&i&&A()},[d,i,A]),(0,r.useEffect)(()=>{const e=e=>{e.target.closest(".parent-dropdown-container")||(E(!1),S(""))};return C&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[C]),console.log("StudentModal render - studentParents state:",u),console.log("StudentModal render - loadingParents state:",x),d&&i?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4",children:(0,o.jsxs)("div",{className:"bg-white shadow-xl max-w-4xl w-full max-h-[85vh] overflow-visible relative",children:[(0,o.jsx)("button",{onClick:c,className:"absolute -top-8 -right-8 w-12 h-12 bg-red-300/80 hover:bg-red-400/90 text-white rounded-full shadow-lg transition-all duration-200 z-[9999] flex items-center justify-center",children:me({className:"w-5 h-5"})}),(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-white",children:[(0,o.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-3 rounded-lg border border-blue-200 shadow-sm mr-4",children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center shadow-lg",children:ge({className:"w-8 h-8 text-white"})}),(0,o.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center border-2 border-white shadow-sm",children:(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-white rounded-full"})})]})}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:i.fullName||i.pupil_name||"Student Name"}),(0,o.jsxs)("div",{className:"space-y-0.5 text-xs text-gray-600",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Gender:"}),(0,o.jsx)("span",{children:i.gender||"N/A"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Status:"}),(0,o.jsx)("span",{className:"text-green-600 font-medium",children:"Active"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Age:"}),(0,o.jsx)("span",{children:i.dateOfBirth?(new Date).getFullYear()-new Date(i.dateOfBirth).getFullYear()+" years":"N/A"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Admission #:"}),(0,o.jsx)("span",{className:"font-mono",children:i.admissionNumber||"N/A"})]})]})]})]}),(0,o.jsx)("div",{className:"p-3 relative overflow-y-auto max-h-[calc(75vh-120px)]",children:(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-3 border border-blue-200 shadow-sm",children:[(0,o.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,o.jsx)("h3",{className:"text-sm font-bold text-blue-900",children:"Student Info"})}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-blue-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-blue-700",children:"Student ID:"}),(0,o.jsx)("span",{className:"text-xs font-medium text-blue-900 bg-blue-50 px-2 py-0.5 rounded",children:i.id||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-blue-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-blue-700",children:"Admission #:"}),(0,o.jsx)("span",{className:"text-xs font-medium text-blue-900 bg-blue-50 px-2 py-0.5 rounded",children:i.admissionNumber||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-blue-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-blue-700",children:"Email:"}),(0,o.jsx)("span",{className:"text-xs text-blue-900",children:"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-blue-700",children:"Phone:"}),(0,o.jsx)("span",{className:"text-xs text-blue-900",children:i.guardianPhone||i.contactInfo||"N/A"})]})]})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-3 border border-green-200 shadow-sm",children:[(0,o.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,o.jsx)("h3",{className:"text-sm font-bold text-green-900",children:"Academic Info"})}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-green-700",children:"School:"}),(0,o.jsx)("span",{className:"text-xs text-green-900",children:"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-green-700",children:"Class On Admission:"}),(0,o.jsx)("span",{className:"text-xs text-green-900",children:i.class_on_admission?`${i.class_on_admission.name} - ${(null===(t=i.class_on_admission.stream)||void 0===t?void 0:t.name)||"No Stream"}`:i.classOnAdmission||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-green-700",children:"Current Class:"}),(0,o.jsx)("span",{className:"text-xs text-green-900",children:i.current_class?`${i.current_class.name} - ${(null===(s=i.current_class.stream)||void 0===s?void 0:s.name)||"No Stream"}`:i.currentClass||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-green-700",children:"NEMIS Number:"}),(0,o.jsx)("span",{className:"text-xs font-medium text-green-900 bg-green-50 px-2 py-0.5 rounded",children:i.nemisNumber||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-green-700",children:"Assessment Number:"}),(0,o.jsx)("span",{className:"text-xs font-medium text-green-900 bg-green-50 px-2 py-0.5 rounded",children:i.assessmentNumber||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-green-700",children:"Attendance:"}),(0,o.jsx)("span",{className:"text-xs font-medium text-green-900 bg-green-50 px-2 py-0.5 rounded",children:"95%"})]})]})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-3 border border-orange-200 shadow-sm",children:[(0,o.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,o.jsx)("h3",{className:"text-sm font-bold text-orange-900",children:"Other Info"})}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-orange-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-orange-700",children:"Joined:"}),(0,o.jsx)("span",{className:"text-xs font-medium text-orange-900 bg-orange-50 px-2 py-0.5 rounded",children:i.dateOfAdmission||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-orange-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-orange-700",children:"Source:"}),(0,o.jsx)("span",{className:"text-xs text-orange-900",children:"Direct"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-orange-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-orange-700",children:"Email Verified:"}),(0,o.jsx)("span",{className:"text-xs font-medium text-orange-900 bg-orange-50 px-2 py-0.5 rounded",children:"Yes"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-orange-700",children:"Medical:"}),(0,o.jsx)("span",{className:"text-xs text-orange-900",children:"No issues"})]})]})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-3 border border-red-200 shadow-sm",children:[(0,o.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,o.jsx)("h3",{className:"text-sm font-bold text-red-900",children:"Health & Special Needs"})}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-red-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-red-700",children:"Special Need:"}),(0,o.jsx)("span",{className:"text-xs font-medium px-2 py-0.5 rounded "+(i.hasSpecialNeed?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:i.hasSpecialNeed?"Yes":"No"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-red-700",children:"Preferred Hospital:"}),(0,o.jsx)("span",{className:"text-xs text-red-900",children:i.preferredHospital||"N/A"})]})]}),i.hasSpecialNeed&&i.specialNeed&&(0,o.jsx)("div",{className:"mt-2 pt-2 border-t border-red-200",children:(0,o.jsxs)("div",{className:"flex justify-between items-start py-1",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-red-700",children:"Special Need Description:"}),(0,o.jsx)("span",{className:"text-xs text-red-900 max-w-xs text-right",children:i.specialNeed})]})}),i.healthInfo&&(0,o.jsx)("div",{className:"mt-2 pt-2 border-t border-red-200",children:(0,o.jsxs)("div",{className:"flex justify-between items-start py-1",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-red-700",children:"Health Information:"}),(0,o.jsx)("span",{className:"text-xs text-red-900 max-w-xs text-right",children:i.healthInfo})]})})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-3 border border-purple-200 shadow-sm",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[pe({className:"w-4 h-4 text-purple-700"}),(0,o.jsx)("h3",{className:"text-sm font-bold text-purple-900",children:"Parents"})]}),(0,o.jsx)("button",{onClick:()=>{g(!0),T()},className:"p-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors duration-200 flex items-center justify-center",title:"Add Parent",children:re({className:"w-3 h-3"})})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(console.log("Rendering Parents card - studentParents:",u,"length:",u.length),null),x?(0,o.jsx)("div",{className:"text-center py-2",children:(0,o.jsx)("span",{className:"text-xs text-purple-600",children:"Loading parents..."})}):u.length>0?u.map((e,t)=>(0,o.jsxs)("div",{className:"bg-white rounded-lg p-2 border border-purple-200 "+(t>0?"mt-2":""),children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-purple-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-purple-700",children:"Name:"}),(0,o.jsxs)("span",{className:"text-xs font-medium text-purple-900 bg-purple-50 px-1.5 py-0.5 rounded",children:[e.parent_details.first_name," ",e.parent_details.last_name]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-purple-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-purple-700",children:"Relationship:"}),(0,o.jsx)("span",{className:"text-xs text-purple-900",children:e.relationship_type})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-purple-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-purple-700",children:"Email:"}),(0,o.jsx)("span",{className:"text-xs text-purple-900",children:e.parent_details.email})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-purple-700",children:"Phone:"}),(0,o.jsx)("span",{className:"text-xs text-purple-900",children:e.parent_details.phone})]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,o.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.is_primary_contact&&(0,o.jsx)("span",{className:"text-xs bg-green-100 text-green-800 px-1.5 py-0.5 rounded",children:"Primary"}),e.is_emergency_contact&&(0,o.jsx)("span",{className:"text-xs bg-red-100 text-red-800 px-1.5 py-0.5 rounded",children:"Emergency"}),e.can_pick_up&&(0,o.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-1.5 py-0.5 rounded",children:"Pick Up"})]}),(0,o.jsxs)("button",{onClick:()=>(async e=>{if(null!==i&&void 0!==i&&i.id&&window.confirm("Are you sure you want to dis-associate this parent from the student?"))try{await l.students.disassociateParent(i.id,e),console.log("Parent dis-associated successfully"),A()}catch(t){console.error("Error dis-associating parent:",t),alert("Failed to dis-associate parent. Please try again.")}})(e.id),className:"text-xs bg-red-100 text-red-800 px-1.5 py-0.5 rounded hover:bg-red-200 transition-colors duration-200 flex items-center gap-1",title:"Dis-associate parent",children:[xe({className:"w-3 h-3"}),"Remove"]})]})]},e.id)):(0,o.jsx)("div",{className:"text-center py-2",children:(0,o.jsx)("span",{className:"text-xs text-purple-600",children:"No parents associated"})})]})]})]})}),(0,o.jsx)("div",{className:"bg-white border-t border-gray-200 p-3",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("div",{className:"text-xs text-gray-700 flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Last updated:"}),(0,o.jsx)("span",{className:"font-medium",children:(new Date).toLocaleDateString()})]}),(0,o.jsxs)("div",{className:"flex space-x-2",children:[(0,o.jsxs)("button",{className:"flex items-center space-x-1.5 px-3 py-1.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-md hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-105",children:[H({className:"w-3 h-3"}),(0,o.jsx)("span",{className:"text-xs font-medium",children:"Edit"})]}),(0,o.jsxs)("button",{className:"flex items-center space-x-1.5 px-3 py-1.5 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-md hover:from-purple-700 hover:to-purple-800 transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-105",children:[Q({className:"w-3 h-3"}),(0,o.jsx)("span",{className:"text-xs font-medium",children:"View Profile"})]})]})]})})]})}),h&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black transition-opacity duration-500 ease-out z-[10000] "+(h?"bg-opacity-50":"bg-opacity-0 pointer-events-none"),children:(0,o.jsxs)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-500 ease-out flex flex-col "+(h?"translate-x-0":"translate-x-full"),children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-elegant",children:"Add Parent"}),(0,o.jsxs)("p",{className:"text-xs text-gray-500 mt-1 font-modern",children:["Associate parent with ",(null===i||void 0===i?void 0:i.fullName)||(null===i||void 0===i?void 0:i.pupil_name)]})]}),(0,o.jsx)("button",{onClick:P,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,o.jsxs)("div",{className:"p-6 space-y-4",children:[w.non_field_errors&&w.non_field_errors.length>0&&(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-xs text-red-800",children:w.non_field_errors[0]})})]})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Parent *"}),y?(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,o.jsx)("span",{className:"text-xs text-gray-500",children:"Loading parents..."})]}):(0,o.jsxs)("div",{className:"relative parent-dropdown-container",children:[(0,o.jsx)("div",{className:"w-full px-3 py-2 border rounded-lg focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-transparent transition-all duration-200 bg-gray-50 focus-within:bg-white text-xs cursor-pointer "+(L("parent_id")?"border-red-300 focus-within:ring-red-500":"border-gray-200"),onClick:()=>E(!C),children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("span",{className:j.parent_id?"text-gray-900":"text-gray-500",children:j.parent_id?(null===(a=f.find(e=>e.id===j.parent_id))||void 0===a?void 0:a.full_name)+" ("+(null===(n=f.find(e=>e.id===j.parent_id))||void 0===n?void 0:n.relationship)+")":"Select a parent"}),(0,o.jsx)("svg",{className:"w-4 h-4 text-gray-400 transition-transform duration-200 "+(C?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),C&&(0,o.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[(0,o.jsx)("div",{className:"p-2 border-b border-gray-100",children:(0,o.jsx)("input",{type:"text",placeholder:"Search parents...",value:k,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 text-xs border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onClick:e=>e.stopPropagation()})}),(0,o.jsxs)("div",{className:"max-h-48 overflow-y-auto",children:[f.filter(e=>e.full_name.toLowerCase().includes(k.toLowerCase())||e.relationship.toLowerCase().includes(k.toLowerCase())||e.email.toLowerCase().includes(k.toLowerCase())).map(e=>(0,o.jsxs)("div",{className:"px-3 py-2 text-xs hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>{N(t=>({...t,parent_id:e.id})),E(!1),S(""),w.parent_id&&_(e=>({...e,parent_id:[]}))},children:[(0,o.jsx)("div",{className:"font-medium text-gray-900",children:e.full_name}),(0,o.jsxs)("div",{className:"text-gray-500 text-xs",children:[e.relationship," \u2022 ",e.email]})]},e.id)),0===f.filter(e=>e.full_name.toLowerCase().includes(k.toLowerCase())||e.relationship.toLowerCase().includes(k.toLowerCase())||e.email.toLowerCase().includes(k.toLowerCase())).length&&(0,o.jsx)("div",{className:"px-3 py-2 text-xs text-gray-500 text-center",children:"No parents found"})]})]})]}),L("parent_id")&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:L("parent_id")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Relationship Type *"}),(0,o.jsxs)("select",{value:j.relationship_type,onChange:e=>{N(t=>({...t,relationship_type:e.target.value})),w.relationship_type&&_(e=>({...e,relationship_type:[]}))},className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(L("relationship_type")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"",children:"Select relationship type"}),(0,o.jsx)("option",{value:"Father",children:"Father"}),(0,o.jsx)("option",{value:"Mother",children:"Mother"}),(0,o.jsx)("option",{value:"Guardian",children:"Guardian"}),(0,o.jsx)("option",{value:"Other",children:"Other"})]}),L("relationship_type")&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:L("relationship_type")})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",id:"is_primary_contact",checked:j.is_primary_contact,onChange:e=>{N(t=>({...t,is_primary_contact:e.target.checked})),w.is_primary_contact&&_(e=>({...e,is_primary_contact:[]}))},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 "+(L("is_primary_contact")?"border-red-300":"")}),(0,o.jsx)("label",{htmlFor:"is_primary_contact",className:"ml-2 text-xs text-gray-700",children:"Primary Contact"})]}),L("is_primary_contact")&&(0,o.jsx)("p",{className:"mt-1 ml-6 text-xs text-red-600",children:L("is_primary_contact")})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",id:"is_emergency_contact",checked:j.is_emergency_contact,onChange:e=>{N(t=>({...t,is_emergency_contact:e.target.checked})),w.is_emergency_contact&&_(e=>({...e,is_emergency_contact:[]}))},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 "+(L("is_emergency_contact")?"border-red-300":"")}),(0,o.jsx)("label",{htmlFor:"is_emergency_contact",className:"ml-2 text-xs text-gray-700",children:"Emergency Contact"})]}),L("is_emergency_contact")&&(0,o.jsx)("p",{className:"mt-1 ml-6 text-xs text-red-600",children:L("is_emergency_contact")})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",id:"can_pick_up",checked:j.can_pick_up,onChange:e=>{N(t=>({...t,can_pick_up:e.target.checked})),w.can_pick_up&&_(e=>({...e,can_pick_up:[]}))},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 "+(L("can_pick_up")?"border-red-300":"")}),(0,o.jsx)("label",{htmlFor:"can_pick_up",className:"ml-2 text-xs text-gray-700",children:"Can Pick Up"})]}),L("can_pick_up")&&(0,o.jsx)("p",{className:"mt-1 ml-6 text-xs text-red-600",children:L("can_pick_up")})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Notes"}),(0,o.jsx)("textarea",{value:j.notes,onChange:e=>{N(t=>({...t,notes:e.target.value})),w.notes&&_(e=>({...e,notes:[]}))},className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(L("notes")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Additional notes about this parent relationship",rows:3}),L("notes")&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:L("notes")})]})]})}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-100 flex-shrink-0",children:[(0,o.jsx)("button",{onClick:P,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors duration-200",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if(null!==i&&void 0!==i&&i.id&&j.parent_id&&j.relationship_type)try{await l.students.associateParent(i.id,j),console.log("Parent associated successfully"),P(),A()}catch(r){var e,t,s;if(console.error("Error associating parent:",r),console.log("Error response data:",null===(e=r.response)||void 0===e?void 0:e.data),null!==(t=r.response)&&void 0!==t&&null!==(s=t.data)&&void 0!==s&&s.errors){const e=r.response.data.errors;console.log("Setting form errors:",e),_(e),e.non_field_errors&&e.non_field_errors.length>0&&alert(e.non_field_errors[0])}else alert("Failed to associate parent. Please try again.")}},disabled:!j.parent_id||!j.relationship_type,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed rounded-lg transition-colors duration-200",children:"Add Parent"})]})]})})]}):null},Ne=()=>{const e=g();return{canCreateSchool:()=>e.hasPermission("create_school"),canViewAllSchools:()=>e.hasPermission("view_all_schools"),canViewOwnSchool:()=>e.hasPermission("view_own_school"),canRegisterUsers:()=>e.hasPermission("register_users"),canAssignRootSuperAdmin:()=>e.hasPermission("assign_root_super_admin"),canAssignAdmin:()=>e.hasPermission("assign_admin"),canManageStudents:()=>e.hasPermission("student_crud"),canViewStudents:()=>e.hasPermission("view_students"),canViewAllUsers:()=>e.hasPermission("view_all_users"),canViewSchoolUsers:()=>e.hasPermission("view_school_users"),canManageUsers:()=>e.hasPermission("manage_users"),canAccessReports:()=>e.hasPermission("access_reports"),canAccessSettings:()=>e.hasPermission("access_settings"),canAccessCustomerSupport:()=>e.hasPermission("access_customer_support"),canAccessAdminPanel:()=>e.hasPermission("access_admin_panel"),isRoot:()=>"root"===e.userRole,isSuperAdmin:()=>"super_admin"===e.userRole,isAdmin:()=>"admin"===e.userRole,isUser:()=>"user"===e.userRole,isAtLeastAdmin:()=>["root","super_admin","admin"].includes(e.userRole),isAtLeastSuperAdmin:()=>["root","super_admin"].includes(e.userRole),canCreateStudent:()=>e.hasPermission("student_crud"),canUpdateStudent:()=>e.hasPermission("student_crud"),canDeleteStudent:()=>e.hasPermission("student_crud"),canBulkManageStudents:()=>e.hasPermission("student_crud"),canCreateUser:()=>e.hasPermission("manage_users"),canUpdateUser:()=>e.hasPermission("manage_users"),canDeleteUser:()=>e.hasPermission("manage_users"),canAssignRoles:()=>e.hasAnyPermission(["assign_root_super_admin","assign_admin"]),hasPermission:e.hasPermission,hasAnyPermission:e.hasAnyPermission,hasAllPermissions:e.hasAllPermissions,canAccess:e.canAccess,getRequiredRole:e.getRequiredRole,userRole:e.userRole}},we=e=>{let{children:t,permissions:s=[],roles:r=[],fallback:a=null,errorMessage:n="You do not have permission to access this feature.",showError:l=!1,mode:i="any"}=e;const d=Ne();return(0===r.length||r.includes(d.userRole))&&(0===s.length||("all"===i?d.hasAllPermissions(s):d.hasAnyPermission(s)))?(0,o.jsx)(o.Fragment,{children:t}):l?(0,o.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Access Denied"}),(0,o.jsxs)("div",{className:"mt-2 text-sm text-red-700",children:[(0,o.jsx)("p",{children:n}),s.length>0&&(0,o.jsxs)("p",{className:"mt-1",children:["Required permissions: ",s.join(", ")]}),r.length>0&&(0,o.jsxs)("p",{className:"mt-1",children:["Required roles: ",r.join(", ")]})]})]})]})}):a?(0,o.jsx)(o.Fragment,{children:a}):null};const _e=new class{constructor(){this.baseURL=void 0,this.baseURL={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://localhost:8000/api/v1"}async checkFeature(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{return(await l.authenticatedRequest("/switch/check/",{method:"POST",body:JSON.stringify({feature_name:e,scope_type:t,scope_id:s})})).data}catch(r){throw console.error(`Error checking feature ${e}:`,r),r}}async checkFeaturesBulk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{return(await l.authenticatedRequest("/switch/check/bulk/",{method:"POST",body:JSON.stringify({features:e,scope_type:t,scope_id:s})})).data}catch(r){throw console.error("Error checking features in bulk:",r),r}}async getStudentAdmissionDetailedStatus(){try{const e=await l.authenticatedRequest("/students/features/detailed-status",{method:"GET"});if(e.data)return e.data;if(e.detailed_status)return{detailed_status:e.detailed_status};throw console.error("Unexpected response structure:",e),new Error("Unexpected response structure from API")}catch(e){throw console.error("Error getting student admission detailed status:",e),e}}async isStudentAdmissionBlocked(e){if("root"===e)return{isBlocked:!1,billingBlocked:!1,maintenanceBlocked:!1,message:"Root user - all features enabled"};try{const e=(await this.getStudentAdmissionDetailedStatus()).detailed_status.combined_status;return{isBlocked:e.is_enabled,billingBlocked:e.billing_blocked,maintenanceBlocked:e.maintenance_blocked,message:e.message}}catch(t){return console.error("Error checking if student admission is blocked:",t),{isBlocked:!1,billingBlocked:!1,maintenanceBlocked:!1,message:"Unable to determine feature status"}}}async checkStudentAdmissionFeatures(){try{const e=await this.checkFeaturesBulk(["student_admission_billing","student_admission_maintenance"]);return{billing:e.results.student_admission_billing,maintenance:e.results.student_admission_maintenance}}catch(e){throw console.error("Error checking student admission features:",e),e}}async getFeatureFlags(e,t){try{let s="/switch/flags/";const r=new URLSearchParams;e&&r.append("feature_type",e),void 0!==t&&r.append("is_active",t.toString()),r.toString()&&(s+=`?${r.toString()}`);return await l.authenticatedRequest(s,{method:"GET"})}catch(s){throw console.error("Error fetching feature flags:",s),s}}async getFeatureFlagStates(e,t,s){try{let r="/switch/states/";const a=new URLSearchParams;e&&a.append("feature_flag",e),t&&a.append("scope_type",t),s&&a.append("scope_id",s),a.toString()&&(r+=`?${a.toString()}`);return await l.authenticatedRequest(r,{method:"GET"})}catch(r){throw console.error("Error fetching feature flag states:",r),r}}async getStudentAdmissionFeatureData(){try{var e,t,s,r;const[a,n]=await Promise.all([this.getFeatureFlags(),this.getFeatureFlagStates()]),l=(null===(e=a.data)||void 0===e||null===(t=e.results)||void 0===t?void 0:t.filter(e=>e.name.includes("student_admission")))||[];return{flags:l,states:(null===(s=n.data)||void 0===s||null===(r=s.results)||void 0===r?void 0:r.filter(e=>{var t;return null===(t=e.feature_flag_name)||void 0===t?void 0:t.includes("student_admission")}))||[]}}catch(a){throw console.error("Error fetching student admission feature data:",a),a}}},ke=()=>{var e;const{user:t}=c(),[s,a]=(0,r.useState)(null),[n,l]=(0,r.useState)(!0),[i,o]=(0,r.useState)(null),d="root"===(null===t||void 0===t?void 0:t.role),u=(0,r.useCallback)(async()=>{if(d)return a({detailed_status:{exempt_from_restrictions:{users:[],schools:[]},to_be_restricted:{users:[],schools:[]},billing_status:[],maintenance_status:[],combined_status:{is_enabled:!0,billing_blocked:!1,maintenance_blocked:!1,billing_status:{is_enabled:!0,message:"Root user - billing restrictions bypassed"},maintenance_status:{is_enabled:!0,message:"Root user - maintenance restrictions bypassed"},message:"Root user - all features enabled"}}}),void l(!1);try{l(!0),o(null);const e=await _e.getStudentAdmissionDetailedStatus();a(e)}catch(e){console.error("Error loading student admission detailed status:",e),o(e instanceof Error?e.message:"Failed to load feature status"),a({detailed_status:{exempt_from_restrictions:{users:[],schools:[]},to_be_restricted:{users:[],schools:[]},billing_status:[],maintenance_status:[],combined_status:{is_enabled:!0,billing_blocked:!1,maintenance_blocked:!1,billing_status:{is_enabled:!0,message:"Feature is active"},maintenance_status:{is_enabled:!0,message:"Feature is active"},message:"Unable to determine feature status"}}})}finally{l(!1)}},[d]),m=(0,r.useCallback)(async()=>{await u()},[u]);(0,r.useEffect)(()=>{u()},[u]);const x=null===s||void 0===s||null===(e=s.detailed_status)||void 0===e?void 0:e.combined_status;return{studentAdmissionDetailedStatus:s,isStudentAdmissionBlocked:!d&&!(null!==x&&void 0!==x&&x.is_enabled),isBillingBlocked:!d&&((null===x||void 0===x?void 0:x.billing_blocked)||!1),isMaintenanceBlocked:!d&&((null===x||void 0===x?void 0:x.maintenance_blocked)||!1),blockMessage:d?"Root user - all features enabled":(null===x||void 0===x?void 0:x.message)||"",isLoading:n,error:i,refreshStatus:m}},Se=e=>{let{children:t,tooltipMessage:s,className:a="",disabled:n=!0}=e;const[l,i]=(0,r.useState)(!1);return n?(0,o.jsxs)("div",{className:"relative inline-block",children:[(0,o.jsx)("div",{className:`${a} opacity-50 cursor-not-allowed`,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:t}),l&&(0,o.jsxs)("div",{className:"absolute z-50 px-3 py-2 text-xs text-white bg-gray-900 rounded-lg shadow-lg whitespace-nowrap -top-12 left-1/2 transform -translate-x-1/2",children:[s,(0,o.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]}):(0,o.jsx)("div",{className:a,children:t})},Ce=e=>{let{label:t,value:s,onChange:a,options:n,placeholder:l,error:i,required:d=!1,emptyMessage:c,onCreateNew:u,type:m,hasStreams:x}=e;const[p,h]=(0,r.useState)(!1),g=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=e=>{g.current&&!g.current.contains(e.target)&&h(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);return(0,o.jsxs)("div",{className:"space-y-1",ref:g,children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 rounded-full mr-1.5 "+("stream"===m?"bg-purple-500":"bg-teal-500")}),t," ",d&&"*"]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("button",{type:"button",onClick:()=>h(!p),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 bg-white text-left "+(i?"border-red-300 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:ring-blue-500 focus:border-blue-500"),children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("span",{className:s?"text-gray-900":"text-gray-500",children:(()=>{if(!s)return l;const e=n.find(e=>e.id===s);return e?"class"===m&&e.stream?`${e.name} - ${e.stream.name}`:e.name:l})()}),(0,o.jsx)("svg",{className:"w-4 h-4 text-gray-400 transition-transform duration-200 "+(p?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),p&&(0,o.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-md max-h-64 overflow-hidden",children:0===n.length?(console.log("EnhancedDropdown getEmptyStateContent:",{type:m,hasStreams:x,optionsLength:n.length,label:t}),"stream"===m?(0,o.jsxs)("div",{className:"text-center p-2",children:[(0,o.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-1.5",children:"No Streams Available"}),(0,o.jsxs)("button",{onClick:u,className:"text-xs bg-blue-600 hover:bg-blue-700 text-white px-2.5 py-1 rounded transition-colors duration-200 flex items-center space-x-1 mx-auto",children:[re({className:"w-3 h-3"}),(0,o.jsx)("span",{children:"Create Stream"})]})]}):"class"===m?(console.log("Class type detected, hasStreams:",x,"for label:",t),x?(console.log("Has streams, showing create class message"),(0,o.jsxs)("div",{className:"text-center p-2",children:[(0,o.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-1.5",children:"No Classes Available"}),(0,o.jsxs)("button",{onClick:u,className:"text-xs bg-green-600 hover:bg-green-700 text-white px-2.5 py-1 rounded transition-colors duration-200 flex items-center space-x-1 mx-auto",children:[re({className:"w-3 h-3"}),(0,o.jsx)("span",{children:"Create Class"})]})]})):(console.log("No streams, showing create stream message"),(0,o.jsxs)("div",{className:"text-center p-2",children:[(0,o.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-1.5",children:"No Streams Available"}),(0,o.jsxs)("button",{onClick:u,className:"text-xs bg-blue-600 hover:bg-blue-700 text-white px-2.5 py-1 rounded transition-colors duration-200 flex items-center space-x-1 mx-auto",children:[re({className:"w-3 h-3"}),(0,o.jsx)("span",{children:"Create Stream"})]})]}))):null):(0,o.jsxs)("div",{className:"max-h-48 overflow-y-auto",children:[(0,o.jsx)("div",{className:"px-2 py-1.5 text-xs text-gray-500 bg-gray-50 border-b border-gray-200",children:l}),n.map(e=>(0,o.jsx)("div",{className:"px-2 py-1.5 text-xs hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition-colors duration-150",onClick:()=>{return t=e.id,a(t),void h(!1);var t},children:"class"===m&&e.stream?(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,o.jsxs)("div",{className:"text-gray-500 text-xs",children:["Stream: ",e.stream.name]})]}):(0,o.jsx)("div",{className:"font-medium text-gray-900",children:e.name})},e.id))]})})]}),i&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:i})]})},Ee=()=>{var e,t,s,a,n,i,d,u;const{user:m}=c(),{userRole:x}=g(),{isStudentAdmissionBlocked:p,blockMessage:h,isLoading:f,error:b,refreshStatus:y}=ke(),v="root"===(null===m||void 0===m?void 0:m.role),[j,N]=(0,r.useState)(""),[w,_]=(0,r.useState)(""),[k,S]=(0,r.useState)(""),[E,A]=(0,r.useState)("asc"),[P,T]=(0,r.useState)(null),[L,D]=(0,r.useState)(!1),[R,M]=(0,r.useState)("admission");(0,r.useEffect)(()=>{"parent"===x&&"admission"!==R&&M("admission")},[x,R]);const[I,U]=(0,r.useState)(null),[B,$]=(0,r.useState)({x:0,y:0}),[W,V]=(0,r.useState)(!1),[K,Y]=(0,r.useState)(null),[J,Z]=(0,r.useState)(null),[ee,te]=(0,r.useState)(null),[se,re]=(0,r.useState)(null),[ae,ne]=(0,r.useState)(null),[le,oe]=(0,r.useState)(null),[de,ce]=(0,r.useState)(!1),[ue,he]=(0,r.useState)(null),[ge,fe]=(0,r.useState)({isOpen:!1,type:null,item:null}),[be,ye]=(0,r.useState)(!1),[Ne,_e]=(0,r.useState)(null),[Ee,Ae]=(0,r.useState)([]),[Pe,Te]=(0,r.useState)(!1),[Le,Fe]=(0,r.useState)({parent_id:"",relationship_type:"",is_primary_contact:!1,is_emergency_contact:!1,can_pick_up:!1,notes:""}),[De,Oe]=(0,r.useState)({}),[ze,Re]=(0,r.useState)(""),[Me,Ie]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=e=>{e.target.closest(".parent-dropdown-container")||(Ie(!1),Re(""))};return Me&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[Me]);const[Ue,Be]=(0,r.useState)({}),[$e,He]=(0,r.useState)({}),[qe,We]=(0,r.useState)({admissionNumber:"",fullName:"",dateOfBirth:"",gender:"M",dateOfAdmission:"",classOnAdmission:"",currentClass:"",lastSchoolAttended:"",guardianName:"",guardianPhone:"",guardianRelationship:"",nemisNumber:"",assessmentNumber:"",hasSpecialNeed:!1,specialNeed:"",preferredHospital:"",healthInfo:"",address:"",boardingStatus:"Day",exemptedFromReligiousInstruction:!1,birthCertificateNo:"",image:"",dateOfLeaving:"",schoolLeavingCertificateNumber:"",remarks:""}),[Ve,Ge]=(0,r.useState)("+254"),[Ke,Qe]=(0,r.useState)("+254"),[Ye,Je]=(0,r.useState)(""),[Ze,Xe]=(0,r.useState)(""),et=e=>{if(!e)return"";const t=e.replace(/^\+/,"");if(t.startsWith("254"))return t.substring(3);const s=t.match(/^(\d{1,4})/);if(s){const e=s[0].length;return t.substring(e)}return t},[tt,st]=(0,r.useState)({name:"",code:"",description:""}),[rt,at]=(0,r.useState)({name:"",code:"",stream:"",description:"",level:0,capacity:0}),[nt,lt]=(0,r.useState)([]),[it,ot]=(0,r.useState)([]),[dt,ct]=(0,r.useState)([]),[ut,mt]=(0,r.useState)(!0),[xt,pt]=(0,r.useState)(!1),[ht,gt]=(0,r.useState)(!1),[ft,bt]=(0,r.useState)(1),[yt,vt]=(0,r.useState)(0),[jt,Nt]=(0,r.useState)(!1),[wt,_t]=(0,r.useState)(!1),kt=e=>{var t,s,r,a;return{id:e.id,admissionNumber:e.admission_number||e.admissionNumber,fullName:e.pupil_name||e.fullName,dateOfBirth:e.date_of_birth||e.dateOfBirth,gender:e.gender,dateOfAdmission:e.date_of_admission||e.dateOfAdmission,classOnAdmission:(null===(t=e.class_on_admission)||void 0===t?void 0:t.id)||e.class_on_admission_id||e.classOnAdmission,currentClass:(null===(s=e.current_class)||void 0===s?void 0:s.id)||e.current_class_id||e.currentClass,class_on_admission:e.class_on_admission,current_class:e.current_class,lastSchoolAttended:e.last_school_attended||e.lastSchoolAttended,guardianName:e.guardian_name||e.guardianName,guardianPhone:e.guardian_phone||e.guardianPhone,guardianRelationship:e.guardian_relationship||e.guardianRelationship,nemisNumber:e.nemis_number||e.nemisNumber,assessmentNumber:e.assessment_number||e.assessmentNumber,hasSpecialNeed:e.has_special_need||e.hasSpecialNeed||!1,specialNeed:e.special_need||e.specialNeed||"",preferredHospital:e.preferred_hospital||e.preferredHospital,healthInfo:e.health_info||e.healthInfo,address:e.address,boardingStatus:e.boarding_status||e.boardingStatus,exemptedFromReligiousInstruction:e.exempted_from_religious_instruction||e.exemptedFromReligiousInstruction,birthCertificateNo:e.birth_certificate_no||e.birthCertificateNo,image:e.image,dateOfLeaving:e.date_of_leaving||e.dateOfLeaving,schoolLeavingCertificateNumber:e.school_leaving_certificate_number||e.schoolLeavingCertificateNumber,remarks:e.remarks,class:e.class_on_admission||e.class,parentName:e.guardian_name||e.parentName,contactInfo:e.guardian_phone||e.contactInfo,admission_number:e.admission_number,pupil_name:e.pupil_name,date_of_birth:e.date_of_birth,date_of_admission:e.date_of_admission,class_on_admission_id:(null===(r=e.class_on_admission)||void 0===r?void 0:r.id)||e.class_on_admission_id,current_class_id:(null===(a=e.current_class)||void 0===a?void 0:a.id)||e.current_class_id,last_school_attended:e.last_school_attended,guardian_name:e.guardian_name,guardian_phone:e.guardian_phone,guardian_relationship:e.guardian_relationship,nemis_number:e.nemis_number,assessment_number:e.assessment_number,preferred_hospital:e.preferred_hospital,health_info:e.health_info,boarding_status:e.boarding_status,exempted_from_religious_instruction:e.exempted_from_religious_instruction,birth_certificate_no:e.birth_certificate_no,date_of_leaving:e.date_of_leaving,school_leaving_certificate_number:e.school_leaving_certificate_number,is_current_student:e.is_current_student,created_at:e.created_at,updated_at:e.updated_at,deleted:e.deleted,contact_1:e.contact_1,contact_2:e.contact_2}};(0,r.useEffect)(()=>{const e=setTimeout(()=>{_(j)},500);return()=>clearTimeout(e)},[j]);const St=(0,r.useCallback)(async()=>{try{pt(!0);const e=await l.students.getStreams(),t=e.results||e||[];ot(t)}catch(e){console.error("Error loading streams:",e),he({message:"Failed to load streams. Please try again.",type:"error"})}finally{pt(!1)}},[]),Ct=(0,r.useCallback)(async()=>{try{gt(!0);const e=await l.students.getClasses();ct(e||[])}catch(e){console.error("Error loading classes:",e),ct([])}finally{gt(!1)}},[]),Et=(0,r.useCallback)(async()=>{try{mt(!0);const e=await l.students.getAll({page:ft,page_size:20,search:w||void 0,ordering:k?`${"desc"===E?"-":""}${k}`:void 0}),t=(e.results||e||[]).map(kt);lt(t),vt(e.count||0),Nt(!!e.next),_t(!!e.previous)}catch(e){console.error("Error loading students:",e),lt([]),vt(0),Nt(!1),_t(!1)}finally{mt(!1)}},[ft,20,w,k,E]);(0,r.useEffect)(()=>{Et()},[ft,w,R,k,E,Et]),(0,r.useEffect)(()=>{St()},[St]),(0,r.useEffect)(()=>{Ct()},[Ct]);const At=Math.ceil(yt/20),Pt=20*(ft-1),Tt=Math.min(Pt+20,yt),Lt=nt;(0,r.useEffect)(()=>{bt(1)},[w]);const Ft=()=>{ce(!1),We({admissionNumber:"",fullName:"",dateOfBirth:"",gender:"M",dateOfAdmission:"",classOnAdmission:"",currentClass:"",lastSchoolAttended:"",guardianName:"",guardianPhone:"",guardianRelationship:"",nemisNumber:"",assessmentNumber:"",hasSpecialNeed:!1,preferredHospital:"",healthInfo:"",address:"",boardingStatus:"Day",exemptedFromReligiousInstruction:!1,birthCertificateNo:"",image:"",dateOfLeaving:"",schoolLeavingCertificateNumber:"",remarks:""}),st({name:"",code:"",description:""}),at({name:"",code:"",stream:"",description:"",level:0,capacity:0})},Dt=async()=>{try{const e={admission_number:(r=qe).admissionNumber||r.admission_number||"",pupil_name:r.fullName||r.pupil_name||"",date_of_birth:r.dateOfBirth||r.date_of_birth||"",gender:r.gender||"M",date_of_admission:r.dateOfAdmission||r.date_of_admission||"",class_on_admission_id:r.classOnAdmission||r.class_on_admission_id||r.class||"",current_class_id:r.currentClass||r.current_class_id||"",guardian_name:r.guardianName||r.guardian_name||r.parentName||"",guardian_phone:r.guardianPhone||r.guardian_phone||"",guardian_relationship:r.guardianRelationship||r.guardian_relationship||"",nemis_number:r.nemisNumber||r.nemis_number||"",assessment_number:r.assessmentNumber||r.assessment_number||"",has_special_need:r.hasSpecialNeed||r.has_special_need||!1,special_need:r.specialNeed||"",preferred_hospital:r.preferredHospital||r.preferred_hospital||"",health_info:r.healthInfo||r.health_info||"",address:r.address||"",last_school_attended:r.lastSchoolAttended||r.last_school_attended||"",boarding_status:r.boardingStatus||r.boarding_status||"Day",exempted_from_religious_instruction:r.exemptedFromReligiousInstruction||r.exempted_from_religious_instruction||!1,birth_certificate_no:r.birthCertificateNo||r.birth_certificate_no||"",image:r.image||"",date_of_leaving:r.dateOfLeaving||r.date_of_leaving||"",school_leaving_certificate_number:r.schoolLeavingCertificateNumber||r.school_leaving_certificate_number||"",remarks:r.remarks||""};await l.students.create(e),await Et(),he({message:"Student added successfully!",type:"success"}),Be({}),We({admissionNumber:"",fullName:"",dateOfBirth:"",gender:"M",dateOfAdmission:"",classOnAdmission:"",currentClass:"",lastSchoolAttended:"",guardianName:"",guardianPhone:"",guardianRelationship:"",nemisNumber:"",assessmentNumber:"",hasSpecialNeed:!1,preferredHospital:"",healthInfo:"",address:"",boardingStatus:"Day",exemptedFromReligiousInstruction:!1,birthCertificateNo:"",image:"",dateOfLeaving:"",schoolLeavingCertificateNumber:"",remarks:""}),st({name:"",code:"",description:""}),at({name:"",code:"",stream:"",description:"",level:0,capacity:0}),setTimeout(()=>{Ft()},100),setTimeout(()=>{he(null)},3e3)}catch(a){var e,t,s;if(console.error("Error adding item:",a),null!==(e=a.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors){const e={};Object.entries(a.response.data.errors).forEach(t=>{let[s,r]=t,a=s.replace(/_([a-z])/g,e=>e[1].toUpperCase());"pupil_name"===s&&(a="fullName"),e[a]=r}),Be(e),he({message:a.response.data.message||"Please fix the validation errors below.",type:"error"})}else if(null!==(s=a.response)&&void 0!==s&&s.data)if("object"===typeof a.response.data&&null!==a.response.data){const e=a.response.data.errors||a.response.data;if("object"===typeof e&&null!==e){const t={};Object.entries(e).forEach(e=>{let[s,r]=e,a=s.replace(/_([a-z])/g,e=>e[1].toUpperCase());"pupil_name"===s&&(a="fullName"),t[a]=Array.isArray(r)?r:[String(r)]}),Be(t),he({message:"Please fix the validation errors below.",type:"error"})}else Be({}),he({message:"Failed to add item. Please try again.",type:"error"})}else Be({}),he({message:"Failed to add item. Please try again.",type:"error"});else Be({}),he({message:"Failed to add item. Please try again.",type:"error"});setTimeout(()=>{he(null)},5e3)}var r},Ot=(e,t)=>{We(s=>({...s,[e]:t})),Ue[e]&&Be(t=>{const s={...t};return delete s[e],s})},zt=(e,t)=>{st(s=>({...s,[e]:t})),Ue[e]&&Be(t=>{const s={...t};return delete s[e],s})},Rt=e=>{k===e?A("asc"===E?"desc":"asc"):(S(e),A("asc"))};(0,r.useEffect)(()=>{const e=e=>{const t=e.target;t.closest("[data-dropdown-container]")||t.closest("[data-portal-dropdown]")||U(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const Mt=(e,t)=>{if(I===e)U(null);else{const s=t.currentTarget.getBoundingClientRect(),r=window.innerHeight,a=window.innerWidth,n=80,l=128;let i=s.right-l,o=s.bottom+4;s.bottom+n>r&&(o=s.top-n-4),i<0&&(i=0),i+l>a&&(i=a-l),$({x:i,y:o}),U(e)}},It=()=>{if(!ee||!se)return!1;const e=ee.name!==se.name,t=ee.code!==se.code,s=ee.description!==se.description;return console.log("Stream modification check:",{editingStream:{name:ee.name,code:ee.code,description:ee.description},originalStream:{name:se.name,code:se.code,description:se.description},changes:{nameChanged:e,codeChanged:t,descriptionChanged:s}}),e||t||s},Ut=()=>{var e,t;if(!ae||!le)return!1;const s=ae.name!==le.name,r=ae.code!==le.code,a=("string"===typeof ae.stream?ae.stream:null===(e=ae.stream)||void 0===e?void 0:e.id)!==("string"===typeof le.stream?le.stream:null===(t=le.stream)||void 0===t?void 0:t.id),n=ae.description!==le.description,l=ae.level!==le.level,i=ae.capacity!==le.capacity;return s||r||a||n||l||i},Bt=()=>{V(!1),Y(null),Z(null),te(null),re(null),ne(null),oe(null),He({})},$t=()=>{ye(!1),_e(null),Fe({parent_id:"",relationship_type:"",is_primary_contact:!1,is_emergency_contact:!1,can_pick_up:!1,notes:""}),Oe({})},Ht=async()=>{try{Te(!0);const e=await l.parents.getAll();Ae(e.results||[])}catch(e){console.error("Error fetching parents:",e),he({message:"Failed to fetch parents. Please try again.",type:"error"})}finally{Te(!1)}},qt=e=>{var t;return(null===(t=De[e])||void 0===t?void 0:t[0])||null},Wt=(e,t)=>{K&&(Y({...K,[e]:t}),$e[e]&&He(t=>{const s={...t};return delete s[e],s}))},Vt=(e,t)=>{ee&&(te({...ee,[e]:t}),$e[e]&&He(t=>{const s={...t};return delete s[e],s}))},Gt=(e,t)=>{at(s=>({...s,[e]:t})),Ue[e]&&Be(t=>{const s={...t};return delete s[e],s})},Kt=(e,t)=>{ae&&(ne({...ae,[e]:t}),$e[e]&&He(t=>{const s={...t};return delete s[e],s}))},Qt=e=>k!==e?null:"asc"===E?z({className:"w-3 h-3"}):O({className:"w-3 h-3"});return(0,o.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-4 mb-4",children:(0,o.jsxs)("div",{className:"mb-4",children:[!f&&("admission"===R||"classes"===R||"streams"===R)&&!v&&p&&(0,o.jsx)("div",{className:"mb-3 p-2 rounded-md text-xs font-medium flex items-center space-x-2",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1 text-red-700 bg-red-50 px-2 py-1 rounded",children:[(0,o.jsx)("span",{children:"\ud83d\udeab"}),(0,o.jsxs)("span",{children:["admission"===R&&"Student Admission Blocked","classes"===R&&"Student Admission Blocked - Class Management Affected","streams"===R&&"Student Admission Blocked - Stream Management Affected"]})]})}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("nav",{className:"flex space-x-6",children:[(0,o.jsx)("button",{onClick:()=>M("admission"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("admission"===R?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Admission"}),"parent"!==x&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>M("classes"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("classes"===R?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Classes"}),(0,o.jsx)("button",{onClick:()=>M("streams"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("streams"===R?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Streams"}),(0,o.jsx)("button",{onClick:()=>M("academic"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("academic"===R?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Academic"}),(0,o.jsx)("button",{onClick:()=>M("financial"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("financial"===R?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Financial"}),(0,o.jsx)("button",{onClick:()=>M("attendance"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("attendance"===R?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Attendance"})]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[b&&(0,o.jsx)("button",{onClick:y,className:"px-3 py-1.5 border border-red-300 bg-red-50 text-red-700 rounded-md text-xs font-medium hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors duration-200",title:"Refresh feature status",children:"Refresh Status"}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",placeholder:"admission"===R?"Search students...":"classes"===R?"Search classes...":"streams"===R?"Search streams...":"academic"===R?"Search academic...":"financial"===R?"Search financial...":"attendance"===R?"Search attendance...":"Search...",value:j,onChange:e=>N(e.target.value),disabled:("admission"===R||"classes"===R||"streams"===R)&&!f&&!v&&p,className:"pl-8 pr-3 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent text-xs transition-colors duration-200 "+("admission"!==R&&"classes"!==R&&"streams"!==R||f||v||!p?"border-gray-300 focus:ring-blue-500 focus:border-transparent":"border-gray-200 bg-gray-100 text-gray-500 cursor-not-allowed")}),(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:ie({className:"h-3 w-3 "+("admission"!==R&&"classes"!==R&&"streams"!==R||f||v||!p?"text-gray-400":"text-gray-300")})})]}),(0,o.jsx)("button",{disabled:("admission"===R||"classes"===R||"streams"===R)&&!f&&!v&&p,className:"px-3 py-1.5 border rounded-md text-xs transition-colors duration-200 "+("admission"!==R&&"classes"!==R&&"streams"!==R||f||v||!p?"border-gray-300 text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent":"border-gray-200 bg-gray-100 text-gray-500 cursor-not-allowed"),children:"Filter"}),(0,o.jsxs)("select",{value:k,onChange:e=>S(e.target.value),disabled:("admission"===R||"classes"===R||"streams"===R)&&!f&&!v&&p,className:"px-3 py-1.5 border rounded-md text-xs focus:outline-none focus:ring-2 focus:border-transparent transition-colors duration-200 "+("admission"!==R&&"classes"!==R&&"streams"!==R||f||v||!p?"border-gray-300 text-gray-700 focus:ring-blue-500 focus:border-transparent":"border-gray-200 bg-gray-100 text-gray-500 cursor-not-allowed"),children:[(0,o.jsx)("option",{value:"",children:"Sort by"}),"admission"===R&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("option",{value:"admissionNumber",children:"Admission Number"}),(0,o.jsx)("option",{value:"fullName",children:"Full Name"}),(0,o.jsx)("option",{value:"class",children:"Class"}),(0,o.jsx)("option",{value:"gender",children:"Gender"}),(0,o.jsx)("option",{value:"dateOfAdmission",children:"Date of Admission"})]}),"classes"===R&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("option",{value:"name",children:"Class Name"}),(0,o.jsx)("option",{value:"code",children:"Class Code"}),(0,o.jsx)("option",{value:"stream.name",children:"Stream"}),(0,o.jsx)("option",{value:"capacity",children:"Capacity"}),(0,o.jsx)("option",{value:"created_at",children:"Created At"})]}),"streams"===R&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("option",{value:"name",children:"Stream Name"}),(0,o.jsx)("option",{value:"code",children:"Stream Code"}),(0,o.jsx)("option",{value:"description",children:"Description"}),(0,o.jsx)("option",{value:"created_at",children:"Created At"})]}),"academic"===R&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("option",{value:"subject",children:"Subject"}),(0,o.jsx)("option",{value:"grade",children:"Grade"}),(0,o.jsx)("option",{value:"teacher",children:"Teacher"})]}),"financial"===R&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("option",{value:"feeType",children:"Fee Type"}),(0,o.jsx)("option",{value:"amount",children:"Amount"}),(0,o.jsx)("option",{value:"dueDate",children:"Due Date"}),(0,o.jsx)("option",{value:"status",children:"Status"})]}),"attendance"===R&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("option",{value:"date",children:"Date"}),(0,o.jsx)("option",{value:"status",children:"Status"}),(0,o.jsx)("option",{value:"student",children:"Student"})]})]}),(0,o.jsx)(we,{permissions:["student_crud"],children:(0,o.jsx)(Se,{tooltipMessage:f||v||!p?"":h,disabled:!f&&!v&&p,className:"inline-block",children:(0,o.jsxs)("button",{onClick:()=>{ce(!0),Be({})},disabled:!f&&!v&&p,className:"px-4 py-1.5 bg-blue-600 text-white rounded-md text-xs font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:["admission"===R&&"+ Add Student","classes"===R&&"+ Add Class","streams"===R&&"+ Add Stream","academic"===R&&"+ Add Academic","financial"===R&&"+ Add Financial","attendance"===R&&"+ Add Attendance"]})})})]})]})]})}),"admission"===R&&(0,o.jsxs)("div",{className:"bg-white rounded-md shadow-sm relative",children:[!f&&p&&(0,o.jsx)("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-15 z-10 flex items-center justify-center",title:h,children:(0,o.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg text-center",children:[(0,o.jsx)("div",{className:"text-gray-600 mb-2",children:(0,o.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,o.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Student Admission Temporarily Unavailable"}),(0,o.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:h})]})}),ut?(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading students..."})]}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Rt("admissionNumber"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Admn number"}),Qt("admissionNumber")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Rt("fullName"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Full name"}),Qt("fullName")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Rt("class"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Class"}),Qt("class")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Rt("gender"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Gender"}),Qt("gender")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Rt("dateOfAdmission"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Date of admission"}),Qt("dateOfAdmission")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:Lt.map((e,t)=>{var s,r;return(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-25",children:[(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs font-medium text-gray-900",children:e.admissionNumber}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.fullName}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.current_class?`${e.current_class.name} - ${(null===(s=e.current_class.stream)||void 0===s?void 0:s.name)||"No Stream"}`:e.class_on_admission?`${e.class_on_admission.name} - ${(null===(r=e.class_on_admission.stream)||void 0===r?void 0:r.name)||"No Stream"}`:e.classOnAdmission||e.class||""}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.gender}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.dateOfAdmission}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("button",{onClick:()=>(e=>{T(e),D(!0)})(e),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors duration-200",title:"View Details",children:Q({className:"w-3 h-3"})}),(0,o.jsx)(we,{permissions:["student_crud"],children:(0,o.jsx)("div",{className:"relative","data-dropdown-container":!0,children:(0,o.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation();const s=e.id||`student-${Math.random()}`;Mt(s,t)},className:"p-1 rounded-md transition-colors duration-200 cursor-pointer "+(I===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:q({className:"w-3 h-3"})})})})]})})]},e.id||`student-${t}`)})})]})})]}),"classes"===R&&(0,o.jsxs)("div",{className:"bg-white rounded-md shadow-sm relative",children:[!f&&!v&&p&&(0,o.jsx)("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-15 z-10 flex items-center justify-center",title:h,children:(0,o.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg text-center",children:[(0,o.jsx)("div",{className:"text-gray-600 mb-2",children:(0,o.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,o.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Class Management Temporarily Unavailable"}),(0,o.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:h})]})}),ht?(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading classes..."})]}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Rt("name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Class Name"}),Qt("name")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Rt("code"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Class Code"}),Qt("code")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Rt("stream.name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Stream"}),Qt("stream.name")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Rt("level"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Level"}),Qt("level")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Rt("capacity"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Capacity"}),Qt("capacity")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Rt("created_at"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Created At"}),Qt("created_at")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:0===dt.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:7,className:"px-3 py-6 text-center text-xs text-gray-500",children:"No classes found"})}):dt.map((e,t)=>{var s;return(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-25",children:[(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs font-medium text-gray-900",children:e.name}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.code}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:(null===(s=e.stream)||void 0===s?void 0:s.name)||"N/A"}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.level||"N/A"}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.capacity||"N/A"}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:new Date(e.created_at).toLocaleDateString()}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("button",{onClick:()=>{},className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors duration-200",title:"View Details",children:Q({className:"w-3 h-3"})}),(0,o.jsx)(we,{permissions:["student_crud"],children:(0,o.jsx)("div",{className:"relative","data-dropdown-container":!0,children:(0,o.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),Mt(e.id,t)},className:"p-1 rounded-md transition-colors duration-200 cursor-pointer "+(I===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:q({className:"w-3 h-3"})})})})]})})]},e.id)})})]})})]}),"streams"===R&&(0,o.jsxs)("div",{className:"bg-white rounded-md shadow-sm relative",children:[!f&&!v&&p&&(0,o.jsx)("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-15 z-10 flex items-center justify-center",title:h,children:(0,o.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg text-center",children:[(0,o.jsx)("div",{className:"text-gray-600 mb-2",children:(0,o.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,o.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Stream Management Temporarily Unavailable"}),(0,o.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:h})]})}),xt?(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading streams..."})]}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Rt("name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Stream Name"}),Qt("name")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Rt("code"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Stream Code"}),Qt("code")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Rt("description"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Description"}),Qt("description")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Rt("created_at"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Created At"}),Qt("created_at")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:0===it.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:5,className:"px-3 py-6 text-center text-xs text-gray-500",children:"No streams found"})}):it.map((e,t)=>(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-25",children:[(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs font-medium text-gray-900",children:e.name}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.code}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.description}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:new Date(e.created_at).toLocaleDateString()}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("button",{onClick:()=>{},className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors duration-200",title:"View Details",children:Q({className:"w-3 h-3"})}),(0,o.jsx)(we,{permissions:["student_crud"],children:(0,o.jsx)("div",{className:"relative","data-dropdown-container":!0,children:(0,o.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),Mt(e.id,t)},className:"p-1 rounded-md transition-colors duration-200 cursor-pointer "+(I===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:q({className:"w-3 h-3"})})})})]})})]},e.id))})]})})]}),"academic"===R&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Academic Information"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Academic data will be displayed here."})]})}),"financial"===R&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Financial Information"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Financial data will be displayed here."})]})}),"attendance"===R&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Attendance Information"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Attendance data will be displayed here."})]})}),(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg mt-4 mb-4",style:{backgroundColor:"rgb(249,250,251)",position:"relative",zIndex:10},children:[(0,o.jsxs)("div",{className:"text-xs text-gray-600",children:["Showing ",(0,o.jsx)("span",{className:"font-medium",children:Pt+1})," to ",(0,o.jsx)("span",{className:"font-medium",children:Tt})," of ",(0,o.jsx)("span",{className:"font-medium",children:yt})," results"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>{bt(e=>Math.max(e-1,1))},disabled:!wt||"admission"===R&&!f&&p,className:"px-2.5 py-1 text-xs font-medium border rounded transition-colors duration-200 "+("admission"===R&&!f&&p?"text-gray-400 bg-gray-100 border-gray-200 cursor-not-allowed":"text-gray-500 bg-white border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),children:"Previous"}),(0,o.jsxs)("span",{className:"px-2.5 py-1 text-xs font-medium text-gray-600",children:["Page ",ft," of ",At," (",At>1?`${At} pages`:"1 page",")"]}),(0,o.jsx)("button",{onClick:()=>{bt(e=>Math.min(e+1,At))},disabled:!jt||"admission"===R&&!f&&p,className:"px-2.5 py-1 text-xs font-medium border rounded transition-colors duration-200 "+("admission"===R&&!f&&p?"text-gray-400 bg-gray-100 border-gray-200 cursor-not-allowed":"text-gray-500 bg-white border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),children:"Next"})]})]})]}),L&&P&&(0,o.jsx)(je,{student:P,isOpen:L,onClose:()=>{D(!1),T(null)}}),W&&(K||ae||ee)&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-end z-[10002] transition-all duration-300 ease-in-out",children:(0,o.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 h-full w-96 shadow-2xl overflow-y-auto border-l border-gray-100 transform transition-transform duration-300 ease-out",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,o.jsxs)("h2",{className:"text-lg font-bold text-gray-900",children:["admission"===R&&"Edit Student","classes"===R&&"Edit Class","streams"===R&&"Edit Stream","academic"===R&&"Edit Academic","financial"===R&&"Edit Financial","attendance"===R&&"Edit Attendance"]})]}),(0,o.jsx)("button",{onClick:Bt,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[Object.keys($e).length>0&&(0,o.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-4 shadow-sm",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Please fix the errors below"})})]})}),K&&(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Admission Number *"]}),(0,o.jsx)("input",{type:"text",value:K.admissionNumber,onChange:e=>Wt("admissionNumber",e.target.value),placeholder:"Enter admission number",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+($e.admissionNumber?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.admissionNumber&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.admissionNumber[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Full Names *"]}),(0,o.jsx)("input",{type:"text",value:K.fullName,onChange:e=>Wt("fullName",e.target.value),placeholder:"Enter full names",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+($e.fullName?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.fullName&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.fullName[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Date Of Birth *"]}),(0,o.jsx)("input",{type:"date",value:K.dateOfBirth,onChange:e=>Wt("dateOfBirth",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+($e.dateOfBirth?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.dateOfBirth&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.dateOfBirth[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Gender *"]}),(0,o.jsxs)("select",{value:K.gender,onChange:e=>Wt("gender",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+($e.gender?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"Male",children:"Male"}),(0,o.jsx)("option",{value:"Female",children:"Female"}),(0,o.jsx)("option",{value:"Other",children:"Other"})]}),$e.gender&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.gender[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Date Of Admission *"]}),(0,o.jsx)("input",{type:"date",value:K.dateOfAdmission,onChange:e=>Wt("dateOfAdmission",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+($e.dateOfAdmission?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.dateOfAdmission&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.dateOfAdmission[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsx)("div",{className:"space-y-1",children:(0,o.jsx)(Ce,{label:"Class On Admission",value:K.classOnAdmission||"",onChange:e=>Wt("classOnAdmission",e),options:dt,placeholder:"Select a class",error:null===(e=$e.classOnAdmission)||void 0===e?void 0:e[0],required:!0,emptyMessage:"No classes available",onCreateNew:()=>M("classes"),type:"class",hasStreams:it.length>0})}),(0,o.jsx)("div",{className:"space-y-1",children:(0,o.jsx)(Ce,{label:"Current Class",value:K.currentClass||"",onChange:e=>Wt("currentClass",e),options:dt,placeholder:"Select a class",error:null===(t=$e.currentClass)||void 0===t?void 0:t[0],required:!1,emptyMessage:"No classes available",onCreateNew:()=>M("classes"),type:"class",hasStreams:it.length>0})})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"Last School Attended"]}),(0,o.jsx)("input",{type:"text",value:K.lastSchoolAttended,onChange:e=>Wt("lastSchoolAttended",e.target.value),placeholder:"Enter last school attended",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 transition-all duration-200 bg-white "+($e.lastSchoolAttended?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.lastSchoolAttended&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.lastSchoolAttended[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-pink-500 rounded-full mr-1.5"}),"Guardian Name"]}),(0,o.jsx)("input",{type:"text",value:K.guardianName,onChange:e=>Wt("guardianName",e.target.value),placeholder:"Enter guardian name",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-pink-500 transition-all duration-200 bg-white "+($e.guardianName?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.guardianName&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.guardianName[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-violet-500 rounded-full mr-1.5"}),"Guardian Phone"]}),(0,o.jsxs)("div",{className:"flex space-x-2",children:[(0,o.jsx)("div",{className:"w-24",children:(0,o.jsxs)("select",{value:Ke,onChange:e=>{Qe(e.target.value);const t=et(K.guardianPhone||""),s=`${e.target.value}${t}`;Wt("guardianPhone",s)},className:"w-full px-2 py-2 text-xs border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-100 focus:border-violet-500 transition-all duration-200 bg-white",children:[(0,o.jsx)("option",{value:"+254",children:"+254 (KE)"}),(0,o.jsx)("option",{value:"+255",children:"+255 (TZ)"}),(0,o.jsx)("option",{value:"+256",children:"+256 (UG)"}),(0,o.jsx)("option",{value:"+250",children:"+250 (RW)"}),(0,o.jsx)("option",{value:"+257",children:"+257 (BI)"}),(0,o.jsx)("option",{value:"+1",children:"+1 (US/CA)"}),(0,o.jsx)("option",{value:"+44",children:"+44 (UK)"}),(0,o.jsx)("option",{value:"+91",children:"+91 (IN)"}),(0,o.jsx)("option",{value:"+86",children:"+86 (CN)"}),(0,o.jsx)("option",{value:"+81",children:"+81 (JP)"}),(0,o.jsx)("option",{value:"+49",children:"+49 (DE)"}),(0,o.jsx)("option",{value:"+33",children:"+33 (FR)"}),(0,o.jsx)("option",{value:"+39",children:"+39 (IT)"}),(0,o.jsx)("option",{value:"+34",children:"+34 (ES)"}),(0,o.jsx)("option",{value:"+31",children:"+31 (NL)"}),(0,o.jsx)("option",{value:"+46",children:"+46 (SE)"}),(0,o.jsx)("option",{value:"+47",children:"+47 (NO)"}),(0,o.jsx)("option",{value:"+45",children:"+45 (DK)"}),(0,o.jsx)("option",{value:"+358",children:"+358 (FI)"}),(0,o.jsx)("option",{value:"+48",children:"+48 (PL)"}),(0,o.jsx)("option",{value:"+420",children:"+420 (CZ)"}),(0,o.jsx)("option",{value:"+36",children:"+36 (HU)"}),(0,o.jsx)("option",{value:"+40",children:"+40 (RO)"}),(0,o.jsx)("option",{value:"+380",children:"+380 (UA)"}),(0,o.jsx)("option",{value:"+7",children:"+7 (RU)"}),(0,o.jsx)("option",{value:"+90",children:"+90 (TR)"}),(0,o.jsx)("option",{value:"+966",children:"+966 (SA)"}),(0,o.jsx)("option",{value:"+971",children:"+971 (AE)"}),(0,o.jsx)("option",{value:"+972",children:"+972 (IL)"}),(0,o.jsx)("option",{value:"+20",children:"+20 (EG)"}),(0,o.jsx)("option",{value:"+27",children:"+27 (ZA)"}),(0,o.jsx)("option",{value:"+234",children:"+234 (NG)"}),(0,o.jsx)("option",{value:"+233",children:"+233 (GH)"}),(0,o.jsx)("option",{value:"+237",children:"+237 (CM)"}),(0,o.jsx)("option",{value:"+212",children:"+212 (MA)"}),(0,o.jsx)("option",{value:"+216",children:"+216 (TN)"}),(0,o.jsx)("option",{value:"+213",children:"+213 (DZ)"}),(0,o.jsx)("option",{value:"+218",children:"+218 (LY)"}),(0,o.jsx)("option",{value:"+249",children:"+249 (SD)"}),(0,o.jsx)("option",{value:"+251",children:"+251 (ET)"}),(0,o.jsx)("option",{value:"+252",children:"+252 (SO)"}),(0,o.jsx)("option",{value:"+253",children:"+253 (DJ)"}),(0,o.jsx)("option",{value:"+254",children:"+254 (KE)"}),(0,o.jsx)("option",{value:"+255",children:"+255 (TZ)"}),(0,o.jsx)("option",{value:"+256",children:"+256 (UG)"}),(0,o.jsx)("option",{value:"+257",children:"+257 (BI)"}),(0,o.jsx)("option",{value:"+258",children:"+258 (MZ)"}),(0,o.jsx)("option",{value:"+260",children:"+260 (ZM)"}),(0,o.jsx)("option",{value:"+261",children:"+261 (MG)"}),(0,o.jsx)("option",{value:"+262",children:"+262 (RE)"}),(0,o.jsx)("option",{value:"+263",children:"+263 (ZW)"}),(0,o.jsx)("option",{value:"+264",children:"+264 (NA)"}),(0,o.jsx)("option",{value:"+265",children:"+265 (MW)"}),(0,o.jsx)("option",{value:"+266",children:"+266 (LS)"}),(0,o.jsx)("option",{value:"+267",children:"+267 (BW)"}),(0,o.jsx)("option",{value:"+268",children:"+268 (SZ)"}),(0,o.jsx)("option",{value:"+269",children:"+269 (KM)"}),(0,o.jsx)("option",{value:"+290",children:"+290 (SH)"}),(0,o.jsx)("option",{value:"+291",children:"+291 (ER)"}),(0,o.jsx)("option",{value:"+297",children:"+297 (AW)"}),(0,o.jsx)("option",{value:"+298",children:"+298 (FO)"}),(0,o.jsx)("option",{value:"+299",children:"+299 (GL)"}),(0,o.jsx)("option",{value:"+500",children:"+500 (FK)"}),(0,o.jsx)("option",{value:"+501",children:"+501 (BZ)"}),(0,o.jsx)("option",{value:"+502",children:"+502 (GT)"}),(0,o.jsx)("option",{value:"+503",children:"+503 (SV)"}),(0,o.jsx)("option",{value:"+504",children:"+504 (HN)"}),(0,o.jsx)("option",{value:"+505",children:"+505 (NI)"}),(0,o.jsx)("option",{value:"+506",children:"+506 (CR)"}),(0,o.jsx)("option",{value:"+507",children:"+507 (PA)"}),(0,o.jsx)("option",{value:"+508",children:"+508 (PM)"}),(0,o.jsx)("option",{value:"+509",children:"+509 (HT)"}),(0,o.jsx)("option",{value:"+590",children:"+590 (GP)"}),(0,o.jsx)("option",{value:"+591",children:"+591 (BO)"}),(0,o.jsx)("option",{value:"+592",children:"+592 (GY)"}),(0,o.jsx)("option",{value:"+593",children:"+593 (EC)"}),(0,o.jsx)("option",{value:"+594",children:"+594 (GF)"}),(0,o.jsx)("option",{value:"+595",children:"+595 (PY)"}),(0,o.jsx)("option",{value:"+596",children:"+596 (MQ)"}),(0,o.jsx)("option",{value:"+597",children:"+597 (SR)"}),(0,o.jsx)("option",{value:"+598",children:"+598 (UY)"}),(0,o.jsx)("option",{value:"+599",children:"+599 (CW)"}),(0,o.jsx)("option",{value:"+670",children:"+670 (TL)"}),(0,o.jsx)("option",{value:"+672",children:"+672 (AU)"}),(0,o.jsx)("option",{value:"+673",children:"+673 (BN)"}),(0,o.jsx)("option",{value:"+674",children:"+674 (NR)"}),(0,o.jsx)("option",{value:"+675",children:"+675 (PG)"}),(0,o.jsx)("option",{value:"+676",children:"+676 (TO)"}),(0,o.jsx)("option",{value:"+677",children:"+677 (SB)"}),(0,o.jsx)("option",{value:"+678",children:"+678 (VU)"}),(0,o.jsx)("option",{value:"+679",children:"+679 (FJ)"}),(0,o.jsx)("option",{value:"+680",children:"+680 (PW)"}),(0,o.jsx)("option",{value:"+681",children:"+681 (WF)"}),(0,o.jsx)("option",{value:"+682",children:"+682 (CK)"}),(0,o.jsx)("option",{value:"+683",children:"+683 (NU)"}),(0,o.jsx)("option",{value:"+685",children:"+685 (WS)"}),(0,o.jsx)("option",{value:"+686",children:"+686 (KI)"}),(0,o.jsx)("option",{value:"+687",children:"+687 (NC)"}),(0,o.jsx)("option",{value:"+688",children:"+688 (TV)"}),(0,o.jsx)("option",{value:"+689",children:"+689 (PF)"}),(0,o.jsx)("option",{value:"+690",children:"+690 (TK)"}),(0,o.jsx)("option",{value:"+691",children:"+691 (FM)"}),(0,o.jsx)("option",{value:"+692",children:"+692 (MH)"}),(0,o.jsx)("option",{value:"+850",children:"+850 (KP)"}),(0,o.jsx)("option",{value:"+852",children:"+852 (HK)"}),(0,o.jsx)("option",{value:"+853",children:"+853 (MO)"}),(0,o.jsx)("option",{value:"+855",children:"+855 (KH)"}),(0,o.jsx)("option",{value:"+856",children:"+856 (LA)"}),(0,o.jsx)("option",{value:"+880",children:"+880 (BD)"}),(0,o.jsx)("option",{value:"+886",children:"+886 (TW)"}),(0,o.jsx)("option",{value:"+960",children:"+960 (MV)"}),(0,o.jsx)("option",{value:"+961",children:"+961 (LB)"}),(0,o.jsx)("option",{value:"+962",children:"+962 (JO)"}),(0,o.jsx)("option",{value:"+963",children:"+963 (SY)"}),(0,o.jsx)("option",{value:"+964",children:"+964 (IQ)"}),(0,o.jsx)("option",{value:"+965",children:"+965 (KW)"}),(0,o.jsx)("option",{value:"+966",children:"+966 (SA)"}),(0,o.jsx)("option",{value:"+967",children:"+967 (YE)"}),(0,o.jsx)("option",{value:"+968",children:"+968 (OM)"}),(0,o.jsx)("option",{value:"+970",children:"+970 (PS)"}),(0,o.jsx)("option",{value:"+971",children:"+971 (AE)"}),(0,o.jsx)("option",{value:"+972",children:"+972 (IL)"}),(0,o.jsx)("option",{value:"+973",children:"+973 (BH)"}),(0,o.jsx)("option",{value:"+974",children:"+974 (QA)"}),(0,o.jsx)("option",{value:"+975",children:"+975 (BT)"}),(0,o.jsx)("option",{value:"+976",children:"+976 (MN)"}),(0,o.jsx)("option",{value:"+977",children:"+977 (NP)"}),(0,o.jsx)("option",{value:"+992",children:"+992 (TJ)"}),(0,o.jsx)("option",{value:"+993",children:"+993 (TM)"}),(0,o.jsx)("option",{value:"+994",children:"+994 (AZ)"}),(0,o.jsx)("option",{value:"+995",children:"+995 (GE)"}),(0,o.jsx)("option",{value:"+996",children:"+996 (KG)"}),(0,o.jsx)("option",{value:"+998",children:"+998 (UZ)"}),(0,o.jsx)("option",{value:"+999",children:"+999 (Custom)"})]})}),"+999"===Ke&&(0,o.jsx)("div",{className:"w-20",children:(0,o.jsx)("input",{type:"text",value:Ze,onChange:e=>{const t=e.target.value;Xe(t);const s=et(K.guardianPhone||"");Wt("guardianPhone",`${t}${s}`)},placeholder:"+XX",className:"w-full px-2 py-2 text-xs border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-100 focus:border-violet-500 transition-all duration-200 bg-white"})}),(0,o.jsx)("div",{className:"flex-1",children:(0,o.jsx)("input",{type:"tel",value:et(K.guardianPhone||""),onChange:e=>{const t=e.target.value.replace(/\D/g,"");Wt("guardianPhone",`${Ke}${t}`)},placeholder:"700000000",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-100 focus:border-violet-500 transition-all duration-200 bg-white "+($e.guardianPhone?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")})})]}),$e.guardianPhone&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.guardianPhone[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full mr-1.5"}),"Guardian Relationship"]}),(0,o.jsxs)("select",{value:K.guardianRelationship,onChange:e=>Wt("guardianRelationship",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-100 focus:border-amber-500 transition-all duration-200 bg-white "+($e.guardianRelationship?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select relationship"}),(0,o.jsx)("option",{value:"Father",children:"Father"}),(0,o.jsx)("option",{value:"Mother",children:"Mother"}),(0,o.jsx)("option",{value:"Guardian",children:"Guardian"}),(0,o.jsx)("option",{value:"Other",children:"Other"})]}),$e.guardianRelationship&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.guardianRelationship[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-lime-500 rounded-full mr-1.5"}),"Address"]}),(0,o.jsx)("textarea",{value:K.address,onChange:e=>Wt("address",e.target.value),placeholder:"Enter address",rows:2,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-lime-100 focus:border-lime-500 transition-all duration-200 bg-white resize-none "+($e.address?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.address&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.address[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-rose-500 rounded-full mr-1.5"}),"Boarding Status"]}),(0,o.jsxs)("select",{value:K.boardingStatus,onChange:e=>Wt("boardingStatus",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-rose-100 focus:border-rose-500 transition-all duration-200 bg-white "+($e.boardingStatus?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"Day",children:"Day"}),(0,o.jsx)("option",{value:"Boarding",children:"Boarding"})]}),$e.boardingStatus&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.boardingStatus[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-sky-500 rounded-full mr-1.5"}),"Birth Certificate No"]}),(0,o.jsx)("input",{type:"text",value:K.birthCertificateNo,onChange:e=>Wt("birthCertificateNo",e.target.value),placeholder:"Enter birth certificate number",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-100 focus:border-sky-500 transition-all duration-200 bg-white "+($e.birthCertificateNo?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.birthCertificateNo&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.birthCertificateNo[0]})]})]}),(0,o.jsx)("div",{className:"space-y-1",children:(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",checked:K.exemptedFromReligiousInstruction,onChange:e=>Wt("exemptedFromReligiousInstruction",e.target.checked),className:"h-3 w-3 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsx)("span",{className:"ml-2 text-xs text-gray-700",children:"Exempted from Religious Instruction"})]})}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-slate-500 rounded-full mr-1.5"}),"Remarks"]}),(0,o.jsx)("textarea",{value:K.remarks,onChange:e=>Wt("remarks",e.target.value),placeholder:"Enter remarks",rows:2,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-100 focus:border-slate-500 transition-all duration-200 bg-white resize-none "+($e.remarks?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.remarks&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.remarks[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-yellow-500 rounded-full mr-1.5"}),"NEMIS Number"]}),(0,o.jsx)("input",{type:"text",value:K.nemisNumber,onChange:e=>Wt("nemisNumber",e.target.value),placeholder:"Enter NEMIS number",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-500 transition-all duration-200 bg-white "+($e.nemisNumber?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.nemisNumber&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.nemisNumber[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full mr-1.5"}),"Assessment Number"]}),(0,o.jsx)("input",{type:"text",value:K.assessmentNumber,onChange:e=>Wt("assessmentNumber",e.target.value),placeholder:"Enter assessment number",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-100 focus:border-amber-500 transition-all duration-200 bg-white "+($e.assessmentNumber?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.assessmentNumber&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.assessmentNumber[0]})]})]}),(0,o.jsx)("div",{className:"space-y-1",children:(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",checked:K.hasSpecialNeed,onChange:e=>Wt("hasSpecialNeed",e.target.checked),className:"h-3 w-3 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsx)("span",{className:"ml-2 text-xs text-gray-700",children:"Has Special Need"})]})}),K.hasSpecialNeed&&(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Special Need Description"]}),(0,o.jsx)("textarea",{value:K.specialNeed||"",onChange:e=>Wt("specialNeed",e.target.value),placeholder:"Please specify the special need",rows:3,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white resize-none "+($e.specialNeed?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.specialNeed&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.specialNeed[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Preferred Hospital"]}),(0,o.jsx)("input",{type:"text",value:K.preferredHospital,onChange:e=>Wt("preferredHospital",e.target.value),placeholder:"Enter preferred hospital",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+($e.preferredHospital?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.preferredHospital&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.preferredHospital[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-1.5"}),"Health Information"]}),(0,o.jsx)("textarea",{value:K.healthInfo,onChange:e=>Wt("healthInfo",e.target.value),placeholder:"Enter health information",rows:3,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-100 focus:border-red-500 transition-all duration-200 bg-white resize-none "+($e.healthInfo?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.healthInfo&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.healthInfo[0]})]})]})]}),ee&&(0,o.jsx)("div",{className:"space-y-4",children:(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Stream Name *"]}),(0,o.jsx)("input",{type:"text",value:ee.name,onChange:e=>Vt("name",e.target.value),placeholder:"Enter stream name",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+($e.name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.name[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Stream Code *"]}),(0,o.jsx)("input",{type:"text",value:ee.code,onChange:e=>Vt("code",e.target.value),placeholder:"Enter stream code",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+($e.code?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.code&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.code[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Description"]}),(0,o.jsx)("textarea",{value:ee.description,onChange:e=>Vt("description",e.target.value),placeholder:"Enter stream description",rows:3,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white resize-none "+($e.description?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.description&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.description[0]})]})]})}),ae&&(0,o.jsx)("div",{className:"space-y-4",children:(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Class Name *"]}),(0,o.jsx)("input",{type:"text",value:ae.name,onChange:e=>Kt("name",e.target.value),placeholder:"Enter class name",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+($e.name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.name[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Class Code *"]}),(0,o.jsx)("input",{type:"text",value:ae.code,onChange:e=>Kt("code",e.target.value),placeholder:"Enter class code",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+($e.code?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.code&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.code[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Stream *"]}),(0,o.jsxs)("select",{value:"string"===typeof ae.stream?ae.stream:(null===(s=ae.stream)||void 0===s?void 0:s.id)||"",onChange:e=>Kt("stream",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+($e.stream?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select a stream"}),it.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.name," - ",e.code]},e.id))]}),$e.stream&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.stream[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"Description"]}),(0,o.jsx)("textarea",{value:ae.description,onChange:e=>Kt("description",e.target.value),placeholder:"Enter class description",rows:3,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 transition-all duration-200 bg-white resize-none "+($e.description?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.description&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.description[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Level (Optional)"]}),(0,o.jsx)("input",{type:"number",value:ae.level||"",onChange:e=>Kt("level",parseInt(e.target.value)||0),placeholder:"Enter class level",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+($e.level?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.level&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.level[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-pink-500 rounded-full mr-1.5"}),"Capacity (Optional)"]}),(0,o.jsx)("input",{type:"number",value:ae.capacity||"",onChange:e=>Kt("capacity",parseInt(e.target.value)||0),placeholder:"Enter class capacity",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-pink-500 transition-all duration-200 bg-white "+($e.capacity?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),$e.capacity&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:$e.capacity[0]})]})]})]})})]}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:Bt,className:"px-4 py-2 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsxs)("button",{onClick:async()=>{if(K&&J)try{const e=((e,t)=>{const s={},r=e=>null===e||void 0===e?"":String(e).trim();return r(e.fullName||e.pupil_name)!==r(t.fullName)&&(s.pupil_name=t.fullName||""),r(e.dateOfBirth||e.date_of_birth)!==r(t.dateOfBirth)&&(s.date_of_birth=t.dateOfBirth||""),r(e.gender)!==r(t.gender)&&(s.gender=t.gender||""),r(e.dateOfAdmission||e.date_of_admission)!==r(t.dateOfAdmission)&&(s.date_of_admission=t.dateOfAdmission||""),r(e.classOnAdmission||e.class_on_admission_id||e.class)!==r(t.classOnAdmission)&&(s.class_on_admission_id=t.classOnAdmission||""),r(e.currentClass||e.current_class_id)!==r(t.currentClass)&&(s.current_class_id=t.currentClass||""),r(e.guardianName||e.guardian_name||e.parentName)!==r(t.guardianName)&&(s.guardian_name=t.guardianName||""),r(e.guardianPhone||e.guardian_phone)!==r(t.guardianPhone)&&(s.guardian_phone=t.guardianPhone||""),r(e.guardianRelationship||e.guardian_relationship)!==r(t.guardianRelationship)&&(s.guardian_relationship=t.guardianRelationship||""),r(e.nemisNumber||e.nemis_number)!==r(t.nemisNumber)&&(s.nemis_number=t.nemisNumber||""),r(e.assessmentNumber||e.assessment_number)!==r(t.assessmentNumber)&&(s.assessment_number=t.assessmentNumber||""),e.hasSpecialNeed!==t.hasSpecialNeed&&(s.has_special_need=t.hasSpecialNeed||!1),r(e.specialNeed)!==r(t.specialNeed)&&(s.special_need=t.specialNeed||""),r(e.preferredHospital||e.preferred_hospital)!==r(t.preferredHospital)&&(s.preferred_hospital=t.preferredHospital||""),r(e.healthInfo||e.health_info)!==r(t.healthInfo)&&(s.health_info=t.healthInfo||""),r(e.address)!==r(t.address)&&(s.address=t.address||""),r(e.lastSchoolAttended||e.last_school_attended)!==r(t.lastSchoolAttended)&&(s.last_school_attended=t.lastSchoolAttended||""),r(e.boardingStatus||e.boarding_status)!==r(t.boardingStatus)&&(s.boarding_status=t.boardingStatus||""),e.exemptedFromReligiousInstruction!==t.exemptedFromReligiousInstruction&&(s.exempted_from_religious_instruction=t.exemptedFromReligiousInstruction||!1),r(e.birthCertificateNo||e.birth_certificate_no)!==r(t.birthCertificateNo)&&(s.birth_certificate_no=t.birthCertificateNo||""),r(e.dateOfLeaving||e.date_of_leaving)!==r(t.dateOfLeaving)&&(s.date_of_leaving=t.dateOfLeaving||""),r(e.school_leaving_certificate_number)!==r(t.school_leaving_certificate_number)&&(s.school_leaving_certificate_number=t.school_leaving_certificate_number||""),r(e.remarks)!==r(t.remarks)&&(s.remarks=t.remarks||""),s})(J,K);if(0===Object.keys(e).length)return he({message:"No changes detected. Student information is already up to date.",type:"success"}),void Bt();const t=K.id||J.id;if(!t)throw new Error("Student ID is required for update");await l.students.update(t,e),await Et(),he({message:"Student updated successfully!",type:"success"}),He({}),Bt(),setTimeout(()=>{he(null)},3e3)}catch(d){var e,t,s;if(console.error("Error updating student:",d),null!==(e=d.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors){const e={};Object.entries(d.response.data.errors).forEach(t=>{let[s,r]=t,a=s.replace(/_([a-z])/g,e=>e[1].toUpperCase());"pupil_name"===s&&(a="fullName"),e[a]=r}),He(e),he({message:d.response.data.message||"Please fix the validation errors below.",type:"error"})}else if(null!==(s=d.response)&&void 0!==s&&s.data)if("object"===typeof d.response.data&&null!==d.response.data){const e=d.response.data.errors||d.response.data;if("object"===typeof e&&null!==e){const t={};Object.entries(e).forEach(e=>{let[s,r]=e,a=s.replace(/_([a-z])/g,e=>e[1].toUpperCase());"pupil_name"===s&&(a="fullName"),t[a]=Array.isArray(r)?r:[String(r)]}),He(t),he({message:"Please fix the validation errors below.",type:"error"})}else He({}),he({message:"Failed to update student. Please try again.",type:"error"})}else He({}),he({message:"Failed to update student. Please try again.",type:"error"});else He({}),he({message:"Failed to update student. Please try again.",type:"error"});setTimeout(()=>{he(null)},5e3)}else if(ee&&se)try{if(!It())return he({message:"No changes detected. Stream information is already up to date.",type:"success"}),void Bt();const e=ee.id||se.id;if(!e)throw new Error("Stream ID is required for update");const t={};ee.name!==se.name&&(t.name=ee.name),ee.code!==se.code&&(t.code=ee.code),ee.description!==se.description&&(t.description=ee.description),await l.students.updateStream(e,t),await St(),he({message:"Stream updated successfully!",type:"success"}),He({}),Bt(),setTimeout(()=>{he(null)},3e3)}catch(d){var r,a;if(console.error("Error updating stream:",d),null!==(r=d.response)&&void 0!==r&&null!==(a=r.data)&&void 0!==a&&a.errors){const e={};Object.entries(d.response.data.errors).forEach(t=>{let[s,r]=t;e[s]=r}),He(e),he({message:d.response.data.message||"Please fix the validation errors below.",type:"error"})}else He({}),he({message:"Failed to update stream. Please try again.",type:"error"});setTimeout(()=>{he(null)},5e3)}else if(ae&&le)try{if(!Ut())return he({message:"No changes detected. Class information is already up to date.",type:"success"}),void Bt();const e=ae.id||le.id;if(!e)throw new Error("Class ID is required for update");const t={};var n;if(ae.name!==le.name&&(t.name=ae.name),ae.code!==le.code&&(t.code=ae.code),ae.stream!==le.stream)t.stream="string"===typeof ae.stream?ae.stream:(null===(n=ae.stream)||void 0===n?void 0:n.id)||"";ae.description!==le.description&&(t.description=ae.description),await l.students.updateClass(e,t),await Ct(),he({message:"Class updated successfully!",type:"success"}),He({}),Bt(),setTimeout(()=>{he(null)},3e3)}catch(d){var i,o;if(console.error("Error updating class:",d),null!==(i=d.response)&&void 0!==i&&null!==(o=i.data)&&void 0!==o&&o.errors){const e={};Object.entries(d.response.data.errors).forEach(t=>{let[s,r]=t;e[s]=r}),He(e),he({message:d.response.data.message||"Please fix the validation errors below.",type:"error"})}else He({}),he({message:"Failed to update class. Please try again.",type:"error"});setTimeout(()=>{he(null)},5e3)}},disabled:K&&!(K&&J&&(K.admissionNumber!==J.admissionNumber||K.fullName!==J.fullName||K.dateOfBirth!==J.dateOfBirth||K.gender!==J.gender||K.dateOfAdmission!==J.dateOfAdmission||K.classOnAdmission!==J.classOnAdmission||K.currentClass!==J.currentClass||K.lastSchoolAttended!==J.lastSchoolAttended||K.guardianName!==J.guardianName||K.guardianPhone!==J.guardianPhone||K.guardianRelationship!==J.guardianRelationship||K.nemisNumber!==J.nemisNumber||K.assessmentNumber!==J.assessmentNumber||K.hasSpecialNeed!==J.hasSpecialNeed||K.specialNeed!==J.specialNeed||K.preferredHospital!==J.preferredHospital||K.healthInfo!==J.healthInfo||K.address!==J.address||K.boardingStatus!==J.boardingStatus||K.exemptedFromReligiousInstruction!==J.exemptedFromReligiousInstruction||K.birthCertificateNo!==J.birthCertificateNo||K.image!==J.image||K.dateOfLeaving!==J.dateOfLeaving||K.schoolLeavingCertificateNumber!==J.schoolLeavingCertificateNumber||K.remarks!==J.remarks))||ae&&!Ut()||ee&&!It()||!1,className:"px-4 py-2 text-xs bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-semibold shadow-sm hover:shadow-md",children:[K&&"Update Student",ee&&"Update Stream",ae&&"Update Class"]})]})]})}),de&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-end z-[10002] transition-all duration-300 ease-in-out",children:(0,o.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 h-full w-96 shadow-2xl overflow-y-auto border-l border-gray-100 transform transition-transform duration-300 ease-out",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,o.jsxs)("h2",{className:"text-lg font-bold text-gray-900",children:["admission"===R&&"Add New Student","classes"===R&&"Add New Class","streams"===R&&"Add New Stream","academic"===R&&"Add New Academic","financial"===R&&"Add New Financial","attendance"===R&&"Add New Attendance"]})]}),(0,o.jsx)("button",{onClick:Ft,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[Object.keys(Ue).length>0&&(0,o.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-4 shadow-sm",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Please fix the errors below"})})]})}),"admission"===R&&(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Admission Number *"]}),(0,o.jsx)("input",{type:"text",value:qe.admissionNumber,onChange:e=>Ot("admissionNumber",e.target.value),placeholder:"Enter admission number",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(Ue.admissionNumber?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.admissionNumber&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.admissionNumber[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Full Names *"]}),(0,o.jsx)("input",{type:"text",value:qe.fullName,onChange:e=>Ot("fullName",e.target.value),placeholder:"Enter full names",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(Ue.fullName?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.fullName&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.fullName[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Date Of Birth *"]}),(0,o.jsx)("input",{type:"date",value:qe.dateOfBirth,onChange:e=>Ot("dateOfBirth",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+(Ue.dateOfBirth?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.dateOfBirth&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.dateOfBirth[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Gender *"]}),(0,o.jsxs)("select",{value:qe.gender,onChange:e=>Ot("gender",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(Ue.gender?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"Male",children:"Male"}),(0,o.jsx)("option",{value:"Female",children:"Female"}),(0,o.jsx)("option",{value:"Other",children:"Other"})]}),Ue.gender&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.gender[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Date Of Admission *"]}),(0,o.jsx)("input",{type:"date",value:qe.dateOfAdmission,onChange:e=>Ot("dateOfAdmission",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+(Ue.dateOfAdmission?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.dateOfAdmission&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.dateOfAdmission[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsx)("div",{className:"space-y-1",children:(0,o.jsx)(Ce,{label:"Class On Admission",value:qe.classOnAdmission||"",onChange:e=>Ot("classOnAdmission",e),options:dt,placeholder:"Select a class",error:null===(a=Ue.classOnAdmission)||void 0===a?void 0:a[0],required:!0,emptyMessage:"No classes available",onCreateNew:()=>M("classes"),type:"class",hasStreams:it.length>0})}),(0,o.jsx)("div",{className:"space-y-1",children:(0,o.jsx)(Ce,{label:"Current Class",value:qe.currentClass||"",onChange:e=>Ot("currentClass",e),options:dt,placeholder:"Select a class",error:null===(n=Ue.currentClass)||void 0===n?void 0:n[0],required:!1,emptyMessage:"No classes available",onCreateNew:()=>M("classes"),type:"class",hasStreams:it.length>0})})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"Last School Attended"]}),(0,o.jsx)("input",{type:"text",value:qe.lastSchoolAttended,onChange:e=>Ot("lastSchoolAttended",e.target.value),placeholder:"Enter last school attended",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 transition-all duration-200 bg-white "+(Ue.lastSchoolAttended?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.lastSchoolAttended&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.lastSchoolAttended[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-pink-500 rounded-full mr-1.5"}),"Guardian Name"]}),(0,o.jsx)("input",{type:"text",value:qe.guardianName,onChange:e=>Ot("guardianName",e.target.value),placeholder:"Enter guardian name",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-pink-500 transition-all duration-200 bg-white "+(Ue.guardianName?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.guardianName&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.guardianName[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-violet-500 rounded-full mr-1.5"}),"Guardian Phone"]}),(0,o.jsxs)("div",{className:"flex space-x-2",children:[(0,o.jsx)("div",{className:"w-24",children:(0,o.jsxs)("select",{value:Ve,onChange:e=>{Ge(e.target.value);const t=et(qe.guardianPhone||""),s=`${e.target.value}${t}`;Ot("guardianPhone",s)},className:"w-full px-2 py-2 text-xs border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-100 focus:border-violet-500 transition-all duration-200 bg-white",children:[(0,o.jsx)("option",{value:"+254",children:"+254 (KE)"}),(0,o.jsx)("option",{value:"+255",children:"+255 (TZ)"}),(0,o.jsx)("option",{value:"+256",children:"+256 (UG)"}),(0,o.jsx)("option",{value:"+250",children:"+250 (RW)"}),(0,o.jsx)("option",{value:"+257",children:"+257 (BI)"}),(0,o.jsx)("option",{value:"+1",children:"+1 (US/CA)"}),(0,o.jsx)("option",{value:"+44",children:"+44 (UK)"}),(0,o.jsx)("option",{value:"+91",children:"+91 (IN)"}),(0,o.jsx)("option",{value:"+86",children:"+86 (CN)"}),(0,o.jsx)("option",{value:"+81",children:"+81 (JP)"}),(0,o.jsx)("option",{value:"+49",children:"+49 (DE)"}),(0,o.jsx)("option",{value:"+33",children:"+33 (FR)"}),(0,o.jsx)("option",{value:"+39",children:"+39 (IT)"}),(0,o.jsx)("option",{value:"+34",children:"+34 (ES)"}),(0,o.jsx)("option",{value:"+31",children:"+31 (NL)"}),(0,o.jsx)("option",{value:"+46",children:"+46 (SE)"}),(0,o.jsx)("option",{value:"+47",children:"+47 (NO)"}),(0,o.jsx)("option",{value:"+45",children:"+45 (DK)"}),(0,o.jsx)("option",{value:"+358",children:"+358 (FI)"}),(0,o.jsx)("option",{value:"+48",children:"+48 (PL)"}),(0,o.jsx)("option",{value:"+420",children:"+420 (CZ)"}),(0,o.jsx)("option",{value:"+36",children:"+36 (HU)"}),(0,o.jsx)("option",{value:"+40",children:"+40 (RO)"}),(0,o.jsx)("option",{value:"+380",children:"+380 (UA)"}),(0,o.jsx)("option",{value:"+7",children:"+7 (RU)"}),(0,o.jsx)("option",{value:"+90",children:"+90 (TR)"}),(0,o.jsx)("option",{value:"+966",children:"+966 (SA)"}),(0,o.jsx)("option",{value:"+971",children:"+971 (AE)"}),(0,o.jsx)("option",{value:"+972",children:"+972 (IL)"}),(0,o.jsx)("option",{value:"+20",children:"+20 (EG)"}),(0,o.jsx)("option",{value:"+27",children:"+27 (ZA)"}),(0,o.jsx)("option",{value:"+234",children:"+234 (NG)"}),(0,o.jsx)("option",{value:"+233",children:"+233 (GH)"}),(0,o.jsx)("option",{value:"+237",children:"+237 (CM)"}),(0,o.jsx)("option",{value:"+212",children:"+212 (MA)"}),(0,o.jsx)("option",{value:"+216",children:"+216 (TN)"}),(0,o.jsx)("option",{value:"+213",children:"+213 (DZ)"}),(0,o.jsx)("option",{value:"+218",children:"+218 (LY)"}),(0,o.jsx)("option",{value:"+249",children:"+249 (SD)"}),(0,o.jsx)("option",{value:"+251",children:"+251 (ET)"}),(0,o.jsx)("option",{value:"+252",children:"+252 (SO)"}),(0,o.jsx)("option",{value:"+253",children:"+253 (DJ)"}),(0,o.jsx)("option",{value:"+254",children:"+254 (KE)"}),(0,o.jsx)("option",{value:"+255",children:"+255 (TZ)"}),(0,o.jsx)("option",{value:"+256",children:"+256 (UG)"}),(0,o.jsx)("option",{value:"+257",children:"+257 (BI)"}),(0,o.jsx)("option",{value:"+258",children:"+258 (MZ)"}),(0,o.jsx)("option",{value:"+260",children:"+260 (ZM)"}),(0,o.jsx)("option",{value:"+261",children:"+261 (MG)"}),(0,o.jsx)("option",{value:"+262",children:"+262 (RE)"}),(0,o.jsx)("option",{value:"+263",children:"+263 (ZW)"}),(0,o.jsx)("option",{value:"+264",children:"+264 (NA)"}),(0,o.jsx)("option",{value:"+265",children:"+265 (MW)"}),(0,o.jsx)("option",{value:"+266",children:"+266 (LS)"}),(0,o.jsx)("option",{value:"+267",children:"+267 (BW)"}),(0,o.jsx)("option",{value:"+268",children:"+268 (SZ)"}),(0,o.jsx)("option",{value:"+269",children:"+269 (KM)"}),(0,o.jsx)("option",{value:"+290",children:"+290 (SH)"}),(0,o.jsx)("option",{value:"+291",children:"+291 (ER)"}),(0,o.jsx)("option",{value:"+297",children:"+297 (AW)"}),(0,o.jsx)("option",{value:"+298",children:"+298 (FO)"}),(0,o.jsx)("option",{value:"+299",children:"+299 (GL)"}),(0,o.jsx)("option",{value:"+500",children:"+500 (FK)"}),(0,o.jsx)("option",{value:"+501",children:"+501 (BZ)"}),(0,o.jsx)("option",{value:"+502",children:"+502 (GT)"}),(0,o.jsx)("option",{value:"+503",children:"+503 (SV)"}),(0,o.jsx)("option",{value:"+504",children:"+504 (HN)"}),(0,o.jsx)("option",{value:"+505",children:"+505 (NI)"}),(0,o.jsx)("option",{value:"+506",children:"+506 (CR)"}),(0,o.jsx)("option",{value:"+507",children:"+507 (PA)"}),(0,o.jsx)("option",{value:"+508",children:"+508 (PM)"}),(0,o.jsx)("option",{value:"+509",children:"+509 (HT)"}),(0,o.jsx)("option",{value:"+590",children:"+590 (GP)"}),(0,o.jsx)("option",{value:"+591",children:"+591 (BO)"}),(0,o.jsx)("option",{value:"+592",children:"+592 (GY)"}),(0,o.jsx)("option",{value:"+593",children:"+593 (EC)"}),(0,o.jsx)("option",{value:"+594",children:"+594 (GF)"}),(0,o.jsx)("option",{value:"+595",children:"+595 (PY)"}),(0,o.jsx)("option",{value:"+596",children:"+596 (MQ)"}),(0,o.jsx)("option",{value:"+597",children:"+597 (SR)"}),(0,o.jsx)("option",{value:"+598",children:"+598 (UY)"}),(0,o.jsx)("option",{value:"+599",children:"+599 (CW)"}),(0,o.jsx)("option",{value:"+670",children:"+670 (TL)"}),(0,o.jsx)("option",{value:"+672",children:"+672 (AU)"}),(0,o.jsx)("option",{value:"+673",children:"+673 (BN)"}),(0,o.jsx)("option",{value:"+674",children:"+674 (NR)"}),(0,o.jsx)("option",{value:"+675",children:"+675 (PG)"}),(0,o.jsx)("option",{value:"+676",children:"+676 (TO)"}),(0,o.jsx)("option",{value:"+677",children:"+677 (SB)"}),(0,o.jsx)("option",{value:"+678",children:"+678 (VU)"}),(0,o.jsx)("option",{value:"+679",children:"+679 (FJ)"}),(0,o.jsx)("option",{value:"+680",children:"+680 (PW)"}),(0,o.jsx)("option",{value:"+681",children:"+681 (WF)"}),(0,o.jsx)("option",{value:"+682",children:"+682 (CK)"}),(0,o.jsx)("option",{value:"+683",children:"+683 (NU)"}),(0,o.jsx)("option",{value:"+685",children:"+685 (WS)"}),(0,o.jsx)("option",{value:"+686",children:"+686 (KI)"}),(0,o.jsx)("option",{value:"+687",children:"+687 (NC)"}),(0,o.jsx)("option",{value:"+688",children:"+688 (TV)"}),(0,o.jsx)("option",{value:"+689",children:"+689 (PF)"}),(0,o.jsx)("option",{value:"+690",children:"+690 (TK)"}),(0,o.jsx)("option",{value:"+691",children:"+691 (FM)"}),(0,o.jsx)("option",{value:"+692",children:"+692 (MH)"}),(0,o.jsx)("option",{value:"+850",children:"+850 (KP)"}),(0,o.jsx)("option",{value:"+852",children:"+852 (HK)"}),(0,o.jsx)("option",{value:"+853",children:"+853 (MO)"}),(0,o.jsx)("option",{value:"+855",children:"+855 (KH)"}),(0,o.jsx)("option",{value:"+856",children:"+856 (LA)"}),(0,o.jsx)("option",{value:"+880",children:"+880 (BD)"}),(0,o.jsx)("option",{value:"+886",children:"+886 (TW)"}),(0,o.jsx)("option",{value:"+960",children:"+960 (MV)"}),(0,o.jsx)("option",{value:"+961",children:"+961 (LB)"}),(0,o.jsx)("option",{value:"+962",children:"+962 (JO)"}),(0,o.jsx)("option",{value:"+963",children:"+963 (SY)"}),(0,o.jsx)("option",{value:"+964",children:"+964 (IQ)"}),(0,o.jsx)("option",{value:"+965",children:"+965 (KW)"}),(0,o.jsx)("option",{value:"+966",children:"+966 (SA)"}),(0,o.jsx)("option",{value:"+967",children:"+967 (YE)"}),(0,o.jsx)("option",{value:"+968",children:"+968 (OM)"}),(0,o.jsx)("option",{value:"+970",children:"+970 (PS)"}),(0,o.jsx)("option",{value:"+971",children:"+971 (AE)"}),(0,o.jsx)("option",{value:"+972",children:"+972 (IL)"}),(0,o.jsx)("option",{value:"+973",children:"+973 (BH)"}),(0,o.jsx)("option",{value:"+974",children:"+974 (QA)"}),(0,o.jsx)("option",{value:"+975",children:"+975 (BT)"}),(0,o.jsx)("option",{value:"+976",children:"+976 (MN)"}),(0,o.jsx)("option",{value:"+977",children:"+977 (NP)"}),(0,o.jsx)("option",{value:"+992",children:"+992 (TJ)"}),(0,o.jsx)("option",{value:"+993",children:"+993 (TM)"}),(0,o.jsx)("option",{value:"+994",children:"+994 (AZ)"}),(0,o.jsx)("option",{value:"+995",children:"+995 (GE)"}),(0,o.jsx)("option",{value:"+996",children:"+996 (KG)"}),(0,o.jsx)("option",{value:"+998",children:"+998 (UZ)"}),(0,o.jsx)("option",{value:"+999",children:"+999 (Custom)"})]})}),"+999"===Ve&&(0,o.jsx)("div",{className:"w-20",children:(0,o.jsx)("input",{type:"text",value:Ye,onChange:e=>{const t=e.target.value;Je(t);const s=et(qe.guardianPhone||"");Ot("guardianPhone",`${t}${s}`)},placeholder:"+XX",className:"w-full px-2 py-2 text-xs border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-100 focus:border-violet-500 transition-all duration-200 bg-white"})}),(0,o.jsx)("div",{className:"flex-1",children:(0,o.jsx)("input",{type:"tel",value:et(qe.guardianPhone||""),onChange:e=>{const t=e.target.value.replace(/\D/g,"");Ot("guardianPhone",`${Ve}${t}`)},placeholder:"700000000",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-100 focus:border-violet-500 transition-all duration-200 bg-white "+(Ue.guardianPhone?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")})})]}),Ue.guardianPhone&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.guardianPhone[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full mr-1.5"}),"Guardian Relationship"]}),(0,o.jsxs)("select",{value:qe.guardianRelationship,onChange:e=>Ot("guardianRelationship",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-100 focus:border-amber-500 transition-all duration-200 bg-white "+(Ue.guardianRelationship?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select relationship"}),(0,o.jsx)("option",{value:"Father",children:"Father"}),(0,o.jsx)("option",{value:"Mother",children:"Mother"}),(0,o.jsx)("option",{value:"Guardian",children:"Guardian"}),(0,o.jsx)("option",{value:"Other",children:"Other"})]}),Ue.guardianRelationship&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.guardianRelationship[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-lime-500 rounded-full mr-1.5"}),"Address"]}),(0,o.jsx)("textarea",{value:qe.address,onChange:e=>Ot("address",e.target.value),placeholder:"Enter address",rows:2,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-lime-100 focus:border-lime-500 transition-all duration-200 bg-white resize-none "+(Ue.address?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.address&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.address[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-rose-500 rounded-full mr-1.5"}),"Boarding Status"]}),(0,o.jsxs)("select",{value:qe.boardingStatus,onChange:e=>Ot("boardingStatus",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-rose-100 focus:border-rose-500 transition-all duration-200 bg-white "+(Ue.boardingStatus?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"Day",children:"Day"}),(0,o.jsx)("option",{value:"Boarding",children:"Boarding"})]}),Ue.boardingStatus&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.boardingStatus[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-sky-500 rounded-full mr-1.5"}),"Birth Certificate No"]}),(0,o.jsx)("input",{type:"text",value:qe.birthCertificateNo,onChange:e=>Ot("birthCertificateNo",e.target.value),placeholder:"Enter birth certificate number",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-100 focus:border-sky-500 transition-all duration-200 bg-white "+(Ue.birthCertificateNo?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.birthCertificateNo&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.birthCertificateNo[0]})]})]}),(0,o.jsx)("div",{className:"space-y-1",children:(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",checked:qe.exemptedFromReligiousInstruction,onChange:e=>Ot("exemptedFromReligiousInstruction",e.target.checked),className:"h-3 w-3 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsx)("span",{className:"ml-2 text-xs text-gray-700",children:"Exempted from Religious Instruction"})]})}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-slate-500 rounded-full mr-1.5"}),"Remarks"]}),(0,o.jsx)("textarea",{value:qe.remarks,onChange:e=>Ot("remarks",e.target.value),placeholder:"Enter remarks",rows:2,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-100 focus:border-slate-500 transition-all duration-200 bg-white resize-none "+(Ue.remarks?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.remarks&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.remarks[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-yellow-500 rounded-full mr-1.5"}),"NEMIS Number"]}),(0,o.jsx)("input",{type:"text",value:qe.nemisNumber,onChange:e=>Ot("nemisNumber",e.target.value),placeholder:"Enter NEMIS number",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-500 transition-all duration-200 bg-white "+(Ue.nemisNumber?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.nemisNumber&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.nemisNumber[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full mr-1.5"}),"Assessment Number"]}),(0,o.jsx)("input",{type:"text",value:qe.assessmentNumber,onChange:e=>Ot("assessmentNumber",e.target.value),placeholder:"Enter assessment number",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-100 focus:border-amber-500 transition-all duration-200 bg-white "+(Ue.assessmentNumber?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.assessmentNumber&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.assessmentNumber[0]})]})]}),(0,o.jsx)("div",{className:"space-y-1",children:(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",checked:qe.hasSpecialNeed,onChange:e=>Ot("hasSpecialNeed",e.target.checked),className:"h-3 w-3 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsx)("span",{className:"ml-2 text-xs text-gray-700",children:"Has Special Need"})]})}),qe.hasSpecialNeed&&(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Special Need Description"]}),(0,o.jsx)("textarea",{value:qe.specialNeed||"",onChange:e=>Ot("specialNeed",e.target.value),placeholder:"Please specify the special need",rows:3,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white resize-none "+(Ue.specialNeed?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.specialNeed&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.specialNeed[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Preferred Hospital"]}),(0,o.jsx)("input",{type:"text",value:qe.preferredHospital,onChange:e=>Ot("preferredHospital",e.target.value),placeholder:"Enter preferred hospital",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(Ue.preferredHospital?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.preferredHospital&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.preferredHospital[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-1.5"}),"Health Information"]}),(0,o.jsx)("textarea",{value:qe.healthInfo,onChange:e=>Ot("healthInfo",e.target.value),placeholder:"Enter health information",rows:3,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-100 focus:border-red-500 transition-all duration-200 bg-white resize-none "+(Ue.healthInfo?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.healthInfo&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.healthInfo[0]})]})]})]}),"streams"===R&&(0,o.jsxs)("div",{className:"space-y-4",children:[0===it.length&&(0,o.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-4 mb-4",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[X({className:"w-4 h-4 text-purple-600"}),(0,o.jsx)("h3",{className:"text-sm font-semibold text-purple-900",children:"Getting Started with Streams"})]}),(0,o.jsx)("p",{className:"text-xs text-purple-700 mb-3",children:"Streams are the foundation of your school structure. They help organize students by academic focus areas."}),(0,o.jsxs)("div",{className:"text-xs text-purple-600",children:[(0,o.jsx)("strong",{children:"Examples:"})," Science Stream, Arts Stream, Business Stream, Technical Stream, North, South, East, West"]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Stream Name *"]}),(0,o.jsx)("input",{type:"text",value:tt.name,onChange:e=>zt("name",e.target.value),placeholder:"Enter stream name",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(Ue.name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.name[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Stream Code *"]}),(0,o.jsx)("input",{type:"text",value:tt.code,onChange:e=>zt("code",e.target.value),placeholder:"Enter stream code",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(Ue.code?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.code&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.code[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Description"]}),(0,o.jsx)("textarea",{value:tt.description,onChange:e=>zt("description",e.target.value),placeholder:"Enter stream description",rows:3,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white resize-none "+(Ue.description?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.description&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.description[0]})]})]})]}),"classes"===R&&(0,o.jsxs)("div",{className:"space-y-4",children:[0===dt.length&&(0,o.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-4 mb-4",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[X({className:"w-4 h-4 text-green-600"}),(0,o.jsx)("h3",{className:"text-sm font-semibold text-green-900",children:"Getting Started with Classes"})]}),(0,o.jsx)("p",{className:"text-xs text-green-700 mb-3",children:"Classes are created within streams to organize students by grade level and academic focus."}),(0,o.jsxs)("div",{className:"text-xs text-green-600",children:[(0,o.jsx)("strong",{children:"Examples:"})," Form 1A (Science), Form 2B (Arts), Form 3C (Business)"]}),0===it.length&&(0,o.jsxs)("div",{className:"mt-3 p-2 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 text-amber-700",children:[G({className:"w-3 h-3"}),(0,o.jsx)("span",{className:"text-xs font-medium",children:"You need to create streams first!"})]}),(0,o.jsxs)("button",{onClick:()=>M("streams"),className:"mt-2 text-xs bg-amber-600 hover:bg-amber-700 text-white px-3 py-1.5 rounded-lg transition-colors duration-200 flex items-center space-x-1",children:[(Yt={className:"w-2 h-2"},C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(Yt)),(0,o.jsx)("span",{children:"Go to Streams"})]})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Class Name *"]}),(0,o.jsx)("input",{type:"text",value:rt.name,onChange:e=>Gt("name",e.target.value),placeholder:"Enter class name",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(Ue.name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.name[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Class Code *"]}),(0,o.jsx)("input",{type:"text",value:rt.code,onChange:e=>Gt("code",e.target.value),placeholder:"Enter class code",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(Ue.code?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.code&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.code[0]})]}),(0,o.jsx)("div",{className:"space-y-1",children:(0,o.jsx)(Ce,{label:"Stream",value:rt.stream||"",onChange:e=>Gt("stream",e),options:it,placeholder:"Select a stream",error:null===(i=Ue.stream)||void 0===i?void 0:i[0],required:!0,emptyMessage:"No streams available",onCreateNew:()=>M("streams"),type:"stream",hasStreams:it.length>0})}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"Description"]}),(0,o.jsx)("textarea",{value:rt.description,onChange:e=>Gt("description",e.target.value),placeholder:"Enter class description",rows:3,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 transition-all duration-200 bg-white resize-none "+(Ue.description?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.description&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.description[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Level (Optional)"]}),(0,o.jsx)("input",{type:"number",value:rt.level||"",onChange:e=>Gt("level",parseInt(e.target.value)||0),placeholder:"Enter class level",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(Ue.level?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.level&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.level[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-pink-500 rounded-full mr-1.5"}),"Capacity (Optional)"]}),(0,o.jsx)("input",{type:"number",value:rt.capacity||"",onChange:e=>Gt("capacity",parseInt(e.target.value)||0),placeholder:"Enter class capacity",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-pink-500 transition-all duration-200 bg-white "+(Ue.capacity?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Ue.capacity&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Ue.capacity[0]})]})]})]})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:Ft,className:"px-4 py-2 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsxs)("button",{onClick:"admission"===R?Dt:"streams"===R?async()=>{try{await l.students.createStream({name:tt.name||"",code:tt.code||"",description:tt.description||""}),await St(),he({message:"Stream added successfully!",type:"success"}),Be({}),st({name:"",code:"",description:""}),setTimeout(()=>{Ft()},100),setTimeout(()=>{he(null)},3e3)}catch(s){var e,t;if(console.error("Error adding stream:",s),null!==(e=s.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors){const e={};Object.entries(s.response.data.errors).forEach(t=>{let[s,r]=t;e[s]=r}),Be(e)}else he({message:"Failed to add stream. Please try again.",type:"error"})}}:"classes"===R?async()=>{try{await l.students.createClass({name:rt.name||"",code:rt.code||"",stream:rt.stream||"",description:rt.description||"",level:rt.level||void 0,capacity:rt.capacity||void 0}),await Ct(),he({message:"Class added successfully!",type:"success"}),Be({}),at({name:"",code:"",stream:"",description:"",level:0,capacity:0}),setTimeout(()=>{Ft()},100),setTimeout(()=>{he(null)},3e3)}catch(s){var e,t;if(console.error("Error adding class:",s),null!==(e=s.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors){const e={};Object.entries(s.response.data.errors).forEach(t=>{let[s,r]=t;e[s]=r}),Be(e),he({message:s.response.data.message||"Please fix the validation errors below.",type:"error"})}else He({}),he({message:"Failed to add class. Please try again.",type:"error"})}}:Dt,disabled:"admission"===R?!qe.admissionNumber||!qe.fullName||!qe.dateOfBirth||!qe.gender||!qe.dateOfAdmission||!qe.classOnAdmission:"streams"===R?!tt.name||!tt.code:"classes"===R&&(!rt.name||!rt.code||!rt.stream),className:"px-4 py-2 text-xs bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-semibold shadow-sm hover:shadow-md",children:["admission"===R&&"Create Student","streams"===R&&"Create Stream","classes"===R&&"Create Class"]})]})]})}),I&&(0,ve.createPortal)((0,o.jsx)("div",{className:"fixed w-32 bg-white rounded-md shadow-lg border border-gray-200 z-[9999]","data-portal-dropdown":!0,style:{left:`${B.x}px`,top:`${B.y}px`},onClick:e=>e.stopPropagation(),children:(0,o.jsxs)("div",{className:"py-1",children:[(0,o.jsx)(we,{permissions:["student_crud"],children:(0,o.jsx)(Se,{tooltipMessage:!f&&p?h:"",disabled:!f&&p,className:"w-full",children:(0,o.jsxs)("button",{onClick:e=>{if(e.stopPropagation(),"admission"===R){if(!f&&!p){const e=nt.find(e=>e.id===I);e&&(e=>{Y(e),Z(e),V(!0),U(null);const t=(e=>{if(!e)return"+254";const t=e.match(/^\+(\d{1,4})/);return t?`+${t[1]}`:"+254"})(e.guardianPhone||"");if(Qe(t),"+999"===t){var s,r;const t=(null===(s=e.guardianPhone)||void 0===s||null===(r=s.match(/^\+(\d+)/))||void 0===r?void 0:r[0])||"";Xe(t)}He({})})(e)}}else if("classes"===R){const e=dt.find(e=>e.id===I);e&&(e=>{ne(e),oe({...e}),V(!0),U(null),He({})})(e)}else if("streams"===R){const e=it.find(e=>e.id===I);e&&(e=>{te(e),re({...e}),V(!0),U(null),He({})})(e)}},disabled:"admission"===R&&!f&&p,className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[H({className:"w-3 h-3 mr-2"}),"Edit"]})})}),"admission"===R&&(0,o.jsx)(we,{permissions:["student_crud"],children:(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=nt.find(e=>e.id===I);t&&(e=>{_e(e),ye(!0),U(null),Fe({parent_id:"",relationship_type:"",is_primary_contact:!1,is_emergency_contact:!1,can_pick_up:!1,notes:""}),Ht()})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-green-50 hover:text-green-700 transition-colors duration-200",children:[pe({className:"w-3 h-3 mr-2"}),"Add Parent"]})}),(0,o.jsx)(we,{permissions:["student_crud"],children:(0,o.jsx)(Se,{tooltipMessage:!f&&p?h:"",disabled:!f&&p,className:"w-full",children:(0,o.jsxs)("button",{onClick:e=>{if(e.stopPropagation(),"admission"===R){if(!f&&!p){const e=nt.find(e=>e.id===I);e&&(e=>{fe({isOpen:!0,type:"student",item:e}),U(null)})(e)}}else if("classes"===R){const e=dt.find(e=>e.id===I);e&&(e=>{if(nt.some(t=>t.currentClass===e.id||t.classOnAdmission===e.id))return he({message:`Cannot delete class "${e.name}" because it has associated students. Please reassign or delete the students first.`,type:"error"}),void U(null);fe({isOpen:!0,type:"class",item:e}),U(null)})(e)}else if("streams"===R){const e=it.find(e=>e.id===I);e&&(e=>{if(dt.some(t=>{var s;return("string"===typeof t.stream?t.stream:null===(s=t.stream)||void 0===s?void 0:s.id)===e.id}))return he({message:`Cannot delete stream "${e.name}" because it has associated classes. Please delete or reassign the classes first.`,type:"error"}),void U(null);fe({isOpen:!0,type:"stream",item:e}),U(null)})(e)}},disabled:"admission"===R&&!f&&p,className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-red-50 hover:text-red-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[xe({className:"w-3 h-3 mr-2"}),"Delete"]})})})]})}),document.body),be&&Ne&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black transition-opacity duration-500 ease-out z-50 "+(be?"bg-opacity-50":"bg-opacity-0 pointer-events-none"),children:(0,o.jsxs)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-500 ease-out flex flex-col "+(be?"translate-x-0":"translate-x-full"),children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-elegant",children:"Add Parent"}),(0,o.jsxs)("p",{className:"text-xs text-gray-500 mt-1 font-modern",children:["Associate parent with ",Ne.fullName||Ne.pupil_name]})]}),(0,o.jsx)("button",{onClick:$t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,o.jsxs)("div",{className:"p-6 space-y-4",children:[De.non_field_errors&&De.non_field_errors.length>0&&(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-xs text-red-800",children:De.non_field_errors[0]})})]})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Parent *"}),Pe?(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,o.jsx)("span",{className:"text-xs text-gray-500",children:"Loading parents..."})]}):(0,o.jsxs)("div",{className:"relative parent-dropdown-container",children:[(0,o.jsx)("div",{className:"w-full px-3 py-2 border rounded-lg focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-transparent transition-all duration-200 bg-gray-50 focus-within:bg-white text-xs cursor-pointer "+(qt("parent_id")?"border-red-300 focus-within:ring-red-500":"border-gray-200"),onClick:()=>Ie(!Me),children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("span",{className:Le.parent_id?"text-gray-900":"text-gray-500",children:Le.parent_id?(null===(d=Ee.find(e=>e.id===Le.parent_id))||void 0===d?void 0:d.full_name)+" ("+(null===(u=Ee.find(e=>e.id===Le.parent_id))||void 0===u?void 0:u.relationship)+")":"Select a parent"}),(0,o.jsx)("svg",{className:"w-4 h-4 text-gray-400 transition-transform duration-200 "+(Me?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),Me&&(0,o.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[(0,o.jsx)("div",{className:"p-2 border-b border-gray-100",children:(0,o.jsx)("input",{type:"text",placeholder:"Search parents...",value:ze,onChange:e=>Re(e.target.value),className:"w-full px-3 py-2 text-xs border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onClick:e=>e.stopPropagation()})}),(0,o.jsxs)("div",{className:"max-h-48 overflow-y-auto",children:[Ee.filter(e=>e.full_name.toLowerCase().includes(ze.toLowerCase())||e.relationship.toLowerCase().includes(ze.toLowerCase())||e.email.toLowerCase().includes(ze.toLowerCase())).map(e=>(0,o.jsxs)("div",{className:"px-3 py-2 text-xs hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>{Fe(t=>({...t,parent_id:e.id})),Ie(!1),Re(""),De.parent_id&&Oe(e=>({...e,parent_id:[]}))},children:[(0,o.jsx)("div",{className:"font-medium text-gray-900",children:e.full_name}),(0,o.jsxs)("div",{className:"text-gray-500 text-xs",children:[e.relationship," \u2022 ",e.email]})]},e.id)),0===Ee.filter(e=>e.full_name.toLowerCase().includes(ze.toLowerCase())||e.relationship.toLowerCase().includes(ze.toLowerCase())||e.email.toLowerCase().includes(ze.toLowerCase())).length&&(0,o.jsx)("div",{className:"px-3 py-2 text-xs text-gray-500 text-center",children:"No parents found"})]})]})]}),qt("parent_id")&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:qt("parent_id")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Relationship Type *"}),(0,o.jsxs)("select",{value:Le.relationship_type,onChange:e=>{Fe(t=>({...t,relationship_type:e.target.value})),De.relationship_type&&Oe(e=>({...e,relationship_type:[]}))},className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(qt("relationship_type")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"",children:"Select relationship"}),(0,o.jsx)("option",{value:"Father",children:"Father"}),(0,o.jsx)("option",{value:"Mother",children:"Mother"}),(0,o.jsx)("option",{value:"Guardian",children:"Guardian"}),(0,o.jsx)("option",{value:"Other",children:"Other"})]}),qt("relationship_type")&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:qt("relationship_type")})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",id:"is_primary_contact",checked:Le.is_primary_contact,onChange:e=>{Fe(t=>({...t,is_primary_contact:e.target.checked})),De.is_primary_contact&&Oe(e=>({...e,is_primary_contact:[]}))},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 "+(qt("is_primary_contact")?"border-red-300":"")}),(0,o.jsx)("label",{htmlFor:"is_primary_contact",className:"ml-2 text-xs text-gray-700",children:"Primary Contact"})]}),qt("is_primary_contact")&&(0,o.jsx)("p",{className:"mt-1 ml-6 text-xs text-red-600",children:qt("is_primary_contact")})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",id:"is_emergency_contact",checked:Le.is_emergency_contact,onChange:e=>{Fe(t=>({...t,is_emergency_contact:e.target.checked})),De.is_emergency_contact&&Oe(e=>({...e,is_emergency_contact:[]}))},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 "+(qt("is_emergency_contact")?"border-red-300":"")}),(0,o.jsx)("label",{htmlFor:"is_emergency_contact",className:"ml-2 text-xs text-gray-700",children:"Emergency Contact"})]}),qt("is_emergency_contact")&&(0,o.jsx)("p",{className:"mt-1 ml-6 text-xs text-red-600",children:qt("is_emergency_contact")})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",id:"can_pick_up",checked:Le.can_pick_up,onChange:e=>{Fe(t=>({...t,can_pick_up:e.target.checked})),De.can_pick_up&&Oe(e=>({...e,can_pick_up:[]}))},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 "+(qt("can_pick_up")?"border-red-300":"")}),(0,o.jsx)("label",{htmlFor:"can_pick_up",className:"ml-2 text-xs text-gray-700",children:"Can Pick Up"})]}),qt("can_pick_up")&&(0,o.jsx)("p",{className:"mt-1 ml-6 text-xs text-red-600",children:qt("can_pick_up")})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Notes"}),(0,o.jsx)("textarea",{value:Le.notes,onChange:e=>{Fe(t=>({...t,notes:e.target.value})),De.notes&&Oe(e=>({...e,notes:[]}))},className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(qt("notes")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Additional notes about this parent relationship",rows:3}),qt("notes")&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:qt("notes")})]})]})}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-100 flex-shrink-0",children:[(0,o.jsx)("button",{onClick:$t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if(Ne&&Ne.id&&Le.parent_id&&Le.relationship_type)try{await l.students.associateParent(Ne.id,Le),he({message:"Parent associated successfully!",type:"success"}),$t()}catch(r){var e,t,s;if(console.error("Error associating parent:",r),console.log("Error response data:",null===(e=r.response)||void 0===e?void 0:e.data),null!==(t=r.response)&&void 0!==t&&null!==(s=t.data)&&void 0!==s&&s.errors){const e=r.response.data.errors;console.log("Setting form errors:",e),Oe(e),e.non_field_errors&&e.non_field_errors.length>0&&he({message:e.non_field_errors[0],type:"error"})}else he({message:"Failed to associate parent. Please try again.",type:"error"})}else he({message:"Please fill in all required fields.",type:"error"})},disabled:!Le.parent_id||!Le.relationship_type,className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium",children:"Add Parent"})]})]})}),ge.isOpen&&ge.item&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[10000] flex items-center justify-center",children:(0,o.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"flex items-center mb-4",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:G({className:"w-6 h-6 text-red-600"})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Confirm Delete"})})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:["Are you sure you want to delete this ",ge.type,"?"]}),(0,o.jsxs)("div",{className:"mt-2 p-3 bg-gray-50 rounded-md",children:[(0,o.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["stream"===ge.type&&ge.item.name,"class"===ge.type&&ge.item.name,"student"===ge.type&&(ge.item.fullName||ge.item.pupil_name)]}),"stream"===ge.type&&(0,o.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Code: ",ge.item.code]}),"class"===ge.type&&(0,o.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Code: ",ge.item.code]})]}),(0,o.jsx)("p",{className:"text-xs text-red-600 mt-2",children:"This action cannot be undone."})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,o.jsx)("button",{onClick:()=>{fe({isOpen:!1,type:null,item:null})},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if(ge.item&&ge.type)try{if("stream"===ge.type){const e=ge.item;await l.students.deleteStream(e.id),ot(t=>t.filter(t=>t.id!==e.id)),he({message:`Stream "${e.name}" deleted successfully`,type:"success"})}else if("class"===ge.type){const e=ge.item;await l.students.deleteClass(e.id),ct(t=>t.filter(t=>t.id!==e.id)),he({message:`Class "${e.name}" deleted successfully`,type:"success"})}else if("student"===ge.type){const e=ge.item;e.id&&(await l.students.delete(e.id),lt(t=>t.filter(t=>t.id!==e.id)),he({message:`Student "${e.fullName||e.pupil_name}" deleted successfully`,type:"success"}))}fe({isOpen:!1,type:null,item:null})}catch(s){var e,t;console.error("Error deleting item:",s);const r=(null===(e=s.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to delete item";he({message:r,type:"error"})}},className:"px-4 py-2 text-white bg-red-600 rounded-lg hover:bg-red-700 transition-all duration-200 font-medium",children:"Delete"})]})]})})}),ue&&(0,o.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[10000] flex items-center p-4 rounded-lg shadow-lg transition-all duration-300",children:(0,o.jsxs)("div",{className:`flex items-center space-x-3 ${"success"===ue.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"} px-6 py-4 rounded-lg shadow-xl`,children:["success"===ue.type?F({className:"w-5 h-5 text-green-600"}):me({className:"w-5 h-5 text-red-600"}),(0,o.jsx)("span",{className:"text-sm font-medium",children:ue.message}),(0,o.jsx)("button",{onClick:()=>he(null),className:"ml-3 text-gray-400 hover:text-gray-600",children:me({className:"w-4 h-4"})})]})})]});var Yt},Ae=()=>{const{isAuthenticated:e,isLoading:t}=c(),[s,a]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[d,u]=(0,r.useState)("features"),[m,x]=(0,r.useState)(""),[p,h]=(0,r.useState)("asc"),[g,f]=(0,r.useState)(""),[b,y]=(0,r.useState)("asc"),[v,j]=(0,r.useState)(null),[N,w]=(0,r.useState)({x:0,y:0}),[_,k]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),[E,A]=(0,r.useState)(null),[P,T]=(0,r.useState)(null),[L,D]=(0,r.useState)(null),[R,M]=(0,r.useState)({}),[I,U]=(0,r.useState)({}),[B,$]=(0,r.useState)({name:"",display_name:"",description:"",feature_type:"",is_active:!0}),[W,V]=(0,r.useState)({feature_flag:"",scope_type:"",scope_id:null,is_enabled:!1,percentage:100,start_date:null,end_date:null}),[G,K]=(0,r.useState)([]),[Y,J]=(0,r.useState)([]),[Z,X]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!t&&e){(async()=>{X(!0);try{const e=await l.featureFlags.getAll();let t=[];if(e&&"success"===e.status&&e.data&&e.data.results)t=e.data.results;else if(Array.isArray(e))t=e;else if(e&&Array.isArray(e.data))t=e.data;else{if(!(e&&e.features&&Array.isArray(e.features)))throw e&&"error"===e.status?new Error(e.message||"Feature Flags API Error"):(t=[],new Error("Unexpected feature flags API response structure"));t=e.features}K(t);const s=await l.featureFlagStates.getAll();let r=[];r=s&&"success"===s.status&&s.data&&s.data.results?s.data.results:Array.isArray(s)?s:s&&Array.isArray(s.data)?s.data:s&&s.states&&Array.isArray(s.states)?s.states:(s&&s.status,[]),J(r)}catch(e){console.error("Error loading data:",e),K([]),J([]),D({message:`Failed to load data: ${e instanceof Error?e.message:"Unknown error"}`,type:"error"}),setTimeout(()=>{D(null)},5e3)}finally{X(!1)}})()}else t||e||(K([]),J([]))},[e,t]),(0,r.useEffect)(()=>{const e=setTimeout(()=>{i(s)},500);return()=>clearTimeout(e)},[s]);const ee=(0,r.useMemo)(()=>{if(!Array.isArray(G))return console.warn("Features is not an array:",G),[];console.log("Filtering features:",G.length,"features"),console.log("Search query:",n);let e=G.filter(e=>{const t=n.toLowerCase(),s=e.name&&e.name.toLowerCase().includes(t)||e.display_name&&e.display_name.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)||e.feature_type&&e.feature_type.toLowerCase().includes(t);return s||console.log("Feature filtered out:",e.name,"search query:",t),s});return m&&e.sort((e,t)=>{const s=e[m],r=t[m];if("string"===typeof s&&"string"===typeof r){const e=s.localeCompare(r);return"asc"===p?e:-e}if("boolean"===typeof s&&"boolean"===typeof r){const e=s===r?0:s?-1:1;return"asc"===p?e:-e}return 0}),e},[G,n,m,p]),te=(0,r.useMemo)(()=>{if(!Array.isArray(Y))return console.warn("Feature flag states is not an array:",Y),[];let e=Y.filter(e=>{const t=n.toLowerCase();return e.scope_type&&e.scope_type.toLowerCase().includes(t)||e.scope_id&&e.scope_id.toString().toLowerCase().includes(t)||e.feature_flag_name&&e.feature_flag_name.toLowerCase().includes(t)||e.feature_flag_display_name&&e.feature_flag_display_name.toLowerCase().includes(t)});return g&&e.sort((e,t)=>{const s=e[g],r=t[g];if("string"===typeof s&&"string"===typeof r){const e=s.localeCompare(r);return"asc"===b?e:-e}if("boolean"===typeof s&&"boolean"===typeof r){const e=s===r?0:s?-1:1;return"asc"===b?e:-e}if("number"===typeof s&&"number"===typeof r){const e=s-r;return"asc"===b?e:-e}return 0}),e},[Y,n,g,b]),se=e=>{"features"===d?m===e?h("asc"===p?"desc":"asc"):(x(e),h("asc")):"feature-flag-states"===d&&(g===e?y("asc"===b?"desc":"asc"):(f(e),y("asc")))},re=e=>"features"===d?m!==e?null:"asc"===p?z({className:"w-3 h-3"}):O({className:"w-3 h-3"}):"feature-flag-states"===d?g!==e?null:"asc"===b?z({className:"w-3 h-3"}):O({className:"w-3 h-3"}):null,ae=()=>{k(!1),$({name:"",display_name:"",description:"",feature_type:"",is_active:!0})},ne=()=>{k(!1),V({feature_flag:"",scope_type:"",scope_id:null,is_enabled:!1,percentage:100,start_date:null,end_date:null})},le=(e,t)=>{$(s=>({...s,[e]:t})),R[e]&&M(t=>{const s={...t};return delete s[e],s})},oe=(e,t)=>{V(s=>({...s,[e]:t})),R[e]&&M(t=>{const s={...t};return delete s[e],s})},de=()=>{C(!1),A(null),T(null),U({})},ce=(e,t)=>{E&&(A({...E,[e]:t}),I[e]&&U(t=>{const s={...t};return delete s[e],s}))},ue=(e,t)=>{P&&(T({...P,[e]:t}),I[e]&&U(t=>{const s={...t};return delete s[e],s}))};(0,r.useEffect)(()=>{const e=e=>{const t=e.target;t.closest("[data-dropdown-container]")||t.closest("[data-portal-dropdown]")||j(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const pe=(e,t)=>{if(v===e)j(null);else{const s=t.currentTarget.getBoundingClientRect(),r=window.innerHeight,a=window.innerWidth,n=80,l=128;let i=s.right-l,o=s.bottom+4;s.bottom+n>r&&(o=s.top-n-4),i<0&&(i=0),i+l>a&&(i=a-l),w({x:i,y:o}),j(e)}};return(0,o.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-4 mb-4",children:(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("nav",{className:"flex space-x-6",children:[(0,o.jsx)("button",{onClick:()=>u("features"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("features"===d?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Feature Flags"}),(0,o.jsx)("button",{onClick:()=>u("feature-flag-states"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("feature-flag-states"===d?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Feature Flag States"}),(0,o.jsx)("button",{onClick:()=>u("settings"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("settings"===d?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Settings"}),(0,o.jsx)("button",{onClick:()=>u("logs"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("logs"===d?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Logs"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",placeholder:"feature-flag-states"===d?"Search feature flag states...":"Search feature flags...",value:s,onChange:e=>a(e.target.value),className:"pl-8 pr-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-xs"}),(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:ie({className:"h-3 w-3 text-gray-400"})})]}),(0,o.jsx)("button",{className:"px-3 py-1.5 border border-gray-300 rounded-md text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:"Filter"}),(0,o.jsxs)("select",{value:"features"===d?m:"feature-flag-states"===d?g:"",onChange:e=>{"features"===d?x(e.target.value):"feature-flag-states"===d&&f(e.target.value)},className:"px-3 py-1.5 border border-gray-300 rounded-md text-xs text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:[(0,o.jsx)("option",{value:"",children:"Sort by"}),"features"===d?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("option",{value:"name",children:"Name"}),(0,o.jsx)("option",{value:"display_name",children:"Display Name"}),(0,o.jsx)("option",{value:"feature_type",children:"Feature Type"}),(0,o.jsx)("option",{value:"is_active",children:"Is Active"}),(0,o.jsx)("option",{value:"created_at",children:"Created At"}),(0,o.jsx)("option",{value:"updated_at",children:"Updated At"})]}):"feature-flag-states"===d?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("option",{value:"feature_flag_name",children:"Feature Flag Name"}),(0,o.jsx)("option",{value:"scope_type",children:"Scope Type"}),(0,o.jsx)("option",{value:"scope_id",children:"Scope Id"}),(0,o.jsx)("option",{value:"is_enabled",children:"Is Enabled"}),(0,o.jsx)("option",{value:"percentage",children:"Percentage"}),(0,o.jsx)("option",{value:"start_date",children:"Start Date"}),(0,o.jsx)("option",{value:"end_date",children:"End Date"}),(0,o.jsx)("option",{value:"updated_at",children:"Updated At"})]}):null]}),(0,o.jsx)("button",{onClick:()=>{if(e){(async()=>{X(!0);try{const e=await l.featureFlags.getAll();e&&"success"===e.status&&e.data&&e.data.results&&K(e.data.results);const t=await l.featureFlagStates.getAll();t&&"success"===t.status&&t.data&&t.data.results&&J(t.data.results),D({message:"Data refreshed successfully!",type:"success"})}catch(e){console.error("Error refreshing data:",e),D({message:"Failed to refresh data",type:"error"})}finally{X(!1),setTimeout(()=>D(null),3e3)}})()}},disabled:!e||Z,className:"px-3 py-1.5 border border-gray-300 rounded-md text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh data",children:"\u21bb Refresh"}),(0,o.jsxs)(we,{permissions:["access_admin_panel"],children:["features"===d&&(0,o.jsx)("button",{onClick:()=>{k(!0),M({})},className:"px-4 py-1.5 bg-blue-600 text-white rounded-md text-xs font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200",children:"+ Add Feature"}),"feature-flag-states"===d&&(0,o.jsx)("button",{onClick:()=>{k(!0),M({})},className:"px-4 py-1.5 bg-blue-600 text-white rounded-md text-xs font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200",children:"+ Add State"})]})]})]})})}),"features"===d&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm",children:t?(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading authentication..."})]}):e?Z?(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading feature flags..."})]}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>se("name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Name"}),re("name")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>se("display_name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Display Name"}),re("display_name")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Description"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>se("feature_type"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Feature Type"}),re("feature_type")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>se("is_active"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Is Active"}),re("is_active")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>se("created_at"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Created At"}),re("created_at")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>se("updated_at"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Updated At"}),re("updated_at")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:ee.map((e,t)=>(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-25",children:[(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs font-medium text-gray-900",children:e.name}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs font-medium text-gray-900",children:e.display_name}),(0,o.jsx)("td",{className:"px-3 py-1.5 text-xs text-gray-900 max-w-xs truncate",children:e.description}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.feature_type}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium "+(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"true":"false"})}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.created_at}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.updated_at}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("button",{onClick:()=>{},className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors duration-200",title:"View Details",children:Q({className:"w-3 h-3"})}),(0,o.jsx)(we,{permissions:["access_admin_panel"],children:(0,o.jsx)("div",{className:"relative","data-dropdown-container":!0,children:(0,o.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),pe(e.id,t)},className:"p-1 rounded-md transition-colors duration-200 cursor-pointer "+(v===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:q({className:"w-3 h-3"})})})})]})})]},e.id))})]})}):(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Authentication Required"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Please log in to view feature flags."})]})}),"feature-flag-states"===d&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm",children:t?(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading authentication..."})]}):e?Z?(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading feature flag states..."})]}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>se("feature_flag_name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Feature Flag Name"}),re("feature_flag_name")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>se("scope_type"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Scope Type"}),re("scope_type")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>se("scope_id"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Scope Id"}),re("scope_id")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>se("school_name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"School Name"}),re("school_name")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>se("username"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Username"}),re("username")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>se("is_enabled"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Is Enabled"}),re("is_enabled")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>se("percentage"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Percentage"}),re("percentage")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>se("start_date"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Start Date"}),re("start_date")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>se("end_date"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"End Date"}),re("end_date")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>se("updated_at"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Updated At"}),re("updated_at")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:te.map((e,t)=>(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-25",children:[(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs font-medium text-gray-900",children:e.feature_flag_name}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.scope_type}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.scope_id||"-"}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.school_name||"-"}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.username||"-"}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium "+(e.is_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_enabled?"true":"false"})}),(0,o.jsxs)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:[e.percentage,"%"]}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.start_date||"-"}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.end_date||"-"}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.updated_at}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("button",{onClick:()=>{},className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors duration-200",title:"View Details",children:Q({className:"w-3 h-3"})}),(0,o.jsx)(we,{permissions:["access_admin_panel"],children:(0,o.jsx)("div",{className:"relative","data-dropdown-container":!0,children:(0,o.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),pe(e.id,t)},className:"p-1 rounded-md transition-colors duration-200 cursor-pointer "+(v===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:q({className:"w-3 h-3"})})})})]})})]},e.id))})]})}):(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Authentication Required"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Please log in to view feature flag states."})]})}),"settings"===d&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsxs)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Switch Board Settings"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Configure system settings and preferences."})]})}),"logs"===d&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"System Logs"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"View system activity and error logs."})]})})]}),_&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-end z-[10002] transition-all duration-300 ease-in-out",children:(0,o.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 h-full w-96 shadow-2xl overflow-y-auto border-l border-gray-100 transform transition-transform duration-300 ease-out",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"features"===d?"Add New Feature":"Add New Feature Flag State"})]}),(0,o.jsx)("button",{onClick:"features"===d?ae:ne,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[Object.keys(R).length>0&&(0,o.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-4 shadow-sm",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Please fix the errors below"})})]})}),"features"===d?(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Feature Name *"]}),(0,o.jsx)("input",{type:"text",value:B.name,onChange:e=>le("name",e.target.value),placeholder:"Enter feature name (e.g., student_admission_billing)",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(R.name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),R.name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:R.name[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Display Name *"]}),(0,o.jsx)("input",{type:"text",value:B.display_name,onChange:e=>le("display_name",e.target.value),placeholder:"Enter display name (e.g., Student Admission Billing Control)",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(R.display_name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),R.display_name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:R.display_name[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Description *"]}),(0,o.jsx)("textarea",{value:B.description,onChange:e=>le("description",e.target.value),placeholder:"Enter feature description",rows:3,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white resize-none "+(R.description?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),R.description&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:R.description[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Feature Type *"]}),(0,o.jsxs)("select",{value:B.feature_type,onChange:e=>le("feature_type",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(R.feature_type?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select feature type"}),(0,o.jsx)("option",{value:"billing",children:"Billing"}),(0,o.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,o.jsx)("option",{value:"test",children:"Test"}),(0,o.jsx)("option",{value:"core",children:"Core"}),(0,o.jsx)("option",{value:"academic",children:"Academic"}),(0,o.jsx)("option",{value:"financial",children:"Financial"})]}),R.feature_type&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:R.feature_type[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Status *"]}),(0,o.jsxs)("select",{value:B.is_active?"true":"false",onChange:e=>le("is_active","true"===e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+(R.is_active?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"true",children:"Active"}),(0,o.jsx)("option",{value:"false",children:"Inactive"})]}),R.is_active&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:R.is_active[0]})]})]})]}):(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Feature Flag *"]}),(0,o.jsxs)("select",{value:W.feature_flag,onChange:e=>oe("feature_flag",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(R.feature_flag?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select feature flag"}),G.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.display_name," (",e.name,")"]},e.id))]}),R.feature_flag&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:R.feature_flag[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Scope Type *"]}),(0,o.jsxs)("select",{value:W.scope_type,onChange:e=>oe("scope_type",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(R.scope_type?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select scope type"}),(0,o.jsx)("option",{value:"global",children:"Global"}),(0,o.jsx)("option",{value:"school",children:"School"}),(0,o.jsx)("option",{value:"user",children:"User"})]}),R.scope_type&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:R.scope_type[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Is Enabled *"]}),(0,o.jsxs)("select",{value:W.is_enabled?"true":"false",onChange:e=>oe("is_enabled","true"===e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+(R.is_enabled?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"true",children:"Enabled"}),(0,o.jsx)("option",{value:"false",children:"Disabled"})]}),R.is_enabled&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:R.is_enabled[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Scope ID"]}),(0,o.jsx)("input",{type:"text",value:W.scope_id||"",onChange:e=>oe("scope_id",e.target.value||null),placeholder:"Enter scope ID (optional)",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(R.scope_id?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),R.scope_id&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:R.scope_id[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Percentage *"]}),(0,o.jsx)("input",{type:"number",min:"0",max:"100",value:W.percentage,onChange:e=>oe("percentage",parseInt(e.target.value)||0),placeholder:"Enter percentage (0-100)",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+(R.percentage?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),R.percentage&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:R.percentage[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-teal-500 rounded-full mr-1.5"}),"Start Date"]}),(0,o.jsx)("input",{type:"datetime-local",value:W.start_date||"",onChange:e=>oe("start_date",e.target.value||null),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-100 focus:border-teal-500 transition-all duration-200 bg-white "+(R.start_date?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),R.start_date&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:R.start_date[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-1.5"}),"End Date"]}),(0,o.jsx)("input",{type:"datetime-local",value:W.end_date||"",onChange:e=>oe("end_date",e.target.value||null),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-500 transition-all duration-200 bg-white "+(R.end_date?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),R.end_date&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:R.end_date[0]})]})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:"features"===d?ae:ne,className:"px-4 py-2 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:"features"===d?async()=>{try{var e;const t={name:B.name||"",display_name:B.display_name||"",description:B.description||"",feature_type:B.feature_type||"",is_active:null===(e=B.is_active)||void 0===e||e},s=await l.featureFlags.create(t);let r;if(console.log("Create response:",s),console.log("Response type:",typeof s),console.log("Response keys:",s?Object.keys(s):"No response"),s&&"object"===typeof s&&"status"in s)if("success"===s.status&&s.data)r=s.data;else{if("error"===s.status)throw new Error(s.message||"API returned error status");if(!s.data)throw new Error("API response missing data");r=s.data}else{if(!s||"object"!==typeof s)throw new Error("Invalid response format received from API");r=s}if(console.log("Extracted new feature data:",r),!r.id||!r.name||!r.display_name)throw console.error("New feature missing required fields:",r),new Error("New feature is missing required fields");K(e=>[...e,r]),D({message:"Feature flag added successfully!",type:"success"}),M({}),$({name:"",display_name:"",description:"",feature_type:"",is_active:!0}),a(""),setTimeout(()=>{ae()},100),setTimeout(()=>{D(null)},3e3)}catch(r){var t,s;console.error("Error adding feature flag:",r),null!==(t=r.response)&&void 0!==t&&null!==(s=t.data)&&void 0!==s&&s.errors?(M(r.response.data.errors),D({message:r.response.data.message||"Please fix the validation errors below.",type:"error"})):(M({}),D({message:"Failed to add feature flag. Please try again.",type:"error"})),setTimeout(()=>{D(null)},5e3)}}:async()=>{try{var e,t,s,r,a;const n=e=>{if(!e)return null;return new Date(e).toISOString()},i={feature_flag:W.feature_flag||"",scope_type:W.scope_type||"",scope_id:null!==(e=W.scope_id)&&void 0!==e?e:null,is_enabled:null!==(t=W.is_enabled)&&void 0!==t&&t,percentage:null!==(s=W.percentage)&&void 0!==s?s:100,start_date:n(null!==(r=W.start_date)&&void 0!==r?r:null),end_date:n(null!==(a=W.end_date)&&void 0!==a?a:null)},d=await l.featureFlagStates.create(i);let c;if(console.log("Feature flag state creation response:",d),console.log("Response type:",typeof d),console.log("Response keys:",d?Object.keys(d):"No response"),console.log("Response status:",null===d||void 0===d?void 0:d.status),console.log("Response data:",null===d||void 0===d?void 0:d.data),console.log("Response has id:",null===d||void 0===d?void 0:d.id),d&&"success"===d.status&&d.data){if(c=d.data,console.log("Using response.data:",c),!c.id){console.log("Response data missing ID, attempting to fetch created feature flag state...");try{const e=await l.featureFlagStates.getAll();if(console.log("All feature flag states:",e),!(e&&e.data&&Array.isArray(e.data)))throw console.error("Could not fetch feature flag states list"),new Error("Feature flag state created but could not retrieve ID. Please refresh the page.");{const t=e.data.find(e=>e.feature_flag===i.feature_flag&&e.scope_type===i.scope_type&&e.scope_id===i.scope_id&&e.is_enabled===i.is_enabled&&e.percentage===i.percentage);if(!t||!t.id)throw console.error("Could not find matching feature flag state in the list"),new Error("Feature flag state created but could not retrieve ID. Please refresh the page.");c=t,console.log("Found matching feature flag state with ID:",c)}}catch(o){throw console.error("Error fetching feature flag states:",o),new Error("Feature flag state created but could not retrieve ID. Please refresh the page.")}}}else{if(!d||!d.id)throw console.error("Unexpected API response structure:",d),console.error("Response structure details:",{hasResponse:!!d,responseType:typeof d,isArray:Array.isArray(d),keys:d?Object.keys(d):[],hasId:d&&d.id,hasStatus:d&&d.status,hasData:d&&d.data}),new Error("Invalid response from server. Please try again.");c=d,console.log("Using direct response:",c)}if(!c.id||c.id.toString().startsWith("temp-"))throw console.error("Invalid feature flag state ID:",c.id),new Error("Server returned invalid ID. Please try again.");J(e=>[...e,c]),D({message:"Feature flag state added successfully!",type:"success"}),M({}),V({feature_flag:"",scope_type:"",scope_id:null,is_enabled:!1,percentage:100,start_date:null,end_date:null}),setTimeout(()=>{ne()},100),setTimeout(()=>{D(null)},3e3)}catch(d){var n,i;console.error("Error adding feature flag state:",d),null!==(n=d.response)&&void 0!==n&&null!==(i=n.data)&&void 0!==i&&i.errors?(M(d.response.data.errors),D({message:d.response.data.message||"Please fix the validation errors below.",type:"error"})):(M({}),D({message:"Failed to add feature flag state. Please try again.",type:"error"})),setTimeout(()=>{D(null)},5e3)}},disabled:"features"===d?!B.name||!B.display_name||!B.description||!B.feature_type:!W.feature_flag||!W.scope_type,className:"px-4 py-2 text-xs bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-semibold shadow-sm hover:shadow-md",children:"features"===d?"Create Feature":"Create State"})]})]})}),S&&(E||P)&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-end z-[10002] transition-all duration-300 ease-in-out",children:(0,o.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 h-full w-96 shadow-2xl overflow-y-auto border-l border-gray-100 transform transition-transform duration-300 ease-out",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:E?"Edit Feature":"Edit Feature Flag State"})]}),(0,o.jsx)("button",{onClick:de,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[Object.keys(I).length>0&&(0,o.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-4 shadow-sm",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Please fix the errors below"})})]})}),E?(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Feature Name *"]}),(0,o.jsx)("input",{type:"text",value:E.name,onChange:e=>ce("name",e.target.value),placeholder:"Enter feature name (e.g., student_admission_billing)",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(I.name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),I.name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:I.name[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Display Name *"]}),(0,o.jsx)("input",{type:"text",value:E.display_name,onChange:e=>ce("display_name",e.target.value),placeholder:"Enter display name (e.g., Student Admission Billing Control)",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(I.display_name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),I.display_name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:I.display_name[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Description *"]}),(0,o.jsx)("textarea",{value:E.description,onChange:e=>ce("description",e.target.value),placeholder:"Enter feature description",rows:3,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white resize-none "+(I.description?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),I.description&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:I.description[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Feature Type *"]}),(0,o.jsxs)("select",{value:E.feature_type,onChange:e=>ce("feature_type",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(I.feature_type?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select feature type"}),(0,o.jsx)("option",{value:"billing",children:"Billing"}),(0,o.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,o.jsx)("option",{value:"test",children:"Test"}),(0,o.jsx)("option",{value:"core",children:"Core"}),(0,o.jsx)("option",{value:"academic",children:"Academic"}),(0,o.jsx)("option",{value:"financial",children:"Financial"})]}),I.feature_type&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:I.feature_type[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Status *"]}),(0,o.jsxs)("select",{value:E.is_active?"true":"false",onChange:e=>ce("is_active","true"===e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+(I.is_active?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"true",children:"Active"}),(0,o.jsx)("option",{value:"false",children:"Inactive"})]}),I.is_active&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:I.is_active[0]})]})]})]}):P?(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Feature Flag *"]}),(0,o.jsxs)("select",{value:P.feature_flag,onChange:e=>ue("feature_flag",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(I.feature_flag?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select feature flag"}),G.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.display_name," (",e.name,")"]},e.id))]}),I.feature_flag&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:I.feature_flag[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Scope Type *"]}),(0,o.jsxs)("select",{value:P.scope_type,onChange:e=>ue("scope_type",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(I.scope_type?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select scope type"}),(0,o.jsx)("option",{value:"global",children:"Global"}),(0,o.jsx)("option",{value:"school",children:"School"}),(0,o.jsx)("option",{value:"user",children:"User"})]}),I.scope_type&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:I.scope_type[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Is Enabled *"]}),(0,o.jsxs)("select",{value:P.is_enabled?"true":"false",onChange:e=>ue("is_enabled","true"===e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+(I.is_enabled?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"true",children:"Enabled"}),(0,o.jsx)("option",{value:"false",children:"Disabled"})]}),I.is_enabled&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:I.is_enabled[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Scope ID"]}),(0,o.jsx)("input",{type:"text",value:P.scope_id||"",onChange:e=>ue("scope_id",e.target.value||null),placeholder:"Enter scope ID (optional)",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(I.scope_id?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),I.scope_id&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:I.scope_id[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Percentage *"]}),(0,o.jsx)("input",{type:"number",min:"0",max:"100",value:P.percentage,onChange:e=>ue("percentage",parseInt(e.target.value)||0),placeholder:"Enter percentage (0-100)",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+(I.percentage?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),I.percentage&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:I.percentage[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-teal-500 rounded-full mr-1.5"}),"Start Date"]}),(0,o.jsx)("input",{type:"datetime-local",value:P.start_date?P.start_date.slice(0,16):"",onChange:e=>ue("start_date",e.target.value||null),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-100 focus:border-teal-500 transition-all duration-200 bg-white "+(I.start_date?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),I.start_date&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:I.start_date[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-1.5"}),"End Date"]}),(0,o.jsx)("input",{type:"datetime-local",value:P.end_date?P.end_date.slice(0,16):"",onChange:e=>ue("end_date",e.target.value||null),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-500 transition-all duration-200 bg-white "+(I.end_date?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),I.end_date&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:I.end_date[0]})]})]}):null]}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:de,className:"px-4 py-2 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsxs)("button",{onClick:E?async()=>{if(E)try{const e=await l.featureFlags.update(E.id,{name:E.name,display_name:E.display_name,description:E.description,feature_type:E.feature_type,is_active:E.is_active});let t;if(console.log("Update response:",e),console.log("Response type:",typeof e),console.log("Response keys:",e?Object.keys(e):"No response"),e&&"object"===typeof e&&"status"in e)if("success"===e.status&&e.data)t=e.data;else{if("error"===e.status)throw new Error(e.message||"API returned error status");if(!e.data)throw new Error("API response missing data");t=e.data}else{if(!e||"object"!==typeof e)throw new Error("Invalid response format received from API");t=e}console.log("Extracted updated feature data:",t);const s={...E,...t,name:E.name,display_name:E.display_name,description:E.description,feature_type:E.feature_type,is_active:E.is_active,updated_at:(new Date).toISOString()};if(!s.id||!s.name||!s.display_name)throw console.error("Updated feature missing required fields:",s),new Error("Updated feature is missing required fields");console.log("Complete updated feature:",s),console.log("Previous features state:",G),console.log("Editing feature ID:",E.id),console.log("Editing feature ID type:",typeof E.id),K(e=>{const t=e.map(e=>(console.log("Comparing feature ID:",e.id,"with editing ID:",E.id,"match:",e.id===E.id),e.id===E.id?s:e));return console.log("Updated features state:",t),t}),D({message:"Feature flag updated successfully!",type:"success"}),U({}),de(),a(""),setTimeout(()=>{D(null)},3e3)}catch(s){var e,t;console.error("Error updating feature flag:",s),null!==(e=s.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors?(U(s.response.data.errors),D({message:s.response.data.message||"Please fix the validation errors below.",type:"error"})):(U({}),D({message:"Failed to update feature flag. Please try again.",type:"error"})),setTimeout(()=>{D(null)},5e3)}}:async()=>{if(P)try{const e=e=>{if(!e)return null;return new Date(e).toISOString()},t={feature_flag:P.feature_flag,scope_type:P.scope_type,scope_id:P.scope_id,is_enabled:P.is_enabled,percentage:P.percentage,start_date:e(P.start_date),end_date:e(P.end_date)},s=await l.featureFlagStates.update(P.id,t),r={...P,...s,scope_type:t.scope_type,scope_id:t.scope_id,is_enabled:t.is_enabled,percentage:t.percentage,start_date:t.start_date,end_date:t.end_date,updated_at:(new Date).toISOString()};J(e=>e.map(e=>e.id===P.id?r:e)),D({message:"Feature flag state updated successfully!",type:"success"}),U({}),de(),setTimeout(()=>{D(null)},3e3)}catch(s){var e,t;console.error("Error updating feature flag state:",s),null!==(e=s.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors?(U(s.response.data.errors),D({message:s.response.data.message||"Please fix the validation errors below.",type:"error"})):(U({}),D({message:"Failed to update feature flag state. Please try again.",type:"error"})),setTimeout(()=>{D(null)},5e3)}},className:"px-4 py-2 text-xs bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-semibold shadow-sm hover:shadow-md",children:["Update ",E?"Feature":"State"]})]})]})}),v&&(0,ve.createPortal)((0,o.jsx)("div",{className:"fixed w-32 bg-white rounded-md shadow-lg border border-gray-200 z-[9999]","data-portal-dropdown":!0,style:{left:`${N.x}px`,top:`${N.y}px`},onClick:e=>e.stopPropagation(),children:(0,o.jsx)("div",{className:"py-1",children:(0,o.jsxs)(we,{permissions:["access_admin_panel"],children:["features"===d&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=G.find(e=>e.id===v);t&&(e=>{A(e),C(!0),j(null),U({})})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-colors duration-200",children:[H({className:"w-3 h-3 mr-2"}),"Edit"]}),(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=G.find(e=>e.id===v);t&&(async e=>{try{await l.featureFlags.delete(e.id),K(t=>t.filter(t=>t.id!==e.id)),j(null),D({message:"Feature flag deleted successfully!",type:"success"}),setTimeout(()=>{D(null)},3e3)}catch(t){console.error("Error deleting feature flag:",t),D({message:"Failed to delete feature flag. Please try again.",type:"error"}),setTimeout(()=>{D(null)},5e3)}})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-red-50 hover:text-red-700 transition-colors duration-200",children:[xe({className:"w-3 h-3 mr-2"}),"Delete"]})]}),"feature-flag-states"===d&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=Y.find(e=>e.id===v);t&&(e=>{T(e),C(!0),j(null),U({})})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-colors duration-200",children:[H({className:"w-3 h-3 mr-2"}),"Edit"]}),(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=Y.find(e=>e.id===v);t&&(async e=>{try{await l.featureFlagStates.delete(e.id),J(t=>t.filter(t=>t.id!==e.id)),j(null),D({message:"Feature flag state deleted successfully!",type:"success"}),setTimeout(()=>{D(null)},3e3)}catch(t){console.error("Error deleting feature flag state:",t),D({message:"Failed to delete feature flag state. Please try again.",type:"error"}),setTimeout(()=>{D(null)},5e3)}})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-red-50 hover:text-red-700 transition-colors duration-200",children:[xe({className:"w-3 h-3 mr-2"}),"Delete"]})]})]})})}),document.body),L&&(0,o.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[10000] flex items-center p-4 rounded-lg shadow-lg transition-all duration-300",children:(0,o.jsxs)("div",{className:`flex items-center space-x-3 ${"success"===L.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"} px-6 py-4 rounded-lg shadow-xl`,children:["success"===L.type?F({className:"w-5 h-5 text-green-600"}):me({className:"w-5 h-5 text-red-600"}),(0,o.jsx)("span",{className:"text-sm font-medium",children:L.message}),(0,o.jsx)("button",{onClick:()=>D(null),className:"ml-3 text-gray-400 hover:text-gray-600",children:me({className:"w-4 h-4"})})]})})]})},Pe=()=>{var e,t,s,a;const{user:n,signinAs:i}=c(),{isStudentAdmissionBlocked:d,blockMessage:u,isLoading:m,error:x,refreshStatus:p}=ke(),h="root"===(null===n||void 0===n?void 0:n.role),[g,f]=(0,r.useState)(""),[b,y]=(0,r.useState)(""),[v,j]=(0,r.useState)(""),[N,w]=(0,r.useState)("asc"),[_,k]=(0,r.useState)("users"),[S,C]=(0,r.useState)(null),[E,A]=(0,r.useState)({x:0,y:0}),[P,T]=(0,r.useState)(!1),[L,D]=(0,r.useState)(!1),[R,M]=(0,r.useState)(null),[I,B]=(0,r.useState)(null),[$,W]=(0,r.useState)(null),[V,G]=(0,r.useState)({}),[Y,J]=(0,r.useState)({}),[Z,X]=(0,r.useState)({username:"",email:"",first_name:"",last_name:"",surname:"",phone_number:"",role:"user",is_active:!0,is_staff:!1,school_id:""}),[te,se]=(0,r.useState)([]),[re,ae]=(0,r.useState)(!0),[ne,le]=(0,r.useState)(null),[de,ce]=(0,r.useState)(""),[ue,pe]=(0,r.useState)(!1),[he,ge]=(0,r.useState)(!1),[fe,be]=(0,r.useState)([]),[ye,je]=(0,r.useState)(!1),[Ne,_e]=(0,r.useState)(""),[Ce,Ee]=(0,r.useState)(1),[Ae]=(0,r.useState)(20),[Pe,Te]=(0,r.useState)(0),[Le,Fe]=(0,r.useState)(0),[De,Oe]=(0,r.useState)(!1),[ze,Re]=(0,r.useState)(!1),[Me,Ie]=(0,r.useState)(!1),[Ue,Be]=(0,r.useState)(null),[$e,He]=(0,r.useState)(""),[qe,We]=(0,r.useState)(!1),[Ve,Ge]=(0,r.useState)(!1),[Ke,Qe]=(0,r.useState)(!1),[Ye,Je]=(0,r.useState)(!1),[Ze,Xe]=(0,r.useState)(null),[et,tt]=(0,r.useState)(!1),st=()=>{const e="abcdefghijklmnopqrstuvwxyz",t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",s="0123456789";let r="";r+=e.charAt(Math.floor(26*Math.random())),r+=t.charAt(Math.floor(26*Math.random())),r+=s.charAt(Math.floor(10*Math.random()));const a=e+t+s+"!@#$%^&*";for(let n=3;n<12;n++)r+=a.charAt(Math.floor(Math.random()*a.length));return r.split("").sort(()=>Math.random()-.5).join("")},rt=async e=>{try{await navigator.clipboard.writeText(e),W({message:"Copied to clipboard!",type:"success"}),setTimeout(()=>{W(null)},2e3)}catch(t){console.error("Failed to copy: ",t),W({message:"Failed to copy to clipboard",type:"error"}),setTimeout(()=>{W(null)},2e3)}};(0,r.useEffect)(()=>{null!==n&&void 0!==n&&n.role&&_e(n.role)},[null===n||void 0===n?void 0:n.role]),(0,r.useEffect)(()=>{(async()=>{const e={page:1,page_size:Ae,search:void 0,sort_by:void 0,sort_direction:"asc"};try{ae(!0),le(null);const t=await l.users.getAll(e),s=t.data||t;se(s.results||[]),Te(s.count||0),Fe(s.total_pages||Math.ceil((s.count||0)/Ae)),Oe(!!s.next),Re(!!s.previous),Ee(1)}catch(t){console.error("Error fetching users:",t),le("Failed to fetch users")}finally{ae(!1)}await(async()=>{try{je(!0);try{const e=await l.schools.getAll(1,100);be(e.results||[])}catch(e){console.warn("Schools API failed, trying direct endpoint:",e);const t=await l.authenticatedRequest("/schools",{method:"GET"});be(t.results||t||[])}}catch(t){console.error("Error fetching schools:",t),be([])}finally{je(!1)}})()})()},[Ae]),(0,r.useEffect)(()=>{const e=setTimeout(()=>{y(g)},500);return()=>clearTimeout(e)},[g]),(0,r.useEffect)(()=>{if(""===b&&""===v&&"asc"===N)return;(async()=>{const e={page:1,page_size:Ae,search:b||void 0,sort_by:v||void 0,sort_direction:N};try{ae(!0),le(null);const t=await l.users.getAll(e),s=t.data||t;se(s.results||[]),Te(s.count||0),Fe(s.total_pages||Math.ceil((s.count||0)/Ae)),Oe(!!s.next),Re(!!s.previous),Ee(1)}catch(t){console.error("Error fetching users:",t),le("Failed to fetch users")}finally{ae(!1)}})()},[b,v,N,Ae]);const at=te,nt=e=>{v===e?w("asc"===N?"desc":"asc"):(j(e),w("asc"))},lt=e=>v!==e?null:"asc"===N?z({className:"w-3 h-3"}):O({className:"w-3 h-3"}),it=()=>{T(!1),ge(!1),pe(!1),ce(""),X({username:"",email:"",first_name:"",last_name:"",surname:"",phone_number:"",role:"user",is_active:!0,is_staff:!1,school_id:""})},ot=(e,t)=>{X(s=>({...s,[e]:t})),V[e]&&G(t=>{const s={...t};return delete s[e],s})},dt=()=>{Je(!1),Xe(null),tt(!1)},ct=()=>{Ie(!1),Be(null),He(""),We(!1),Qe(!1)},ut=()=>{D(!1),M(null),B(null),J({})},mt=(e,t)=>{R&&(M({...R,[e]:t}),Y[e]&&J(t=>{const s={...t};return delete s[e],s}))};(0,r.useEffect)(()=>{const e=e=>{const t=e.target;t.closest("[data-dropdown-container]")||t.closest("[data-portal-dropdown]")||C(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const xt=e=>{const t={active:{bg:"bg-green-100",text:"text-green-800",label:"Active"},inactive:{bg:"bg-gray-100",text:"text-gray-800",label:"Inactive"},suspended:{bg:"bg-red-100",text:"text-red-800",label:"Suspended"}},s=t[e]||t.inactive;return(0,o.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${s.bg} ${s.text}`,children:s.label})},pt=e=>{const t={root:{bg:"bg-purple-100",text:"text-purple-800",label:"Root"},super_admin:{bg:"bg-blue-100",text:"text-blue-800",label:"Super Admin"},admin:{bg:"bg-indigo-100",text:"text-indigo-800",label:"Admin"},user:{bg:"bg-gray-100",text:"text-gray-800",label:"User"}},s=t[e]||t.user;return(0,o.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${s.bg} ${s.text}`,children:s.label})};return(0,o.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-3 mb-4",children:(0,o.jsxs)("div",{className:"mb-3",children:[!m&&!h&&d&&(0,o.jsx)("div",{className:"mb-3 p-2 rounded-md text-xs font-medium flex items-center space-x-2",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1 text-red-700 bg-red-50 px-2 py-1 rounded",children:[(0,o.jsx)("span",{children:"\ud83d\udeab"}),(0,o.jsx)("span",{children:"Student Admission Blocked - User Management Affected"})]})}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("nav",{className:"flex space-x-6",children:[(0,o.jsx)("button",{onClick:()=>k("users"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("users"===_?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Users"}),(0,o.jsx)("button",{onClick:()=>k("roles"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("roles"===_?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Roles"}),(0,o.jsx)("button",{onClick:()=>k("permissions"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("permissions"===_?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Permissions"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[x&&(0,o.jsx)("button",{onClick:p,className:"px-3 py-1.5 border border-red-300 bg-red-50 text-red-700 rounded-md text-xs font-medium hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors duration-200",title:"Refresh feature status",children:"Refresh Status"}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",placeholder:"Search users...",value:g,onChange:e=>f(e.target.value),disabled:!m&&!h&&d,className:"pl-8 pr-3 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent text-xs transition-colors duration-200 "+(m||h||!d?"border-gray-300 focus:ring-blue-500 focus:border-transparent":"border-gray-200 bg-gray-100 text-gray-500 cursor-not-allowed")}),(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:ie({className:"h-3 w-3 "+(m||h||!d?"text-gray-400":"text-gray-300")})})]}),(0,o.jsx)("button",{disabled:!m&&!h&&d,className:"px-3 py-1.5 border rounded-md text-xs transition-colors duration-200 "+(m||h||!d?"border-gray-300 text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent":"border-gray-200 bg-gray-100 text-gray-500 cursor-not-allowed"),children:"Filter"}),(0,o.jsxs)("select",{value:v,onChange:e=>{j(e.target.value),e.target.value&&w("asc")},disabled:!m&&!h&&d,className:"px-3 py-1.5 border rounded-md text-xs focus:outline-none focus:ring-2 focus:border-transparent transition-colors duration-200 "+(m||h||!d?"border-gray-300 text-gray-700 focus:ring-blue-500 focus:border-transparent":"border-gray-200 bg-gray-100 text-gray-500 cursor-not-allowed"),children:[(0,o.jsx)("option",{value:"",children:"Sort by"}),(0,o.jsx)("option",{value:"username",children:"Username"}),(0,o.jsx)("option",{value:"first_name",children:"First Name"}),(0,o.jsx)("option",{value:"last_name",children:"Last Name"}),(0,o.jsx)("option",{value:"email",children:"Email"}),(0,o.jsx)("option",{value:"role",children:"Role"}),(0,o.jsx)("option",{value:"is_active",children:"Status"}),(0,o.jsx)("option",{value:"created_at",children:"Created Date"})]}),(0,o.jsx)(we,{permissions:["access_admin_panel"],children:(0,o.jsx)(Se,{tooltipMessage:m||h||!d?"":u,disabled:!m&&!h&&d,className:"inline-block",children:(0,o.jsx)("button",{onClick:()=>{const e=st();ce(e),ge(!1),pe(!1),T(!0),G({}),"root"===Ne&&X(e=>({...e,school_id:""}))},disabled:!m&&!h&&d,className:"px-4 py-1.5 bg-blue-600 text-white rounded-md text-xs font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"+ Add User"})})})]})]})]})}),"users"===_&&(0,o.jsxs)("div",{className:"bg-white rounded-md shadow-sm relative",children:[!m&&!h&&d&&(0,o.jsx)("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-15 z-10 flex items-center justify-center",title:u,children:(0,o.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg text-center",children:[(0,o.jsx)("div",{className:"text-gray-600 mb-2",children:(0,o.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,o.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"User Management Temporarily Unavailable"}),(0,o.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:u})]})}),re&&(0,o.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Loading users..."})]}),ne&&(0,o.jsxs)("div",{className:"p-4 text-center",children:[(0,o.jsx)("div",{className:"text-red-600 text-sm mb-2",children:ne}),(0,o.jsx)("button",{onClick:async()=>{const e={page:1,page_size:Ae,search:void 0,sort_by:void 0,sort_direction:"asc"};try{ae(!0),le(null);const t=await l.users.getAll(e),s=t.data||t;se(s.results||[]),Te(s.count||0),Fe(s.total_pages||Math.ceil((s.count||0)/Ae)),Oe(!!s.next),Re(!!s.previous),Ee(1)}catch(t){console.error("Error fetching users:",t),le("Failed to fetch users")}finally{ae(!1)}},className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors duration-200",children:"Retry"})]}),!re&&!ne&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"overflow-x-auto border-0",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>nt("username"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Username"}),lt("username")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"First Name"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Last Name"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Email"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Phone"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>nt("role"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Role"}),lt("role")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>nt("is_active"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Status"}),lt("is_active")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"School"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>nt("created_at"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Created At"}),lt("created_at")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:at.map((e,t)=>{var s;return(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-25",children:[(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs font-medium text-gray-900",children:e.username}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.first_name}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.last_name}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.email}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.phone_number||"-"}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:pt(e.role)}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:xt(e.is_active?"active":"inactive")}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:(null===(s=e.school)||void 0===s?void 0:s.name)||"-"}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:new Date(e.created_at).toLocaleDateString()}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900 relative",children:(0,o.jsx)("div",{className:"flex items-center justify-center",children:(0,o.jsx)(we,{permissions:["access_admin_panel"],children:(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)("button",{onClick:t=>{if(t.stopPropagation(),C(S===e.id?null:e.id),S!==e.id){const e=t.currentTarget.getBoundingClientRect();A({x:e.left,y:e.bottom+window.scrollY})}},className:"p-1 rounded-md transition-colors duration-200 "+(S===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:q({className:"w-3 h-3"})})})})})})]},e.id)})})]})})}),!re&&!ne&&Pe>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"h-4 mt-4 rounded-t-lg",style:{backgroundColor:"rgb(249,250,251)"}}),(0,o.jsx)("div",{className:"h-2",style:{backgroundColor:"rgb(249,250,251)"}}),(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg mb-4",style:{backgroundColor:"rgb(249,250,251)",position:"relative",zIndex:10},children:[(0,o.jsxs)("div",{className:"text-xs text-gray-600",children:["Showing ",(0,o.jsx)("span",{className:"font-medium",children:(Ce-1)*Ae+1})," to ",(0,o.jsx)("span",{className:"font-medium",children:Math.min(Ce*Ae,Pe)})," of ",(0,o.jsx)("span",{className:"font-medium",children:Pe})," results"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:async()=>{if(ze){const t={page:Ce-1,page_size:Ae,search:b||void 0,sort_by:v||void 0,sort_direction:N};try{ae(!0),le(null);const e=await l.users.getAll(t),s=e.data||e;se(s.results||[]),Te(s.count||0),Fe(s.total_pages||Math.ceil((s.count||0)/Ae)),Oe(!!s.next),Re(!!s.previous),Ee(Ce-1)}catch(e){console.error("Error fetching users:",e),le("Failed to fetch users")}finally{ae(!1)}}},disabled:!ze,className:"px-2.5 py-1 text-xs font-medium border rounded transition-colors duration-200 text-white border-blue-500 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"rgb(59,130,246)"},children:"Previous"}),(0,o.jsxs)("span",{className:"px-2.5 py-1 text-xs font-medium text-gray-600",children:["Page ",Ce," of ",Le," (",Le>1?`${Le} pages`:"1 page",")"]}),(0,o.jsx)("button",{onClick:async()=>{if(De){const t={page:Ce+1,page_size:Ae,search:b||void 0,sort_by:v||void 0,sort_direction:N};try{ae(!0),le(null);const e=await l.users.getAll(t),s=e.data||e;se(s.results||[]),Te(s.count||0),Fe(s.total_pages||Math.ceil((s.count||0)/Ae)),Oe(!!s.next),Re(!!s.previous),Ee(Ce+1)}catch(e){console.error("Error fetching users:",e),le("Failed to fetch users")}finally{ae(!1)}}},disabled:!De,className:"px-2.5 py-1 text-xs font-medium border rounded transition-colors duration-200 text-white border-blue-500 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"rgb(59,130,246)"},children:"Next"})]})]})]})]}),"roles"===_&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Role Management"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Manage user roles and permissions."})]})}),"permissions"===_&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Permission Management"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Configure system permissions and access controls."})]})})]}),S&&(0,ve.createPortal)((0,o.jsx)("div",{className:"fixed w-48 bg-white rounded-md shadow-lg border border-gray-200 z-[9999]","data-portal-dropdown":!0,style:{left:E.x-192+"px",top:`${E.y}px`},onClick:e=>e.stopPropagation(),children:(0,o.jsxs)("div",{className:"py-1",children:[(0,o.jsx)(we,{permissions:["access_admin_panel"],children:(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=te.find(e=>e.id===S);t&&(e=>{M({...e}),B({...e}),D(!0),C(null),J({})})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-colors duration-200",children:[H({className:"w-3 h-3 mr-2"}),"Edit"]})}),(0,o.jsx)(we,{permissions:["access_admin_panel"],children:(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=te.find(e=>e.id===S);t&&(e=>{Be(e),He(""),We(!1),Ie(!0),C(null)})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-yellow-50 hover:text-yellow-700 transition-colors duration-200",children:[ee({className:"w-3 h-3 mr-2"}),"Pass Reset"]})}),"root"===(null===n||void 0===n?void 0:n.role)&&S!==(null===n||void 0===n?void 0:n.id)&&(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=te.find(e=>e.id===S);t&&(e=>{Xe(e),Je(!0),C(null)})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-green-50 hover:text-green-700 transition-colors duration-200",children:[oe({className:"w-3 h-3 mr-2"}),"Signin As"]}),(0,o.jsx)(we,{permissions:["access_admin_panel"],children:(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=te.find(e=>e.id===S);t&&(async e=>{try{await l.users.delete(e.id),se(t=>t.filter(t=>t.id!==e.id)),C(null),W({message:"User deleted successfully!",type:"success"}),setTimeout(()=>{W(null)},3e3)}catch(ne){console.error("Error deleting user:",ne),W({message:"Failed to delete user. Please try again.",type:"error"}),setTimeout(()=>{W(null)},5e3)}})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-red-50 hover:text-red-700 transition-colors duration-200",children:[xe({className:"w-3 h-3 mr-2"}),"Delete"]})})]})}),document.body),$&&(0,o.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[10000] flex items-center p-4 rounded-lg shadow-lg transition-all duration-300",children:(0,o.jsxs)("div",{className:`flex items-center space-x-3 ${"success"===$.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"} px-6 py-4 rounded-lg shadow-xl`,children:["success"===$.type?F({className:"w-5 h-5 text-green-600"}):me({className:"w-5 h-5 text-red-600"}),(0,o.jsx)("span",{className:"text-sm font-medium",children:$.message}),(0,o.jsx)("button",{onClick:()=>W(null),className:"ml-3 text-gray-400 hover:text-gray-600",children:me({className:"w-4 h-4"})})]})}),P&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-end z-[10002] transition-all duration-300 ease-in-out",children:(0,o.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 h-full w-96 shadow-2xl overflow-y-auto border-l border-gray-100 transform transition-transform duration-300 ease-out",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Add New User"})]}),(0,o.jsx)("button",{onClick:it,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[Object.keys(V).length>0&&(0,o.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-4 shadow-sm",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Please fix the errors below"})})]})}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Username *"]}),(0,o.jsx)("input",{type:"text",value:Z.username,onChange:e=>ot("username",e.target.value),placeholder:"Enter username",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(V.username?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),V.username&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:V.username[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"First Name *"]}),(0,o.jsx)("input",{type:"text",value:Z.first_name,onChange:e=>ot("first_name",e.target.value),placeholder:"Enter first name",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(V.first_name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),V.first_name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:V.first_name[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Last Name *"]}),(0,o.jsx)("input",{type:"text",value:Z.last_name,onChange:e=>ot("last_name",e.target.value),placeholder:"Enter last name",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+(V.last_name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),V.last_name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:V.last_name[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Surname"]}),(0,o.jsx)("input",{type:"text",value:Z.surname,onChange:e=>ot("surname",e.target.value),placeholder:"Enter surname",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(V.surname?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),V.surname&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:V.surname[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Email *"]}),(0,o.jsx)("input",{type:"email",value:Z.email,onChange:e=>ot("email",e.target.value),placeholder:"Enter email address",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+(V.email?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),V.email&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:V.email[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-teal-500 rounded-full mr-1.5"}),"Role *"]}),(0,o.jsxs)("select",{value:Z.role,onChange:e=>ot("role",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-100 focus:border-teal-500 transition-all duration-200 bg-white "+(V.role?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"user",children:"User"}),(0,o.jsx)("option",{value:"admin",children:"Admin"}),"root"===Ne&&(0,o.jsx)("option",{value:"super_admin",children:"Super Admin"}),"root"===Ne&&(0,o.jsx)("option",{value:"root",children:"Root"}),"super_admin"===Ne&&(0,o.jsx)("option",{value:"super_admin",children:"Super Admin"})]}),V.role&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:V.role[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-1.5"}),"Phone Number"]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,o.jsx)("span",{className:"text-gray-500 text-xs",children:"+254"})}),(0,o.jsx)("input",{type:"tel",value:(null===(e=Z.phone_number)||void 0===e?void 0:e.replace("+254",""))||"",onChange:e=>{const t=e.target.value,s=t.startsWith("+254")?t:`+254${t}`;ot("phone_number",s)},placeholder:"700000000",className:"w-full pl-12 pr-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-500 transition-all duration-200 bg-white "+(V.phone_number?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")})]}),V.phone_number&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:V.phone_number[0]})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"Active Status *"]}),(0,o.jsxs)("select",{value:Z.is_active?"true":"false",onChange:e=>ot("is_active","true"===e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 transition-all duration-200 bg-white "+(V.is_active?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"true",children:"Active"}),(0,o.jsx)("option",{value:"false",children:"Inactive"})]}),V.is_active&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:V.is_active[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-pink-500 rounded-full mr-1.5"}),"Staff Status"]}),(0,o.jsxs)("select",{value:Z.is_staff?"true":"false",onChange:e=>ot("is_staff","true"===e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-pink-500 transition-all duration-200 bg-white "+(V.is_staff?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"false",children:"Regular User"}),(0,o.jsx)("option",{value:"true",children:"Staff Member"})]}),V.is_staff&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:V.is_staff[0]})]})]}),"root"===Ne&&(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-violet-500 rounded-full mr-1.5"}),"School *"]}),ye?(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,o.jsx)("span",{className:"text-xs text-gray-500",children:"Loading schools..."})]}):(0,o.jsxs)("select",{value:Z.school_id,onChange:e=>ot("school_id",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-100 focus:border-violet-500 transition-all duration-200 bg-white "+(V.school_id?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),required:!0,children:[(0,o.jsx)("option",{value:"",children:"Select a school"}),fe.length>0?fe.map(e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id)):(0,o.jsx)("option",{value:"",disabled:!0,children:"No schools available"})]}),V.school_id&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:V.school_id[0]})]})]}),he&&(0,o.jsxs)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-xl p-4 shadow-sm",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,o.jsx)("div",{className:"p-1 bg-yellow-100 rounded-full",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,o.jsx)("h3",{className:"text-sm font-semibold text-yellow-900",children:"User Credentials"})]}),(0,o.jsxs)("div",{className:"text-xs text-yellow-800 mb-4",children:[(0,o.jsx)("strong",{children:"Important:"})," Please copy these credentials and share them securely with the user. The password will not be shown again."]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Email"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:"text",value:Z.email,readOnly:!0,className:"flex-1 px-3 py-2 text-xs border border-gray-200 rounded-lg bg-gray-50 font-mono"}),(0,o.jsx)("button",{onClick:()=>rt(Z.email||""),className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",title:"Copy email",children:U({className:"w-3 h-3"})})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Password"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:ue?"text":"password",value:de,readOnly:!0,className:"flex-1 px-3 py-2 text-xs border border-gray-200 rounded-lg bg-gray-50 font-mono"}),(0,o.jsx)("button",{onClick:()=>pe(!ue),className:"px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200",title:ue?"Hide password":"Show password",children:ue?K({className:"w-3 h-3"}):Q({className:"w-3 h-3"})}),(0,o.jsx)("button",{onClick:()=>rt(de),className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",title:"Copy password",children:U({className:"w-3 h-3"})})]})]}),(0,o.jsx)("div",{className:"flex justify-center pt-2",children:(0,o.jsx)("button",{onClick:()=>rt(`Email: ${Z.email}\nPassword: ${de}`),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200 text-xs font-medium",children:"Copy Email & Password"})})]})]})]}),(0,o.jsx)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:he?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("button",{onClick:async()=>{it();const e={page:Ce,page_size:Ae,search:b||void 0,sort_by:v||void 0,sort_direction:N};try{const t=await l.users.getAll(e),s=t.data||t;se(s.results||[]),Te(s.count||0),Fe(s.total_pages||Math.ceil((s.count||0)/Ae)),Oe(!!s.next),Re(!!s.previous)}catch(t){console.error("Error refreshing users:",t)}},className:"px-4 py-2 text-xs bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all duration-200 font-semibold shadow-sm hover:shadow-md",children:"Done"})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:it,className:"px-4 py-2 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{try{const e={...Z,password:de,school:Z.school_id};delete e.school_id,await l.users.signup(e),ge(!0),W({message:"User created successfully! Please copy the credentials below.",type:"success"}),G({}),setTimeout(()=>{W(null)},5e3)}catch(ne){var e,t,s,r;if(console.error("Error adding user:",ne),null!==(e=ne.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors)G(ne.response.data.errors),W({message:"Please fix the validation errors below.",type:"error"});else W({message:(null===(s=ne.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||"Failed to add user. Please try again.",type:"error"});setTimeout(()=>{W(null)},5e3)}},disabled:!Z.username||!Z.email||!Z.first_name||!Z.last_name||"root"===Ne&&!Z.school_id,className:"px-4 py-2 text-xs bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-semibold shadow-sm hover:shadow-md",children:"Create User"})]})})]})}),L&&R&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-end z-[10002] transition-all duration-300 ease-in-out",children:(0,o.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 h-full w-96 shadow-2xl overflow-y-auto border-l border-gray-100 transform transition-transform duration-300 ease-out",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Edit User"})]}),(0,o.jsx)("button",{onClick:ut,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[Object.keys(Y).length>0&&(0,o.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-4 shadow-sm",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Please fix the errors below"})})]})}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Username *"]}),(0,o.jsx)("input",{type:"text",value:R.username,onChange:e=>mt("username",e.target.value),placeholder:"Enter username",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(Y.username?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Y.username&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Y.username[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"First Name *"]}),(0,o.jsx)("input",{type:"text",value:R.first_name,onChange:e=>mt("first_name",e.target.value),placeholder:"Enter first name",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(Y.first_name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Y.first_name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Y.first_name[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Last Name *"]}),(0,o.jsx)("input",{type:"text",value:R.last_name,onChange:e=>mt("last_name",e.target.value),placeholder:"Enter last name",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+(Y.last_name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Y.last_name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Y.last_name[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Surname"]}),(0,o.jsx)("input",{type:"text",value:R.surname,onChange:e=>mt("surname",e.target.value),placeholder:"Enter surname",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(Y.surname?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Y.surname&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Y.surname[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Email *"]}),(0,o.jsx)("input",{type:"email",value:R.email,onChange:e=>mt("email",e.target.value),placeholder:"Enter email address",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+(Y.email?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Y.email&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Y.email[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-teal-500 rounded-full mr-1.5"}),"Role *"]}),(0,o.jsxs)("select",{value:R.role,onChange:e=>mt("role",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-100 focus:border-teal-500 transition-all duration-200 bg-white "+(Y.role?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"user",children:"User"}),(0,o.jsx)("option",{value:"admin",children:"Admin"}),"root"===Ne&&(0,o.jsx)("option",{value:"super_admin",children:"Super Admin"}),"root"===Ne&&(0,o.jsx)("option",{value:"root",children:"Root"}),"super_admin"===Ne&&(0,o.jsx)("option",{value:"super_admin",children:"Super Admin"})]}),Y.role&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Y.role[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-1.5"}),"Phone Number"]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,o.jsx)("span",{className:"text-gray-500 text-xs",children:"+254"})}),(0,o.jsx)("input",{type:"tel",value:(null===(t=R.phone_number)||void 0===t?void 0:t.replace("+254",""))||"",onChange:e=>{const t=e.target.value,s=t.startsWith("+254")?t:`+254${t}`;mt("phone_number",s)},placeholder:"700000000",className:"w-full pl-12 pr-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-500 transition-all duration-200 bg-white "+(Y.phone_number?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")})]}),Y.phone_number&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Y.phone_number[0]})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"Active Status *"]}),(0,o.jsxs)("select",{value:R.is_active?"true":"false",onChange:e=>mt("is_active","true"===e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 transition-all duration-200 bg-white "+(Y.is_active?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"true",children:"Active"}),(0,o.jsx)("option",{value:"false",children:"Inactive"})]}),Y.is_active&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Y.is_active[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-pink-500 rounded-full mr-1.5"}),"Staff Status"]}),(0,o.jsxs)("select",{value:R.is_staff?"true":"false",onChange:e=>mt("is_staff","true"===e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-pink-500 transition-all duration-200 bg-white "+(Y.is_staff?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"false",children:"Regular User"}),(0,o.jsx)("option",{value:"true",children:"Staff Member"})]}),Y.is_staff&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Y.is_staff[0]})]})]}),"root"===Ne&&(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-violet-500 rounded-full mr-1.5"}),"School *"]}),ye?(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,o.jsx)("span",{className:"text-xs text-gray-500",children:"Loading schools..."})]}):(0,o.jsxs)("select",{value:R.school_id,onChange:e=>mt("school_id",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-100 focus:border-violet-500 transition-all duration-200 bg-white "+(Y.school_id?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),required:!0,children:[(0,o.jsx)("option",{value:"",children:"Select a school"}),fe.map(e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id))]}),Y.school_id&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Y.school_id[0]})]})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:ut,className:"px-4 py-2 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if(R)try{const e={first_name:R.first_name,last_name:R.last_name,surname:R.surname,phone_number:R.phone_number,role:R.role,is_active:R.is_active,is_staff:R.is_staff};await l.users.update(R.id,e);const t={page:Ce,page_size:Ae,search:b||void 0,sort_by:v||void 0,sort_direction:N};try{const e=await l.users.getAll(t),s=e.data||e;se(s.results||[]),Te(s.count||0),Fe(s.total_pages||Math.ceil((s.count||0)/Ae)),Oe(!!s.next),Re(!!s.previous)}catch(a){console.error("Error refreshing users:",a)}W({message:"User updated successfully!",type:"success"}),J({}),ut(),setTimeout(()=>{W(null)},3e3)}catch(ne){var e,t,s,r;if(console.error("Error updating user:",ne),null!==(e=ne.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors)J(ne.response.data.errors),W({message:"Please fix the validation errors below.",type:"error"});else W({message:(null===(s=ne.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||"Failed to update user. Please try again.",type:"error"});setTimeout(()=>{W(null)},5e3)}},disabled:!(()=>{if(!R||!I)return!1;return["first_name","last_name","surname","phone_number","role","is_active","is_staff","school_id"].some(e=>{const t=I[e],s=R[e];return"boolean"===typeof t&&"boolean"===typeof s?t!==s:String(t||"")!==String(s||"")})})(),className:"px-4 py-2 text-xs bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-semibold shadow-sm hover:shadow-md",children:"Update User"})]})]})}),(0,o.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm transition-all duration-300 ease-out z-50 "+(Me?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),children:(0,o.jsx)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-300 ease-out flex flex-col "+(Me?"translate-x-0":"translate-x-full"),children:Ue&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-2 bg-blue-100 rounded-xl",children:ee({className:"w-5 h-5 text-blue-600"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Reset Password"}),(0,o.jsx)("p",{className:"text-sm text-gray-500",children:Ue.email})]})]}),(0,o.jsx)("button",{onClick:ct,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-xl transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,o.jsx)("div",{className:"p-6 space-y-4",children:Ke?(0,o.jsxs)("div",{className:"text-center space-y-4",children:[(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)("div",{className:"p-4 bg-green-100 rounded-full",children:F({className:"w-8 h-8 text-green-600"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Password Reset Successful!"}),(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:["New credentials for ",(0,o.jsx)("span",{className:"font-semibold",children:Ue.email})]})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-4 space-y-3",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("span",{className:"text-sm font-semibold text-green-800",children:"New Credentials"}),(0,o.jsx)("button",{onClick:()=>rt(`Email: ${Ue.email}\nPassword: ${$e}`),className:"px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200 text-xs font-medium",children:"Copy All"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Email"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:"text",value:Ue.email,readOnly:!0,className:"flex-1 px-3 py-2 border border-green-200 rounded-lg bg-white text-sm font-mono"}),(0,o.jsx)("button",{onClick:()=>rt(Ue.email),className:"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200",title:"Copy email",children:U({className:"w-3 h-3"})})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Password"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:qe?"text":"password",value:$e,readOnly:!0,className:"flex-1 px-3 py-2 border border-green-200 rounded-lg bg-white text-sm font-mono"}),(0,o.jsx)("button",{onClick:()=>We(!qe),className:"p-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200",title:qe?"Hide password":"Show password",children:qe?K({className:"w-3 h-3"}):Q({className:"w-3 h-3"})}),(0,o.jsx)("button",{onClick:()=>rt($e),className:"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200",title:"Copy password",children:U({className:"w-3 h-3"})})]})]})]})]}):(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"New Password"}),(0,o.jsx)("div",{className:"flex items-center space-x-2",children:(0,o.jsxs)("div",{className:"relative flex-1",children:[(0,o.jsx)("input",{type:qe?"text":"password",value:$e,onChange:e=>He(e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-sm",placeholder:"Enter new password"}),(0,o.jsx)("button",{onClick:()=>We(!qe),className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 transition-colors duration-200",title:qe?"Hide password":"Show password",children:qe?K({className:"w-4 h-4"}):Q({className:"w-4 h-4"})})]})})]}),(0,o.jsx)("button",{onClick:()=>He(st()),className:"w-full px-4 py-3 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-xl hover:from-emerald-600 hover:to-emerald-700 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"\ud83d\udd10 Generate Secure Password"}),$e&&(0,o.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("span",{className:"text-sm font-semibold text-blue-800",children:"Generated Password"}),(0,o.jsx)("button",{onClick:()=>rt($e),className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",title:"Copy password",children:U({className:"w-3 h-3"})})]}),(0,o.jsx)("div",{className:"bg-white border border-blue-200 rounded-lg p-3",children:(0,o.jsx)("code",{className:"text-sm font-mono text-blue-900 break-all",children:qe?$e:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})})]})]})})}),(0,o.jsx)("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-100 flex-shrink-0",children:Ke?(0,o.jsx)("button",{onClick:ct,className:"px-6 py-2.5 text-white bg-gradient-to-r from-green-500 to-green-600 rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-200 font-medium text-sm shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Done"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:ct,className:"px-6 py-2.5 text-gray-700 bg-gray-100 rounded-xl hover:bg-gray-200 transition-all duration-200 font-medium text-sm",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if(Ue&&$e)try{Ge(!0),await l.users.resetPassword(Ue.id,$e),Qe(!0),W({message:`Password reset successfully for ${Ue.email}`,type:"success"}),setTimeout(()=>{W(null)},8e3)}catch(ne){console.error("Error resetting password:",ne),W({message:"Failed to reset password. Please try again.",type:"error"}),setTimeout(()=>{W(null)},5e3)}finally{Ge(!1)}},disabled:!$e||Ve,className:"px-6 py-2.5 text-white bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl hover:from-blue-600 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium text-sm shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:transform-none",children:Ve?(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,o.jsx)("span",{children:"Resetting..."})]}):"Reset Password"})]})})]})})}),Ye&&Ze&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[10003] transition-all duration-300 ease-in-out",children:(0,o.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 transform transition-all duration-300 ease-out",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-2 bg-green-100 rounded-xl",children:oe({className:"w-5 h-5 text-green-600"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Sign In As User"}),(0,o.jsx)("p",{className:"text-sm text-gray-500",children:"Confirm user impersonation"})]})]}),(0,o.jsx)("button",{onClick:dt,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-xl transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsx)("div",{className:"p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,o.jsx)("span",{className:"text-2xl font-semibold text-gray-600",children:(null===(s=Ze.first_name)||void 0===s?void 0:s.charAt(0))||(null===(a=Ze.email)||void 0===a?void 0:a.charAt(0))||"U"})}),(0,o.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-1",children:Ze.first_name&&Ze.last_name?`${Ze.first_name} ${Ze.last_name}`:Ze.username||"Unknown User"}),(0,o.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:Ze.email})]}),(0,o.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6",children:(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,o.jsxs)("div",{className:"text-left",children:[(0,o.jsx)("h5",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Warning"}),(0,o.jsx)("p",{className:"text-sm text-yellow-700",children:"You are about to sign in as this user. This action will switch your current session to this user's account. Are you sure you want to continue?"})]})]})})]})}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-100",children:[(0,o.jsx)("button",{onClick:dt,className:"px-6 py-2.5 text-gray-700 bg-gray-100 rounded-xl hover:bg-gray-200 transition-all duration-200 font-medium text-sm",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if(Ze)try{tt(!0),await i(Ze.id),W({message:`Successfully signed in as ${Ze.email}`,type:"success"}),dt(),setTimeout(()=>{W(null)},5e3)}catch(ne){console.error("Error signing in as user:",ne),W({message:ne instanceof Error?ne.message:"Failed to signin as user",type:"error"}),setTimeout(()=>{W(null)},5e3)}finally{tt(!1)}},disabled:et,className:"px-6 py-2.5 text-white bg-gradient-to-r from-green-500 to-green-600 rounded-xl hover:from-green-600 hover:to-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium text-sm shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:transform-none",children:et?(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,o.jsx)("span",{children:"Signing In..."})]}):"Sign In As User"})]})]})})]})},Te=e=>{let{school:t,isOpen:s,onClose:r,onEdit:a}=e;if(!s)return null;const n=[{title:"Basic Information",tag:"basic_info",description:"Core school identification and contact details",details:[{label:"School ID",value:t.id},{label:"Slug",value:t.slug},{label:"Subdomain",value:t.subdomain},{label:"Domain",value:t.domain||"Not set"}]},{title:"Contact Details",tag:"contact_details",description:"School contact information and communication channels",details:[{label:"Email",value:t.email},{label:"Phone",value:t.phone||"Not provided"},{label:"Website",value:t.website||"Not provided"},{label:"Address",value:t.address||"Not provided"}]},{title:"Configuration",tag:"configuration",description:"School settings and operational parameters",details:[{label:"Timezone",value:t.timezone},{label:"Language",value:t.language},{label:"Currency",value:t.currency},{label:"Status",value:t.is_active?"Active":"Inactive"}]},{title:"Student Management",tag:"student_management",description:"Current student enrollment and capacity information",details:[{label:"Current Students",value:(t.number_of_students||t.total_students||0).toString()},{label:"Max Capacity",value:t.max_students.toString()},{label:"Utilization",value:`${Math.round((t.number_of_students||t.total_students||0)/t.max_students*100)}%`}]}];return(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10001]",children:(0,o.jsxs)("div",{className:"bg-blue-50 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[85vh] overflow-hidden",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-blue-200",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-blue-600 rounded flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,o.jsx)("h2",{className:"text-lg font-bold text-blue-900",children:t.name})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[a&&(0,o.jsx)("button",{onClick:()=>a(t),className:"w-8 h-8 bg-white rounded-full flex items-center justify-center hover:bg-blue-50 transition-colors duration-200",title:"Edit School",children:re({className:"w-4 h-4 text-blue-600"})}),(0,o.jsx)("button",{onClick:r,className:"w-8 h-8 bg-white rounded-full flex items-center justify-center hover:bg-blue-50 transition-colors duration-200",title:"Close",children:me({className:"w-4 h-4 text-blue-600"})})]})]}),(0,o.jsx)("div",{className:"overflow-y-auto max-h-[calc(85vh-120px)] p-3 space-y-3",children:n.map((e,t)=>(0,o.jsxs)("div",{className:"bg-white/50 rounded-lg p-3 shadow-sm",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,o.jsx)("h3",{className:"text-sm font-bold text-gray-900",children:e.title}),(0,o.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.tag})]}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:e.description}),(0,o.jsx)("div",{className:"space-y-0.5",children:e.details.map((e,t)=>(0,o.jsxs)("div",{className:"flex justify-between items-center py-0.5 border-b border-gray-100 last:border-b-0",children:[(0,o.jsxs)("span",{className:"text-xs font-medium text-gray-700",children:[e.label,":"]}),(0,o.jsx)("span",{className:"text-xs text-gray-900 text-right max-w-48",children:"Website"===e.label&&"Not provided"!==e.value?(0,o.jsx)("a",{href:e.value.startsWith("http")?e.value:`https://${e.value}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline",children:e.value}):"Status"===e.label?(0,o.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium "+("Active"===e.value?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.value}):"Utilization"===e.label?(0,o.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium "+(parseInt(e.value)>80?"bg-red-100 text-red-800":parseInt(e.value)>60?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.value}):e.value})]},t))})]},e.tag))}),(0,o.jsx)("div",{className:"px-4 pt-4 pb-6 border-t border-blue-200 bg-blue-50",children:(0,o.jsx)("div",{className:"flex justify-end",children:(0,o.jsx)("button",{onClick:r,className:"px-6 py-1.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 font-medium text-sm",children:"Close"})})})]})})},Le=()=>{const[e,t]=(0,r.useState)(""),[s,a]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[d,c]=(0,r.useState)("asc"),[u,m]=(0,r.useState)("schools"),[x,p]=(0,r.useState)(null),[h,g]=(0,r.useState)({x:0,y:0}),[f,b]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),[j,N]=(0,r.useState)(null),[w,_]=(0,r.useState)(!1),[k,S]=(0,r.useState)(!1),[C,E]=(0,r.useState)(null),[A,P]=(0,r.useState)(null),[T,L]=(0,r.useState)({}),[D,R]=(0,r.useState)({}),[M,I]=(0,r.useState)({name:"",slug:"",subdomain:"",domain:"",address:"",phone:"",email:"",website:"",logo:"",primary_color:"#667eea",secondary_color:"#764ba2",timezone:"UTC",language:"en",currency:"USD",is_active:!0,max_students:1e3,academic_year_start:null,academic_year_end:null}),[U,B]=(0,r.useState)([]),[$,W]=(0,r.useState)(!0),[V,G]=(0,r.useState)(1),[K,Y]=(0,r.useState)(0),[J,Z]=(0,r.useState)(!1),[X,ee]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const t=setTimeout(()=>{a(e)},500);return()=>clearTimeout(t)},[e]),(0,r.useEffect)(()=>{(async()=>{try{W(!0);const e=await l.schools.getAll(V,20,s||void 0,n?`${"desc"===d?"-":""}${n}`:void 0),t=(e.results||e||[]).map(e=>({...e,number_of_students:e.total_students||0}));B(t),Y(e.count||0),Z(!!e.next),ee(!!e.previous)}catch(e){console.error("Error loading schools:",e),B([]),Y(0),Z(!1),ee(!1)}finally{W(!1)}})()},[V,s,n,d]),(0,r.useEffect)(()=>{G(1)},[s]);const te=Math.ceil(K/20),se=20*(V-1),re=Math.min(se+20,K),ae=e=>{n===e?c("asc"===d?"desc":"asc"):(i(e),c("asc"))},ne=e=>n!==e?null:"asc"===d?z({className:"w-3 h-3"}):O({className:"w-3 h-3"});(0,r.useEffect)(()=>{const e=e=>{const t=e.target;t.closest("[data-dropdown-container]")||t.closest("[data-portal-dropdown]")||p(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const le=()=>{_(!1),I({name:"",slug:"",subdomain:"",domain:"",address:"",phone:"",email:"",website:"",logo:"",primary_color:"#667eea",secondary_color:"#764ba2",timezone:"UTC",language:"en",currency:"USD",is_active:!0,max_students:1e3,academic_year_start:null,academic_year_end:null})},oe=e=>{v(e),N(e),b(!0),p(null),R({})},de=()=>{b(!1),v(null),N(null),R({})},ce=(e,t)=>{I(s=>({...s,[e]:t})),T[e]&&L(t=>{const s={...t};return delete s[e],s})},ue=(e,t)=>{y&&(v({...y,[e]:t}),D[e]&&R(t=>{const s={...t};return delete s[e],s}))},pe=async()=>{if(y&&j)try{B(e=>e.map(e=>e.id===y.id?y:e)),P({message:"School updated successfully!",type:"success"}),R({}),de(),setTimeout(()=>{P(null)},3e3)}catch(s){var e,t;console.error("Error updating school:",s),null!==(e=s.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors?(R(s.response.data.errors),P({message:s.response.data.message||"Please fix the validation errors below.",type:"error"})):(R({}),P({message:"Failed to update school. Please try again.",type:"error"})),setTimeout(()=>{P(null)},5e3)}};return(0,o.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-4 mb-4",children:(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("nav",{className:"flex space-x-6",children:[(0,o.jsx)("button",{onClick:()=>m("schools"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("schools"===u?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Schools"}),(0,o.jsx)("button",{onClick:()=>m("departments"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("departments"===u?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Departments"}),(0,o.jsx)("button",{onClick:()=>m("facilities"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("facilities"===u?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Facilities"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",placeholder:"Search schools...",value:e,onChange:e=>t(e.target.value),className:"pl-8 pr-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-xs transition-colors duration-200"}),(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:ie({className:"h-3 w-3 text-gray-400"})})]}),(0,o.jsx)("button",{className:"px-3 py-1.5 border border-gray-300 rounded-md text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:"Filter"}),(0,o.jsxs)("select",{value:n,onChange:e=>i(e.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-md text-xs focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:[(0,o.jsx)("option",{value:"",children:"Sort by"}),(0,o.jsx)("option",{value:"name",children:"Name"}),(0,o.jsx)("option",{value:"slug",children:"Slug"}),(0,o.jsx)("option",{value:"subdomain",children:"Subdomain"}),(0,o.jsx)("option",{value:"created_at",children:"Created Date"})]}),(0,o.jsx)(we,{permissions:["create_school"],children:(0,o.jsx)("button",{onClick:()=>{_(!0),L({})},className:"px-4 py-1.5 bg-blue-600 text-white rounded-md text-xs font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200",children:"+ Add School"})})]})]})})}),"schools"===u&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm relative",children:$?(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading schools..."})]}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ae("name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Name"}),ne("name")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ae("slug"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Slug"}),ne("slug")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ae("subdomain"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Subdomain"}),ne("subdomain")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Website"}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Number of Students"}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ae("is_active"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Is Active"}),ne("is_active")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ae("created_at"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Created At"}),ne("created_at")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:U.map((e,t)=>{return(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-25",children:[(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs font-medium text-gray-900",children:e.name}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e.slug})}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.subdomain})}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.website?(0,o.jsx)("a",{href:e.website.startsWith("http")?e.website:`https://${e.website}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline",children:e.website}):(0,o.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:e.number_of_students||0})}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium "+(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Inactive"})}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:(s=e.created_at,new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("button",{onClick:()=>(e=>{E(e),S(!0)})(e),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors duration-200",title:"View Details",children:Q({className:"w-3 h-3"})}),(0,o.jsx)(we,{permissions:["create_school"],children:(0,o.jsx)("div",{className:"relative","data-dropdown-container":!0,children:(0,o.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),((e,t)=>{if(x===e)p(null);else{const s=t.currentTarget.getBoundingClientRect(),r=window.innerHeight,a=window.innerWidth,n=80,l=128;let i=s.right-l,o=s.bottom+4;s.bottom+n>r&&(o=s.top-n-4),i<0&&(i=0),i+l>a&&(i=a-l),g({x:i,y:o}),p(e)}})(e.id,t)},className:"p-1 rounded-md transition-colors duration-200 cursor-pointer "+(x===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:q({className:"w-3 h-3"})})})})]})})]},e.id);var s})})]})})}),"departments"===u&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Department Management"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Manage school departments and academic divisions."})]})}),"facilities"===u&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Facility Management"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Manage school facilities and infrastructure."})]})}),"schools"===u&&(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg mt-4 mb-4",style:{backgroundColor:"rgb(249,250,251)",position:"relative",zIndex:10},children:[(0,o.jsxs)("div",{className:"text-xs text-gray-600",children:["Showing ",(0,o.jsx)("span",{className:"font-medium",children:se+1})," to ",(0,o.jsx)("span",{className:"font-medium",children:re})," of ",(0,o.jsx)("span",{className:"font-medium",children:K})," results"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>{G(e=>Math.max(e-1,1))},disabled:!X,className:"px-2.5 py-1 text-xs font-medium border rounded transition-colors duration-200 text-gray-500 bg-white border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,o.jsxs)("span",{className:"px-2.5 py-1 text-xs font-medium text-gray-600",children:["Page ",V," of ",te," (",te>1?`${te} pages`:"1 page",")"]}),(0,o.jsx)("button",{onClick:()=>{G(e=>Math.min(e+1,te))},disabled:!J,className:"px-2.5 py-1 text-xs font-medium border rounded transition-colors duration-200 text-gray-500 bg-white border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),f&&y&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-end z-[10002] transition-all duration-300 ease-in-out",children:(0,o.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 h-full w-96 shadow-2xl overflow-y-auto border-l border-gray-100 transform transition-transform duration-300 ease-out",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Edit School"})]}),(0,o.jsx)("button",{onClick:de,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[Object.keys(D).length>0&&(0,o.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-4 shadow-sm",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Please fix the errors below"})})]})}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"School Name *"]}),(0,o.jsx)("input",{type:"text",value:y.name,onChange:e=>ue("name",e.target.value),placeholder:"Enter school name",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(D.name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),D.name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.name[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Slug *"]}),(0,o.jsx)("input",{type:"text",value:y.slug,onChange:e=>ue("slug",e.target.value),placeholder:"Enter slug",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(D.slug?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),D.slug&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.slug[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Subdomain *"]}),(0,o.jsx)("input",{type:"text",value:y.subdomain,onChange:e=>ue("subdomain",e.target.value),placeholder:"Enter subdomain",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+(D.subdomain?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),D.subdomain&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.subdomain[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Domain"]}),(0,o.jsx)("input",{type:"text",value:y.domain,onChange:e=>ue("domain",e.target.value),placeholder:"Enter domain",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(D.domain?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),D.domain&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.domain[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Email *"]}),(0,o.jsx)("input",{type:"email",value:y.email,onChange:e=>ue("email",e.target.value),placeholder:"Enter email address",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+(D.email?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),D.email&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.email[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-teal-500 rounded-full mr-1.5"}),"Phone"]}),(0,o.jsx)("input",{type:"tel",value:y.phone,onChange:e=>ue("phone",e.target.value),placeholder:"Enter phone number",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-100 focus:border-teal-500 transition-all duration-200 bg-white "+(D.phone?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),D.phone&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.phone[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-1.5"}),"Website"]}),(0,o.jsx)("input",{type:"url",value:y.website,onChange:e=>ue("website",e.target.value),placeholder:"Enter website URL",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-500 transition-all duration-200 bg-white "+(D.website?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),D.website&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.website[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"Address"]}),(0,o.jsx)("textarea",{value:y.address,onChange:e=>ue("address",e.target.value),placeholder:"Enter address",rows:2,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 transition-all duration-200 bg-white resize-none "+(D.address?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),D.address&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.address[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-pink-500 rounded-full mr-1.5"}),"Max Students"]}),(0,o.jsx)("input",{type:"number",value:y.max_students,onChange:e=>ue("max_students",parseInt(e.target.value)||0),placeholder:"Enter max students",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-pink-500 transition-all duration-200 bg-white "+(D.max_students?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),D.max_students&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.max_students[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-violet-500 rounded-full mr-1.5"}),"Timezone"]}),(0,o.jsxs)("select",{value:y.timezone,onChange:e=>ue("timezone",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-100 focus:border-violet-500 transition-all duration-200 bg-white "+(D.timezone?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"UTC",children:"UTC"}),(0,o.jsx)("option",{value:"America/New_York",children:"Eastern Time"}),(0,o.jsx)("option",{value:"America/Chicago",children:"Central Time"}),(0,o.jsx)("option",{value:"America/Denver",children:"Mountain Time"}),(0,o.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time"})]}),D.timezone&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.timezone[0]})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full mr-1.5"}),"Language"]}),(0,o.jsxs)("select",{value:y.language,onChange:e=>ue("language",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-100 focus:border-amber-500 transition-all duration-200 bg-white "+(D.language?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"en",children:"English"}),(0,o.jsx)("option",{value:"es",children:"Spanish"}),(0,o.jsx)("option",{value:"fr",children:"French"}),(0,o.jsx)("option",{value:"de",children:"German"})]}),D.language&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.language[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-lime-500 rounded-full mr-1.5"}),"Currency"]}),(0,o.jsxs)("select",{value:y.currency,onChange:e=>ue("currency",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-lime-100 focus:border-lime-500 transition-all duration-200 bg-white "+(D.currency?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"USD",children:"USD"}),(0,o.jsx)("option",{value:"EUR",children:"EUR"}),(0,o.jsx)("option",{value:"GBP",children:"GBP"}),(0,o.jsx)("option",{value:"CAD",children:"CAD"})]}),D.currency&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.currency[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-rose-500 rounded-full mr-1.5"}),"Active Status"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:"checkbox",checked:y.is_active,onChange:e=>ue("is_active",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,o.jsx)("span",{className:"text-xs text-gray-600",children:"School is active"})]})]})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:de,className:"px-4 py-2 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:pe,className:"px-4 py-2 text-xs bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-semibold shadow-sm hover:shadow-md",children:"Update School"})]})]})}),w&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-end z-[10002] transition-all duration-300 ease-in-out",children:(0,o.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 h-full w-96 shadow-2xl overflow-y-auto border-l border-gray-100 transform transition-transform duration-300 ease-out",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Add New School"})]}),(0,o.jsx)("button",{onClick:le,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[Object.keys(T).length>0&&(0,o.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-4 shadow-sm",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Please fix the errors below"})})]})}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"School Name *"]}),(0,o.jsx)("input",{type:"text",value:M.name,onChange:e=>ce("name",e.target.value),placeholder:"Enter school name",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(T.name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),T.name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:T.name[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Slug *"]}),(0,o.jsx)("input",{type:"text",value:M.slug,onChange:e=>ce("slug",e.target.value),placeholder:"Enter slug",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(T.slug?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),T.slug&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:T.slug[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Subdomain *"]}),(0,o.jsx)("input",{type:"text",value:M.subdomain,onChange:e=>ce("subdomain",e.target.value),placeholder:"Enter subdomain",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+(T.subdomain?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),T.subdomain&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:T.subdomain[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Domain"]}),(0,o.jsx)("input",{type:"text",value:M.domain,onChange:e=>ce("domain",e.target.value),placeholder:"Enter domain",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(T.domain?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),T.domain&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:T.domain[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Email *"]}),(0,o.jsx)("input",{type:"email",value:M.email,onChange:e=>ce("email",e.target.value),placeholder:"Enter email address",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+(T.email?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),T.email&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:T.email[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-teal-500 rounded-full mr-1.5"}),"Phone"]}),(0,o.jsx)("input",{type:"tel",value:M.phone,onChange:e=>ce("phone",e.target.value),placeholder:"Enter phone number",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-100 focus:border-teal-500 transition-all duration-200 bg-white "+(T.phone?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),T.phone&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:T.phone[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-1.5"}),"Website"]}),(0,o.jsx)("input",{type:"url",value:M.website,onChange:e=>ce("website",e.target.value),placeholder:"Enter website URL",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-500 transition-all duration-200 bg-white "+(T.website?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),T.website&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:T.website[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"Address"]}),(0,o.jsx)("textarea",{value:M.address,onChange:e=>ce("address",e.target.value),placeholder:"Enter address",rows:2,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 transition-all duration-200 bg-white resize-none "+(T.address?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),T.address&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:T.address[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-pink-500 rounded-full mr-1.5"}),"Max Students"]}),(0,o.jsx)("input",{type:"number",value:M.max_students,onChange:e=>ce("max_students",parseInt(e.target.value)||0),placeholder:"Enter max students",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-pink-500 transition-all duration-200 bg-white "+(T.max_students?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),T.max_students&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:T.max_students[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-violet-500 rounded-full mr-1.5"}),"Timezone"]}),(0,o.jsxs)("select",{value:M.timezone,onChange:e=>ce("timezone",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-100 focus:border-violet-500 transition-all duration-200 bg-white "+(T.timezone?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"UTC",children:"UTC"}),(0,o.jsx)("option",{value:"America/New_York",children:"Eastern Time"}),(0,o.jsx)("option",{value:"America/Chicago",children:"Central Time"}),(0,o.jsx)("option",{value:"America/Denver",children:"Mountain Time"}),(0,o.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time"})]}),T.timezone&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:T.timezone[0]})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full mr-1.5"}),"Language"]}),(0,o.jsxs)("select",{value:M.language,onChange:e=>ce("language",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-100 focus:border-amber-500 transition-all duration-200 bg-white "+(T.language?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"en",children:"English"}),(0,o.jsx)("option",{value:"es",children:"Spanish"}),(0,o.jsx)("option",{value:"fr",children:"French"}),(0,o.jsx)("option",{value:"de",children:"German"})]}),T.language&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:T.language[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-lime-500 rounded-full mr-1.5"}),"Currency"]}),(0,o.jsxs)("select",{value:M.currency,onChange:e=>ce("currency",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-lime-100 focus:border-lime-500 transition-all duration-200 bg-white "+(T.currency?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"USD",children:"USD"}),(0,o.jsx)("option",{value:"EUR",children:"EUR"}),(0,o.jsx)("option",{value:"GBP",children:"GBP"}),(0,o.jsx)("option",{value:"CAD",children:"CAD"})]}),T.currency&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:T.currency[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-rose-500 rounded-full mr-1.5"}),"Active Status"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:"checkbox",checked:M.is_active,onChange:e=>ce("is_active",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,o.jsx)("span",{className:"text-xs text-gray-600",children:"School is active"})]})]})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:le,className:"px-4 py-2 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{try{if(!M.name||!M.slug||!M.subdomain||!M.email)return void P({message:"Please fill in all required fields (Name, Slug, Subdomain, Email).",type:"error"});const e={name:M.name,slug:M.slug,subdomain:M.subdomain,domain:M.domain||"",address:M.address||"",phone:M.phone||"",email:M.email,website:M.website||"",timezone:M.timezone||"UTC",language:M.language||"en",currency:M.currency||"USD",is_active:void 0===M.is_active||M.is_active,max_students:M.max_students||1e3,primary_color:M.primary_color||"#667eea",secondary_color:M.secondary_color||"#764ba2"},t=await l.schools.create(e),s={id:t.id||Date.now().toString(),...t,created_at:t.created_at||(new Date).toISOString(),updated_at:t.updated_at||(new Date).toISOString(),number_of_students:0};B(e=>[...e,s]),P({message:"School added successfully!",type:"success"}),L({}),I({name:"",slug:"",subdomain:"",domain:"",address:"",phone:"",email:"",website:"",logo:"",primary_color:"#667eea",secondary_color:"#764ba2",timezone:"UTC",language:"en",currency:"USD",is_active:!0,max_students:1e3,academic_year_start:null,academic_year_end:null}),setTimeout(()=>{le()},100),setTimeout(()=>{P(null)},3e3)}catch(s){var e,t;console.error("Error adding school:",s),null!==(e=s.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors?(L(s.response.data.errors),P({message:s.response.data.message||"Please fix the validation errors below.",type:"error"})):(L({}),P({message:s.message||"Failed to add school. Please try again.",type:"error"})),setTimeout(()=>{P(null)},5e3)}},disabled:!M.name||!M.slug||!M.subdomain||!M.email,className:"px-4 py-2 text-xs bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-semibold shadow-sm hover:shadow-md",children:"Create School"})]})]})}),f&&y&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-end z-[10002] transition-all duration-300 ease-in-out",children:(0,o.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 h-full w-96 shadow-2xl overflow-y-auto border-l border-gray-100 transform transition-transform duration-300 ease-out",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Edit School"})]}),(0,o.jsx)("button",{onClick:de,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[Object.keys(D).length>0&&(0,o.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-4 shadow-sm",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Please fix the errors below"})})]})}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"School Name *"]}),(0,o.jsx)("input",{type:"text",value:y.name,onChange:e=>ue("name",e.target.value),placeholder:"Enter school name",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(D.name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),D.name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.name[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Slug *"]}),(0,o.jsx)("input",{type:"text",value:y.slug,onChange:e=>ue("slug",e.target.value),placeholder:"Enter slug",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(D.slug?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),D.slug&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.slug[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Subdomain *"]}),(0,o.jsx)("input",{type:"text",value:y.subdomain,onChange:e=>ue("subdomain",e.target.value),placeholder:"Enter subdomain",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+(D.subdomain?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),D.subdomain&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.subdomain[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Domain"]}),(0,o.jsx)("input",{type:"text",value:y.domain,onChange:e=>ue("domain",e.target.value),placeholder:"Enter domain",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(D.domain?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),D.domain&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.domain[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Email *"]}),(0,o.jsx)("input",{type:"email",value:y.email,onChange:e=>ue("email",e.target.value),placeholder:"Enter email address",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+(D.email?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),D.email&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.email[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-teal-500 rounded-full mr-1.5"}),"Phone"]}),(0,o.jsx)("input",{type:"tel",value:y.phone,onChange:e=>ue("phone",e.target.value),placeholder:"Enter phone number",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-100 focus:border-teal-500 transition-all duration-200 bg-white "+(D.phone?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),D.phone&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.phone[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-1.5"}),"Website"]}),(0,o.jsx)("input",{type:"url",value:y.website,onChange:e=>ue("website",e.target.value),placeholder:"Enter website URL",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-500 transition-all duration-200 bg-white "+(D.website?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),D.website&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.website[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"Address"]}),(0,o.jsx)("textarea",{value:y.address,onChange:e=>ue("address",e.target.value),placeholder:"Enter address",rows:2,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 transition-all duration-200 bg-white resize-none "+(D.address?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),D.address&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.address[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-pink-500 rounded-full mr-1.5"}),"Max Students"]}),(0,o.jsx)("input",{type:"number",value:y.max_students,onChange:e=>ue("max_students",parseInt(e.target.value)||0),placeholder:"Enter max students",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-pink-500 transition-all duration-200 bg-white "+(D.max_students?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),D.max_students&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.max_students[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-violet-500 rounded-full mr-1.5"}),"Timezone"]}),(0,o.jsxs)("select",{value:y.timezone,onChange:e=>ue("timezone",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-100 focus:border-violet-500 transition-all duration-200 bg-white "+(D.timezone?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"UTC",children:"UTC"}),(0,o.jsx)("option",{value:"America/New_York",children:"Eastern Time"}),(0,o.jsx)("option",{value:"America/Chicago",children:"Central Time"}),(0,o.jsx)("option",{value:"America/Denver",children:"Mountain Time"}),(0,o.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time"})]}),D.timezone&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.timezone[0]})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full mr-1.5"}),"Language"]}),(0,o.jsxs)("select",{value:y.language,onChange:e=>ue("language",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-100 focus:border-amber-500 transition-all duration-200 bg-white "+(D.language?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"en",children:"English"}),(0,o.jsx)("option",{value:"es",children:"Spanish"}),(0,o.jsx)("option",{value:"fr",children:"French"}),(0,o.jsx)("option",{value:"de",children:"German"})]}),D.language&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.language[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-lime-500 rounded-full mr-1.5"}),"Currency"]}),(0,o.jsxs)("select",{value:y.currency,onChange:e=>ue("currency",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-lime-100 focus:border-lime-500 transition-all duration-200 bg-white "+(D.currency?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"USD",children:"USD"}),(0,o.jsx)("option",{value:"EUR",children:"EUR"}),(0,o.jsx)("option",{value:"GBP",children:"GBP"}),(0,o.jsx)("option",{value:"CAD",children:"CAD"})]}),D.currency&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:D.currency[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-rose-500 rounded-full mr-1.5"}),"Active Status"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:"checkbox",checked:y.is_active,onChange:e=>ue("is_active",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,o.jsx)("span",{className:"text-xs text-gray-600",children:"School is active"})]})]})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:de,className:"px-4 py-2 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:pe,className:"px-4 py-2 text-xs bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-semibold shadow-sm hover:shadow-md",children:"Update School"})]})]})}),(0,o.jsx)(Te,{school:C,isOpen:k,onClose:()=>{S(!1),E(null)},onEdit:oe}),x&&(0,ve.createPortal)((0,o.jsx)("div",{className:"fixed w-32 bg-white rounded-md shadow-lg border border-gray-200 z-[9999]","data-portal-dropdown":!0,style:{left:`${h.x}px`,top:`${h.y}px`},onClick:e=>e.stopPropagation(),children:(0,o.jsxs)("div",{className:"py-1",children:[(0,o.jsx)(we,{permissions:["create_school"],children:(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=U.find(e=>e.id===x);t&&oe(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-colors duration-200",children:[H({className:"w-3 h-3 mr-2"}),"Edit"]})}),(0,o.jsx)(we,{permissions:["create_school"],children:(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=U.find(e=>e.id===x);t&&(async e=>{try{B(t=>t.filter(t=>t.id!==e.id)),p(null),P({message:"School deleted successfully!",type:"success"})}catch(t){console.error("Error deleting school:",t),P({message:"Failed to delete school. Please try again.",type:"error"})}})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-red-50 hover:text-red-700 transition-colors duration-200",children:[xe({className:"w-3 h-3 mr-2"}),"Delete"]})})]})}),document.body),A&&(0,o.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[10000] flex items-center p-4 rounded-lg shadow-lg transition-all duration-300",children:(0,o.jsxs)("div",{className:`flex items-center space-x-3 ${"success"===A.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"} px-6 py-4 rounded-lg shadow-xl`,children:["success"===A.type?F({className:"w-5 h-5 text-green-600"}):me({className:"w-5 h-5 text-red-600"}),(0,o.jsx)("span",{className:"text-sm font-medium",children:A.message}),(0,o.jsx)("button",{onClick:()=>P(null),className:"ml-3 text-gray-400 hover:text-gray-600",children:me({className:"w-4 h-4"})})]})})]})},Fe=()=>{var e,t,s;const{user:a}=c(),{isStudentAdmissionBlocked:n,blockMessage:i,isLoading:d,error:u,refreshStatus:m}=ke(),x="root"===(null===a||void 0===a?void 0:a.role),[p,h]=(0,r.useState)(""),[g,f]=(0,r.useState)(""),[b,y]=(0,r.useState)(""),[v,j]=(0,r.useState)("asc"),[N,w]=(0,r.useState)("parents"),[_,k]=(0,r.useState)(null),[S,C]=(0,r.useState)({x:0,y:0}),[E,A]=(0,r.useState)(!1),[P,T]=(0,r.useState)(!1),[L,D]=(0,r.useState)(null),[R,M]=(0,r.useState)(null),[I,B]=(0,r.useState)(!1),[$,W]=(0,r.useState)(null),[V,G]=(0,r.useState)([]),[Y,J]=(0,r.useState)(!1),[Z,X]=(0,r.useState)({first_name:"",last_name:"",title:"",relationship:"",email:"",phone:"",phone_alt:"",address:"",occupation:""}),[te,se]=(0,r.useState)({}),[re,ae]=(0,r.useState)({}),[ne,le]=(0,r.useState)([]),[oe,de]=(0,r.useState)(!0),[ce,ue]=(0,r.useState)(null),[he,ge]=(0,r.useState)(1),[fe]=(0,r.useState)(20),[be,ye]=(0,r.useState)(0),[je,Ne]=(0,r.useState)(0),[_e,Ce]=(0,r.useState)(!1),[Ee,Ae]=(0,r.useState)(!1),[Pe,Te]=(0,r.useState)(!1),[Le,Fe]=(0,r.useState)(null),[De,Oe]=(0,r.useState)(null),[ze,Re]=(0,r.useState)(!1),[Me,Ie]=(0,r.useState)(!1),[Ue,Be]=(0,r.useState)(!1),[$e,He]=(0,r.useState)(!1),[qe,We]=(0,r.useState)(!1),[Ve,Ge]=(0,r.useState)(null),[Ke,Qe]=(0,r.useState)(""),[Ye,Je]=(0,r.useState)(!1),[Ze,Xe]=(0,r.useState)(!1),[et,tt]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{const e={page:1,page_size:fe,search:void 0,ordering:void 0};try{de(!0),ue(null),ge(1);const t=await l.parents.getAll(e);le(t.results||[]),ye(t.count||0),Ne(Math.ceil((t.count||0)/fe)),Ce(!!t.next),Ae(!!t.previous)}catch(t){console.error("Error fetching parents:",t),ue("Failed to fetch parents")}finally{de(!1)}})()},[fe]),(0,r.useEffect)(()=>{const e=setTimeout(()=>{f(p)},500);return()=>clearTimeout(e)},[p]),(0,r.useEffect)(()=>{(async()=>{const e={page:1,page_size:fe,search:g||void 0,ordering:b?`${"desc"===v?"-":""}${b}`:void 0};try{de(!0),ue(null),ge(1);const t=await l.parents.getAll(e);le(t.results||[]),ye(t.count||0),Ne(Math.ceil((t.count||0)/fe)),Ce(!!t.next),Ae(!!t.previous)}catch(t){console.error("Error fetching parents:",t),ue("Failed to fetch parents")}finally{de(!1)}})()},[g,b,v,fe]);const st=e=>{b===e?j("asc"===v?"desc":"asc"):(y(e),j("asc"))},rt=e=>b!==e?null:"asc"===v?z({className:"w-3 h-3"}):O({className:"w-3 h-3"}),at=()=>{A(!1)},nt=(e,t)=>{X(s=>({...s,[e]:t})),te[e]&&se(t=>{const s={...t};return delete s[e],s})},lt=()=>{B(!1),W(null),G([])},it=e=>{D(e),T(!0),k(null),ae({})},ot=()=>{T(!1),D(null)},dt=(e,t)=>{L&&(D({...L,[e]:t}),re[e]&&ae(t=>{const s={...t};return delete s[e],s}))};(0,r.useEffect)(()=>{const e=e=>{const t=e.target;t.closest("[data-dropdown-container]")||t.closest("[data-portal-dropdown]")||k(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const ct=async e=>{try{await navigator.clipboard.writeText(e),M({message:"Copied to clipboard!",type:"success"}),setTimeout(()=>M(null),3e3)}catch(ce){console.error("Failed to copy to clipboard:",ce),M({message:"Failed to copy to clipboard",type:"error"}),setTimeout(()=>M(null),3e3)}},ut=()=>{const e="abcdefghijklmnopqrstuvwxyz",t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",s="0123456789",r="!@#$%^&*";let a="";a+=e[Math.floor(26*Math.random())],a+=t[Math.floor(26*Math.random())],a+=s[Math.floor(10*Math.random())],a+=r[Math.floor(8*Math.random())];const n=e+t+s+r;for(let l=4;l<12;l++)a+=n[Math.floor(70*Math.random())];return a.split("").sort(()=>Math.random()-.5).join("")},mt=e=>{const t={Father:{bg:"bg-blue-100",text:"text-blue-800",label:"Father"},Mother:{bg:"bg-pink-100",text:"text-pink-800",label:"Mother"},Guardian:{bg:"bg-purple-100",text:"text-purple-800",label:"Guardian"},Other:{bg:"bg-gray-100",text:"text-gray-800",label:"Other"}},s=t[e]||t.Other;return(0,o.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.bg} ${s.text}`,children:s.label})};return(0,o.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-4 mb-4",children:(0,o.jsxs)("div",{className:"mb-4",children:[!d&&!x&&n&&(0,o.jsx)("div",{className:"mb-3 p-2 rounded-md text-xs font-medium flex items-center space-x-2",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1 text-red-700 bg-red-50 px-2 py-1 rounded",children:[(0,o.jsx)("span",{children:"\ud83d\udeab"}),(0,o.jsx)("span",{children:"Student Admission Blocked - Parent Management Affected"})]})}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("nav",{className:"flex space-x-6",children:[(0,o.jsx)("button",{onClick:()=>w("parents"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("parents"===N?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Parents"}),(0,o.jsx)("button",{onClick:()=>w("relationships"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("relationships"===N?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Relationships"}),(0,o.jsx)("button",{onClick:()=>w("communications"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("communications"===N?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Communications"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[u&&(0,o.jsx)("button",{onClick:m,className:"px-3 py-1.5 border border-red-300 bg-red-50 text-red-700 rounded-md text-xs font-medium hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors duration-200",title:"Refresh feature status",children:"Refresh Status"}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",placeholder:"Search parents...",value:p,onChange:e=>h(e.target.value),disabled:!d&&!x&&n,className:"pl-8 pr-3 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent text-xs transition-colors duration-200 "+(d||x||!n?"border-gray-300 focus:ring-blue-500 focus:border-transparent":"border-gray-200 bg-gray-100 text-gray-500 cursor-not-allowed")}),(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:ie({className:"h-3 w-3 "+(d||x||!n?"text-gray-400":"text-gray-300")})})]}),(0,o.jsx)("button",{disabled:!d&&!x&&n,className:"px-3 py-1.5 border rounded-md text-xs transition-colors duration-200 "+(d||x||!n?"border-gray-300 text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent":"border-gray-200 bg-gray-100 text-gray-500 cursor-not-allowed"),children:"Filter"}),(0,o.jsxs)("select",{value:b,onChange:e=>y(e.target.value),disabled:!d&&!x&&n,className:"px-3 py-1.5 border rounded-md text-xs focus:outline-none focus:ring-2 focus:border-transparent transition-colors duration-200 "+(d||x||!n?"border-gray-300 text-gray-700 focus:ring-blue-500 focus:border-transparent":"border-gray-200 bg-gray-100 text-gray-500 cursor-not-allowed"),children:[(0,o.jsx)("option",{value:"",children:"Sort by"}),(0,o.jsx)("option",{value:"full_name",children:"Full Name"}),(0,o.jsx)("option",{value:"relationship",children:"Relationship"}),(0,o.jsx)("option",{value:"email",children:"Email"}),(0,o.jsx)("option",{value:"phone",children:"Phone"}),(0,o.jsx)("option",{value:"created_at",children:"Created Date"})]}),(0,o.jsx)(we,{permissions:["access_admin_panel"],children:(0,o.jsx)(Se,{tooltipMessage:d||x||!n?"":i,disabled:!d&&!x&&n,className:"inline-block",children:(0,o.jsx)("button",{onClick:()=>{A(!0),se({}),X({first_name:"",last_name:"",title:"",relationship:"",email:"",phone:"",phone_alt:"",address:"",occupation:""})},disabled:!d&&!x&&n,className:"px-4 py-1.5 bg-blue-600 text-white rounded-md text-xs font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"+ Add Parent"})})})]})]})]})}),"parents"===N&&(0,o.jsxs)("div",{className:"bg-white rounded-md shadow-sm relative",children:[!d&&!x&&n&&(0,o.jsx)("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-15 z-10 flex items-center justify-center",title:i,children:(0,o.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg text-center",children:[(0,o.jsx)("div",{className:"text-gray-600 mb-2",children:(0,o.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,o.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Parent Management Temporarily Unavailable"}),(0,o.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:i})]})}),oe&&(0,o.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Loading parents..."})]}),ce&&(0,o.jsxs)("div",{className:"p-4 text-center",children:[(0,o.jsx)("div",{className:"text-red-600 text-sm mb-2",children:ce}),(0,o.jsx)("button",{onClick:async()=>{const e={page:1,page_size:fe,search:void 0,ordering:void 0};try{de(!0),ue(null),ge(1);const t=await l.parents.getAll(e);le(t.results||[]),ye(t.count||0),Ne(Math.ceil((t.count||0)/fe)),Ce(!!t.next),Ae(!!t.previous)}catch(t){console.error("Error fetching parents:",t),ue("Failed to fetch parents")}finally{de(!1)}},className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors duration-200",children:"Retry"})]}),!oe&&!ce&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"overflow-x-auto border-0",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>st("full_name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Full Name"}),rt("full_name")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>st("relationship"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Relationship"}),rt("relationship")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>st("email"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Email"}),rt("email")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>st("phone"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Phone"}),rt("phone")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>st("created_at"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Created At"}),rt("created_at")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:ne.map((e,t)=>(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-25",children:[(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs font-medium text-gray-900",children:e.full_name}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:mt(e.relationship)}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.email}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:e.phone}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:new Date(e.created_at).toLocaleDateString()}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[(0,o.jsx)("button",{onClick:()=>(async e=>{W(e),B(!0);try{J(!0);const t=await l.parents.getStudents(e.id);G(t.results||[])}catch(ce){console.error("Error fetching parent students:",ce),G([])}finally{J(!1)}})(e),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors duration-200",title:"View Details",children:Q({className:"w-3 h-3"})}),(0,o.jsx)(we,{permissions:["access_admin_panel"],children:(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)("button",{onClick:t=>{if(t.stopPropagation(),k(_===e.id?null:e.id),_!==e.id){const e=t.currentTarget.getBoundingClientRect(),s=128;C({x:e.right-s,y:e.bottom+window.scrollY})}},className:"p-1 rounded-md transition-colors duration-200 "+(_===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:q({className:"w-3 h-3"})})})})]})})]},e.id))})]})})}),!oe&&!ce&&be>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"h-4 mt-4 rounded-t-lg",style:{backgroundColor:"rgb(249,250,251)"}}),(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border-0 mb-4",style:{backgroundColor:"rgb(249,250,251)",position:"relative",zIndex:10},children:[(0,o.jsxs)("div",{className:"text-xs text-gray-600",children:["Showing ",(0,o.jsx)("span",{className:"font-medium",children:(he-1)*fe+1})," to ",(0,o.jsx)("span",{className:"font-medium",children:Math.min(he*fe,be)})," of ",(0,o.jsx)("span",{className:"font-medium",children:be})," results"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:async()=>{if(Ee){const t={page:he-1,page_size:fe,search:g||void 0,ordering:b?`${"desc"===v?"-":""}${b}`:void 0};try{de(!0),ue(null),ge(he-1);const e=await l.parents.getAll(t);le(e.results||[]),ye(e.count||0),Ne(Math.ceil((e.count||0)/fe)),Ce(!!e.next),Ae(!!e.previous)}catch(e){console.error("Error fetching parents:",e),ue("Failed to fetch parents")}finally{de(!1)}}},disabled:!Ee,className:"px-2.5 py-1 text-xs font-medium border rounded transition-colors duration-200 text-gray-500 border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"rgb(249,250,251)"},children:"Previous"}),(0,o.jsxs)("span",{className:"px-2.5 py-1 text-xs font-medium text-gray-600",children:["Page ",he," of ",je," (",je>1?`${je} pages`:"1 page",")"]}),(0,o.jsx)("button",{onClick:async()=>{if(_e){const t={page:he+1,page_size:fe,search:g||void 0,ordering:b?`${"desc"===v?"-":""}${b}`:void 0};try{de(!0),ue(null),ge(he+1);const e=await l.parents.getAll(t);le(e.results||[]),ye(e.count||0),Ne(Math.ceil((e.count||0)/fe)),Ce(!!e.next),Ae(!!e.previous)}catch(e){console.error("Error fetching parents:",e),ue("Failed to fetch parents")}finally{de(!1)}}},disabled:!_e,className:"px-2.5 py-1 text-xs font-medium border rounded transition-colors duration-200 text-gray-500 border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"rgb(249,250,251)"},children:"Next"})]})]})]})]}),"relationships"===N&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:pe({className:"mx-auto h-8 w-8"})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Relationship Management"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Manage parent-student relationships and family structures."})]})}),"communications"===N&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Communication Management"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Manage parent communications and notifications."})]})})]}),R&&(0,o.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[10000] flex items-center p-4 rounded-lg shadow-lg transition-all duration-300",children:(0,o.jsxs)("div",{className:`flex items-center space-x-3 ${"success"===R.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"} px-6 py-4 rounded-lg shadow-xl`,children:["success"===R.type?F({className:"w-5 h-5 text-green-600"}):me({className:"w-5 h-5 text-red-600"}),(0,o.jsx)("span",{className:"text-sm font-medium",children:R.message}),(0,o.jsx)("button",{onClick:()=>M(null),className:"ml-3 text-gray-400 hover:text-gray-600",children:me({className:"w-4 h-4"})})]})}),E&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-end z-[10002] transition-all duration-300 ease-in-out",children:(0,o.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 h-full w-96 shadow-2xl overflow-y-auto border-l border-gray-100 transform transition-transform duration-300 ease-out",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Add New Parent"})]}),(0,o.jsx)("button",{onClick:at,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[Object.keys(te).length>0&&(0,o.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-4 shadow-sm",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Please fix the errors below"})})]})}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"First Name *"]}),(0,o.jsx)("input",{type:"text",value:Z.first_name,onChange:e=>nt("first_name",e.target.value),placeholder:"Enter first name",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(te.first_name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),te.first_name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:te.first_name[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Last Name *"]}),(0,o.jsx)("input",{type:"text",value:Z.last_name,onChange:e=>nt("last_name",e.target.value),placeholder:"Enter last name",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(te.last_name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),te.last_name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:te.last_name[0]})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Title"]}),(0,o.jsx)("input",{type:"text",value:Z.title,onChange:e=>nt("title",e.target.value),placeholder:"e.g., Mr., Mrs., Dr.",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+(te.title?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),te.title&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:te.title[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Relationship *"]}),(0,o.jsxs)("select",{value:Z.relationship,onChange:e=>nt("relationship",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(te.relationship?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select relationship"}),(0,o.jsx)("option",{value:"Father",children:"Father"}),(0,o.jsx)("option",{value:"Mother",children:"Mother"}),(0,o.jsx)("option",{value:"Guardian",children:"Guardian"}),(0,o.jsx)("option",{value:"Other",children:"Other"})]}),te.relationship&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:te.relationship[0]})]})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Email *"]}),(0,o.jsx)("input",{type:"email",value:Z.email,onChange:e=>nt("email",e.target.value),placeholder:"Enter email address",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+(te.email?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),te.email&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:te.email[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-teal-500 rounded-full mr-1.5"}),"Phone *"]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,o.jsx)("span",{className:"text-gray-500 text-xs",children:"+254"})}),(0,o.jsx)("input",{type:"tel",value:(null===(e=Z.phone)||void 0===e?void 0:e.replace("+254",""))||"",onChange:e=>{const t=e.target.value,s=t.startsWith("+254")?t:`+254${t}`;nt("phone",s)},placeholder:"700000000",className:"w-full pl-12 pr-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-100 focus:border-teal-500 transition-all duration-200 bg-white "+(te.phone?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")})]}),te.phone&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:te.phone[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-1.5"}),"Alternative Phone"]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,o.jsx)("span",{className:"text-gray-500 text-xs",children:"+254"})}),(0,o.jsx)("input",{type:"tel",value:(null===(t=Z.phone_alt)||void 0===t?void 0:t.replace("+254",""))||"",onChange:e=>{const t=e.target.value,s=t.startsWith("+254")?t:`+254${t}`;nt("phone_alt",s)},placeholder:"700000000",className:"w-full pl-12 pr-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-500 transition-all duration-200 bg-white "+(te.phone_alt?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")})]}),te.phone_alt&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:te.phone_alt[0]})]})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"Address"]}),(0,o.jsx)("textarea",{value:Z.address,onChange:e=>nt("address",e.target.value),placeholder:"Enter address",rows:2,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 transition-all duration-200 bg-white resize-none "+(te.address?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),te.address&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:te.address[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-pink-500 rounded-full mr-1.5"}),"Occupation"]}),(0,o.jsx)("input",{type:"text",value:Z.occupation,onChange:e=>nt("occupation",e.target.value),placeholder:"Enter occupation",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-pink-500 transition-all duration-200 bg-white "+(te.occupation?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),te.occupation&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:te.occupation[0]})]})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:at,className:"px-4 py-2 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{try{await l.parents.create(Z),M({message:"Parent created successfully!",type:"success"}),at();const e={page:he,page_size:fe,search:g||void 0,ordering:b?`${"desc"===v?"-":""}${b}`:void 0};try{const t=await l.parents.getAll(e);le(t.results||[]),ye(t.count||0),Ne(Math.ceil((t.count||0)/fe)),Ce(!!t.next),Ae(!!t.previous)}catch(a){console.error("Error refreshing parents:",a)}setTimeout(()=>{M(null)},3e3)}catch(ce){var e,t,s,r;if(console.error("Error adding parent:",ce),null!==(e=ce.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors)se(ce.response.data.errors),M({message:"Please fix the validation errors below.",type:"error"});else M({message:(null===(s=ce.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||"Failed to add parent. Please try again.",type:"error"});setTimeout(()=>{M(null)},5e3)}},disabled:!Z.first_name||!Z.last_name||!Z.relationship||!Z.email||!Z.phone,className:"px-4 py-2 text-xs bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-semibold shadow-sm hover:shadow-md",children:"Create Parent"})]})]})}),P&&L&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-end z-[10002] transition-all duration-300 ease-in-out",children:(0,o.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 h-full w-96 shadow-2xl overflow-y-auto border-l border-gray-100 transform transition-transform duration-300 ease-out",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Edit Parent"})]}),(0,o.jsx)("button",{onClick:ot,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[Object.keys(re).length>0&&(0,o.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-4 shadow-sm",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Please fix the errors below"})})]})}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Full Name *"]}),(0,o.jsx)("input",{type:"text",value:L.full_name,onChange:e=>dt("full_name",e.target.value),placeholder:"Enter full name",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(re.full_name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),re.full_name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:re.full_name[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Relationship *"]}),(0,o.jsxs)("select",{value:L.relationship,onChange:e=>dt("relationship",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(re.relationship?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"Father",children:"Father"}),(0,o.jsx)("option",{value:"Mother",children:"Mother"}),(0,o.jsx)("option",{value:"Guardian",children:"Guardian"}),(0,o.jsx)("option",{value:"Other",children:"Other"})]}),re.relationship&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:re.relationship[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Email *"]}),(0,o.jsx)("input",{type:"email",value:L.email,onChange:e=>dt("email",e.target.value),placeholder:"Enter email address",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+(re.email?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),re.email&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:re.email[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Phone *"]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,o.jsx)("span",{className:"text-gray-500 text-xs",children:"+254"})}),(0,o.jsx)("input",{type:"tel",value:(null===(s=L.phone)||void 0===s?void 0:s.replace("+254",""))||"",onChange:e=>{const t=e.target.value,s=t.startsWith("+254")?t:`+254${t}`;dt("phone",s)},placeholder:"700000000",className:"w-full pl-12 pr-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(re.phone?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")})]}),re.phone&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:re.phone[0]})]})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:ot,className:"px-4 py-2 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if(L)try{const e={first_name:L.full_name.split(" ")[0]||"",last_name:L.full_name.split(" ").slice(1).join(" ")||"",relationship:L.relationship,email:L.email,phone:L.phone};await l.parents.update(L.id,e);const t={page:he,page_size:fe,search:g||void 0,ordering:b?`${"desc"===v?"-":""}${b}`:void 0};try{const e=await l.parents.getAll(t);le(e.results||[]),ye(e.count||0),Ne(Math.ceil((e.count||0)/fe)),Ce(!!e.next),Ae(!!e.previous)}catch(a){console.error("Error refreshing parents:",a)}M({message:"Parent updated successfully!",type:"success"}),ot(),setTimeout(()=>{M(null)},3e3)}catch(ce){var e,t,s,r;if(console.error("Error updating parent:",ce),null!==(e=ce.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors)ae(ce.response.data.errors),M({message:"Please fix the validation errors below.",type:"error"});else M({message:(null===(s=ce.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||"Failed to update parent. Please try again.",type:"error"});setTimeout(()=>{M(null)},5e3)}},className:"px-4 py-2 text-xs bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-semibold shadow-sm hover:shadow-md",children:"Update Parent"})]})]})}),_&&(0,ve.createPortal)((0,o.jsx)("div",{className:"fixed w-32 bg-white rounded-md shadow-lg border border-gray-200 z-[9999]","data-portal-dropdown":!0,style:{left:`${S.x}px`,top:`${S.y}px`},onClick:e=>e.stopPropagation(),children:(0,o.jsxs)("div",{className:"py-1",children:[(0,o.jsx)(we,{permissions:["access_admin_panel"],children:(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=ne.find(e=>e.id===_);t&&it(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-colors duration-200",children:[H({className:"w-3 h-3 mr-2"}),"Edit"]})}),(()=>{const e=ne.find(e=>e.id===_);return e&&!e.has_user_account?(0,o.jsx)(we,{permissions:["access_admin_panel"],children:(0,o.jsxs)("button",{onClick:t=>{t.stopPropagation(),e&&(e=>{Fe(e),Te(!0),k(null),Oe(null),Be(!1)})(e)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-green-50 hover:text-green-700 transition-colors duration-200",children:[ee({className:"w-3 h-3 mr-2"}),"Create Login Creds"]})}):null})(),(()=>{const e=ne.find(e=>e.id===_);return e&&e.has_user_account?(0,o.jsx)(we,{permissions:["access_admin_panel"],children:(0,o.jsxs)("button",{onClick:t=>{t.stopPropagation(),e&&(e=>{Ge(e),We(!0),k(null),Qe(""),tt(!1)})(e)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-orange-50 hover:text-orange-700 transition-colors duration-200",children:[ee({className:"w-3 h-3 mr-2"}),"Pass Reset"]})}):null})(),(0,o.jsx)(we,{permissions:["access_admin_panel"],children:(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=ne.find(e=>e.id===_);t&&(async e=>{try{await l.parents.delete(e.id),le(t=>t.filter(t=>t.id!==e.id)),k(null),M({message:"Parent deleted successfully!",type:"success"}),setTimeout(()=>{M(null)},3e3)}catch(ce){console.error("Error deleting parent:",ce),M({message:"Failed to delete parent. Please try again.",type:"error"}),setTimeout(()=>{M(null)},5e3)}})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-red-50 hover:text-red-700 transition-colors duration-200",children:[xe({className:"w-3 h-3 mr-2"}),"Delete"]})})]})}),document.body),I&&$&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4",children:(0,o.jsxs)("div",{className:"bg-white shadow-xl max-w-4xl w-full max-h-[85vh] overflow-visible relative",children:[(0,o.jsx)("button",{onClick:lt,className:"absolute -top-8 -right-8 w-12 h-12 bg-red-300/80 hover:bg-red-400/90 text-white rounded-full shadow-lg transition-all duration-200 z-[9999] flex items-center justify-center",children:me({className:"w-5 h-5"})}),(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-white",children:[(0,o.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-3 rounded-lg border border-blue-200 shadow-sm mr-4",children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center shadow-lg",children:pe({className:"w-8 h-8 text-white"})}),(0,o.jsx)("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 rounded-full flex items-center justify-center border-2 border-white shadow-sm",children:(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-white rounded-full"})})]})}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:$.full_name}),(0,o.jsxs)("div",{className:"space-y-0.5 text-xs text-gray-600",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Relationship:"}),(0,o.jsx)("span",{children:mt($.relationship)})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Status:"}),(0,o.jsx)("span",{className:"text-green-600 font-medium",children:"Active"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Email:"}),(0,o.jsx)("span",{children:$.email})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Phone:"}),(0,o.jsx)("span",{className:"font-mono",children:$.phone})]})]})]})]}),(0,o.jsx)("div",{className:"p-2 relative overflow-y-auto max-h-[calc(85vh-200px)]",children:(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-2 border border-blue-200 shadow-sm",children:[(0,o.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,o.jsx)("h3",{className:"text-sm font-bold text-blue-900",children:"Parent Info"})}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-blue-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-blue-700",children:"Parent ID:"}),(0,o.jsx)("span",{className:"text-xs font-medium text-blue-900 bg-blue-50 px-1.5 py-0.5 rounded",children:$.id})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-blue-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-blue-700",children:"Title:"}),(0,o.jsx)("span",{className:"text-xs font-medium text-blue-900 bg-blue-50 px-1.5 py-0.5 rounded",children:"Mr./Mrs./Dr."})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-blue-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-blue-700",children:"First Name:"}),(0,o.jsx)("span",{className:"text-xs text-blue-900",children:$.full_name.split(" ")[0]||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-blue-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-blue-700",children:"Last Name:"}),(0,o.jsx)("span",{className:"text-xs text-blue-900",children:$.full_name.split(" ").slice(1).join(" ")||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-blue-700",children:"Full Name:"}),(0,o.jsx)("span",{className:"text-xs font-medium text-blue-900 bg-blue-50 px-1.5 py-0.5 rounded",children:$.full_name})]})]})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-2 border border-green-200 shadow-sm",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,o.jsx)("h3",{className:"text-sm font-bold text-green-900",children:"Students"}),(0,o.jsxs)("span",{className:"text-xs font-medium text-green-700 bg-green-100 px-1.5 py-0.5 rounded-full",children:[V.length," student",1!==V.length?"s":""]})]}),Y?(0,o.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-600"}),(0,o.jsx)("span",{className:"ml-2 text-sm text-green-700",children:"Loading students..."})]}):0===V.length?(0,o.jsxs)("div",{className:"text-center py-4",children:[(0,o.jsx)("div",{className:"text-green-400 mb-2",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),(0,o.jsx)("p",{className:"text-sm text-green-600",children:"No students found for this parent"})]}):(0,o.jsx)("div",{className:"space-y-1",children:V.map((e,t)=>(0,o.jsxs)("div",{className:""+(t>0?"border-t border-green-200 pt-1":""),children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-0.5 border-b border-green-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-green-700",children:"Name:"}),(0,o.jsx)("span",{className:"text-xs font-medium text-green-900 bg-green-50 px-1.5 py-0.5 rounded",children:e.student_details.pupil_name})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-0.5 border-b border-green-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-green-700",children:"Admission #:"}),(0,o.jsx)("span",{className:"text-xs text-green-900",children:e.student_details.admission_number})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-0.5 border-b border-green-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-green-700",children:"Class:"}),(0,o.jsx)("span",{className:"text-xs text-green-900",children:e.student_details.current_class})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-0.5",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-green-700",children:"Relationship:"}),(0,o.jsx)("span",{className:"text-xs text-green-900",children:e.relationship_type})]}),e.notes&&(0,o.jsxs)("div",{className:"flex justify-between items-center py-0.5",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-green-700",children:"Notes:"}),(0,o.jsx)("span",{className:"text-xs text-green-900",children:e.notes})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,o.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.is_primary_contact&&(0,o.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Primary"}),e.is_emergency_contact&&(0,o.jsx)("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:"Emergency"}),e.can_pick_up&&(0,o.jsx)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"Pick Up"})]}),(0,o.jsxs)("button",{onClick:()=>(async e=>{if(null!==$&&void 0!==$&&$.id&&window.confirm("Are you sure you want to dis-associate this student from the parent?"))try{await l.students.disassociateParent(e.student_details.id,e.id),console.log("Student dis-associated successfully");const t=await l.parents.getStudents($.id);G(t.results||[])}catch(ce){console.error("Error dis-associating student:",ce),alert("Failed to dis-associate student. Please try again.")}})(e),className:"text-xs bg-red-100 text-red-800 px-1.5 py-0.5 rounded hover:bg-red-200 transition-colors duration-200 flex items-center gap-1 ml-auto",title:"Dis-associate student",children:[xe({className:"w-3 h-3"}),"Remove"]})]})]},e.id))})]})]})}),(0,o.jsx)("div",{className:"bg-white border-t border-gray-200 p-3",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("div",{className:"text-xs text-gray-700 flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Last updated:"}),(0,o.jsx)("span",{className:"font-medium",children:(new Date).toLocaleDateString()})]}),(0,o.jsxs)("div",{className:"flex space-x-2",children:[(0,o.jsxs)("button",{onClick:()=>{lt(),it($)},className:"flex items-center space-x-1 px-3 py-1.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105",children:[H({className:"w-3 h-3"}),(0,o.jsx)("span",{className:"text-xs font-medium",children:"Edit"})]}),(0,o.jsxs)("button",{className:"flex items-center space-x-1 px-3 py-1.5 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105",children:[Q({className:"w-3 h-3"}),(0,o.jsx)("span",{className:"text-xs font-medium",children:"View Profile"})]})]})]})})]})})}),(0,o.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm transition-all duration-300 ease-out z-50 "+(Pe?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),children:(0,o.jsx)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-300 ease-out flex flex-col "+(Pe?"translate-x-0":"translate-x-full"),children:Le&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-2 bg-green-100 rounded-xl",children:ee({className:"w-5 h-5 text-green-600"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Create Login Credentials"}),(0,o.jsx)("p",{className:"text-sm text-gray-500",children:Le.email})]})]}),(0,o.jsx)("button",{onClick:()=>{Te(!1),Fe(null),Oe(null),Be(!1),Ie(!1),He(!1),Qe("")},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-xl transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:Ue?(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"text-center space-y-4",children:[(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)("div",{className:"p-4 bg-green-100 rounded-full",children:F({className:"w-8 h-8 text-green-600"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Credentials Generated Successfully!"}),(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:["Login credentials for ",(0,o.jsx)("span",{className:"font-semibold",children:Le.full_name})]})]})]}),(0,o.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-4 space-y-4",children:De?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("span",{className:"text-sm font-semibold text-green-800",children:"Generated Credentials"}),(0,o.jsx)("button",{onClick:()=>{const e=$e?Ke:De.password;ct(`Email: ${De.email}\nUsername: ${De.username}\nPassword: ${e}`)},className:"px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200 text-xs font-medium",children:"Copy All"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Email"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:"text",value:De.email,readOnly:!0,className:"flex-1 px-3 py-2 border border-green-200 rounded-lg bg-white text-sm font-mono"}),(0,o.jsx)("button",{onClick:()=>ct(De.email),className:"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200",title:"Copy email",children:U({className:"w-3 h-3"})})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Username"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:"text",value:De.username,readOnly:!0,className:"flex-1 px-3 py-2 border border-green-200 rounded-lg bg-white text-sm font-mono"}),(0,o.jsx)("button",{onClick:()=>ct(De.username),className:"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200",title:"Copy username",children:U({className:"w-3 h-3"})})]})]}),$e?(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Updated Password"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:Ye?"text":"password",value:Ke,readOnly:!0,className:"flex-1 px-3 py-2 border border-green-200 rounded-lg bg-white text-sm font-mono"}),(0,o.jsx)("button",{onClick:()=>Je(!Ye),className:"p-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200",title:Ye?"Hide password":"Show password",children:Ye?K({className:"w-3 h-3"}):Q({className:"w-3 h-3"})}),(0,o.jsx)("button",{onClick:()=>ct(Ke),className:"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200",title:"Copy updated password",children:U({className:"w-3 h-3"})})]})]}):(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Password"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:Me?"text":"password",value:De.password,readOnly:!0,className:"flex-1 px-3 py-2 border border-green-200 rounded-lg bg-white text-sm font-mono"}),(0,o.jsx)("button",{onClick:()=>Ie(!Me),className:"p-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200",title:Me?"Hide password":"Show password",children:Me?K({className:"w-3 h-3"}):Q({className:"w-3 h-3"})}),(0,o.jsx)("button",{onClick:()=>ct(De.password),className:"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200",title:"Copy password",children:U({className:"w-3 h-3"})})]})]})]}):(0,o.jsx)("div",{className:"text-center py-4",children:(0,o.jsx)("p",{className:"text-sm text-gray-500",children:"Loading credentials..."})})}),(0,o.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,o.jsx)("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Change Password"}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"New Password"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:Ye?"text":"password",value:Ke,onChange:e=>Qe(e.target.value),className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm",placeholder:"Enter new password"}),(0,o.jsx)("button",{onClick:()=>Je(!Ye),className:"p-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200",title:Ye?"Hide password":"Show password",children:Ye?K({className:"w-3 h-3"}):Q({className:"w-3 h-3"})})]})]}),(0,o.jsx)("button",{onClick:()=>{const e=ut();Qe(e)},className:"w-full flex items-center justify-center space-x-2 px-3 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 text-sm",children:"\ud83d\udd10 Generate Secure Password"}),(0,o.jsx)("button",{onClick:async()=>{if(!Le||!Ke)return;const e=(null===De||void 0===De?void 0:De.id)||Le.user_account_id;if(!e)return M({message:"Unable to find user account ID. Please try again.",type:"error"}),void setTimeout(()=>M(null),5e3);try{Xe(!0),await l.parents.resetPassword(e,Ke),M({message:`Password updated successfully for ${Le.email}`,type:"success"}),He(!0),setTimeout(()=>{M(null)},5e3)}catch(ce){console.error("Error updating password:",ce),M({message:"Failed to update password. Please try again.",type:"error"}),setTimeout(()=>{M(null)},5e3)}finally{Xe(!1)}},disabled:!Ke||Ze,className:"w-full px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:Ze?(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,o.jsx)("span",{children:"Updating Password..."})]}):(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[ee({className:"w-4 h-4"}),(0,o.jsx)("span",{children:"Update Password"})]})})]})]})]}):(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"text-center space-y-4",children:[(0,o.jsx)("div",{className:"p-4 bg-green-100 rounded-full w-fit mx-auto",children:ee({className:"w-8 h-8 text-green-600"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Generate Login Credentials"}),(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:["Create secure login credentials for ",(0,o.jsx)("span",{className:"font-semibold",children:Le.full_name})]})]})]}),(0,o.jsx)("button",{onClick:async()=>{if(Le)try{let t;Re(!0);try{t=await l.parents.generateLoginCredentials(Le.id)}catch(e){t={data:{id:"mock_user_id_"+Math.random().toString(36).substr(2,9),email:Le.email,username:`sch_${Le.full_name.toLowerCase().replace(/\s+/g,"_")}`,password:ut(),token:"mock_token_"+Math.random().toString(36).substr(2,9)},status:"success",message:"Parent credentials created successfully. Please save these credentials securely."}}t&&"object"===typeof t&&t.email?(Oe(t),Be(!0),M({message:"Login credentials generated successfully!",type:"success"}),setTimeout(()=>M(null),5e3)):(console.error("Unexpected response structure:",t),M({message:"Unexpected response from server",type:"error"}),setTimeout(()=>M(null),5e3))}catch(ce){console.error("Error generating credentials:",ce),M({message:"Failed to generate login credentials",type:"error"}),setTimeout(()=>M(null),5e3)}finally{Re(!1)}},disabled:ze,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:ze?(0,o.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):(0,o.jsxs)(o.Fragment,{children:[ee({className:"w-5 h-5"}),(0,o.jsx)("span",{className:"font-semibold",children:"Generate Credentials"})]})})]})})]})})}),(0,o.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm transition-all duration-300 ease-out z-50 "+(qe?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),children:(0,o.jsx)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-300 ease-out flex flex-col "+(qe?"translate-x-0":"translate-x-full"),children:Ve&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-2 bg-blue-100 rounded-xl",children:ee({className:"w-5 h-5 text-blue-600"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Reset Password"}),(0,o.jsx)("p",{className:"text-sm text-gray-500",children:Ve.email})]})]}),(0,o.jsx)("button",{onClick:()=>{We(!1),Ge(null),Qe(""),tt(!1),Je(!1)},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-xl transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,o.jsx)("div",{className:"p-6 space-y-4",children:et?(0,o.jsxs)("div",{className:"text-center space-y-4",children:[(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)("div",{className:"p-4 bg-green-100 rounded-full",children:F({className:"w-8 h-8 text-green-600"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Password Reset Successful!"}),(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:["New password set for ",(0,o.jsx)("span",{className:"font-semibold",children:Ve.email})]})]}),Ke&&(0,o.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("span",{className:"text-sm font-semibold text-green-800",children:"New Password"}),(0,o.jsx)("button",{onClick:()=>ct(Ke),className:"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200",title:"Copy password",children:U({className:"w-3 h-3"})})]}),(0,o.jsx)("div",{className:"bg-white border border-green-200 rounded-lg p-3",children:(0,o.jsx)("code",{className:"text-sm font-mono text-green-900 break-all",children:Ye?Ke:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})})]})]}):(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"New Password"}),(0,o.jsx)("div",{className:"flex items-center space-x-2",children:(0,o.jsxs)("div",{className:"relative flex-1",children:[(0,o.jsx)("input",{type:Ye?"text":"password",value:Ke,onChange:e=>Qe(e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-sm",placeholder:"Enter new password"}),(0,o.jsx)("button",{onClick:()=>Je(!Ye),className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 transition-colors duration-200",title:Ye?"Hide password":"Show password",children:Ye?K({className:"w-4 h-4"}):Q({className:"w-4 h-4"})})]})})]}),(0,o.jsx)("button",{onClick:()=>Qe(ut()),className:"w-full px-4 py-3 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-xl hover:from-emerald-600 hover:to-emerald-700 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"\ud83d\udd10 Generate Secure Password"}),Ke&&(0,o.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("span",{className:"text-sm font-semibold text-blue-800",children:"Generated Password"}),(0,o.jsx)("button",{onClick:()=>ct(Ke),className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",title:"Copy password",children:U({className:"w-3 h-3"})})]}),(0,o.jsx)("div",{className:"bg-white border border-blue-200 rounded-lg p-3",children:(0,o.jsx)("code",{className:"text-sm font-mono text-blue-900 break-all",children:Ye?Ke:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})})]}),(0,o.jsx)("button",{onClick:async()=>{if(!Ve||!Ke)return;const e=Ve.user_account_id;if(!e)return M({message:"Parent does not have a user account. Please create login credentials first.",type:"error"}),void setTimeout(()=>M(null),5e3);try{Xe(!0),await l.parents.resetPassword(e,Ke),tt(!0),M({message:`Password reset successfully for ${Ve.email}`,type:"success"}),setTimeout(()=>{M(null)},8e3)}catch(ce){console.error("Error resetting password:",ce),M({message:"Failed to reset password. Please try again.",type:"error"}),setTimeout(()=>{M(null)},5e3)}finally{Xe(!1)}},disabled:!Ke||Ze,className:"w-full px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:Ze?(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,o.jsx)("span",{children:"Resetting Password..."})]}):(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[ee({className:"w-4 h-4"}),(0,o.jsx)("span",{children:"Reset Password"})]})})]})})})]})})})]})};const De=new class{async getAllFeeStructures(e){let t="/fees/structures/";if(e){const s=new URLSearchParams;Object.entries(e).forEach(e=>{let[t,r]=e;void 0!==r&&null!==r&&""!==r&&s.append(t,r.toString())});const r=s.toString();r&&(t+=`?${r}`)}return await l.authenticatedRequest(t,{method:"GET"})}async getFeeStructure(e){return await l.authenticatedRequest(`/fees/structures/${e}/`,{method:"GET"})}async createFeeStructure(e){return await l.authenticatedRequest("/fees/structures/",{method:"POST",body:JSON.stringify(e)})}async updateFeeStructure(e,t){return await l.authenticatedRequest(`/fees/structures/${e}/`,{method:"PUT",body:JSON.stringify(t)})}async patchFeeStructure(e,t){return await l.authenticatedRequest(`/fees/structures/${e}/`,{method:"PATCH",body:JSON.stringify(t)})}async deleteFeeStructure(e){await l.authenticatedRequest(`/fees/structures/${e}/`,{method:"DELETE"})}async getAllAssignments(e){let t="/fees/assignments/";if(e){const s=new URLSearchParams;Object.entries(e).forEach(e=>{let[t,r]=e;void 0!==r&&null!==r&&""!==r&&s.append(t,r.toString())});const r=s.toString();r&&(t+=`?${r}`)}return await l.authenticatedRequest(t,{method:"GET"})}async createAssignment(e){return await l.authenticatedRequest("/fees/assignments/",{method:"POST",body:JSON.stringify(e)})}async bulkAssignFees(e){return await l.authenticatedRequest("/fees/assignments/bulk_assign/",{method:"POST",body:JSON.stringify(e)})}async getAllInvoices(e){let t="/fees/invoices/";if(e){const s=new URLSearchParams;Object.entries(e).forEach(e=>{let[t,r]=e;void 0!==r&&null!==r&&""!==r&&s.append(t,r.toString())});const r=s.toString();r&&(t+=`?${r}`)}return await l.authenticatedRequest(t,{method:"GET"})}async generateTermInvoices(e){const t={academic_year:e.academic_year,term:e.term,due_date:e.due_date_days};return await l.authenticatedRequest("/fees/invoices/generate_term_invoices/",{method:"POST",body:JSON.stringify(t)})}async downloadInvoicePDF(e){return await l.authenticatedRequest(`/fees/invoices/${e}/download_pdf/`,{method:"GET"})}async getAllPayments(e){let t="/fees/payments/";if(e){const s=new URLSearchParams;Object.entries(e).forEach(e=>{let[t,r]=e;void 0!==r&&null!==r&&""!==r&&s.append(t,r.toString())});const r=s.toString();r&&(t+=`?${r}`)}return await l.authenticatedRequest(t,{method:"GET"})}async createPayment(e){return await l.authenticatedRequest("/fees/payments/",{method:"POST",body:JSON.stringify(e)})}async getAllConcessions(e){let t="/fees/concessions/";if(e){const s=new URLSearchParams;Object.entries(e).forEach(e=>{let[t,r]=e;void 0!==r&&null!==r&&""!==r&&s.append(t,r.toString())});const r=s.toString();r&&(t+=`?${r}`)}return await l.authenticatedRequest(t,{method:"GET"})}async createConcession(e){return await l.authenticatedRequest("/fees/concessions/",{method:"POST",body:JSON.stringify(e)})}async getStudentFeeSummary(e,t){const s=`/fees/reports/student_summary/?student_id=${encodeURIComponent(e)}&academic_year=${encodeURIComponent(t)}`;return await l.authenticatedRequest(s,{method:"GET"})}async getCollectionReport(e,t){const s=`/fees/reports/collection_report/?start_date=${encodeURIComponent(e)}&end_date=${encodeURIComponent(t)}`;return await l.authenticatedRequest(s,{method:"GET"})}async getOutstandingReport(e,t){const s=`/fees/reports/outstanding_report/?academic_year=${encodeURIComponent(e)}&overdue_only=${(null===t||void 0===t?void 0:t.toString())||"false"}`;return await l.authenticatedRequest(s,{method:"GET"})}async searchStudents(e){const t=`/students/admissions?search=${encodeURIComponent(e)}`;return await l.authenticatedRequest(t,{method:"GET"})}async searchFeeStructures(e){const t=`/fees/structures/?search=${encodeURIComponent(e)}`;return await l.authenticatedRequest(t,{method:"GET"})}},Oe=e=>{let{feeStructure:t,isOpen:s,onClose:a,onEdit:n,onUpdate:i,forceEditMode:d=!1}=e;const[c,u]=(0,r.useState)([]),[m,x]=(0,r.useState)([]),[p,h]=(0,r.useState)(!1),[g,f]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),[v,j]=(0,r.useState)({});(0,r.useEffect)(()=>{(async()=>{if(s){h(!0);try{const[e,t]=await Promise.all([l.students.getClasses(),l.students.getStreams()]);u(e||[]),x(t||[])}catch(e){console.error("Error loading classes and streams:",e)}finally{h(!1)}}})()},[s]),(0,r.useEffect)(()=>{d&&s&&(f(!0),j(t))},[d,s,t]);const N=e=>{if(!e)return"All Classes";const t=c.find(t=>t.id===e);return t?t.name:`Class ID: ${e}`},w=e=>{if(!e)return"All Streams";const t=m.find(t=>t.id===e);return t?t.name:`Stream ID: ${e}`},_=e=>`KSh ${parseFloat(e).toLocaleString()}`,k=(e,t)=>{j(s=>({...s,[e]:t}))};if(!s)return null;const S=[{title:"Basic Information",tag:"basic_info",description:"Core fee structure identification and basic details",details:[{label:"Fee ID",value:t.id,editable:!1,field:"id"},{label:"Name",value:g?v.name||"":t.name||"",editable:!0,field:"name",type:"text"},{label:"Description",value:g?v.description||"":t.description||"Not provided",editable:!0,field:"description",type:"text"},{label:"Status",value:g?v.is_active:t.is_active,editable:!0,field:"is_active",type:"boolean"}]},{title:"Fee Configuration",tag:"fee_config",description:"Fee type, category, amount and frequency settings",details:[{label:"Fee Type",value:g?v.fee_type||"":t.fee_type||"",editable:!0,field:"fee_type",type:"select",options:["tuition","development","transport","library","sports","examination","other"]},{label:"Category",value:g?v.category||"":t.category||"",editable:!0,field:"category",type:"select",options:["academic","non_academic","administrative","other"]},{label:"Amount",value:g?v.amount||"":t.amount||"",editable:!0,field:"amount",type:"number"},{label:"Frequency",value:g?v.frequency||"":t.frequency||"",editable:!0,field:"frequency",type:"select",options:["monthly","termly","yearly","one_time"]}]},{title:"Applicability",tag:"applicability",description:"Class and stream applicability settings",details:[{label:"Applicable To All",value:g?v.applicable_to_all:t.applicable_to_all,editable:!0,field:"applicable_to_all",type:"boolean"},{label:"Applicable Class",value:g?v.applicable_class||"":t.applicable_class||"",editable:!0,field:"applicable_class",type:"select",options:c.map(e=>({value:e.id,label:e.name}))},{label:"Applicable Stream",value:g?v.applicable_stream||"":t.applicable_stream||"",editable:!0,field:"applicable_stream",type:"select",options:m.map(e=>({value:e.id,label:e.name}))},{label:"Due Date",value:g?v.due_date||"":t.due_date||"",editable:!0,field:"due_date",type:"date"}]},{title:"Late Fee Settings",tag:"late_fee_settings",description:"Late fee configuration and penalties",details:[{label:"Late Fee Applicable",value:g?v.late_fee_applicable:t.late_fee_applicable,editable:!0,field:"late_fee_applicable",type:"boolean"},{label:"Late Fee Amount",value:g?v.late_fee_amount||"":t.late_fee_amount||"",editable:!0,field:"late_fee_amount",type:"number"},{label:"Late Fee Percentage",value:g?v.late_fee_percentage||"":t.late_fee_percentage||"",editable:!0,field:"late_fee_percentage",type:"number"}]},{title:"Discount Settings",tag:"discount_settings",description:"Discount configuration and limits",details:[{label:"Is Discount",value:g?v.is_discount:t.is_discount,editable:!0,field:"is_discount",type:"boolean"},{label:"Discount Percentage",value:g?v.discount_percentage||"":t.discount_percentage||"",editable:!0,field:"discount_percentage",type:"number"},{label:"Max Discount Amount",value:g?v.max_discount_amount||"":t.max_discount_amount||"",editable:!0,field:"max_discount_amount",type:"number"}]}];return(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10001]",children:(0,o.jsxs)("div",{className:"bg-blue-100 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[85vh] overflow-hidden",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-blue-200",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-blue-600 rounded flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,o.jsx)("h2",{className:"text-lg font-bold text-blue-900",children:t.name})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>{j(t),f(!0)},className:"w-8 h-8 bg-white rounded-full flex items-center justify-center hover:bg-blue-50 transition-colors duration-200",title:"Edit Fee Structure",children:H({className:"w-4 h-4 text-blue-600"})}),(0,o.jsx)("button",{onClick:a,className:"w-8 h-8 bg-white rounded-full flex items-center justify-center hover:bg-blue-50 transition-colors duration-200",title:"Close",children:me({className:"w-4 h-4 text-blue-600"})})]})]}),(0,o.jsxs)("div",{className:"overflow-y-auto max-h-[calc(85vh-120px)] p-3 space-y-3",children:[p&&(0,o.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,o.jsx)("div",{className:"text-sm text-gray-500",children:"Loading class and stream data..."})}),S.map((e,t)=>(0,o.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,o.jsx)("h3",{className:"text-sm font-bold text-gray-900",children:e.title}),(0,o.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.tag})]}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:e.description}),(0,o.jsx)("div",{className:"space-y-0.5",children:e.details.map((e,t)=>{var s;return(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-blue-200 last:border-b-0",children:[(0,o.jsxs)("span",{className:"text-xs font-semibold text-gray-800 flex-shrink-0 px-2 py-1 "+("Fee ID"===e.label?"w-20":"w-40"),children:[e.label,":"]}),(0,o.jsx)("div",{className:"text-xs text-gray-900 text-right "+("Fee ID"===e.label?"w-52":"w-32"),children:g&&e.editable?(0,o.jsx)("div",{className:"w-full",children:"boolean"===e.type?(0,o.jsxs)("select",{value:e.value?"true":"false",onChange:t=>k(e.field,"true"===t.target.value),className:"w-full px-2 py-1.5 text-xs bg-white border border-gray-200 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",children:[(0,o.jsx)("option",{value:"true",children:"Yes"}),(0,o.jsx)("option",{value:"false",children:"No"})]}):"select"===e.type?(0,o.jsxs)("select",{value:String(e.value||""),onChange:t=>k(e.field,t.target.value),className:"w-full px-2 py-1.5 text-xs bg-white border border-gray-200 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",children:[(0,o.jsx)("option",{value:"",children:"Select..."}),null===(s=e.options)||void 0===s?void 0:s.map(e=>(0,o.jsx)("option",{value:e.value||e,children:e.label||e},e.value||e))]}):"number"===e.type?(0,o.jsx)("input",{type:"number",value:String(e.value||""),onChange:t=>k(e.field,t.target.value),className:"w-full px-2 py-1.5 text-xs bg-white border border-gray-200 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"Enter amount"}):"date"===e.type?(0,o.jsx)("input",{type:"date",value:String(e.value||""),onChange:t=>k(e.field,t.target.value),className:"w-full px-2 py-1.5 text-xs bg-white border border-gray-200 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300"}):(0,o.jsx)("input",{type:"text",value:String(e.value||""),onChange:t=>k(e.field,t.target.value),className:"w-full px-2 py-1.5 text-xs bg-white border border-gray-200 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"Name"===e.label?"Enter name":"Description"===e.label?"Enter description":"Enter value"})}):(0,o.jsx)("span",{children:"Status"===e.label?(0,o.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium "+(e.value?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.value?"Active":"Inactive"}):"Applicable To All"===e.label||"Late Fee Applicable"===e.label||"Is Discount"===e.label?(0,o.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium "+(e.value?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.value?"Yes":"No"}):"Applicable Class"===e.label?N(String(e.value)):"Applicable Stream"===e.label?w(String(e.value)):"Amount"===e.label?_(String(e.value)):"Due Date"===e.label?e.value&&"string"===typeof e.value?new Date(e.value).toLocaleDateString():"Not set":"Late Fee Amount"===e.label?e.value?_(String(e.value)):"N/A":"Late Fee Percentage"===e.label||"Discount Percentage"===e.label?e.value?`${e.value}%`:"N/A":"Max Discount Amount"===e.label?e.value?_(String(e.value)):"N/A":String(e.value||"Not provided")})})]},t)})})]},e.tag))]}),(0,o.jsx)("div",{className:"px-4 pt-4 pb-6 border-t border-blue-200 bg-blue-50",children:(0,o.jsx)("div",{className:"flex justify-end space-x-2",children:g?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>{f(!1),j({})},className:"px-6 py-1.5 bg-gray-500 text-white rounded-xl hover:bg-gray-600 hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 font-medium text-sm",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if(v){y(!0);try{const e=await l.authenticatedRequest(`/fees/structures/${t.id}/`,{method:"PUT",body:JSON.stringify(v)});i&&i(e),f(!1),j({})}catch(e){console.error("Error updating fee structure:",e)}finally{y(!1)}}},disabled:b,className:"px-6 py-1.5 bg-green-600 text-white rounded-xl hover:bg-green-700 hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-1",children:b?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,o.jsx)("span",{children:"Updating..."})]}):(0,o.jsxs)(o.Fragment,{children:[ne({className:"w-3 h-3"}),(0,o.jsx)("span",{children:"Update"})]})})]}):(0,o.jsx)("button",{onClick:a,className:"px-6 py-1.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 font-medium text-sm",children:"Close"})})})]})})},ze=e=>{let{searchQuery:t,setSearchQuery:s,debouncedSearchQuery:a,sortBy:n,setSortBy:i,sortDirection:d,setSortDirection:c,feeTypeFilter:u,setFeeTypeFilter:m,categoryFilter:x,setCategoryFilter:p,statusFilter:h,setStatusFilter:g,clearFilters:f,isAddDrawerOpen:b,openAddDrawer:y,closeAddDrawer:v,onFilterOptionsUpdate:j}=e;const[N,w]=(0,r.useState)(null),[_,k]=(0,r.useState)(null),[S,C]=(0,r.useState)([]),E=(0,r.useRef)([]),[A,P]=(0,r.useState)(!0),[T,L]=(0,r.useState)(null),[D,R]=(0,r.useState)(!1),[M,I]=(0,r.useState)(null),[U,B]=(0,r.useState)(!1),[$,W]=(0,r.useState)(null),[V,G]=(0,r.useState)({}),[K,Y]=(0,r.useState)(!1),[J,Z]=(0,r.useState)(!1),[X,ee]=(0,r.useState)(null),[se]=(0,r.useState)(20),[ae,ne]=(0,r.useState)({name:"",fee_type:"tuition",category:"academic",description:"",amount:"",frequency:"monthly",applicable_to_all:!0,due_date:"",late_fee_applicable:!1,late_fee_amount:"0",late_fee_percentage:"0",is_active:!0,is_discount:!1,discount_percentage:"0",max_discount_amount:"",applicable_class:"",applicable_stream:""}),[le,ie]=(0,r.useState)({}),[oe,de]=(0,r.useState)(!1),[ce,ue]=(0,r.useState)([]),[pe,he]=(0,r.useState)([]),[ge,fe]=(0,r.useState)(!1),be=[{value:"tuition",label:"Tuition"},{value:"development",label:"Development"},{value:"library",label:"Library"},{value:"laboratory",label:"Laboratory"},{value:"sports",label:"Sports"},{value:"transport",label:"Transport"},{value:"hostel",label:"Hostel"},{value:"exam",label:"Exam"},{value:"miscellaneous",label:"Miscellaneous"},{value:"fine",label:"Fine"},{value:"discount",label:"Discount"}],ye=[{value:"academic",label:"Academic"},{value:"non_academic",label:"Non-Academic"},{value:"fine",label:"Fine"},{value:"discount",label:"Discount"}],je=[{value:"one_time",label:"One Time"},{value:"monthly",label:"Monthly"},{value:"termly",label:"Termly"},{value:"yearly",label:"Yearly"},{value:"custom",label:"Custom"}],Ne=e=>{const t=new Map,s=new Map,r=new Map;e.forEach(e=>{if(e.fee_type){const s=e.fee_type.charAt(0).toUpperCase()+e.fee_type.slice(1).replace("_"," ");t.set(e.fee_type,{value:e.fee_type,label:s})}if(e.category){const t=e.category.charAt(0).toUpperCase()+e.category.slice(1).replace("_"," ");s.set(e.category,{value:e.category,label:t})}const a=e.is_active?"active":"inactive",n=e.is_active?"Active":"Inactive";r.set(a,{value:a,label:n})});const a={feeTypes:Array.from(t.values()),categories:Array.from(s.values()),statuses:Array.from(r.values())};return j&&j(a),a},_e=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{P(!0),L(null);const t={page:e,page_size:se,search:a||void 0,sort_by:n||void 0,sort_direction:d,fee_type:u||void 0,category:x||void 0,is_active:"active"===h||"inactive"!==h&&void 0},s=(await De.getAllFeeStructures(t)).results||[];C(s),u||x||h||a?Ne(E.current):(E.current=s,Ne(s))}catch(t){console.error("Error fetching fee structures:",t),L("Failed to fetch fee structures"),Ne([])}finally{P(!1)}},[se,a,n,d,u,x,h]);(0,r.useEffect)(()=>{_e()},[_e]);const ke=(0,r.useCallback)(async()=>{try{fe(!0);const e=await l.students.getClasses();let t;if(Array.isArray(e))t=e;else{if(!e.data||!Array.isArray(e.data))return console.error("Unexpected API response format:",e),void ue([]);t=e.data}const s=t.map(e=>({id:e.id,name:e.name,code:e.code,stream:e.stream}));ue(s)}catch(T){console.error("Error fetching classes:",T),ue([])}finally{fe(!1)}},[]),Se=(0,r.useCallback)(async()=>{try{const e=await l.students.getStreams();let t;if(Array.isArray(e))t=e;else{if(!e.data||!Array.isArray(e.data))return console.error("Unexpected API response format:",e),void he([]);t=e.data}he(t)}catch(T){console.error("Error fetching streams:",T),he([])}},[]);(0,r.useEffect)(()=>{ke(),Se()},[ke,Se]),(0,r.useEffect)(()=>{const e=e=>{N&&setTimeout(()=>{w(null),k(null)},100)};return N&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[N]);const Ce=e=>{if(!e)return"All Classes";const t=ce.find(t=>t.id===e);return t?t.name:`Class ID: ${e}`},Ee=e=>{if(!e)return"All Streams";const t=pe.find(t=>t.id===e);return t?t.name:`Stream ID: ${e}`},Ae=(e,t)=>{if(ne(s=>({...s,[e]:t})),le[e]&&ie(t=>{const s={...t};return delete s[e],s}),"applicable_to_all"===e&&!0===t&&ne(e=>({...e,applicable_class:"",applicable_stream:""})),"applicable_class"===e&&t){const e=ce.find(e=>e.id===t);e&&e.stream&&ne(t=>({...t,applicable_stream:e.stream.name}))}},Pe=e=>{n===e?c("asc"===d?"desc":"asc"):(i(e),c("asc"))},Te=e=>n!==e?null:"asc"===d?z({className:"w-3 h-3"}):O({className:"w-3 h-3"}),Le=()=>{ie({}),ne({name:"",fee_type:"tuition",category:"academic",description:"",amount:"",frequency:"monthly",applicable_to_all:!0,due_date:"",late_fee_applicable:!1,late_fee_amount:"0",late_fee_percentage:"0",is_active:!0,is_discount:!1,discount_percentage:"0",max_discount_amount:"",applicable_class:"",applicable_stream:""})},Fe=e=>{const t=be.find(t=>t.value===e);return(0,o.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:(null===t||void 0===t?void 0:t.label)||e})},ze=e=>{const t=ye.find(t=>t.value===e);return(0,o.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:(null===t||void 0===t?void 0:t.label)||e})},Re=e=>{const t="active"===e;return(0,o.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(t?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:t?"Active":"Inactive"})},Me=e=>{const t=je.find(t=>t.value===e);return(0,o.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:(null===t||void 0===t?void 0:t.label)||e})},Ie=(e,t)=>{G(s=>({...s,[e]:t}))};return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[A&&(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading fee structures..."})]}),T&&(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsxs)("div",{className:"text-red-600 mb-4",children:[me({className:"w-12 h-12 mx-auto mb-2"}),(0,o.jsx)("p",{className:"text-lg font-medium",children:"Error Loading Fee Structures"}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:T})]}),(0,o.jsx)("button",{onClick:()=>_e(),className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors duration-200",children:"Retry"})]}),!A&&!T&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"overflow-x-auto border-0",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Pe("name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Name"}),Te("name")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Pe("fee_type"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Type"}),Te("fee_type")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Pe("category"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Category"}),Te("category")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Pe("amount"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Amount"}),Te("amount")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Pe("frequency"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Frequency"}),Te("frequency")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Pe("applicable_to_all"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Applicable To All"}),Te("applicable_to_all")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Pe("applicable_class"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Applicable Class"}),Te("applicable_class")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Pe("applicable_stream"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Applicable Stream"}),Te("applicable_stream")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Pe("is_active"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Status"}),Te("is_active")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Actions"})})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:S.map((e,t)=>(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-25",children:[(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs font-medium text-gray-900",children:e.name}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:Fe(e.fee_type)}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:ze(e.category)}),(0,o.jsxs)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:["KSh ",parseFloat(e.amount).toLocaleString()]}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:Me(e.frequency)}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:(0,o.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium "+(e.applicable_to_all?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.applicable_to_all?"Yes":"No"})}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:Ce(e.applicable_class)}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:Ee(e.applicable_stream)}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:Re(e.is_active?"active":"inactive")}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("button",{onClick:()=>(I(e),void R(!0)),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors duration-200",title:"View Details",children:Q({className:"w-3 h-3"})}),(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)("button",{onClick:t=>{const s=t.currentTarget.getBoundingClientRect();k({top:s.bottom+window.scrollY,left:s.right-120+window.scrollX}),w(N===e.id?null:e.id)},className:"p-1 rounded-md transition-colors duration-200 "+(N===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:q({className:"w-3 h-3"})})})]})})]},e.id))})]})}),!A&&!T&&0===S.length&&(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsxs)("div",{className:"text-gray-400 mb-4",children:[te({className:"w-12 h-12 mx-auto mb-2"}),(0,o.jsx)("p",{className:"text-lg font-medium text-gray-600",children:"No Fee Structures Found"}),(0,o.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Get started by creating your first fee structure"})]}),(0,o.jsx)(we,{permissions:["access_fees"],children:(0,o.jsxs)("button",{onClick:y,className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors duration-200",children:[re({className:"w-4 h-4 inline mr-2"}),"Add Fee Structure"]})})]})]})]}),N&&_&&(0,ve.createPortal)((0,o.jsxs)("div",{className:"fixed z-50 bg-white rounded-md shadow-lg border border-gray-200 py-1 w-32",style:{top:_.top,left:_.left},onClick:e=>{e.stopPropagation()},onMouseDown:e=>{e.stopPropagation()},children:[(0,o.jsxs)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation();const t=S.find(e=>e.id===N);t&&(w(null),k(null),(e=>{W(e),G(e),B(!0),Z(!0),w(null),k(null)})(t))},className:"w-full flex items-center space-x-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200",children:[H({className:"w-3 h-3"}),(0,o.jsx)("span",{children:"Edit"})]}),(0,o.jsxs)("button",{onClick:()=>{w(null),k(null)},className:"w-full flex items-center space-x-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors duration-200",children:[xe({className:"w-3 h-3"}),(0,o.jsx)("span",{children:"Delete"})]})]}),document.body),b&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm transition-all duration-300 ease-out z-50",children:(0,o.jsxs)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-300 ease-out flex flex-col",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-2 bg-blue-100 rounded-xl",children:te({className:"w-5 h-5 text-blue-600"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Add Fee Structure"}),(0,o.jsx)("p",{className:"text-sm text-gray-500",children:"Create a new fee structure for your school"})]})]}),(0,o.jsx)("button",{onClick:v,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-xl transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,o.jsxs)("div",{className:"p-6 space-y-4",children:[Object.keys(le).length>0&&(0,o.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-4 shadow-sm",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Please fix the errors below"})})]})}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Fee Name *"]}),(0,o.jsx)("input",{type:"text",value:ae.name,onChange:e=>Ae("name",e.target.value),placeholder:"Enter fee name",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(le.name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),le.name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:le.name[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Fee Type *"]}),(0,o.jsx)("select",{value:ae.fee_type,onChange:e=>Ae("fee_type",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(le.fee_type?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:be.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),le.fee_type&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:le.fee_type[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Category *"]}),(0,o.jsx)("select",{value:ae.category,onChange:e=>Ae("category",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+(le.category?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:ye.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),le.category&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:le.category[0]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Description"]}),(0,o.jsx)("textarea",{value:ae.description,onChange:e=>Ae("description",e.target.value),placeholder:"Enter description",rows:3,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(le.description?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),le.description&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:le.description[0]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Amount *"]}),(0,o.jsx)("input",{type:"number",step:"0.01",value:ae.amount,onChange:e=>Ae("amount",e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+(le.amount?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),le.amount&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:le.amount[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-teal-500 rounded-full mr-1.5"}),"Frequency *"]}),(0,o.jsx)("select",{value:ae.frequency,onChange:e=>Ae("frequency",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-100 focus:border-teal-500 transition-all duration-200 bg-white "+(le.frequency?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:je.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),le.frequency&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:le.frequency[0]})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"Due Date"]}),(0,o.jsx)("input",{type:"date",value:ae.due_date,onChange:e=>Ae("due_date",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 transition-all duration-200 bg-white "+(le.due_date?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),le.due_date&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:le.due_date[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-pink-500 rounded-full mr-1.5"}),"Active Status *"]}),(0,o.jsxs)("select",{value:ae.is_active?"true":"false",onChange:e=>Ae("is_active","true"===e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-pink-500 transition-all duration-200 bg-white "+(le.is_active?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"true",children:"Active"}),(0,o.jsx)("option",{value:"false",children:"Inactive"})]}),le.is_active&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:le.is_active[0]})]})]}),(0,o.jsx)("div",{className:"space-y-1",children:(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",checked:ae.applicable_to_all,onChange:e=>Ae("applicable_to_all",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,o.jsx)("span",{className:"ml-2 text-xs text-gray-700",children:"Applicable to all classes and streams"})]})}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-violet-500 rounded-full mr-1.5"}),"Class ",!ae.applicable_to_all&&(0,o.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),ge?(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,o.jsx)("span",{className:"text-xs text-gray-500",children:"Loading..."})]}):(0,o.jsxs)("select",{value:ae.applicable_class,onChange:e=>Ae("applicable_class",e.target.value),disabled:ae.applicable_to_all,className:`w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-100 focus:border-violet-500 transition-all duration-200 bg-white ${ae.applicable_to_all?"bg-gray-100 cursor-not-allowed":""} ${le.applicable_class?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"}`,children:[(0,o.jsx)("option",{value:"",children:"Select a class"}),ce.map(e=>{var t;return(0,o.jsxs)("option",{value:e.id,children:[e.code," - ",(null===(t=e.stream)||void 0===t?void 0:t.name)||"No Stream"]},e.id)})]}),le.applicable_class&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:le.applicable_class[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-1.5"}),"Stream ",!ae.applicable_to_all&&(0,o.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,o.jsx)("input",{type:"text",value:ae.applicable_stream||"",readOnly:!0,className:`w-full px-3 py-2 text-xs border rounded-lg bg-gray-50 text-gray-700 ${ae.applicable_to_all||!ae.applicable_class?"bg-gray-100 cursor-not-allowed":""} ${le.applicable_stream?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"Stream will be set automatically when class is selected"}),le.applicable_stream&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:le.applicable_stream[0]})]})]}),(0,o.jsx)("div",{className:"space-y-1",children:(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",checked:ae.late_fee_applicable,onChange:e=>Ae("late_fee_applicable",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,o.jsx)("span",{className:"ml-2 text-xs text-gray-700",children:"Late fees applicable"})]})}),ae.late_fee_applicable&&(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Late Fee Amount"}),(0,o.jsx)("input",{type:"number",step:"0.01",value:ae.late_fee_amount,onChange:e=>Ae("late_fee_amount",e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white"})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Late Fee Percentage"}),(0,o.jsx)("input",{type:"number",step:"0.01",value:ae.late_fee_percentage,onChange:e=>Ae("late_fee_percentage",e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white"})]})]}),(0,o.jsx)("div",{className:"space-y-1",children:(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",checked:ae.is_discount,onChange:e=>Ae("is_discount",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,o.jsx)("span",{className:"ml-2 text-xs text-gray-700",children:"This is a discount structure"})]})}),ae.is_discount&&(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Discount Percentage"}),(0,o.jsx)("input",{type:"number",step:"0.01",min:"0",max:"100",value:ae.discount_percentage,onChange:e=>Ae("discount_percentage",e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white"})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Max Discount Amount"}),(0,o.jsx)("input",{type:"number",step:"0.01",value:ae.max_discount_amount,onChange:e=>Ae("max_discount_amount",e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white"})]})]})]})]})}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:v,className:"px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 transition-all duration-200",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{try{var e,t;de(!0),ie({});const s={...ae,amount:ae.amount,discount_percentage:ae.discount_percentage,max_discount_amount:ae.max_discount_amount||null,applicable_class:ae.applicable_to_all?null:ae.applicable_class||null,applicable_stream:ae.applicable_to_all?null:ae.applicable_class&&(null===(e=ce.find(e=>e.id===ae.applicable_class))||void 0===e||null===(t=e.stream)||void 0===t?void 0:t.id)||null};await De.createFeeStructure(s),v(),Le(),_e()}catch(T){var s,r;console.error("Error creating fee structure:",T),null!==(s=T.response)&&void 0!==s&&null!==(r=s.data)&&void 0!==r&&r.errors?ie(T.response.data.errors):ie({general:["Failed to create fee structure. Please try again."]})}finally{de(!1)}},disabled:oe,className:"px-3 py-1.5 text-xs font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 transition-all duration-200",children:oe?"Creating...":"Create Fee Structure"})]})]})}),(0,o.jsx)(Oe,{feeStructure:M,isOpen:D,onClose:()=>{R(!1),I(null)},onUpdate:e=>{C(t=>t.map(t=>t.id===e.id?e:t)),I(e)}}),U&&$&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm transition-all duration-300 ease-out z-50",children:(0,o.jsxs)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-300 ease-out flex flex-col",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-2 bg-blue-100 rounded-xl",children:J?H({className:"w-5 h-5 text-blue-600"}):Q({className:"w-5 h-5 text-blue-600"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:J?"Edit Fee Structure":"Fee Structure Details"}),(0,o.jsx)("p",{className:"text-sm text-gray-500",children:J?"Update fee structure details":"View fee structure information"})]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[!J&&(0,o.jsx)("button",{onClick:()=>Z(!0),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-xl transition-all duration-200",title:"Edit Fee Structure",children:H({className:"w-4 h-4"})}),(0,o.jsx)("button",{onClick:()=>{B(!1),W(null),G({}),Y(!1),Z(!1)},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-xl transition-all duration-200",children:me({className:"w-4 h-4"})})]})]}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,o.jsxs)("div",{className:"p-6 space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full mr-1.5"}),"Fee ID"]}),(0,o.jsx)("input",{type:"text",value:$.id,disabled:!0,className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg bg-gray-50 text-gray-500"})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Fee Name *"]}),(0,o.jsx)("input",{type:"text",value:V.name||"",onChange:e=>Ie("name",e.target.value),placeholder:"Enter fee name",disabled:!J,className:"w-full px-3 py-2 text-xs border rounded-lg transition-all duration-200 "+(J?"border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 bg-white hover:border-gray-400":"border-gray-200 bg-gray-50 text-gray-700 cursor-not-allowed")})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Fee Type *"]}),(0,o.jsxs)("select",{value:V.fee_type||"",onChange:e=>Ie("fee_type",e.target.value),disabled:!J,className:"w-full px-3 py-2 text-xs border rounded-lg transition-all duration-200 "+(J?"border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 bg-white hover:border-gray-400":"border-gray-200 bg-gray-50 text-gray-700 cursor-not-allowed"),children:[(0,o.jsx)("option",{value:"tuition",children:"Tuition"}),(0,o.jsx)("option",{value:"development",children:"Development"}),(0,o.jsx)("option",{value:"library",children:"Library"}),(0,o.jsx)("option",{value:"laboratory",children:"Laboratory"}),(0,o.jsx)("option",{value:"sports",children:"Sports"}),(0,o.jsx)("option",{value:"transport",children:"Transport"}),(0,o.jsx)("option",{value:"hostel",children:"Hostel"}),(0,o.jsx)("option",{value:"exam",children:"Exam"}),(0,o.jsx)("option",{value:"miscellaneous",children:"Miscellaneous"}),(0,o.jsx)("option",{value:"fine",children:"Fine"}),(0,o.jsx)("option",{value:"discount",children:"Discount"})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Category *"]}),(0,o.jsxs)("select",{value:V.category||"",onChange:e=>Ie("category",e.target.value),className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white hover:border-gray-400",children:[(0,o.jsx)("option",{value:"academic",children:"Academic"}),(0,o.jsx)("option",{value:"non_academic",children:"Non Academic"}),(0,o.jsx)("option",{value:"fine",children:"Fine"}),(0,o.jsx)("option",{value:"discount",children:"Discount"})]})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Description"]}),(0,o.jsx)("textarea",{value:V.description||"",onChange:e=>Ie("description",e.target.value),placeholder:"Enter description",rows:3,className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white hover:border-gray-400"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Amount *"]}),(0,o.jsx)("input",{type:"number",step:"0.01",value:V.amount||"",onChange:e=>Ie("amount",e.target.value),disabled:!J,placeholder:"0.00",className:"w-full px-3 py-2 text-xs border rounded-lg transition-all duration-200 "+(J?"border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 bg-white hover:border-gray-400":"border-gray-200 bg-gray-50 text-gray-700 cursor-not-allowed")})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-teal-500 rounded-full mr-1.5"}),"Frequency *"]}),(0,o.jsxs)("select",{value:V.frequency||"",onChange:e=>Ie("frequency",e.target.value),className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-100 focus:border-teal-500 transition-all duration-200 bg-white hover:border-gray-400",children:[(0,o.jsx)("option",{value:"one_time",children:"One Time"}),(0,o.jsx)("option",{value:"monthly",children:"Monthly"}),(0,o.jsx)("option",{value:"termly",children:"Termly"}),(0,o.jsx)("option",{value:"yearly",children:"Yearly"}),(0,o.jsx)("option",{value:"custom",children:"Custom"})]})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"Due Date"]}),(0,o.jsx)("input",{type:"date",value:V.due_date||"",onChange:e=>Ie("due_date",e.target.value),disabled:!J,className:"w-full px-3 py-2 text-xs border rounded-lg transition-all duration-200 "+(J?"border-gray-300 focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 bg-white hover:border-gray-400":"border-gray-200 bg-gray-50 text-gray-700 cursor-not-allowed")})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-pink-500 rounded-full mr-1.5"}),"Active Status *"]}),(0,o.jsxs)("select",{value:V.is_active?"true":"false",onChange:e=>Ie("is_active","true"===e.target.value),className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-pink-500 transition-all duration-200 bg-white hover:border-gray-400",children:[(0,o.jsx)("option",{value:"true",children:"Active"}),(0,o.jsx)("option",{value:"false",children:"Inactive"})]})]})]}),(0,o.jsx)("div",{className:"space-y-1",children:(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",checked:V.applicable_to_all||!1,onChange:e=>Ie("applicable_to_all",e.target.checked),disabled:!J,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 "+(J?"":"cursor-not-allowed opacity-50")}),(0,o.jsx)("span",{className:"ml-2 text-xs text-gray-700",children:"Applicable to all classes and streams"})]})}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-violet-500 rounded-full mr-1.5"}),"Class ",!V.applicable_to_all&&(0,o.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,o.jsxs)("select",{value:V.applicable_class||"",onChange:e=>Ie("applicable_class",e.target.value),disabled:!J||V.applicable_to_all,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-100 focus:border-violet-500 transition-all duration-200 "+(!J||V.applicable_to_all?"bg-gray-100 cursor-not-allowed border-gray-200":"bg-white hover:border-gray-400 border-gray-300"),children:[(0,o.jsx)("option",{value:"",children:"Select a class"}),ce.map(e=>{var t;return(0,o.jsxs)("option",{value:e.id,children:[e.code," - ",(null===(t=e.stream)||void 0===t?void 0:t.name)||"No Stream"]},e.id)})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-1.5"}),"Stream ",!V.applicable_to_all&&(0,o.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,o.jsx)("input",{type:"text",value:V.applicable_stream||"",readOnly:!0,disabled:!J,className:"w-full px-3 py-2 text-xs border rounded-lg transition-all duration-200 "+(J&&!V.applicable_to_all&&V.applicable_class?"bg-white border-gray-300":"bg-gray-100 cursor-not-allowed border-gray-200 text-gray-700"),placeholder:"Stream will be set automatically when class is selected"})]})]}),(0,o.jsx)("div",{className:"space-y-1",children:(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",checked:V.late_fee_applicable||!1,onChange:e=>Ie("late_fee_applicable",e.target.checked),disabled:!J,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 "+(J?"":"cursor-not-allowed opacity-50")}),(0,o.jsx)("span",{className:"ml-2 text-xs text-gray-700",children:"Late fees applicable"})]})}),V.late_fee_applicable&&(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Late Fee Amount"}),(0,o.jsx)("input",{type:"number",step:"0.01",value:V.late_fee_amount||"",onChange:e=>Ie("late_fee_amount",e.target.value),disabled:!J,placeholder:"0.00",className:"w-full px-3 py-2 text-xs border rounded-lg transition-all duration-200 "+(J?"border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white hover:border-gray-400":"border-gray-200 bg-gray-50 text-gray-700 cursor-not-allowed")})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Late Fee Percentage"}),(0,o.jsx)("input",{type:"number",step:"0.01",value:V.late_fee_percentage||"",onChange:e=>Ie("late_fee_percentage",e.target.value),disabled:!J,placeholder:"0.00",className:"w-full px-3 py-2 text-xs border rounded-lg transition-all duration-200 "+(J?"border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white hover:border-gray-400":"border-gray-200 bg-gray-50 text-gray-700 cursor-not-allowed")})]})]}),(0,o.jsx)("div",{className:"space-y-1",children:(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",checked:V.is_discount||!1,onChange:e=>Ie("is_discount",e.target.checked),disabled:!J,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 "+(J?"":"cursor-not-allowed opacity-50")}),(0,o.jsx)("span",{className:"ml-2 text-xs text-gray-700",children:"This is a discount structure"})]})}),V.is_discount&&(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Discount Percentage"}),(0,o.jsx)("input",{type:"number",step:"0.01",value:V.discount_percentage||"",onChange:e=>Ie("discount_percentage",e.target.value),disabled:!J,placeholder:"0.00",className:"w-full px-3 py-2 text-xs border rounded-lg transition-all duration-200 "+(J?"border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white hover:border-gray-400":"border-gray-200 bg-gray-50 text-gray-700 cursor-not-allowed")})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Max Discount Amount"}),(0,o.jsx)("input",{type:"number",step:"0.01",value:V.max_discount_amount||"",onChange:e=>Ie("max_discount_amount",e.target.value),disabled:!J,placeholder:"0.00",className:"w-full px-3 py-2 text-xs border rounded-lg transition-all duration-200 "+(J?"border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white hover:border-gray-400":"border-gray-200 bg-gray-50 text-gray-700 cursor-not-allowed")})]})]})]})}),J&&(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-100 flex-shrink-0",children:[(0,o.jsx)("button",{onClick:()=>Z(!1),disabled:K,className:"px-3 py-1.5 text-xs font-medium border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 transition-all duration-200 "+(K?"text-gray-400 bg-gray-100 cursor-not-allowed":"text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-400"),children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if($&&V){Y(!0);try{await l.authenticatedRequest(`/fees/structures/${$.id}/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});const e={...$,...V};C(t=>t.map(t=>t.id===$.id?e:t)),Z(!1),W(e),ee({message:"Fee structure updated successfully!",type:"success"}),setTimeout(()=>{ee(null)},3e3)}catch(T){console.error("Error updating fee structure:",T),ee({message:"Failed to update fee structure. Please try again.",type:"error"}),setTimeout(()=>{ee(null)},5e3)}finally{Y(!1)}}else console.error("No fee structure or form data to update")},disabled:K,className:"px-3 py-1.5 text-xs font-medium text-white border border-transparent rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 transition-all duration-200 "+(K?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 hover:shadow-md"),children:K?(0,o.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),(0,o.jsx)("span",{children:"Updating..."})]}):"Update Fee Structure"})]})]})}),X&&(0,o.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[10000] flex items-center p-4 rounded-lg shadow-lg transition-all duration-300",children:(0,o.jsxs)("div",{className:`flex items-center space-x-3 ${"success"===X.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"} px-6 py-4 rounded-lg shadow-xl`,children:["success"===X.type?F({className:"w-5 h-5 text-green-600"}):me({className:"w-5 h-5 text-red-600"}),(0,o.jsx)("span",{className:"text-sm font-medium",children:X.message}),(0,o.jsx)("button",{onClick:()=>ee(null),className:"ml-3 text-gray-400 hover:text-gray-600",children:me({className:"w-4 h-4"})})]})})]})},Re=e=>{var t,s,a,n,i,d,c,u,m,x,p,h,g,f,b,y,v,j,N,w,_,k;let{assignment:S,isOpen:C,onClose:E,onEdit:A,onUpdate:P,forceEditMode:T=!1}=e;const[L,F]=(0,r.useState)(!1),[D,O]=(0,r.useState)(!1),[z,R]=(0,r.useState)({}),[M,I]=(0,r.useState)([]),[U,B]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{if(C){B(!0);try{const e=await l.authenticatedRequest("/fees/structures/",{method:"GET"});e&&Array.isArray(e.results)?I(e.results):I([])}catch(e){console.error("Error loading fee structures:",e),I([])}finally{B(!1)}}})()},[C]),(0,r.useEffect)(()=>{T&&C&&(F(!0),R(S))},[T,C,S]);const $=e=>`KSh ${parseFloat(e).toLocaleString()}`,q=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),W=(e,t)=>{R(s=>({...s,[e]:t}))};if(!C)return null;const V=[{title:"Assignment Information",tag:"assignment_info",description:"Core assignment identification and basic details",details:[{label:"Assignment ID",value:S.id,editable:!1,field:"id"},{label:"Fee Structure",value:L?z.fee_structure||"":(null===(t=S.fee_structure_details)||void 0===t?void 0:t.name)||"Not provided",editable:!0,field:"fee_structure",type:"select",options:M.map(e=>({value:e.id,label:e.name}))},{label:"Academic Year",value:L?z.academic_year||"":S.academic_year||"Not provided",editable:!0,field:"academic_year",type:"text"},{label:"Term",value:L?z.term||"":S.term||"N/A",editable:!0,field:"term",type:"select",options:[1,2,3]},{label:"Status",value:L?z.is_active:S.is_active,editable:!0,field:"is_active",type:"boolean"}]},{title:"Student Details",tag:"student_details",description:"Student information and current class details",details:[{label:"Student Name",value:(null===(s=S.student_details)||void 0===s?void 0:s.pupil_name)||"Not provided",editable:!1,field:"student_name"},{label:"Admission Number",value:(null===(a=S.student_details)||void 0===a?void 0:a.admission_number)||"Not provided",editable:!1,field:"admission_number"},{label:"Current Class",value:(null===(n=S.student_details)||void 0===n||null===(i=n.current_class)||void 0===i?void 0:i.name)||"Not provided",editable:!1,field:"current_class"},{label:"Stream",value:(null===(d=S.student_details)||void 0===d||null===(c=d.current_class)||void 0===c||null===(u=c.stream)||void 0===u?void 0:u.name)||"Not provided",editable:!1,field:"stream"},{label:"Guardian Name",value:(null===(m=S.student_details)||void 0===m?void 0:m.guardian_name)||"Not provided",editable:!1,field:"guardian_name"},{label:"Guardian Phone",value:(null===(x=S.student_details)||void 0===x?void 0:x.guardian_phone)||"Not provided",editable:!1,field:"guardian_phone"}]},{title:"Fee Structure Details",tag:"fee_structure_details",description:"Fee structure information and configuration",details:[{label:"Fee Name",value:(null===(p=S.fee_structure_details)||void 0===p?void 0:p.name)||"Not provided",editable:!1,field:"fee_name"},{label:"Fee Type",value:(null===(h=S.fee_structure_details)||void 0===h?void 0:h.fee_type)||"Not provided",editable:!1,field:"fee_type"},{label:"Category",value:(null===(g=S.fee_structure_details)||void 0===g?void 0:g.category)||"Not provided",editable:!1,field:"category"},{label:"Base Amount",value:null!==(f=S.fee_structure_details)&&void 0!==f&&f.amount?$(S.fee_structure_details.amount):"Not provided",editable:!1,field:"base_amount"},{label:"Frequency",value:(null===(b=S.fee_structure_details)||void 0===b?void 0:b.frequency)||"Not provided",editable:!1,field:"frequency"},{label:"Due Date",value:null!==(y=S.fee_structure_details)&&void 0!==y&&y.due_date?`${S.fee_structure_details.due_date}th of month`:"Not provided",editable:!1,field:"due_date"}]},{title:"Assignment Configuration",tag:"assignment_config",description:"Assignment-specific settings and customizations",details:[{label:"Custom Amount",value:L?z.custom_amount||"":S.custom_amount?$(S.custom_amount):"Uses base amount",editable:!0,field:"custom_amount",type:"number"},{label:"Is Waived",value:L?z.is_waived:S.is_waived,editable:!0,field:"is_waived",type:"boolean"},{label:"Waiver Reason",value:L?z.waiver_reason||"":S.waiver_reason||"Not applicable",editable:!0,field:"waiver_reason",type:"text"},{label:"Start Date",value:S.start_date?q(S.start_date):"Not provided",editable:!1,field:"start_date"},{label:"End Date",value:S.end_date?q(S.end_date):"Not set",editable:!1,field:"end_date"}]},{title:"Late Fee Settings",tag:"late_fee_settings",description:"Late fee configuration and penalties",details:[{label:"Late Fee Applicable",value:null===(v=S.fee_structure_details)||void 0===v?void 0:v.late_fee_applicable,editable:!1,field:"late_fee_applicable"},{label:"Late Fee Amount",value:null!==(j=S.fee_structure_details)&&void 0!==j&&j.late_fee_amount?$(S.fee_structure_details.late_fee_amount):"N/A",editable:!1,field:"late_fee_amount"},{label:"Late Fee Percentage",value:null!==(N=S.fee_structure_details)&&void 0!==N&&N.late_fee_percentage?`${S.fee_structure_details.late_fee_percentage}%`:"N/A",editable:!1,field:"late_fee_percentage"}]},{title:"System Information",tag:"system_info",description:"Creation and update timestamps",details:[{label:"Created At",value:S.created_at?q(S.created_at):"Not provided",editable:!1,field:"created_at"},{label:"Updated At",value:S.updated_at?q(S.updated_at):"Not provided",editable:!1,field:"updated_at"},{label:"Waiver Approved By",value:(null===(w=S.approved_by_details)||void 0===w?void 0:w.name)||"Not applicable",editable:!1,field:"waiver_approved_by"}]}];return(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10001]",children:(0,o.jsxs)("div",{className:"bg-blue-100 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[85vh] overflow-hidden",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-blue-200",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-blue-600 rounded flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,o.jsxs)("h2",{className:"text-lg font-bold text-blue-900",children:[(null===(_=S.student_details)||void 0===_?void 0:_.pupil_name)||"Student"," - ",(null===(k=S.fee_structure_details)||void 0===k?void 0:k.name)||"Fee Assignment"]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>{R(S),F(!0)},className:"w-8 h-8 bg-white rounded-full flex items-center justify-center hover:bg-blue-50 transition-colors duration-200",title:"Edit Assignment",children:H({className:"w-4 h-4 text-blue-600"})}),(0,o.jsx)("button",{onClick:E,className:"w-8 h-8 bg-white rounded-full flex items-center justify-center hover:bg-blue-50 transition-colors duration-200",title:"Close",children:me({className:"w-4 h-4 text-blue-600"})})]})]}),(0,o.jsxs)("div",{className:"overflow-y-auto max-h-[calc(85vh-120px)] p-3 space-y-3",children:[U&&(0,o.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,o.jsx)("div",{className:"text-sm text-gray-500",children:"Loading fee structures..."})}),V.map((e,t)=>(0,o.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,o.jsx)("h3",{className:"text-sm font-bold text-gray-900",children:e.title}),(0,o.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.tag})]}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:e.description}),(0,o.jsx)("div",{className:"space-y-0.5",children:e.details.map((e,t)=>{var s,r;return(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-blue-200 last:border-b-0",children:[(0,o.jsxs)("span",{className:"text-xs font-semibold text-gray-800 flex-shrink-0 px-2 py-1 "+("Assignment ID"===e.label?"w-20":"w-40"),children:[e.label,":"]}),(0,o.jsx)("div",{className:"text-xs text-gray-900 text-right "+("Assignment ID"===e.label?"w-52":"w-32"),children:L&&e.editable?(0,o.jsx)("div",{className:"w-full",children:"boolean"===e.type?(0,o.jsxs)("select",{value:e.value?"true":"false",onChange:t=>W(e.field,"true"===t.target.value),className:"w-full px-2 py-1.5 text-xs bg-white border border-gray-200 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",children:[(0,o.jsx)("option",{value:"true",children:"Yes"}),(0,o.jsx)("option",{value:"false",children:"No"})]}):"select"===e.type?(0,o.jsxs)("select",{value:String(e.value||""),onChange:t=>W(e.field,t.target.value),className:"w-full px-2 py-1.5 text-xs bg-white border border-gray-200 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",disabled:U&&"fee_structure"===e.field,children:[(0,o.jsx)("option",{value:"",children:"Select..."}),null===(s=e.options)||void 0===s?void 0:s.map(e=>(0,o.jsx)("option",{value:e.value||e,children:e.label||e},e.value||e))]}):"number"===e.type?(0,o.jsx)("input",{type:"number",value:String(e.value||""),onChange:t=>W(e.field,t.target.value),className:"w-full px-2 py-1.5 text-xs bg-white border border-gray-200 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"Enter amount"}):(0,o.jsx)("input",{type:"text",value:String(e.value||""),onChange:t=>W(e.field,t.target.value),className:"w-full px-2 py-1.5 text-xs bg-white border border-gray-200 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-300",placeholder:"Academic Year"===e.label?"Enter academic year":"Waiver Reason"===e.label?"Enter waiver reason":"Enter value"})}):(0,o.jsx)("span",{children:"Status"===e.label?(0,o.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium "+(e.value?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.value?"Active":"Inactive"}):"Is Waived"===e.label||"Late Fee Applicable"===e.label?(0,o.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium "+(e.value?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.value?"Yes":"No"}):"Term"===e.label?`Term ${e.value}`:"Custom Amount"===e.label?e.value?$(String(e.value)):"Uses base amount":"Fee Structure"===e.label?(null===(r=S.fee_structure_details)||void 0===r?void 0:r.name)||"Not provided":String(e.value||"Not provided")})})]},t)})})]},e.tag))]}),(0,o.jsx)("div",{className:"px-4 pt-4 pb-6 border-t border-blue-200 bg-blue-50",children:(0,o.jsx)("div",{className:"flex justify-end space-x-2",children:L?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>{F(!1),R({})},className:"px-6 py-1.5 bg-gray-500 text-white rounded-xl hover:bg-gray-600 hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 font-medium text-sm",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if(z){O(!0);try{const e=await l.authenticatedRequest(`/fees/assignments/${S.id}/`,{method:"PUT",body:JSON.stringify(z)});if(P){const t={...S,...e,student_details:e.student_details||S.student_details,fee_structure_details:e.fee_structure_details||S.fee_structure_details,approved_by_details:e.approved_by_details||S.approved_by_details};P(t)}F(!1),R({})}catch(e){console.error("Error updating fee assignment:",e)}finally{O(!1)}}},disabled:D,className:"px-6 py-1.5 bg-green-600 text-white rounded-xl hover:bg-green-700 hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-1",children:D?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,o.jsx)("span",{children:"Updating..."})]}):(0,o.jsxs)(o.Fragment,{children:[ne({className:"w-3 h-3"}),(0,o.jsx)("span",{children:"Update"})]})})]}):(0,o.jsx)("button",{onClick:E,className:"px-6 py-1.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 font-medium text-sm",children:"Close"})})})]})})},Me=e=>{let{value:t,onChange:s,placeholder:a="Select academic year",className:n="",error:l=!1,disabled:i=!1}=e;const[d,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)(null),x=(new Date).getFullYear(),p=Array.from({length:15},(e,t)=>x-5+t);(0,r.useEffect)(()=>{if(t&&t.includes("-")){const e=parseInt(t.split("-")[0]);isNaN(e)||m(e)}},[t]);return(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("button",{type:"button",onClick:()=>!i&&c(!d),disabled:i,className:`w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white text-left ${l?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"} ${i?"bg-gray-100 cursor-not-allowed":""} ${n}`,children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("span",{className:t?"text-gray-900":"text-gray-500",children:t&&t.includes("-")?t:a}),(0,o.jsx)("svg",{className:"w-4 h-4 text-gray-400 transition-transform duration-200 "+(d?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),d&&!i&&(0,o.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:(0,o.jsxs)("div",{className:"p-2",children:[(0,o.jsx)("div",{className:"text-xs font-medium text-gray-500 mb-2 px-2",children:"Select Academic Year"}),p.map(e=>(0,o.jsxs)("button",{onClick:()=>(e=>{const t=`${e}-${e+1}`;m(e),s(t),c(!1)})(e),className:"w-full px-2 py-2 text-xs text-left rounded-md hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors duration-200 "+(u===e?"bg-blue-100 text-blue-800":"text-gray-900"),children:[e," - ",e+1]},e))]})}),d&&(0,o.jsx)("div",{className:"fixed inset-0 z-0",onClick:()=>c(!1)})]})},Ie=e=>{var t,s;let{searchQuery:a,setSearchQuery:n,debouncedSearchQuery:i,sortBy:d,setSortBy:c,sortDirection:u,setSortDirection:m,feeTypeFilter:x,setFeeTypeFilter:p,categoryFilter:h,setCategoryFilter:g,statusFilter:f,setStatusFilter:b,clearFilters:y,isAddDrawerOpen:v,openAddDrawer:j,closeAddDrawer:N,onFilterOptionsUpdate:w}=e;const[_,k]=(0,r.useState)(null),[S,C]=(0,r.useState)(null),[E,A]=(0,r.useState)([]),P=(0,r.useRef)([]),[T,L]=(0,r.useState)(!0),[D,R]=(0,r.useState)(null),[M,I]=(0,r.useState)(null),[U,B]=(0,r.useState)({academic_year:"",fee_structure:"",student:"",term:1,custom_amount:null,is_waived:!1,waiver_reason:"",is_active:!0}),[$,W]=(0,r.useState)(""),[V,G]=(0,r.useState)(""),[K,Y]=(0,r.useState)([]),[J,Z]=(0,r.useState)([]),[X,ee]=(0,r.useState)(!1),[te,ae]=(0,r.useState)(!1),[ne,le]=(0,r.useState)(!1),[ie,oe]=(0,r.useState)(!1),[de,ce]=(0,r.useState)({}),[ue,pe]=(0,r.useState)(!1),[fe,be]=(0,r.useState)(!1),[ye,je]=(0,r.useState)(null),[Ne,_e]=(0,r.useState)(!1),[ke,Se]=(0,r.useState)(null),[Ce,Ee]=(0,r.useState)({}),[Ae,Pe]=(0,r.useState)(!1),[Te,Le]=(0,r.useState)({}),Fe=e=>{const t=new Map,s=new Map,r=new Map;e.forEach(e=>{var a,n,l,i,o,d,c,u,m,x;null!==(a=e.student_details)&&void 0!==a&&null!==(n=a.current_class)&&void 0!==n&&n.id&&null!==(l=e.student_details)&&void 0!==l&&null!==(i=l.current_class)&&void 0!==i&&i.name&&t.set(e.student_details.current_class.id,{id:e.student_details.current_class.id,name:e.student_details.current_class.name}),null!==(o=e.student_details)&&void 0!==o&&null!==(d=o.current_class)&&void 0!==d&&null!==(c=d.stream)&&void 0!==c&&c.id&&null!==(u=e.student_details)&&void 0!==u&&null!==(m=u.current_class)&&void 0!==m&&null!==(x=m.stream)&&void 0!==x&&x.name&&s.set(e.student_details.current_class.stream.id,{id:e.student_details.current_class.stream.id,name:e.student_details.current_class.stream.name});const p=e.is_active?"active":"inactive",h=e.is_active?"Active":"Inactive";r.set(p,{value:p,label:h})});const a={classes:Array.from(t.values()),streams:Array.from(s.values()),statuses:Array.from(r.values())};return w&&w(a),a},Oe=(0,r.useCallback)(async()=>{try{L(!0),R(null);const e=await De.getAllAssignments({ordering:d?`${"desc"===u?"-":""}${d}`:void 0,page:1,page_size:20,search:i||void 0}),t=null===e||void 0===e?void 0:e.results;if(e&&Array.isArray(t)){const e=t.filter(e=>e&&e.id&&e.student_details&&e.fee_structure_details);A(e),x||h||f||i?Fe(P.current):(P.current=e,Fe(e))}else A([]),Fe([])}catch(e){console.error("Error fetching assignments:",e),R("Failed to fetch fee assignments"),A([]),Fe([])}finally{L(!1)}},[d,u,i,x,h,f]),ze=(0,r.useCallback)(async e=>{try{ee(!0);const t=await De.searchStudents(e);t&&Array.isArray(t.results)?Y(t.results):Y([])}catch(D){console.error("Error searching students:",D),Y([])}finally{ee(!1)}},[]),Ie=(0,r.useCallback)(async e=>{try{ae(!0);const t=await De.searchFeeStructures(e);t&&Array.isArray(t.results)?Z(t.results):Z([])}catch(D){console.error("Error searching fee structures:",D),Z([])}finally{ae(!1)}},[]);(0,r.useEffect)(()=>{const e=setTimeout(()=>{ze($)},300);return()=>clearTimeout(e)},[$,ze]),(0,r.useEffect)(()=>{const e=setTimeout(()=>{Ie(V)},300);return()=>clearTimeout(e)},[V,Ie]),(0,r.useEffect)(()=>{ze(""),Ie("")},[ze,Ie]),(0,r.useEffect)(()=>{Oe()},[Oe]),(0,r.useEffect)(()=>{const e=e=>{_&&setTimeout(()=>{k(null),C(null)},100)};return _&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[_]);const Ue=(e,t)=>{if(B(s=>({...s,[e]:t})),(de[e]||de.non_field_errors)&&ce(t=>{const s={...t};return delete s[e],delete s.non_field_errors,s}),"fee_structure"===e&&t){const e=J.find(e=>e.id===t);e&&B(t=>({...t,custom_amount:e.amount}))}},Be=e=>{d===e?m("asc"===u?"desc":"asc"):(c(e),m("asc"))},$e=e=>d!==e?null:"asc"===u?z({className:"w-3 h-3"}):O({className:"w-3 h-3"}),He=()=>{ce({}),B({academic_year:"",fee_structure:"",student:"",term:1,custom_amount:null,is_waived:!1,waiver_reason:"",is_active:!0}),W(""),G(""),Y([]),Z([]),le(!1),oe(!1)},qe=()=>{_e(!1),Se(null),Ee({}),Le({})},We=(e,t)=>{Ee(s=>({...s,[e]:t})),(Te[e]||Te.non_field_errors)&&Le(t=>{const s={...t};return delete s[e],delete s.non_field_errors,s})},Ve=e=>{const t={active:{bg:"bg-green-100",text:"text-green-800",label:"Active"},inactive:{bg:"bg-gray-100",text:"text-gray-800",label:"Inactive"},waived:{bg:"bg-yellow-100",text:"text-yellow-800",label:"Waived"}},s=t[e]||t.active;return(0,o.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.bg} ${s.text}`,children:s.label})},Ge=E.filter(e=>{if(!e||!e.student_details||!e.fee_structure_details)return!1;const t=!i||e.student_details.pupil_name&&e.student_details.pupil_name.toLowerCase().includes(i.toLowerCase())||e.student_details.admission_number&&e.student_details.admission_number.toLowerCase().includes(i.toLowerCase())||e.fee_structure_details.name&&e.fee_structure_details.name.toLowerCase().includes(i.toLowerCase()),s=!x||e.student_details.current_class&&e.student_details.current_class.id===x,r=!h||e.student_details.current_class&&e.student_details.current_class.stream&&e.student_details.current_class.stream.id===h,a=!f||(e.is_active?"active":"inactive")===f;return t&&s&&r&&a});return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[T&&(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading fee assignments..."})]}),D&&(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsxs)("div",{className:"text-red-600 mb-4",children:[me({className:"w-12 h-12 mx-auto mb-2"}),(0,o.jsx)("p",{className:"text-lg font-medium",children:"Error Loading Fee Assignments"}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:D})]}),(0,o.jsx)("button",{onClick:()=>Oe(),className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors duration-200",children:"Retry"})]}),!T&&!D&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"overflow-x-auto border-0",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Be("student_name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Student"}),$e("student_name")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Be("class"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Class"}),$e("class")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Be("stream"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Stream"}),$e("stream")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Be("fee_structure_name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Fee Structure"}),$e("fee_structure_name")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Be("assigned_amount"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Amount"}),$e("assigned_amount")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Be("term"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Term"}),$e("term")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Be("status"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Status"}),$e("status")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Actions"})})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:Ge.map((e,t)=>{var s,r,a,n,l,i,d,c,u;return(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-25",children:[(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:ge({className:"w-3 h-3 text-blue-600"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-medium text-gray-900",children:(null===(s=e.student_details)||void 0===s?void 0:s.pupil_name)||"N/A"}),(0,o.jsx)("div",{className:"text-gray-500",children:(null===(r=e.student_details)||void 0===r?void 0:r.admission_number)||"N/A"})]})]})}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:(null===(a=e.student_details)||void 0===a||null===(n=a.current_class)||void 0===n?void 0:n.name)||"N/A"}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:(null===(l=e.student_details)||void 0===l||null===(i=l.current_class)||void 0===i||null===(d=i.stream)||void 0===d?void 0:d.name)||"N/A"}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[se({className:"w-3 h-3 text-green-600"}),(0,o.jsx)("span",{children:(null===(c=e.fee_structure_details)||void 0===c?void 0:c.name)||"N/A"})]})}),(0,o.jsxs)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:["KSh ",e.custom_amount?parseFloat(e.custom_amount).toLocaleString():null!==(u=e.fee_structure_details)&&void 0!==u&&u.amount?parseFloat(e.fee_structure_details.amount).toLocaleString():"0"]}),(0,o.jsxs)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:["Term ",e.term||"N/A"]}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900",children:Ve(e.is_active?"active":"inactive")}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-xs text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("button",{onClick:()=>(e=>{je(e),be(!0)})(e),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors duration-200",title:"View Details",children:Q({className:"w-3 h-3"})}),(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)("button",{onClick:t=>{const s=t.currentTarget.getBoundingClientRect();C({top:s.bottom+window.scrollY,left:s.right-120+window.scrollX}),k(_===e.id?null:e.id)},className:"p-1 rounded-md transition-colors duration-200 "+(_===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:q({className:"w-3 h-3"})})})]})})]},e.id)})})]})}),!T&&!D&&0===Ge.length&&(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsxs)("div",{className:"text-gray-400 mb-4",children:[he({className:"w-12 h-12 mx-auto mb-2"}),(0,o.jsx)("p",{className:"text-lg font-medium text-gray-600",children:"No Fee Assignments Found"}),(0,o.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Get started by creating your first fee assignment"})]}),(0,o.jsx)(we,{permissions:["access_fees"],children:(0,o.jsxs)("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors duration-200",children:[re({className:"w-4 h-4 inline mr-2"}),"Add Assignment"]})})]})]})]}),_&&S&&(0,ve.createPortal)((0,o.jsxs)("div",{className:"fixed z-50 bg-white rounded-md shadow-lg border border-gray-200 py-1 w-32",style:{top:S.top,left:S.left},onClick:e=>{e.stopPropagation()},onMouseDown:e=>{e.stopPropagation()},children:[(0,o.jsxs)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),k(null),C(null);const t=E.find(e=>e.id===_);t&&(e=>{Se(e),Ee({academic_year:e.academic_year,fee_structure:e.fee_structure,term:e.term,custom_amount:e.custom_amount,is_waived:e.is_waived,waiver_reason:e.waiver_reason,is_active:e.is_active}),Le({}),_e(!0)})(t)},className:"w-full flex items-center space-x-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200",children:[H({className:"w-3 h-3"}),(0,o.jsx)("span",{children:"Edit"})]}),(0,o.jsxs)("button",{onClick:()=>{k(null),C(null)},className:"w-full flex items-center space-x-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors duration-200",children:[xe({className:"w-3 h-3"}),(0,o.jsx)("span",{children:"Delete"})]})]}),document.body),v&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm transition-all duration-300 ease-out z-50",children:(0,o.jsxs)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-300 ease-out flex flex-col",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-2 bg-blue-100 rounded-xl",children:he({className:"w-5 h-5 text-blue-600"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Add Fee Assignment"}),(0,o.jsx)("p",{className:"text-sm text-gray-500",children:"Assign a fee structure to a student"})]})]}),(0,o.jsx)("button",{onClick:N,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-xl transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,o.jsxs)("div",{className:"p-6 space-y-4",children:[Object.keys(de).length>0&&(0,o.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-4 shadow-sm",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Please fix the errors below"}),de.non_field_errors&&(0,o.jsx)("div",{className:"mt-2",children:de.non_field_errors.map((e,t)=>(0,o.jsx)("p",{className:"text-sm text-red-700 bg-red-100 px-2 py-1 rounded-md mt-1",children:e},t))})]})]})}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Academic Year *"]}),(0,o.jsx)(Me,{value:U.academic_year,onChange:e=>Ue("academic_year",e),placeholder:"Select academic year (e.g., 2024-2025)",error:!!de.academic_year}),de.academic_year&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:de.academic_year[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Student *"]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",value:$,onChange:e=>W(e.target.value),placeholder:"Search and select a student...",className:"w-full px-3 py-2 pr-8 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(de.student?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),onFocus:()=>{le(!0),0===K.length&&ze($)},onBlur:()=>{setTimeout(()=>le(!1),200)}}),(0,o.jsx)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 pointer-events-none",children:X?(0,o.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-green-600"}):(0,o.jsx)("svg",{className:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),ne&&(0,o.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:K.length>0?K.filter(e=>e&&e.id&&e.pupil_name).map(e=>{var t,s,r;return(0,o.jsxs)("button",{onClick:()=>{var t,s,r;B(t=>({...t,student:e.id})),W(`${e.pupil_name} (${e.admission_number||"N/A"}) - ${(null===(t=e.current_class)||void 0===t?void 0:t.name)||"N/A"} ${(null===(s=e.current_class)||void 0===s||null===(r=s.stream)||void 0===r?void 0:r.name)||"N/A"}`),le(!1)},className:"w-full px-3 py-2 text-left text-xs hover:bg-green-50 border-b border-gray-100 last:border-b-0 focus:bg-green-50 focus:outline-none",children:[(0,o.jsx)("div",{className:"font-medium text-gray-900",children:e.pupil_name}),(0,o.jsxs)("div",{className:"text-gray-500",children:[e.admission_number||"N/A"," - ",(null===(t=e.current_class)||void 0===t?void 0:t.name)||"N/A"," ",(null===(s=e.current_class)||void 0===s||null===(r=s.stream)||void 0===r?void 0:r.name)||"N/A"]})]},e.id)}):(0,o.jsx)("div",{className:"p-3",children:(0,o.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"No students found"})})})]}),de.student&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:de.student[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Fee Structure *"]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",value:V,onChange:e=>G(e.target.value),placeholder:"Search and select a fee structure...",className:"w-full px-3 py-2 pr-8 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+(de.fee_structure?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),onFocus:()=>{oe(!0),0===J.length&&Ie(V)},onBlur:()=>{setTimeout(()=>oe(!1),200)}}),(0,o.jsx)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 pointer-events-none",children:te?(0,o.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-indigo-600"}):(0,o.jsx)("svg",{className:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),ie&&(0,o.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:J.length>0?J.filter(e=>e&&e.id&&e.name).map(e=>(0,o.jsxs)("button",{onClick:()=>{B(t=>({...t,fee_structure:e.id})),G(`${e.name} - KSh ${e.amount||"0"}`),oe(!1)},className:"w-full px-3 py-2 text-left text-xs hover:bg-indigo-50 border-b border-gray-100 last:border-b-0 focus:bg-indigo-50 focus:outline-none",children:[(0,o.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,o.jsxs)("div",{className:"text-gray-500",children:["KSh ",e.amount||"0"," \u2022 ",e.fee_type||"N/A"]})]},e.id)):(0,o.jsx)("div",{className:"p-3",children:(0,o.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"No fee structures found"})})})]}),de.fee_structure&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:de.fee_structure[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Term *"]}),(0,o.jsxs)("select",{value:U.term,onChange:e=>Ue("term",parseInt(e.target.value)),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+(de.term?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:1,children:"Term 1"}),(0,o.jsx)("option",{value:2,children:"Term 2"}),(0,o.jsx)("option",{value:3,children:"Term 3"})]}),de.term&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:de.term[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Custom Amount (Optional)"]}),(0,o.jsx)("input",{type:"number",step:"0.01",value:U.custom_amount||"",onChange:e=>Ue("custom_amount",e.target.value||null),placeholder:"Leave empty for default amount",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(de.custom_amount?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),de.custom_amount&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:de.custom_amount[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-1.5"}),"Fee Waiver"]}),(0,o.jsx)("div",{className:"flex items-center space-x-3",children:(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",checked:U.is_waived,onChange:e=>Ue("is_waived",e.target.checked),className:"w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"}),(0,o.jsx)("span",{className:"ml-2 text-xs text-gray-700",children:"Is this fee waived?"})]})}),de.is_waived&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:de.is_waived[0]})]}),U.is_waived&&(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-1.5"}),"Waiver Reason *"]}),(0,o.jsx)("textarea",{value:U.waiver_reason||"",onChange:e=>Ue("waiver_reason",e.target.value),placeholder:"Enter reason for fee waiver...",rows:2,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-100 focus:border-red-500 transition-all duration-200 bg-white "+(de.waiver_reason?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),de.waiver_reason&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:de.waiver_reason[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Assignment Status"]}),(0,o.jsx)("div",{className:"flex items-center space-x-3",children:(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",checked:U.is_active,onChange:e=>Ue("is_active",e.target.checked),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,o.jsx)("span",{className:"ml-2 text-xs text-gray-700",children:"Active assignment"})]})}),de.is_active&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:de.is_active[0]})]})]})}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:N,className:"px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 transition-all duration-200",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{try{pe(!0),ce({});const e={...U,custom_amount:U.custom_amount||null,waiver_reason:U.waiver_reason||void 0};await De.createAssignment(e),N(),He(),Oe(),I({message:"Fee assignment created successfully!",type:"success"}),setTimeout(()=>I(null),3e3)}catch(D){var e,t;if(console.error("Error creating assignment:",D),null!==(e=D.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors){const e=D.response.data.errors;e.non_field_errors?ce({non_field_errors:e.non_field_errors}):ce(e)}else ce({general:["Failed to create fee assignment. Please try again."]})}finally{pe(!1)}},disabled:ue,className:"px-3 py-1.5 text-xs font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 transition-all duration-200",children:ue?"Creating...":"Create Assignment"})]})]})}),M&&(0,o.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[10000] flex items-center p-4 rounded-lg shadow-lg transition-all duration-300",children:(0,o.jsxs)("div",{className:`flex items-center space-x-3 ${"success"===M.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"} px-6 py-4 rounded-lg shadow-xl`,children:["success"===M.type?F({className:"w-5 h-5 text-green-600"}):me({className:"w-5 h-5 text-red-600"}),(0,o.jsx)("span",{className:"text-sm font-medium",children:M.message}),(0,o.jsx)("button",{onClick:()=>I(null),className:"ml-3 text-gray-400 hover:text-gray-600",children:me({className:"w-4 h-4"})})]})}),ye&&(0,o.jsx)(Re,{assignment:ye,isOpen:fe,onClose:()=>{be(!1),je(null)},onUpdate:e=>{A(t=>t.map(t=>t.id===e.id?e:t)),ye&&ye.id===e.id&&je(e),I({message:"Fee assignment updated successfully!",type:"success"}),setTimeout(()=>I(null),3e3)}}),Ne&&ke&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm transition-all duration-300 ease-out z-50",children:(0,o.jsxs)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-300 ease-out flex flex-col",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-2 bg-blue-100 rounded-xl",children:H({className:"w-5 h-5 text-blue-600"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Edit Fee Assignment"}),(0,o.jsxs)("p",{className:"text-sm text-gray-500",children:[null===(t=ke.student_details)||void 0===t?void 0:t.pupil_name," - ",null===(s=ke.fee_structure_details)||void 0===s?void 0:s.name]})]})]}),(0,o.jsx)("button",{onClick:qe,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-xl transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,o.jsxs)("div",{className:"p-6 space-y-4",children:[Object.keys(Te).length>0&&(0,o.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-4 shadow-sm",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Please fix the errors below"}),Te.non_field_errors&&(0,o.jsx)("div",{className:"mt-2",children:Te.non_field_errors.map((e,t)=>(0,o.jsx)("p",{className:"text-sm text-red-700 bg-red-100 px-2 py-1 rounded-md mt-1",children:e},t))})]})]})}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Academic Year *"]}),(0,o.jsx)(Me,{value:Ce.academic_year||"",onChange:e=>We("academic_year",e),placeholder:"Select academic year (e.g., 2024-2025)",error:!!Te.academic_year}),Te.academic_year&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Te.academic_year[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Fee Structure *"]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",value:V,onChange:e=>G(e.target.value),placeholder:"Search and select a fee structure...",className:"w-full px-3 py-2 pr-8 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+(Te.fee_structure?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),onFocus:()=>{oe(!0),0===J.length&&Ie(V)},onBlur:()=>{setTimeout(()=>oe(!1),200)}}),(0,o.jsx)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 pointer-events-none",children:te?(0,o.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-indigo-600"}):(0,o.jsx)("svg",{className:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),ie&&(0,o.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:J.length>0?J.filter(e=>e&&e.id&&e.name).map(e=>(0,o.jsxs)("button",{onClick:()=>{Ee(t=>({...t,fee_structure:e.id})),G(`${e.name} - KSh ${e.amount||"0"}`),oe(!1)},className:"w-full px-3 py-2 text-left text-xs hover:bg-indigo-50 border-b border-gray-100 last:border-b-0 focus:bg-indigo-50 focus:outline-none",children:[(0,o.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,o.jsxs)("div",{className:"text-gray-500",children:["KSh ",e.amount||"0"," \u2022 ",e.fee_type||"N/A"]})]},e.id)):(0,o.jsx)("div",{className:"p-3",children:(0,o.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"No fee structures found"})})})]}),Te.fee_structure&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Te.fee_structure[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Term *"]}),(0,o.jsxs)("select",{value:Ce.term||1,onChange:e=>We("term",parseInt(e.target.value)),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+(Te.term?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:1,children:"Term 1"}),(0,o.jsx)("option",{value:2,children:"Term 2"}),(0,o.jsx)("option",{value:3,children:"Term 3"})]}),Te.term&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Te.term[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Custom Amount (Optional)"]}),(0,o.jsx)("input",{type:"number",step:"0.01",value:Ce.custom_amount||"",onChange:e=>We("custom_amount",e.target.value||null),placeholder:"Leave empty for default amount",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(Te.custom_amount?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Te.custom_amount&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Te.custom_amount[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-1.5"}),"Fee Waiver"]}),(0,o.jsx)("div",{className:"flex items-center space-x-3",children:(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",checked:Ce.is_waived||!1,onChange:e=>We("is_waived",e.target.checked),className:"w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"}),(0,o.jsx)("span",{className:"ml-2 text-xs text-gray-700",children:"Is this fee waived?"})]})}),Te.is_waived&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Te.is_waived[0]})]}),Ce.is_waived&&(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-1.5"}),"Waiver Reason *"]}),(0,o.jsx)("textarea",{value:Ce.waiver_reason||"",onChange:e=>We("waiver_reason",e.target.value),placeholder:"Enter reason for fee waiver...",rows:2,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-100 focus:border-red-500 transition-all duration-200 bg-white "+(Te.waiver_reason?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Te.waiver_reason&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Te.waiver_reason[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Assignment Status"]}),(0,o.jsx)("div",{className:"flex items-center space-x-3",children:(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",checked:Ce.is_active||!1,onChange:e=>We("is_active",e.target.checked),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,o.jsx)("span",{className:"ml-2 text-xs text-gray-700",children:"Active assignment"})]})}),Te.is_active&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Te.is_active[0]})]})]})}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:qe,className:"px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 transition-all duration-200",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if(ke&&Ce){Pe(!0),Le({});try{const e=await l.authenticatedRequest(`/fees/assignments/${ke.id}/`,{method:"PUT",body:JSON.stringify(Ce)}),t={...ke,...e,student_details:e.student_details||ke.student_details,fee_structure_details:e.fee_structure_details||ke.fee_structure_details,approved_by_details:e.approved_by_details||ke.approved_by_details};A(e=>e.map(e=>e.id===t.id?t:e)),qe(),I({message:"Fee assignment updated successfully!",type:"success"}),setTimeout(()=>I(null),3e3)}catch(D){var e,t;if(console.error("Error updating assignment:",D),null!==(e=D.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors){const e=D.response.data.errors;e.non_field_errors?Le({non_field_errors:e.non_field_errors}):Le(e)}else Le({general:["Failed to update fee assignment. Please try again."]})}finally{Pe(!1)}}},disabled:Ae,className:"px-3 py-1.5 text-xs font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 transition-all duration-200",children:Ae?"Updating...":"Update Assignment"})]})]})})]})},Ue=e=>{var t,s,a,n,i,d,c,u,m,x,p;let{invoice:h,isOpen:g,onClose:f}=e;const[b,y]=(0,r.useState)(!1),v=e=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(parseFloat(e)),j=e=>new Date(e).toLocaleDateString("en-KE",{year:"numeric",month:"long",day:"numeric"}),N=e=>{switch(e){case"generated":return"bg-blue-100 text-blue-800";case"sent":return"bg-yellow-100 text-yellow-800";case"partially_paid":return"bg-orange-100 text-orange-800";case"paid":return"bg-green-100 text-green-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},w=[{title:"Invoice Information",tag:"invoice_info",description:"Core invoice identification and basic details",details:[{label:"Invoice ID",value:h.id},{label:"Invoice Number",value:h.invoice_number},{label:"Academic Year",value:h.academic_year},{label:"Term",value:`Term ${h.term}`},{label:"Status",value:h.status_display,isStatus:!0}]},{title:"Student Details",tag:"student_details",description:"Student information and current class details",details:[{label:"Student Name",value:(null===(t=h.student_details)||void 0===t?void 0:t.pupil_name)||"Not provided"},{label:"Admission Number",value:(null===(s=h.student_details)||void 0===s?void 0:s.admission_number)||"Not provided"},{label:"Current Class",value:(null===(a=h.student_details)||void 0===a||null===(n=a.current_class)||void 0===n?void 0:n.name)||"Not provided"},{label:"Stream",value:(null===(i=h.student_details)||void 0===i||null===(d=i.current_class)||void 0===d||null===(c=d.stream)||void 0===c?void 0:c.name)||"Not provided"},{label:"Guardian Name",value:(null===(u=h.student_details)||void 0===u?void 0:u.guardian_name)||"Not provided"},{label:"Guardian Phone",value:(null===(m=h.student_details)||void 0===m?void 0:m.guardian_phone)||"Not provided"}]},{title:"Invoice Dates",tag:"invoice_dates",description:"Important dates related to the invoice",details:[{label:"Issue Date",value:h.issue_date?j(h.issue_date):"Not provided"},{label:"Due Date",value:h.due_date?j(h.due_date):"Not provided"},{label:"Paid Date",value:h.paid_date?j(h.paid_date):"Not paid"},{label:"Is Overdue",value:h.is_overdue,isBoolean:!0}]},{title:"Financial Summary",tag:"financial_summary",description:"Invoice amounts and payment details",details:[{label:"Total Amount",value:v(h.total_amount)},{label:"Total Discount",value:v(h.total_discount)},{label:"Total Waiver",value:v(h.total_waiver)},{label:"Total Late Fee",value:v(h.total_late_fee)},{label:"Net Amount",value:v(h.net_amount)},{label:"Amount Paid",value:v(h.amount_paid)},{label:"Balance Due",value:v(h.balance_due)}]},{title:"Invoice Items",tag:"invoice_items",description:"Detailed breakdown of invoice items",details:(null===(x=h.items)||void 0===x?void 0:x.map((e,t)=>{var s,r;return{label:`${(null===(s=e.fee_structure_details)||void 0===s?void 0:s.name)||"Item"} (${t+1})`,value:`${v(e.net_amount)} - ${(null===(r=e.fee_structure_details)||void 0===r?void 0:r.fee_type)||"N/A"}`,isItem:!0}}))||[{label:"No Items",value:"No items found"}]},{title:"System Information",tag:"system_info",description:"Creation and update timestamps",details:[{label:"Created At",value:h.created_at?j(h.created_at):"Not provided"},{label:"Updated At",value:h.updated_at?j(h.updated_at):"Not provided"},{label:"Notes",value:h.notes||"No notes"}]}];return g?(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10001]",children:(0,o.jsxs)("div",{className:"bg-blue-100 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[85vh] overflow-hidden",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-blue-200",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-blue-600 rounded flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,o.jsxs)("h2",{className:"text-lg font-bold text-blue-900",children:[(null===(p=h.student_details)||void 0===p?void 0:p.pupil_name)||"Student"," - ",h.invoice_number]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:async()=>{y(!0);try{const e=l.getAuthHeaders(),t=`/fees/invoices/${h.id}/download_pdf/`.startsWith("/")?`/fees/invoices/${h.id}/download_pdf/`.substring(1):`/fees/invoices/${h.id}/download_pdf/`,s=`${({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://127.0.0.1:8000/api/v1").endsWith("/")?({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://127.0.0.1:8000/api/v1").slice(0,-1):{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://127.0.0.1:8000/api/v1"}/${t}`,r=await fetch(s,{method:"GET",headers:{...e}});if(!r.ok)throw new Error("Failed to download PDF");const a=await r.blob(),n=window.URL.createObjectURL(a),i=document.createElement("a");i.href=n,i.download=`invoice-${h.invoice_number}.pdf`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)}catch(e){console.error("Error downloading PDF:",e),alert("Failed to download PDF. Please try again.")}finally{y(!1)}},disabled:b,className:"w-8 h-8 bg-white rounded-full flex items-center justify-center hover:bg-blue-50 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:b?"Downloading...":"Download PDF",children:b?(0,o.jsx)("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}):$({className:"w-4 h-4 text-blue-600"})}),(0,o.jsx)("button",{onClick:f,className:"w-8 h-8 bg-white rounded-full flex items-center justify-center hover:bg-blue-50 transition-colors duration-200",title:"Close",children:me({className:"w-4 h-4 text-blue-600"})})]})]}),(0,o.jsx)("div",{className:"overflow-y-auto max-h-[calc(85vh-120px)] p-3 space-y-3",children:w.map((e,t)=>(0,o.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,o.jsx)("h3",{className:"text-sm font-bold text-gray-900",children:e.title}),(0,o.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.tag})]}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:e.description}),(0,o.jsx)("div",{className:"space-y-0.5",children:e.details.map((e,t)=>(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-blue-200 last:border-b-0",children:[(0,o.jsxs)("span",{className:"text-xs font-semibold text-gray-800 flex-shrink-0 px-2 py-1 "+("Invoice ID"===e.label?"w-20":"w-40"),children:[e.label,":"]}),(0,o.jsx)("div",{className:"text-xs text-gray-900 text-right "+("Invoice ID"===e.label?"w-52":"w-32"),children:(0,o.jsx)("span",{children:e.isStatus?(0,o.jsx)("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium ${N(h.status)}`,children:e.value}):e.isBoolean?(0,o.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium "+(e.value?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:e.value?"Yes":"No"}):e.isItem?(0,o.jsx)("span",{className:"text-xs text-gray-700",children:e.value}):String(e.value||"Not provided")})})]},t))})]},e.tag))}),(0,o.jsx)("div",{className:"px-4 pt-4 pb-6 border-t border-blue-200 bg-blue-50",children:(0,o.jsx)("div",{className:"flex justify-end space-x-2",children:(0,o.jsx)("button",{onClick:f,className:"px-6 py-1.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 font-medium text-sm",children:"Close"})})})]})}):null},Be=[{value:"cash",label:"Cash"},{value:"cheque",label:"Cheque"},{value:"bank_transfer",label:"Bank Transfer"},{value:"mobile_money",label:"Mobile Money"},{value:"card",label:"Credit/Debit Card"},{value:"online",label:"Online Payment"}],$e=e=>{let{isOpen:t,onClose:s,invoice:a,onPaymentSuccess:n}=e;const[l,i]=(0,r.useState)({amount:"",invoice:"",method:"bank_transfer",reference_number:"",student:"",payment_date:(new Date).toISOString().split("T")[0],bank_name:"",branch_name:"",cheque_number:"",transaction_id:"",verification_date:(new Date).toISOString(),notes:""}),[d,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)({}),[x,p]=(0,r.useState)(""),[h,g]=(0,r.useState)(0);r.useEffect(()=>{a&&(i(e=>({...e,amount:a.balance_due||a.net_amount,invoice:a.id,student:a.student,reference_number:"",bank_name:"",branch_name:"",cheque_number:"",transaction_id:"",notes:""})),m({}),p(""))},[a]);const f=(e,t)=>{if(i(s=>({...s,[e]:t})),"amount"===e&&a){const e=parseFloat(t)||0,s=parseFloat(a.balance_due)||0;g(e>s?e-s:0)}u[e]&&m(t=>({...t,[e]:[]}))},b=e=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(parseFloat(e));return t&&a?(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-end z-[10002] transition-all duration-300 ease-in-out",children:(0,o.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 h-full w-96 shadow-2xl overflow-y-auto border-l border-gray-100 transform transition-transform duration-300 ease-out",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-green-50 to-emerald-50",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-1.5 bg-green-100 rounded-lg",children:B({className:"w-4 h-4 text-green-600"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Record Payment"}),(0,o.jsxs)("p",{className:"text-xs text-gray-600",children:["Invoice #",a.invoice_number]})]})]}),(0,o.jsx)("button",{onClick:s,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[(0,o.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[Y({className:"w-4 h-4 text-blue-600"}),(0,o.jsx)("h3",{className:"text-sm font-semibold text-blue-900",children:"Invoice Details"})]}),(0,o.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-blue-700",children:"Full Name:"}),(0,o.jsx)("span",{className:"text-blue-900 font-medium",children:a.student_details.pupil_name})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-blue-700",children:"Admission No:"}),(0,o.jsx)("span",{className:"text-blue-900 font-medium",children:a.student_details.admission_number})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-blue-700",children:"Total Amount:"}),(0,o.jsx)("span",{className:"text-blue-900 font-medium",children:b(a.net_amount)})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-blue-700",children:"Balance Due:"}),(0,o.jsx)("span",{className:"text-blue-900 font-medium",children:b(a.balance_due)})]})]})]}),x&&(0,o.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[D({className:"w-4 h-4 text-green-600"}),(0,o.jsx)("p",{className:"text-green-800 text-sm font-medium",children:x})]})}),u.general&&(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[G({className:"w-4 h-4 text-red-600"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-red-800 text-sm font-medium",children:"Error"}),(0,o.jsx)("p",{className:"text-red-700 text-xs mt-1",children:u.general[0]})]})]})}),(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0),m({}),p("");try{const e={amount:l.amount,invoice:l.invoice,method:l.method,reference_number:l.reference_number,student:l.student,payment_date:l.payment_date,bank_name:l.bank_name||void 0,branch_name:l.branch_name||void 0,cheque_number:l.cheque_number||void 0,transaction_id:l.transaction_id,verification_date:l.verification_date,notes:l.notes||void 0};await De.createPayment(e),p("Payment recorded successfully!"),setTimeout(()=>{null===n||void 0===n||n(),s()},1500)}catch(r){var t;console.error("Error creating payment:",r),null!==(t=r.response)&&void 0!==t&&t.data?m(r.response.data):m({general:["Failed to record payment. Please try again."]})}finally{c(!1)}},className:"space-y-4",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Amount *"]}),(0,o.jsx)("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-blue-700",children:"Current Balance:"}),(0,o.jsx)("span",{className:"text-xs font-bold text-blue-900",children:b(a.balance_due)})]})}),(0,o.jsx)("input",{type:"number",step:"0.01",value:l.amount,onChange:e=>f("amount",e.target.value),placeholder:"Enter payment amount",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(u.amount?"border-red-300 bg-red-50":h>0?"border-yellow-300 bg-yellow-50":"border-gray-300 hover:border-gray-400"),required:!0}),h>0&&(0,o.jsx)("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[G({className:"w-3 h-3 text-yellow-600"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs font-medium text-yellow-800",children:"Overpayment Detected"}),(0,o.jsxs)("p",{className:"text-xs text-yellow-700",children:["You are paying ",b(h.toString())," more than the balance due."]})]})]})}),u.amount&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:u.amount[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Payment Method *"]}),(0,o.jsx)("select",{value:l.method,onChange:e=>f("method",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(u.method?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),required:!0,children:Be.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),u.method&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:u.method[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Reference Number *"]}),(0,o.jsx)("input",{type:"text",value:l.reference_number,onChange:e=>f("reference_number",e.target.value),placeholder:"Enter reference number",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+(u.reference_number?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),required:!0}),u.reference_number&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:u.reference_number[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Payment Date *"]}),(0,o.jsx)("input",{type:"date",value:l.payment_date,onChange:e=>f("payment_date",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(u.payment_date?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),required:!0}),u.payment_date&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:u.payment_date[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Transaction ID *"]}),(0,o.jsx)("input",{type:"text",value:l.transaction_id,onChange:e=>f("transaction_id",e.target.value),placeholder:"Enter transaction ID",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+(u.transaction_id?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),required:!0}),u.transaction_id&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:u.transaction_id[0]})]}),("bank_transfer"===l.method||"cheque"===l.method)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"Bank Name"]}),(0,o.jsx)("input",{type:"text",value:l.bank_name,onChange:e=>f("bank_name",e.target.value),placeholder:"Enter bank name",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 transition-all duration-200 bg-white "+(u.bank_name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),u.bank_name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:u.bank_name[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-teal-500 rounded-full mr-1.5"}),"Branch Name"]}),(0,o.jsx)("input",{type:"text",value:l.branch_name,onChange:e=>f("branch_name",e.target.value),placeholder:"Enter branch name",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-100 focus:border-teal-500 transition-all duration-200 bg-white "+(u.branch_name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),u.branch_name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:u.branch_name[0]})]})]}),"cheque"===l.method&&(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-yellow-500 rounded-full mr-1.5"}),"Cheque Number"]}),(0,o.jsx)("input",{type:"text",value:l.cheque_number,onChange:e=>f("cheque_number",e.target.value),placeholder:"Enter cheque number",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-500 transition-all duration-200 bg-white "+(u.cheque_number?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),u.cheque_number&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:u.cheque_number[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full mr-1.5"}),"Notes"]}),(0,o.jsx)("textarea",{value:l.notes,onChange:e=>f("notes",e.target.value),placeholder:"Enter any additional notes",rows:3,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-100 focus:border-gray-500 transition-all duration-200 bg-white resize-none "+(u.notes?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),u.notes&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:u.notes[0]})]}),(0,o.jsxs)("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[(0,o.jsx)("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-100 transition-all duration-200",children:"Cancel"}),(0,o.jsx)("button",{type:"submit",disabled:d,className:"flex-1 px-4 py-2 text-xs font-medium text-white bg-green-600 border border-transparent rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:d?"Recording...":"Record Payment"})]})]})]})]})}):null},He=e=>{let{searchQuery:t,setSearchQuery:s,debouncedSearchQuery:a,sortBy:n,setSortBy:i,sortDirection:d,setSortDirection:c,feeTypeFilter:u,setFeeTypeFilter:m,categoryFilter:x,setCategoryFilter:p,statusFilter:h,setStatusFilter:g,clearFilters:f,isAddDrawerOpen:b,openAddDrawer:y,closeAddDrawer:v,onFilterOptionsUpdate:j}=e;const[N,w]=(0,r.useState)([]),_=(0,r.useRef)([]),[k,S]=(0,r.useState)(!1),[C,E]=(0,r.useState)(null),[A,P]=(0,r.useState)(null),[T,L]=(0,r.useState)(!1),[F,D]=(0,r.useState)(null),[O,z]=(0,r.useState)(null),[R,M]=(0,r.useState)(null),[I,U]=(0,r.useState)(!1),[W,V]=(0,r.useState)(null),G=(0,r.useRef)({}),K=e=>{const t=new Map,s=new Map,r=new Map;e.forEach(e=>{if(e.status){const s=e.status.charAt(0).toUpperCase()+e.status.slice(1).replace("_"," ");t.set(e.status,{value:e.status,label:s})}if(e.items&&Array.isArray(e.items)&&e.items.forEach(e=>{var t;if(null!==(t=e.fee_structure_details)&&void 0!==t&&t.fee_type){const t=e.fee_structure_details.fee_type,r=t.charAt(0).toUpperCase()+t.slice(1).replace("_"," ");s.set(t,{value:t,label:r})}}),e.issue_date){const t=new Date(e.issue_date),s=t.toLocaleString("default",{month:"long"}).toLowerCase(),a=t.toLocaleString("default",{month:"long"});r.set(s,{value:s,label:a})}});const a={invoiceStatuses:Array.from(t.values()),feeTypes:Array.from(s.values()),months:Array.from(r.values())};return j&&j(a),a},J=async e=>{S(!0),E(null);try{const t=(await De.getAllInvoices(e)).results;w(t),u||x||h||a?K(_.current):(_.current=t,K(t))}catch(t){E("Failed to fetch invoices"),console.error("Error fetching invoices:",t),K([])}finally{S(!1)}};(0,r.useEffect)(()=>{J({search:a||void 0,ordering:n?`${"desc"===d?"-":""}${n}`:void 0})},[a,n,d]),(0,r.useEffect)(()=>{const e=e=>{if(O){const t=e.target;t.closest("[data-dropdown-portal]")||t.closest("[data-dropdown-button]")||se()}};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[O]);const Z=e=>{switch(e){case"generated":return"bg-blue-100 text-blue-800";case"sent":return"bg-yellow-100 text-yellow-800";case"partially_paid":return"bg-orange-100 text-orange-800";case"paid":return"bg-green-100 text-green-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},X=e=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(parseFloat(e)),ee=e=>new Date(e).toLocaleDateString("en-KE",{year:"numeric",month:"short",day:"numeric"}),te=e=>{P(e),L(!0)},se=()=>{z(null),M(null)},re=async e=>{D(e.id);try{const t=l.getAuthHeaders(),s=`/fees/invoices/${e.id}/download_pdf/`.startsWith("/")?`/fees/invoices/${e.id}/download_pdf/`.substring(1):`/fees/invoices/${e.id}/download_pdf/`,r=`${({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://127.0.0.1:8000/api/v1").endsWith("/")?({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://127.0.0.1:8000/api/v1").slice(0,-1):{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://127.0.0.1:8000/api/v1"}/${s}`,a=await fetch(r,{method:"GET",headers:{...t}});if(!a.ok)throw new Error("Failed to download PDF");const n=await a.blob(),i=window.URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=`invoice-${e.invoice_number}.pdf`,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(i)}catch(C){console.error("Error downloading PDF:",C),alert("Failed to download PDF. Please try again.")}finally{D(null)}};return k&&0===N.length?(0,o.jsx)("div",{className:"p-6",children:(0,o.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[k&&(0,o.jsxs)("div",{className:"p-4 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-xs text-gray-600",children:"Loading fee invoices..."})]}),C&&(0,o.jsxs)("div",{className:"p-4 text-center",children:[(0,o.jsxs)("div",{className:"text-red-600 mb-3",children:[me({className:"w-8 h-8 mx-auto mb-2"}),(0,o.jsx)("p",{className:"text-sm font-medium",children:"Error Loading Fee Invoices"}),(0,o.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:C})]}),(0,o.jsx)("button",{onClick:()=>J(),className:"px-3 py-1.5 bg-blue-600 text-white rounded-md text-xs hover:bg-blue-700 transition-colors duration-200",children:"Try Again"})]}),!k&&!C&&(0,o.jsxs)("div",{className:"overflow-x-auto",children:[(0,o.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-bold text-gray-500 tracking-wider",children:"Invoice"}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-bold text-gray-500 tracking-wider",children:"Student"}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-bold text-gray-500 tracking-wider",children:"Academic year"}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-bold text-gray-500 tracking-wider",children:"Issue date"}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-bold text-gray-500 tracking-wider",children:"Due date"}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-bold text-gray-500 tracking-wider",children:"Amount"}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-bold text-gray-500 tracking-wider",children:"Status"}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-bold text-gray-500 tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(e=>(0,o.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,o.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"text-xs font-medium text-gray-900",children:e.invoice_number}),(0,o.jsxs)("div",{className:"text-xs text-gray-500",children:["Term ",e.term]})]})}),(0,o.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"text-xs font-medium text-gray-900",children:e.student_details.pupil_name}),(0,o.jsx)("div",{className:"text-xs text-gray-500",children:e.student_details.admission_number})]})}),(0,o.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:e.academic_year}),(0,o.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:ee(e.issue_date)}),(0,o.jsxs)("td",{className:"px-3 py-2 whitespace-nowrap",children:[(0,o.jsx)("div",{className:"text-xs text-gray-900",children:ee(e.due_date)}),e.is_overdue&&(0,o.jsx)("div",{className:"text-xs text-red-600 font-medium",children:"Overdue"})]}),(0,o.jsxs)("td",{className:"px-3 py-2 whitespace-nowrap",children:[(0,o.jsx)("div",{className:"text-xs font-medium text-gray-900",children:X(e.net_amount)}),parseFloat(e.balance_due)>0&&(0,o.jsxs)("div",{className:"text-xs text-gray-500",children:["Bal: ",X(e.balance_due)]})]}),(0,o.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,o.jsx)("span",{className:`inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full ${Z(e.status)}`,children:e.status_display})}),(0,o.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-xs font-medium",children:(0,o.jsxs)("div",{className:"flex space-x-1",children:[(0,o.jsx)("button",{onClick:()=>te(e),className:"text-blue-600 hover:text-blue-900",title:"View Details",children:Q({className:"w-3 h-3"})}),(0,o.jsx)("button",{onClick:()=>re(e),disabled:F===e.id,className:"text-green-600 hover:text-green-900 disabled:opacity-50 disabled:cursor-not-allowed",title:F===e.id?"Downloading...":"Download PDF",children:F===e.id?(0,o.jsx)("div",{className:"w-3 h-3 border-2 border-green-600 border-t-transparent rounded-full animate-spin"}):$({className:"w-3 h-3"})}),(0,o.jsx)("div",{className:"relative",ref:t=>{G.current[e.id]=t},children:(0,o.jsx)("button",{onClick:t=>((e,t)=>{if(O===e)z(null),M(null);else{const s=t.currentTarget.getBoundingClientRect();M({top:s.bottom+window.scrollY+4,left:s.right+window.scrollX-192}),z(e)}})(e.id,t),className:"text-gray-600 hover:text-gray-900 focus:outline-none",title:"More actions","data-dropdown-button":!0,children:q({className:"w-3 h-3"})})})]})})]},e.id))})]}),0===N.length&&(0,o.jsxs)("div",{className:"text-center py-8",children:[Y({className:"mx-auto h-8 w-8 text-gray-400"}),(0,o.jsx)("h3",{className:"mt-2 text-xs font-medium text-gray-900",children:"No invoices found"}),(0,o.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:t?"Try adjusting your search criteria.":"Get started by generating invoices for students."})]})]})]}),A&&(0,o.jsx)(Ue,{invoice:A,isOpen:T,onClose:()=>{L(!1),P(null)}}),O&&R&&(0,ve.createPortal)((0,o.jsxs)("div",{className:"fixed z-50 bg-white rounded-md shadow-lg border border-gray-200 py-1 w-48",style:{top:R.top,left:R.left},"data-dropdown-portal":!0,children:[(0,o.jsxs)("button",{onClick:()=>{return e=N.find(e=>e.id===O),V(e),U(!0),void se();var e},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-gray-100",children:[B({className:"mr-2 text-green-600"}),"Pay Fees"]}),(0,o.jsxs)("button",{onClick:()=>te(N.find(e=>e.id===O)),className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-gray-100",children:[Q({className:"mr-2 text-blue-600"}),"View Details"]}),(0,o.jsxs)("button",{onClick:()=>re(N.find(e=>e.id===O)),disabled:F===O,className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:[$({className:"mr-2 text-green-600"}),"Download PDF"]}),(0,o.jsxs)("button",{onClick:()=>{return e=N.find(e=>e.id===O),console.log("Edit invoice:",e.id),alert(`Edit invoice ${e.invoice_number}`),void se();var e},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-gray-100",children:[H({className:"mr-2 text-blue-600"}),"Edit Invoice"]}),(0,o.jsxs)("button",{onClick:()=>{return e=N.find(e=>e.id===O),console.log("Delete invoice:",e.id),window.confirm(`Are you sure you want to delete invoice ${e.invoice_number}?`)&&alert(`Delete invoice ${e.invoice_number}`),void se();var e},className:"flex items-center w-full px-3 py-2 text-xs text-red-700 hover:bg-red-50",children:[xe({className:"mr-2 text-red-600"}),"Delete Invoice"]})]}),document.body),(0,o.jsx)($e,{isOpen:I,onClose:()=>{U(!1),V(null)},invoice:W,onPaymentSuccess:()=>{J()}})]})},qe=e=>{var t,s,a,n,i,d,c,u,m,x,p,h,g,f,b,y,v,j,N,w;let{payment:_,isOpen:k,onClose:S}=e;const[C,E]=(0,r.useState)(!1),[A,P]=(0,r.useState)(!1),[T,L]=(0,r.useState)(null),F=e=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(parseFloat(e)),D=e=>new Date(e).toLocaleString("en-KE",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),O=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case"refunded":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},z=e=>{switch(e){case"cash":return"bg-green-100 text-green-800";case"bank_transfer":return"bg-blue-100 text-blue-800";case"cheque":return"bg-purple-100 text-purple-800";case"mobile_money":return"bg-orange-100 text-orange-800";case"card":return"bg-indigo-100 text-indigo-800";case"online":return"bg-cyan-100 text-cyan-800";default:return"bg-gray-100 text-gray-800"}},R=[{title:"Payment Information",tag:"payment_info",description:"Core payment identification and basic details",details:[{label:"Payment ID",value:_.id},{label:"Receipt Number",value:_.receipt_number},{label:"Amount",value:F(_.amount)},{label:"Payment Method",value:_.method_display,isMethod:!0},{label:"Status",value:_.status_display,isStatus:!0}]},{title:"Student Details",tag:"student_details",description:"Student information and current class details",details:[{label:"Student Name",value:(null===(t=_.student_details)||void 0===t?void 0:t.pupil_name)||"Not provided"},{label:"Admission Number",value:(null===(s=_.student_details)||void 0===s?void 0:s.admission_number)||"Not provided"},{label:"Current Class",value:(null===(a=_.student_details)||void 0===a||null===(n=a.current_class)||void 0===n?void 0:n.name)||"Not provided"},{label:"Stream",value:(null===(i=_.student_details)||void 0===i||null===(d=i.current_class)||void 0===d||null===(c=d.stream)||void 0===c?void 0:c.name)||"Not provided"},{label:"Guardian Name",value:(null===(u=_.student_details)||void 0===u?void 0:u.guardian_name)||"Not provided"},{label:"Guardian Phone",value:(null===(m=_.student_details)||void 0===m?void 0:m.guardian_phone)||"Not provided"}]},{title:"Invoice Details",tag:"invoice_details",description:"Related invoice information",details:[{label:"Invoice Number",value:(null===(x=_.invoice_details)||void 0===x?void 0:x.invoice_number)||"Not provided"},{label:"Total Amount",value:null!==(p=_.invoice_details)&&void 0!==p&&p.total_amount?F(_.invoice_details.total_amount):"Not provided"},{label:"Balance Due",value:null!==(h=_.invoice_details)&&void 0!==h&&h.balance_due?F(_.invoice_details.balance_due):"Not provided"},{label:"Invoice Status",value:(null===(g=_.invoice_details)||void 0===g?void 0:g.status)||"Not provided"}]},{title:"Payment Dates",tag:"payment_dates",description:"Important dates related to the payment",details:[{label:"Payment Date",value:_.payment_date?(M=_.payment_date,new Date(M).toLocaleDateString("en-KE",{year:"numeric",month:"long",day:"numeric"})):"Not provided"},{label:"Verification Date",value:_.verification_date?D(_.verification_date):"Not verified"},{label:"Created At",value:_.created_at?D(_.created_at):"Not provided"},{label:"Updated At",value:_.updated_at?D(_.updated_at):"Not provided"}]},{title:"Transaction Details",tag:"transaction_details",description:"Payment method specific information",details:[{label:"Reference Number",value:_.reference_number||"Not provided"},{label:"Transaction ID",value:_.transaction_id||"Not provided"},{label:"Bank Name",value:_.bank_name||"Not applicable"},{label:"Branch Name",value:_.branch_name||"Not applicable"},{label:"Cheque Number",value:_.cheque_number||"Not applicable"},{label:"Notes",value:_.notes||"No notes"}]},{title:"Staff Information",tag:"staff_info",description:"Staff members involved in the payment process",details:[{label:"Collected By",value:`${(null===(f=_.collected_by_details)||void 0===f?void 0:f.first_name)||""} ${(null===(b=_.collected_by_details)||void 0===b?void 0:b.last_name)||""}`.trim()||"Not provided"},{label:"Collector Email",value:(null===(y=_.collected_by_details)||void 0===y?void 0:y.email)||"Not provided"},{label:"Collector Role",value:(null===(v=_.collected_by_details)||void 0===v?void 0:v.role)||"Not provided"},{label:"Verified By",value:_.verified_by_details?`${_.verified_by_details.first_name} ${_.verified_by_details.last_name}`.trim():"Not verified"},{label:"Verifier Email",value:(null===(j=_.verified_by_details)||void 0===j?void 0:j.email)||"Not provided"},{label:"Verifier Role",value:(null===(N=_.verified_by_details)||void 0===N?void 0:N.role)||"Not provided"}]}];var M;return k?(0,o.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10001]",children:[(0,o.jsxs)("div",{className:"bg-blue-100 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[85vh] overflow-hidden",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-blue-200",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-blue-600 rounded flex items-center justify-center",children:B({className:"w-4 h-4 text-white"})}),(0,o.jsxs)("h2",{className:"text-lg font-bold text-blue-900",children:[(null===(w=_.student_details)||void 0===w?void 0:w.pupil_name)||"Student"," - ",_.receipt_number]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:async()=>{try{const e=l.getAuthHeaders(),t=`/fees/payments/${_.id}/preview_receipt/`.startsWith("/")?`/fees/payments/${_.id}/preview_receipt/`.substring(1):`/fees/payments/${_.id}/preview_receipt/`,s=`${({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://127.0.0.1:8000/api/v1").endsWith("/")?({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://127.0.0.1:8000/api/v1").slice(0,-1):{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://127.0.0.1:8000/api/v1"}/${t}`,r=await fetch(s,{method:"GET",headers:{...e}});if(!r.ok){const e=await r.text();throw console.error("API Error Response:",e),new Error(`Failed to preview receipt: ${r.status} ${r.statusText}`)}const a=await r.blob();if(0===a.size)throw new Error("Received empty file from server");const n=window.URL.createObjectURL(a);L(n),P(!0)}catch(e){console.error("Error previewing receipt:",e);const t=e instanceof Error?e.message:"Unknown error occurred";alert(`Failed to preview receipt: ${t}`)}},className:"w-8 h-8 bg-white rounded-full flex items-center justify-center hover:bg-blue-50 transition-colors duration-200",title:"Preview Receipt",children:Q({className:"w-4 h-4 text-blue-600"})}),(0,o.jsx)("button",{onClick:async()=>{E(!0);try{const e=l.getAuthHeaders(),t=`/fees/payments/${_.id}/download_receipt/`.startsWith("/")?`/fees/payments/${_.id}/download_receipt/`.substring(1):`/fees/payments/${_.id}/download_receipt/`,s=`${({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://127.0.0.1:8000/api/v1").endsWith("/")?({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://127.0.0.1:8000/api/v1").slice(0,-1):{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://127.0.0.1:8000/api/v1"}/${t}`,r=await fetch(s,{method:"GET",headers:{...e}});if(!r.ok){const e=await r.text();throw console.error("API Error Response:",e),new Error(`Failed to download receipt: ${r.status} ${r.statusText}`)}const a=await r.blob();if(0===a.size)throw new Error("Received empty file from server");const n=window.URL.createObjectURL(a),i=document.createElement("a");i.href=n,i.download=`receipt-${_.receipt_number}.pdf`,i.style.display="none",document.body.appendChild(i),i.click(),setTimeout(()=>{document.body.removeChild(i),window.URL.revokeObjectURL(n)},100)}catch(e){console.error("Error downloading receipt:",e);const t=e instanceof Error?e.message:"Unknown error occurred";alert(`Failed to download receipt: ${t}`)}finally{E(!1)}},disabled:C,className:"w-8 h-8 bg-white rounded-full flex items-center justify-center hover:bg-blue-50 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:C?"Downloading...":"Download Receipt",children:C?(0,o.jsx)("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}):$({className:"w-4 h-4 text-blue-600"})}),(0,o.jsx)("button",{onClick:S,className:"w-8 h-8 bg-white rounded-full flex items-center justify-center hover:bg-blue-50 transition-colors duration-200",title:"Close",children:me({className:"w-4 h-4 text-blue-600"})})]})]}),(0,o.jsx)("div",{className:"overflow-y-auto max-h-[calc(85vh-120px)] p-3 space-y-3",children:R.map((e,t)=>(0,o.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,o.jsx)("h3",{className:"text-sm font-bold text-gray-900",children:e.title}),(0,o.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.tag})]}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:e.description}),(0,o.jsx)("div",{className:"space-y-0.5",children:e.details.map((e,t)=>(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-blue-200 last:border-b-0",children:[(0,o.jsxs)("span",{className:"text-xs font-semibold text-gray-800 flex-shrink-0 px-2 py-1 "+("Payment ID"===e.label?"w-20":"w-40"),children:[e.label,":"]}),(0,o.jsx)("div",{className:"text-xs text-gray-900 text-right "+("Payment ID"===e.label?"w-52":"w-32"),children:(0,o.jsx)("span",{children:e.isStatus?(0,o.jsx)("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium ${O(_.status)}`,children:e.value}):e.isMethod?(0,o.jsx)("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium ${z(_.method)}`,children:e.value}):e.isBoolean?(0,o.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium "+(e.value?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:e.value?"Yes":"No"}):String(e.value||"Not provided")})})]},t))})]},e.tag))}),(0,o.jsx)("div",{className:"px-4 pt-4 pb-6 border-t border-blue-200 bg-blue-50",children:(0,o.jsx)("div",{className:"flex justify-end space-x-2",children:(0,o.jsx)("button",{onClick:S,className:"px-6 py-1.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 font-medium text-sm",children:"Close"})})})]}),A&&T&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[10002]",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,o.jsxs)("h3",{className:"text-lg font-bold text-gray-900",children:["Receipt Preview - ",_.receipt_number]}),(0,o.jsx)("button",{onClick:()=>{P(!1),T&&(window.URL.revokeObjectURL(T),L(null))},className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors duration-200",title:"Close Preview",children:me({className:"w-4 h-4 text-gray-600"})})]}),(0,o.jsx)("div",{className:"p-4 h-[calc(90vh-80px)] overflow-auto",children:(0,o.jsx)("iframe",{src:T,className:"w-full h-full border-0",title:`Receipt Preview - ${_.receipt_number}`})})]})})]}):null},We=e=>{let{searchQuery:t,setSearchQuery:s,debouncedSearchQuery:a,sortBy:n,setSortBy:i,sortDirection:d,setSortDirection:c,methodFilter:u,setMethodFilter:m,statusFilter:x,setStatusFilter:p,clearFilters:h,onFilterOptionsUpdate:g}=e;const[f,b]=(0,r.useState)([]),y=(0,r.useRef)([]),[v,j]=(0,r.useState)(!1),[N,w]=(0,r.useState)(null),[_,k]=(0,r.useState)(0),[S,C]=(0,r.useState)(1),[E,A]=(0,r.useState)(1),[P,T]=(0,r.useState)(null),[L,F]=(0,r.useState)(!1),[D,O]=(0,r.useState)(null),z=e=>{const t=new Map,s=new Map,r=new Map;e.forEach(e=>{if(e.status){const s=e.status.charAt(0).toUpperCase()+e.status.slice(1);t.set(e.status,{value:e.status,label:s})}if(e.method){const t=e.method.charAt(0).toUpperCase()+e.method.slice(1).replace("_"," ");s.set(e.method,{value:e.method,label:t})}if(e.amount){const t=parseFloat(e.amount);let s="",a="";t>=0&&t<=1e3?(s="0-1000",a="KSh 0 - KSh 1,000"):t>1e3&&t<=5e3?(s="1000-5000",a="KSh 1,000 - KSh 5,000"):t>5e3&&t<=1e4?(s="5000-10000",a="KSh 5,000 - KSh 10,000"):t>1e4&&(s="10000+",a="KSh 10,000+"),s&&r.set(s,{value:s,label:a})}});const a={paymentStatuses:Array.from(t.values()),paymentMethods:Array.from(s.values()),amountRanges:Array.from(r.values())};return g&&g(a),a},R=async e=>{j(!0),w(null);try{const t=await De.getAllPayments(e),s=t.results;b(s),k(t.count),C(t.page),A(t.total_pages),u||x||a?z(y.current):(y.current=s,z(s))}catch(t){w("Failed to fetch payments"),console.error("Error fetching payments:",t),z([])}finally{j(!1)}};(0,r.useEffect)(()=>{R({search:a||void 0,ordering:n?`${"desc"===d?"-":""}${n}`:void 0,page:S,page_size:20})},[a,n,d,S]);const M=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case"refunded":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},I=e=>{switch(e){case"cash":return"bg-green-100 text-green-800";case"bank_transfer":return"bg-blue-100 text-blue-800";case"cheque":return"bg-purple-100 text-purple-800";case"mobile_money":return"bg-orange-100 text-orange-800";case"card":return"bg-indigo-100 text-indigo-800";case"online":return"bg-cyan-100 text-cyan-800";default:return"bg-gray-100 text-gray-800"}},U=e=>{n===e?c("asc"===d?"desc":"asc"):(i(e),c("asc"))},H=e=>n!==e?(0,o.jsx)("span",{className:"text-gray-400",children:"\u2195"}):"asc"===d?(0,o.jsx)("span",{className:"text-blue-600",children:"\u2191"}):(0,o.jsx)("span",{className:"text-blue-600",children:"\u2193"});return v&&0===f.length?(0,o.jsx)("div",{className:"p-6",children:(0,o.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[v&&(0,o.jsxs)("div",{className:"p-4 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-xs text-gray-600",children:"Loading payments..."})]}),N&&(0,o.jsxs)("div",{className:"p-4 text-center",children:[(0,o.jsxs)("div",{className:"text-red-600 mb-3",children:[me({className:"w-8 h-8 mx-auto mb-2"}),(0,o.jsx)("p",{className:"text-sm font-medium",children:"Error Loading Payments"}),(0,o.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:N})]}),(0,o.jsx)("button",{onClick:()=>R(),className:"px-3 py-1.5 bg-blue-600 text-white rounded-md text-xs hover:bg-blue-700 transition-colors duration-200",children:"Try Again"})]}),!v&&!N&&(0,o.jsxs)("div",{className:"overflow-x-auto",children:[(0,o.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-bold text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>U("receipt_number"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Receipt"}),H("receipt_number")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-bold text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>U("student_details__pupil_name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Student"}),H("student_details__pupil_name")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-bold text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>U("invoice_details__invoice_number"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Invoice"}),H("invoice_details__invoice_number")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-bold text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>U("payment_date"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Payment Date"}),H("payment_date")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-bold text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>U("amount"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Amount"}),H("amount")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-bold text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>U("method"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Method"}),H("method")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-bold text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>U("status"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Status"}),H("status")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-bold text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>U("collected_by_details__username"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Collected By"}),H("collected_by_details__username")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-bold text-gray-500 tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(e=>{return(0,o.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,o.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-xs font-medium text-gray-900",children:e.receipt_number})}),(0,o.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"text-xs font-medium text-gray-900",children:e.student_details.pupil_name}),(0,o.jsx)("div",{className:"text-xs text-gray-500",children:e.student_details.admission_number})]})}),(0,o.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-xs font-medium text-gray-900",children:e.invoice_details.invoice_number})}),(0,o.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:(s=e.payment_date,new Date(s).toLocaleDateString("en-KE",{year:"numeric",month:"short",day:"numeric"}))}),(0,o.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-xs font-medium text-gray-900",children:(t=e.amount,new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(parseFloat(t)))})}),(0,o.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,o.jsx)("span",{className:`inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full ${I(e.method)}`,children:e.method_display})}),(0,o.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,o.jsx)("span",{className:`inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full ${M(e.status)}`,children:e.status_display})}),(0,o.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,o.jsxs)("div",{className:"text-xs text-gray-900",children:[e.collected_by_details.first_name," ",e.collected_by_details.last_name]})}),(0,o.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-xs font-medium",children:(0,o.jsxs)("div",{className:"flex space-x-1",children:[(0,o.jsx)("button",{onClick:()=>(e=>{T(e),F(!0)})(e),className:"text-blue-600 hover:text-blue-900",title:"View Details",children:Q({className:"w-3 h-3"})}),(0,o.jsx)("button",{onClick:()=>(async e=>{O(e.id);try{const t=l.getAuthHeaders(),s=`/fees/payments/${e.id}/download_receipt/`.startsWith("/")?`/fees/payments/${e.id}/download_receipt/`.substring(1):`/fees/payments/${e.id}/download_receipt/`,r=`${({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://127.0.0.1:8000/api/v1").endsWith("/")?({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://127.0.0.1:8000/api/v1").slice(0,-1):{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://127.0.0.1:8000/api/v1"}/${s}`,a=await fetch(r,{method:"GET",headers:{...t}});if(!a.ok){const e=await a.text();throw console.error("API Error Response:",e),new Error(`Failed to download receipt: ${a.status} ${a.statusText}`)}const n=await a.blob();if(0===n.size)throw new Error("Received empty file from server");const i=window.URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=`receipt-${e.receipt_number}.pdf`,o.style.display="none",document.body.appendChild(o),o.click(),setTimeout(()=>{document.body.removeChild(o),window.URL.revokeObjectURL(i)},100)}catch(N){console.error("Error downloading receipt:",N);const t=N instanceof Error?N.message:"Unknown error occurred";alert(`Failed to download receipt: ${t}`)}finally{O(null)}})(e),disabled:D===e.id,className:""+(D===e.id?"text-gray-400 cursor-not-allowed":"text-green-600 hover:text-green-900"),title:D===e.id?"Downloading...":"Download Receipt",children:D===e.id?(0,o.jsx)("div",{className:"w-3 h-3 border border-green-600 border-t-transparent rounded-full animate-spin"}):$({className:"w-3 h-3"})})]})})]},e.id);var t,s})})]}),0===f.length&&(0,o.jsxs)("div",{className:"text-center py-8",children:[B({className:"mx-auto h-8 w-8 text-gray-400"}),(0,o.jsx)("h3",{className:"mt-2 text-xs font-medium text-gray-900",children:"No payments found"}),(0,o.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:t?"Try adjusting your search criteria.":"No payments have been recorded yet."})]}),E>1&&(0,o.jsx)("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,o.jsx)("button",{onClick:()=>C(Math.max(1,S-1)),disabled:1===S,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,o.jsx)("button",{onClick:()=>C(Math.min(E,S+1)),disabled:S===E,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),(0,o.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,o.jsx)("div",{children:(0,o.jsxs)("p",{className:"text-xs text-gray-700",children:["Showing ",(0,o.jsx)("span",{className:"font-medium",children:20*(S-1)+1})," to"," ",(0,o.jsx)("span",{className:"font-medium",children:Math.min(20*S,_)})," of"," ",(0,o.jsx)("span",{className:"font-medium",children:_})," results"]})}),(0,o.jsx)("div",{children:(0,o.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,o.jsx)("button",{onClick:()=>C(Math.max(1,S-1)),disabled:1===S,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-xs font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,o.jsx)("button",{onClick:()=>C(Math.min(E,S+1)),disabled:S===E,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-xs font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})]})})]})]}),P&&(0,o.jsx)(qe,{payment:P,isOpen:L,onClose:()=>{F(!1),T(null)}})]})},Ve=e=>{let{isOpen:t,onClose:s,onSuccess:a}=e;const[n,l]=(0,r.useState)({academic_year:"",term:1,due_date_days:""}),[i,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),[m,x]=(0,r.useState)(null),[p,h]=(0,r.useState)({}),g=e=>{const{name:t,value:s}=e.target;l(e=>({...e,[t]:"term"===t?parseInt(s)||0:s})),p[t]&&h(e=>{const s={...e};return delete s[t],s})},f=()=>{l({academic_year:"",term:1,due_date_days:""}),u(null),x(null),h({}),s()};return t?(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm transition-all duration-300 ease-out z-50",children:(0,o.jsxs)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-300 ease-out flex flex-col",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-2 bg-blue-100 rounded-xl",children:Y({className:"w-5 h-5 text-blue-600"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Generate Term Invoices"}),(0,o.jsx)("p",{className:"text-sm text-gray-500",children:"Create invoices for all students for a specific term"})]})]}),(0,o.jsx)("button",{onClick:f,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-xl transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,o.jsx)("div",{className:"p-6 space-y-4",children:m?(0,o.jsxs)("div",{className:"text-center py-8",children:[(0,o.jsx)("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:F({className:"h-8 w-8 text-green-600"})}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Invoices Generated Successfully!"}),(0,o.jsxs)("div",{className:"text-sm text-gray-600 space-y-2 bg-green-50 p-4 rounded-lg",children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Academic Year:"})," ",m.academic_year]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Term:"})," ",m.term]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Invoices Generated:"})," ",m.invoices_generated]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Total Amount:"})," KSh ",m.total_amount]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Due Date:"})," ",new Date(m.due_date).toLocaleDateString()]})]})]}):(0,o.jsxs)(o.Fragment,{children:[Object.keys(p).length>0&&(0,o.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-4 shadow-sm",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:G({className:"h-4 w-4 text-red-500"})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Please fix the errors below"})})]})}),c&&(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:G({className:"h-5 w-5 text-red-400"})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-sm text-red-800",children:c})})]})}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Academic Year *"]}),(0,o.jsx)(Me,{value:n.academic_year,onChange:e=>g({target:{name:"academic_year",value:e}}),placeholder:"Select academic year (e.g., 2024-2025)",error:!!p.academic_year}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Select the academic year for the invoices"}),p.academic_year&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:p.academic_year[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Term *"]}),(0,o.jsxs)("select",{name:"term",value:n.term,onChange:g,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(p.term?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:1,children:"Term 1"}),(0,o.jsx)("option",{value:2,children:"Term 2"}),(0,o.jsx)("option",{value:3,children:"Term 3"})]}),p.term&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:p.term[0]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Due Date *"]}),(0,o.jsx)("input",{type:"date",name:"due_date_days",value:n.due_date_days,onChange:g,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+(p.due_date_days?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Date when invoices are due"}),p.due_date_days&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:p.due_date_days[0]})]})]})})}),(0,o.jsx)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:m?(0,o.jsx)("button",{onClick:f,className:"px-3 py-1.5 text-xs font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 transition-all duration-200",children:"Close"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:f,className:"px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 transition-all duration-200",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{d(!0),u(null),x(null),h({});try{const e=await De.generateTermInvoices(n);x(e),a&&a(e)}catch(s){var e,t;console.error("Error generating term invoices:",s),null!==(e=s.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors?h(s.response.data.errors):u(s.message||"Failed to generate term invoices")}finally{d(!1)}},disabled:i,className:"px-3 py-1.5 text-xs font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 transition-all duration-200 flex items-center space-x-1",children:i?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),(0,o.jsx)("span",{children:"Generating..."})]}):"Generate Invoices"})]})})]})}):null},Ge=()=>{var e;const[t,s]=(0,r.useState)("fee-structure"),[a,n]=(0,r.useState)(""),[l,i]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),[u,m]=(0,r.useState)("asc"),[x,p]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),[f,b]=(0,r.useState)(""),[y,v]=(0,r.useState)(""),[j,N]=(0,r.useState)({classes:[],streams:[],statuses:[]}),[w,_]=(0,r.useState)({feeTypes:[],categories:[],statuses:[]}),[k,S]=(0,r.useState)({invoiceStatuses:[],feeTypes:[],months:[]}),[C,E]=(0,r.useState)({paymentStatuses:[],paymentMethods:[],amountRanges:[]});(0,r.useEffect)(()=>{const e=setTimeout(()=>{i(a)},500);return()=>clearTimeout(e)},[a]);const A=()=>{p(""),g(""),b(""),v(""),n(""),c(""),m("asc")},[P,T]=(0,r.useState)(!1),L=()=>{T(!0)},F=()=>{T(!1)},[D,O]=(0,r.useState)(!1),z=[{id:"fee-structure",label:"Fee Structure",icon:te,component:(0,o.jsx)(ze,{searchQuery:a,setSearchQuery:n,debouncedSearchQuery:l,sortBy:d,setSortBy:c,sortDirection:u,setSortDirection:m,feeTypeFilter:x,setFeeTypeFilter:p,categoryFilter:h,setCategoryFilter:g,statusFilter:f,setStatusFilter:b,clearFilters:A,isAddDrawerOpen:P,openAddDrawer:L,closeAddDrawer:F,onFilterOptionsUpdate:e=>{_(e)}})},{id:"student-assignment",label:"Student Fee Assignment",icon:he,component:(0,o.jsx)(Ie,{searchQuery:a,setSearchQuery:n,debouncedSearchQuery:l,sortBy:d,setSortBy:c,sortDirection:u,setSortDirection:m,feeTypeFilter:x,setFeeTypeFilter:p,categoryFilter:h,setCategoryFilter:g,statusFilter:f,setStatusFilter:b,clearFilters:A,isAddDrawerOpen:P,openAddDrawer:L,closeAddDrawer:F,onFilterOptionsUpdate:e=>{N(e)}})},{id:"fee-invoice",label:"Fee Invoice",icon:Y,component:(0,o.jsx)(He,{searchQuery:a,setSearchQuery:n,debouncedSearchQuery:l,sortBy:d,setSortBy:c,sortDirection:u,setSortDirection:m,feeTypeFilter:x,setFeeTypeFilter:p,categoryFilter:h,setCategoryFilter:g,statusFilter:f,setStatusFilter:b,clearFilters:A,isAddDrawerOpen:P,openAddDrawer:L,closeAddDrawer:F,onFilterOptionsUpdate:e=>{S(e)}})},{id:"fee-payment",label:"Fee Payment",icon:B,component:(0,o.jsx)(We,{searchQuery:a,setSearchQuery:n,debouncedSearchQuery:l,sortBy:d,setSortBy:c,sortDirection:u,setSortDirection:m,methodFilter:y,setMethodFilter:v,statusFilter:f,setStatusFilter:b,clearFilters:A,onFilterOptionsUpdate:e=>{E(e)}})}];return(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsx)("div",{className:"border-b border-gray-200 mb-4",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("nav",{className:"-mb-px flex space-x-6",children:z.map(e=>(0,o.jsx)("button",{onClick:()=>s(e.id),className:"py-1.5 px-1 border-b-2 font-medium text-sm transition-colors duration-200 "+(t===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1.5",children:[e.icon({className:"w-3.5 h-3.5"}),(0,o.jsx)("span",{children:e.label})]})},e.id))}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",placeholder:(()=>{switch(t){case"fee-structure":return"Search fee structures...";case"student-assignment":return"Search students...";case"fee-invoice":return"Search invoices...";case"fee-payment":return"Search payments...";default:return"Search..."}})(),value:a,onChange:e=>n(e.target.value),className:"w-32 pl-6 pr-2 py-1 border border-gray-300 rounded-md text-xs focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,o.jsx)("div",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400",children:ie({className:"w-3 h-3"})})]}),(()=>{switch(t){case"fee-structure":return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("select",{value:x,onChange:e=>p(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:[(0,o.jsx)("option",{value:"",children:"All Types"}),w.feeTypes.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,o.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:[(0,o.jsx)("option",{value:"",children:"All Categories"}),w.categories.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,o.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:[(0,o.jsx)("option",{value:"",children:"All Status"}),w.statuses.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))]})]});case"student-assignment":return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("select",{value:x,onChange:e=>p(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:[(0,o.jsx)("option",{value:"",children:"All Classes"}),j.classes.map(e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,o.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:[(0,o.jsx)("option",{value:"",children:"All Streams"}),j.streams.map(e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,o.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:[(0,o.jsx)("option",{value:"",children:"All Status"}),j.statuses.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))]})]});case"fee-invoice":return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("select",{value:x,onChange:e=>p(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:[(0,o.jsx)("option",{value:"",children:"All Status"}),k.invoiceStatuses.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,o.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:[(0,o.jsx)("option",{value:"",children:"All Types"}),k.feeTypes.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,o.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:[(0,o.jsx)("option",{value:"",children:"All Months"}),k.months.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))]})]});case"fee-payment":return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("select",{value:x,onChange:e=>p(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:[(0,o.jsx)("option",{value:"",children:"All Status"}),C.paymentStatuses.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,o.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:[(0,o.jsx)("option",{value:"",children:"All Methods"}),C.paymentMethods.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,o.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:[(0,o.jsx)("option",{value:"",children:"All Amounts"}),C.amountRanges.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))]})]});default:return null}})(),(0,o.jsx)("button",{onClick:A,className:"px-2 py-1 text-xs text-gray-600 hover:text-gray-800 transition-colors duration-200",children:"Clear Filters"}),(0,o.jsx)("button",{onClick:L,className:"px-2 py-1 bg-blue-600 text-white rounded text-xs font-medium hover:bg-blue-700 focus:outline-none focus:ring-1 focus:ring-blue-500 transition-colors duration-200",children:(()=>{switch(t){case"fee-structure":return"+ Add Fee Structure";case"student-assignment":return"+ Add Assignment";case"fee-invoice":return"+ Add Invoice";case"fee-payment":return"+ Add Payment";default:return"+ Add"}})()}),"fee-invoice"===t&&(0,o.jsxs)("button",{onClick:()=>{O(!0)},className:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-1 focus:ring-blue-500 transition-colors duration-200",children:[re({className:"w-3 h-3 mr-1"}),"Generate Term Invoices"]})]})]})}),(0,o.jsx)("div",{className:"bg-white rounded-lg shadow-sm",children:null===(e=z.find(e=>e.id===t))||void 0===e?void 0:e.component}),(0,o.jsx)(Ve,{isOpen:D,onClose:()=>{O(!1)},onSuccess:()=>{}})]})},Ke=()=>{const[e,t]=(0,r.useState)(null),[s,a]=(0,r.useState)(!0),[n,l]=(0,r.useState)(null),i={revenue:{currentMonth:125e4,lastMonth:118e4,percentageChange:5.93,currency:"KES"},subscriptions:{totalActive:45,byPlanType:[{planType:"Basic",count:15,percentage:33.3},{planType:"Standard",count:20,percentage:44.4},{planType:"Premium",count:8,percentage:17.8},{planType:"Enterprise",count:2,percentage:4.4}],newThisMonth:8},payments:{totalOutstanding:45e4,overdueInvoices:12,successRate:94.2},schoolActivity:{schoolsWithOverduePayments:8,recentPayments:[{id:"1",schoolName:"St. Mary's Academy",amount:75e3,date:"2024-01-15",status:"completed"},{id:"2",schoolName:"Bright Future School",amount:12e4,date:"2024-01-14",status:"completed"},{id:"3",schoolName:"Excellence Academy",amount:95e3,date:"2024-01-13",status:"pending"}],schoolsRequiringAttention:[{id:"1",name:"Delayed Payment School",currentPlan:"Premium",subscriptionStatus:"overdue",lastPaymentDate:"2023-12-01",outstandingAmount:15e4,requiresAttention:!0},{id:"2",name:"Payment Issues Academy",currentPlan:"Standard",subscriptionStatus:"overdue",lastPaymentDate:"2023-12-15",outstandingAmount:85e3,requiresAttention:!0}]}};(0,r.useEffect)(()=>{(async()=>{try{a(!0),setTimeout(()=>{t(i),a(!1)},1e3)}catch(e){l("Failed to load dashboard data"),a(!1)}})()},[]);const d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"KES";return new Intl.NumberFormat("en-KE",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:0}).format(e)},c=e=>{switch(e){case"completed":return"text-green-600";case"pending":return"text-yellow-600";case"failed":return"text-red-600";default:return"text-gray-600"}},u=e=>{switch(e){case"completed":return F({className:"w-4 h-4 text-green-600"});case"pending":return R({className:"w-4 h-4 text-yellow-600"});case"failed":return ue({className:"w-4 h-4 text-red-600"});default:return R({className:"w-4 h-4 text-gray-600"})}};return s?(0,o.jsx)("div",{className:"p-6",children:(0,o.jsxs)("div",{className:"animate-pulse",children:[(0,o.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[...Array(4)].map((e,t)=>(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,o.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),(0,o.jsx)("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},t))})]})}):n?(0,o.jsx)("div",{className:"p-6",children:(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,o.jsx)("p",{className:"text-red-800",children:n})})}):e?(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Billing Dashboard"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Overview of all billing activity across the platform"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(m={className:"w-6 h-6 text-blue-600"},C({tag:"svg",attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"},child:[]}]})(m))}),(0,o.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"This Month"})]}),(0,o.jsx)("div",{className:"mb-2",children:(0,o.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:d(e.revenue.currentMonth,e.revenue.currency)})}),(0,o.jsxs)("div",{className:"flex items-center",children:[L({className:"w-4 h-4 "+(e.revenue.percentageChange>=0?"text-green-600":"text-red-600")}),(0,o.jsxs)("span",{className:"text-sm font-medium ml-1 "+(e.revenue.percentageChange>=0?"text-green-600":"text-red-600"),children:[e.revenue.percentageChange>=0?"+":"",e.revenue.percentageChange.toFixed(1),"%"]}),(0,o.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"vs last month"})]})]}),(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:fe({className:"w-6 h-6 text-green-600"})}),(0,o.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Active"})]}),(0,o.jsx)("div",{className:"mb-2",children:(0,o.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.subscriptions.totalActive})}),(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:[e.subscriptions.newThisMonth," new this month"]})]}),(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:G({className:"w-6 h-6 text-yellow-600"})}),(0,o.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Outstanding"})]}),(0,o.jsx)("div",{className:"mb-2",children:(0,o.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:d(e.payments.totalOutstanding,e.revenue.currency)})}),(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:[e.payments.overdueInvoices," overdue invoices"]})]}),(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:F({className:"w-6 h-6 text-purple-600"})}),(0,o.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Success Rate"})]}),(0,o.jsx)("div",{className:"mb-2",children:(0,o.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[e.payments.successRate,"%"]})}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Payment success rate"})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Subscriptions by Plan Type"}),(0,o.jsx)("div",{className:"space-y-4",children:e.subscriptions.byPlanType.map(e=>(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-3"}),(0,o.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.planType})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsxs)("span",{className:"text-sm text-gray-600",children:[e.count," schools"]}),(0,o.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[e.percentage,"%"]})]})]},e.planType))})]}),(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Payments"}),(0,o.jsx)("div",{className:"space-y-4",children:e.schoolActivity.recentPayments.map(t=>(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[u(t.status),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t.schoolName}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:new Date(t.date).toLocaleDateString()})]})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsx)("p",{className:"text-sm font-medium text-gray-900",children:d(t.amount,e.revenue.currency)}),(0,o.jsx)("p",{className:`text-xs ${c(t.status)}`,children:t.status})]})]},t.id))})]})]}),(0,o.jsxs)("div",{className:"mt-8 bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Schools Requiring Attention"}),(0,o.jsxs)("span",{className:"text-sm text-gray-500",children:[e.schoolActivity.schoolsRequiringAttention.length," schools"]})]}),(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"School Name"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Plan"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Payment"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outstanding Amount"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.schoolActivity.schoolsRequiringAttention.map(t=>(0,o.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsxs)("div",{className:"flex items-center",children:[le({className:"w-4 h-4 text-gray-400 mr-2"}),(0,o.jsx)("span",{className:"text-sm font-medium text-gray-900",children:t.name})]})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.currentPlan}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("overdue"===t.subscriptionStatus?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:t.subscriptionStatus})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(t.lastPaymentDate).toLocaleDateString()}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-red-600",children:d(t.outstandingAmount,e.revenue.currency)})]},t.id))})]})})]})]}):null;var m},Qe={getDashboardStats:async()=>{try{return{success:!0,data:await i.authenticatedRequest("/billing/dashboard",{method:"GET"})}}catch(e){throw new Error("Failed to fetch dashboard statistics")}},getSchoolsBilling:async()=>{try{return{success:!0,data:await i.authenticatedRequest("/billing/schools",{method:"GET"})}}catch(e){throw new Error("Failed to fetch schools billing data")}},createBillingFeature:async e=>{try{return await i.authenticatedRequest("/billing/features",{method:"POST",body:JSON.stringify(e)})}catch(t){throw new Error("Failed to create billing feature")}},updateBillingFeature:async(e,t)=>{try{return await i.authenticatedRequest(`/billing/features/${e}`,{method:"PUT",body:JSON.stringify(t)})}catch(s){throw new Error("Failed to update billing feature")}},deleteBillingFeature:async e=>{try{return await i.authenticatedRequest(`/billing/features/${e}`,{method:"DELETE"})}catch(t){throw new Error("Failed to delete billing feature")}},getBillingPlans:async e=>{try{const t=new URLSearchParams;null!==e&&void 0!==e&&e.ordering&&t.append("ordering",e.ordering),null!==e&&void 0!==e&&e.page&&t.append("page",e.page.toString()),null!==e&&void 0!==e&&e.search&&t.append("search",e.search);const s="/billing/plans/"+(t.toString()?`?${t.toString()}`:"");console.log("Making API call to:",s);const r=await i.authenticatedRequest(s,{method:"GET"});return console.log("API response:",r),r}catch(s){var t;throw console.error("Billing API error:",s),console.error("Error details:",{message:s.message,response:s.response,status:null===(t=s.response)||void 0===t?void 0:t.status}),new Error(`Failed to fetch billing plans: ${s.message}`)}},createBillingPlan:async e=>{try{return await i.authenticatedRequest("/billing/plans",{method:"POST",body:JSON.stringify(e)})}catch(t){throw new Error("Failed to create billing plan")}},updateBillingPlan:async(e,t)=>{try{return await i.authenticatedRequest(`/billing/plans/${e}`,{method:"PUT",body:JSON.stringify(t)})}catch(s){throw new Error("Failed to update billing plan")}},deleteBillingPlan:async e=>{try{return await i.authenticatedRequest(`/billing/plans/${e}`,{method:"DELETE"})}catch(t){throw new Error("Failed to delete billing plan")}},getPlanFeatures:async e=>{try{return await i.authenticatedRequest(`/billing/plans/${e}/features`,{method:"GET"})}catch(t){throw new Error("Failed to fetch plan features")}},getBillingFeatures:async e=>{try{const t=new URLSearchParams;null!==e&&void 0!==e&&e.ordering&&t.append("ordering",e.ordering),null!==e&&void 0!==e&&e.page&&t.append("page",e.page.toString()),null!==e&&void 0!==e&&e.search&&t.append("search",e.search);const s="/billing/features/"+(t.toString()?`?${t.toString()}`:"");console.log("Making API call to:",s);const r=await i.authenticatedRequest(s,{method:"GET"});return console.log("API response:",r),r}catch(s){var t;throw console.error("Billing Features API error:",s),console.error("Error details:",{message:s.message,response:s.response,status:null===(t=s.response)||void 0===t?void 0:t.status}),new Error(`Failed to fetch billing features: ${s.message}`)}},addFeatureToPlan:async(e,t)=>{try{return await i.authenticatedRequest(`/billing/plans/${e}/features`,{method:"POST",body:JSON.stringify(t)})}catch(s){throw new Error("Failed to add feature to plan")}},getSchoolSubscriptions:async e=>{try{const t=new URLSearchParams;null!==e&&void 0!==e&&e.ordering&&t.append("ordering",e.ordering),null!==e&&void 0!==e&&e.page&&t.append("page",e.page.toString()),null!==e&&void 0!==e&&e.search&&t.append("search",e.search);const s="/billing/subscriptions/"+(t.toString()?`?${t.toString()}`:"");console.log("Making API call to:",s);const r=await i.authenticatedRequest(s,{method:"GET"});return console.log("API response:",r),r}catch(s){var t;throw console.error("School Subscriptions API error:",s),console.error("Error details:",{message:s.message,response:s.response,status:null===(t=s.response)||void 0===t?void 0:t.status}),new Error(`Failed to fetch school subscriptions: ${s.message}`)}},updateSchoolSubscription:async(e,t)=>{try{return await i.authenticatedRequest(`/billing/subscriptions/${e}`,{method:"PUT",body:JSON.stringify(t)})}catch(s){throw new Error("Failed to update school subscription")}},getInvoices:async()=>{try{return await i.authenticatedRequest("/billing/invoices",{method:"GET"})}catch(e){throw new Error("Failed to fetch invoices")}},getInvoiceDetails:async e=>{try{return await i.authenticatedRequest(`/billing/invoices/${e}`,{method:"GET"})}catch(t){throw new Error("Failed to fetch invoice details")}},sendInvoice:async e=>{try{return await i.authenticatedRequest(`/billing/invoices/${e}/send`,{method:"POST"})}catch(t){throw new Error("Failed to send invoice")}},voidInvoice:async e=>{try{return await i.authenticatedRequest(`/billing/invoices/${e}/void`,{method:"POST"})}catch(t){throw new Error("Failed to void invoice")}}},Ye=Qe,Je=()=>{const[e,t]=(0,r.useState)(null),[s,a]=(0,r.useState)([]),[n,l]=(0,r.useState)([]),[i,d]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[m,x]=(0,r.useState)(""),[p,h]=(0,r.useState)("asc"),[g,f]=(0,r.useState)(null),[b,y]=(0,r.useState)({x:0,y:0}),[v,j]=(0,r.useState)(!0),[N,w]=(0,r.useState)(null),[_,k]=(0,r.useState)(null),[S,E]=(0,r.useState)(!1),[P,T]=(0,r.useState)(!1),[L,D]=(0,r.useState)(""),[R,I]=(0,r.useState)(1),[U]=(0,r.useState)(10),[H,G]=(0,r.useState)(0),[K,Y]=(0,r.useState)(0),[J,Z]=(0,r.useState)(!1),[X,ee]=(0,r.useState)(!1),te=(0,r.useMemo)(()=>({id:"1",school:"1",plan:"1",custom_plan_name:"Premium Plan",interval:"monthly",status:"active",start_date:"2024-01-01",end_date:"2024-12-31",auto_renew:!0,student_count:500,base_price:"150000",custom_price:"120000",discount_percent:"20",pricing_option:"student_based",notes:"Premium subscription with student-based pricing",plan_details:{id:"1",name:"Premium Plan",plan_type:"premium",description:"Advanced features for large schools",is_active:!0,is_default:!1,features:[],created_at:"2024-01-01",updated_at:"2024-01-01"},school_details:{id:"1",name:"Excellence Academy",domain:"excellence.edu",email:"admin@excellence.edu",phone:"+254700000000",max_students:1e3},created_at:"2024-01-01",updated_at:"2024-01-01"}),[]),se=(0,r.useMemo)(()=>[{id:"1",school:"1",subscription:"1",amount:12e4,status:"paid",due_date:"2024-01-15",paid_date:"2024-01-10",created_at:"2024-01-01",updated_at:"2024-01-10"},{id:"2",school:"1",subscription:"1",amount:12e4,status:"pending",due_date:"2024-02-15",paid_date:null,created_at:"2024-02-01",updated_at:"2024-02-01"},{id:"3",school:"1",subscription:"1",amount:12e4,status:"overdue",due_date:"2023-12-15",paid_date:null,created_at:"2023-12-01",updated_at:"2023-12-01"}],[]),re=(0,r.useMemo)(()=>[{id:"1",name:"Basic Plan",plan_type:"basic",description:"Essential features for small schools",is_active:!0,is_default:!0,features:[],created_at:"2024-01-01",updated_at:"2024-01-01"},{id:"2",name:"Standard Plan",plan_type:"standard",description:"Standard features for medium schools",is_active:!0,is_default:!1,features:[],created_at:"2024-01-01",updated_at:"2024-01-01"},{id:"3",name:"Premium Plan",plan_type:"premium",description:"Advanced features for large schools",is_active:!0,is_default:!1,features:[],created_at:"2024-01-01",updated_at:"2024-01-01"}],[]);(0,r.useEffect)(()=>{(async()=>{try{j(!0),w(null),t(te),a(se),l(re),G(se.length),Y(Math.ceil(se.length/U)),Z(!1),ee(!1)}catch(e){console.error("Error loading billing data:",e),w("Failed to load billing data")}finally{j(!1)}})()},[U,se,re,te]),(0,r.useEffect)(()=>{const e=setTimeout(()=>{u(i)},500);return()=>clearTimeout(e)},[i]),(0,r.useEffect)(()=>{if(""===c&&""===m&&"asc"===p)return;let e=[...se];c&&(e=e.filter(e=>e.id.toLowerCase().includes(c.toLowerCase())||e.status.toLowerCase().includes(c.toLowerCase()))),m&&e.sort((e,t)=>{const s=e[m],r=t[m];return"string"===typeof s&&"string"===typeof r?"asc"===p?s.localeCompare(r):r.localeCompare(s):"number"===typeof s&&"number"===typeof r?"asc"===p?s-r:r-s:0}),a(e),G(e.length),Y(Math.ceil(e.length/U)),I(1)},[c,m,p,U,se]);const ne=e=>{m===e?h("asc"===p?"desc":"asc"):(x(e),h("asc"))},le=e=>m!==e?null:"asc"===p?z({className:"w-3 h-3"}):O({className:"w-3 h-3"}),oe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"KES";const s="string"===typeof e?parseFloat(e):e;return new Intl.NumberFormat("en-KE",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:0}).format(s)},de=e=>{const t={paid:{bg:"bg-green-100",text:"text-green-800",label:"Paid"},pending:{bg:"bg-yellow-100",text:"text-yellow-800",label:"Pending"},overdue:{bg:"bg-red-100",text:"text-red-800",label:"Overdue"},cancelled:{bg:"bg-gray-100",text:"text-gray-800",label:"Cancelled"}},s=t[e]||t.pending;return(0,o.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${s.bg} ${s.text}`,children:s.label})};return(0,r.useEffect)(()=>{const e=e=>{const t=e.target;t.closest("[data-dropdown-container]")||t.closest("[data-portal-dropdown]")||f(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),v?(0,o.jsx)("div",{className:"p-6",children:(0,o.jsxs)("div",{className:"animate-pulse",children:[(0,o.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[...Array(3)].map((e,t)=>(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,o.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),(0,o.jsx)("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},t))})]})}):N?(0,o.jsx)("div",{className:"p-6",children:(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,o.jsx)("p",{className:"text-red-800",children:N})})}):e?(0,o.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen",children:[(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsx)("div",{className:"mb-8",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:"Billing Dashboard"}),(0,o.jsx)("p",{className:"text-gray-600 text-sm",children:"Manage your school's subscription and billing"})]}),(0,o.jsx)("div",{className:"flex items-center space-x-3",children:(0,o.jsxs)("div",{className:"px-4 py-2 bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"School"}),(0,o.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:e.school_details.name})]})})]})}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,o.jsxs)("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg",children:M({className:"w-5 h-5 text-white"})}),(0,o.jsx)("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Current Plan"})]}),(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsx)("p",{className:"text-lg font-bold text-gray-900 mb-1",children:e.plan_details.name}),(0,o.jsx)("p",{className:"text-xs text-gray-600 leading-relaxed",children:e.plan_details.description})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("span",{className:"text-xs text-gray-500",children:"Status"}),(0,o.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})]})]}),(0,o.jsxs)("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("div",{className:"p-2 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-lg",children:(ce={className:"w-5 h-5 text-white"},C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(ce))}),(0,o.jsx)("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Next Payment"})]}),(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsx)("p",{className:"text-lg font-bold text-gray-900 mb-1",children:oe(e.custom_price||e.base_price)}),(0,o.jsxs)("p",{className:"text-xs text-gray-600",children:["Due on ",e.end_date?new Date(e.end_date).toLocaleDateString():"N/A"]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("span",{className:"text-xs text-gray-500",children:"Auto-renew"}),(0,o.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.auto_renew?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.auto_renew?"Enabled":"Disabled"})]})]}),(0,o.jsxs)("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg",children:B({className:"w-5 h-5 text-white"})}),(0,o.jsx)("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Pricing Model"})]}),(0,o.jsxs)("div",{className:"mb-3",children:[(e=>{const t={feature_based:{bg:"bg-blue-100",text:"text-blue-800",label:"Feature Based"},student_based:{bg:"bg-purple-100",text:"text-purple-800",label:"Student Based"},custom_price:{bg:"bg-orange-100",text:"text-orange-800",label:"Custom Price"}},s=t[e]||t.custom_price;return(0,o.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${s.bg} ${s.text}`,children:s.label})})(e.pricing_option),(0,o.jsxs)("p",{className:"text-xs text-gray-600 mt-2",children:[e.student_count," students"]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("span",{className:"text-xs text-gray-500",children:"Discount"}),(0,o.jsxs)("span",{className:"text-sm font-semibold text-green-600",children:[e.discount_percent,"%"]})]})]})]}),(0,o.jsx)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200 mb-6",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:"Subscription Actions"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsxs)("button",{onClick:()=>E(!0),className:"flex items-center px-3 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-200 text-xs font-medium shadow-sm",children:[V({className:"w-3 h-3 mr-1.5"}),"Change Plan"]}),(0,o.jsxs)("button",{onClick:()=>T(!0),className:"flex items-center px-3 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition-all duration-200 text-xs font-medium shadow-sm",children:[A({className:"w-3 h-3 mr-1.5"}),"Cancel"]})]})]})}),(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,o.jsx)("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:"Invoices"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",placeholder:"Search invoices...",value:i,onChange:e=>d(e.target.value),className:"pl-8 pr-3 py-1.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-xs bg-white"}),(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:ie({className:"h-3 w-3 text-gray-400"})})]}),(0,o.jsxs)("select",{value:m,onChange:e=>{x(e.target.value),e.target.value&&h("asc")},className:"px-3 py-1.5 border border-gray-200 rounded-lg text-xs text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 bg-white",children:[(0,o.jsx)("option",{value:"",children:"Sort by"}),(0,o.jsx)("option",{value:"created_at",children:"Date"}),(0,o.jsx)("option",{value:"amount",children:"Amount"}),(0,o.jsx)("option",{value:"status",children:"Status"}),(0,o.jsx)("option",{value:"due_date",children:"Due Date"})]})]})]})}),(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-white",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>ne("id"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Invoice #"}),le("id")]})}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>ne("amount"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Amount"}),le("amount")]})}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>ne("status"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Status"}),le("status")]})}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>ne("due_date"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Due Date"}),le("due_date")]})}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>ne("paid_date"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Paid Date"}),le("paid_date")]})}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:s.map((e,t)=>(0,o.jsxs)("tr",{className:(t%2===0?"bg-white":"bg-gray-50")+" hover:bg-blue-50 transition-colors duration-200",children:[(0,o.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-xs font-medium text-gray-900",children:["INV-",e.id]}),(0,o.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-xs text-gray-900",children:oe(e.amount)}),(0,o.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-xs text-gray-900",children:de(e.status)}),(0,o.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-xs text-gray-900",children:new Date(e.due_date).toLocaleDateString()}),(0,o.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-xs text-gray-900",children:e.paid_date?new Date(e.paid_date).toLocaleDateString():"-"}),(0,o.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-xs text-gray-900 relative",children:(0,o.jsx)("div",{className:"flex items-center justify-center",children:(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)("button",{onClick:t=>{if(t.stopPropagation(),f(g===e.id?null:e.id),g!==e.id){const e=t.currentTarget.getBoundingClientRect();y({x:e.left,y:e.bottom+window.scrollY})}},className:"p-1 rounded-md transition-colors duration-200 "+(g===e.id?"text-blue-600 bg-blue-100":"text-gray-500 hover:text-blue-600 hover:bg-blue-50"),title:"More Options",children:q({className:"w-3 h-3"})})})})})]},e.id))})]})}),H>0&&(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 border-t border-gray-100 bg-gray-50",children:[(0,o.jsxs)("div",{className:"text-xs text-gray-600",children:["Showing ",(0,o.jsx)("span",{className:"font-medium",children:(R-1)*U+1})," to ",(0,o.jsx)("span",{className:"font-medium",children:Math.min(R*U,H)})," of ",(0,o.jsx)("span",{className:"font-medium",children:H})," results"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>I(R-1),disabled:!X,className:"px-2 py-1 text-xs font-medium border rounded-lg transition-colors duration-200 text-white border-blue-500 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed bg-blue-500",children:"Previous"}),(0,o.jsxs)("span",{className:"px-2 py-1 text-xs font-medium text-gray-600",children:["Page ",R," of ",K]}),(0,o.jsx)("button",{onClick:()=>I(R+1),disabled:!J,className:"px-2 py-1 text-xs font-medium border rounded-lg transition-colors duration-200 text-white border-blue-500 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed bg-blue-500",children:"Next"})]})]})]})]}),S&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-white rounded-xl p-6 w-full max-w-md shadow-2xl",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Change Subscription Plan"}),(0,o.jsx)("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100 transition-colors duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select New Plan"}),(0,o.jsxs)("select",{value:L,onChange:e=>D(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[(0,o.jsx)("option",{value:"",children:"Choose a plan..."}),n.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.name," - ",e.description]},e.id))]})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,o.jsx)("button",{onClick:()=>E(!1),className:"px-3 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors duration-200 text-sm",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{try{await Qe.updateSchoolSubscription((null===e||void 0===e?void 0:e.id)||"",{plan:L}),k({message:"Plan changed successfully!",type:"success"}),E(!1),D("")}catch(N){k({message:"Failed to change plan. Please try again.",type:"error"})}setTimeout(()=>k(null),3e3)},disabled:!L,className:"px-3 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 text-sm font-medium",children:"Change Plan"})]})]})}),P&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-white rounded-xl p-6 w-full max-w-md shadow-2xl",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Cancel Subscription"}),(0,o.jsx)("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100 transition-colors duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsx)("div",{className:"mb-6",children:(0,o.jsxs)("div",{className:"flex items-center mb-3",children:[(0,o.jsx)("div",{className:"p-2 bg-red-100 rounded-lg mr-3",children:A({className:"w-4 h-4 text-red-600"})}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Are you sure you want to cancel your subscription? This action cannot be undone."})]})}),(0,o.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,o.jsx)("button",{onClick:()=>T(!1),className:"px-3 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors duration-200 text-sm",children:"Keep Subscription"}),(0,o.jsx)("button",{onClick:async()=>{try{await Qe.updateSchoolSubscription((null===e||void 0===e?void 0:e.id)||"",{status:"cancelled",auto_renew:!1}),k({message:"Subscription cancelled successfully!",type:"success"}),T(!1)}catch(N){k({message:"Failed to cancel subscription. Please try again.",type:"error"})}setTimeout(()=>k(null),3e3)},className:"px-3 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition-all duration-200 text-sm font-medium",children:"Cancel Subscription"})]})]})}),g&&(0,o.jsx)("div",{className:"fixed w-28 bg-white rounded-lg shadow-xl border border-gray-200 z-[9999]","data-portal-dropdown":!0,style:{left:`${b.x}px`,top:`${b.y}px`},onClick:e=>e.stopPropagation(),children:(0,o.jsxs)("div",{className:"py-1",children:[(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation(),f(null)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-colors duration-200",children:[Q({className:"w-3 h-3 mr-2"}),"View"]}),(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation(),f(null)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-green-50 hover:text-green-700 transition-colors duration-200",children:[$({className:"w-3 h-3 mr-2"}),"Download"]}),(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation(),f(null)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-purple-50 hover:text-purple-700 transition-colors duration-200",children:[ae({className:"w-3 h-3 mr-2"}),"Print"]}),(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation(),f(null)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-yellow-50 hover:text-yellow-700 transition-colors duration-200",children:[W({className:"w-3 h-3 mr-2"}),"Send"]})]})}),_&&(0,o.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[10000] flex items-center transition-all duration-300",children:(0,o.jsxs)("div",{className:`flex items-center space-x-2 ${"success"===_.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"} px-4 py-3 rounded-xl shadow-xl`,children:["success"===_.type?F({className:"w-4 h-4 text-green-600"}):me({className:"w-4 h-4 text-red-600"}),(0,o.jsx)("span",{className:"text-xs font-medium",children:_.message}),(0,o.jsx)("button",{onClick:()=>k(null),className:"ml-2 text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100 transition-colors duration-200",children:me({className:"w-3 h-3"})})]})})]}):(0,o.jsx)("div",{className:"p-6",children:(0,o.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,o.jsx)("p",{className:"text-yellow-800",children:"No subscription found for your school."})})});var ce},Ze=[{id:"1",name:"Basic Plan",plan_type:"basic",description:"Essential features for small schools",is_active:!0,is_default:!1,features:[],created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:"2",name:"Standard Plan",plan_type:"standard",description:"Comprehensive features for medium schools",is_active:!0,is_default:!0,features:[],created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"}],Xe=()=>{var e,t,s,a,n,i,d,c,u,m,x,p,h,g,f,b,y,v,j;const[N,w]=(0,r.useState)(""),[_,k]=(0,r.useState)(""),[S,C]=(0,r.useState)(""),[E,A]=(0,r.useState)("asc"),[P,T]=(0,r.useState)("plans"),[L,D]=(0,r.useState)(null),[R,M]=(0,r.useState)({x:0,y:0}),[I,U]=(0,r.useState)(null),[B,$]=(0,r.useState)(!1),[W,V]=(0,r.useState)(null),[G,K]=(0,r.useState)(!1),[Y,J]=(0,r.useState)([]),[Z,X]=(0,r.useState)(""),[ee,te]=(0,r.useState)(""),[se,ae]=(0,r.useState)(""),[ne,le]=(0,r.useState)(""),[oe,de]=(0,r.useState)(!1),[ce,ue]=(0,r.useState)(null),[pe,he]=(0,r.useState)(!1),[ge,fe]=(0,r.useState)(!1),[be,ye]=(0,r.useState)([]),[je,Ne]=(0,r.useState)([]),[we,_e]=(0,r.useState)({school:"",start_date:"",interval:"monthly",status:"active",end_date:"",auto_renew:!0,base_price:"",custom_price:"",discount_percent:"",notes:"",plan:"",custom_plan_name:"",pricing_option:""}),[ke,Se]=(0,r.useState)({}),[Ce,Ee]=(0,r.useState)(""),[Ae,Pe]=(0,r.useState)(!1),[Te,Le]=(0,r.useState)(!1),[Fe,De]=(0,r.useState)(null),[Oe,ze]=(0,r.useState)({}),[Re,Me]=(0,r.useState)(""),[Ie,Ue]=(0,r.useState)(1),[Be]=(0,r.useState)(20),[$e,He]=(0,r.useState)(0),[qe,We]=(0,r.useState)(0),[Ve,Ge]=(0,r.useState)(!1),[Ke,Qe]=(0,r.useState)(!1),[Je,Xe]=(0,r.useState)([]),[et,tt]=(0,r.useState)(!1),[st,rt]=(0,r.useState)(null),[at,nt]=(0,r.useState)([]),[lt,it]=(0,r.useState)(!1),[ot,dt]=(0,r.useState)(null),[ct,ut]=(0,r.useState)(1),[mt,xt]=(0,r.useState)(0),[pt,ht]=(0,r.useState)(0),[gt,ft]=(0,r.useState)(!1),[bt,yt]=(0,r.useState)(!1),[vt,jt]=(0,r.useState)([]),[Nt,wt]=(0,r.useState)(!1),[_t,kt]=(0,r.useState)(null),St=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;try{tt(!0),rt(null),Ue(e);const s=sessionStorage.getItem("authToken");console.log("Auth token exists:",!!s);const r={page:e};if(t&&(r.search=t),S){const e="desc"===E?`-${S}`:S;r.ordering=e}console.log("Fetching plans with params:",r);const a=await Ye.getBillingPlans(r);if(console.log("Full response:",a),"success"===a.status&&a.data)Xe(a.data.results),He(a.data.count),We(Math.ceil(a.data.count/Be)),Ge(!!a.data.next),Qe(!!a.data.previous);else{if(!a.results||void 0===a.count)throw new Error("Failed to fetch billing plans");Xe(a.results),He(a.count),We(Math.ceil(a.count/Be)),Ge(!!a.next),Qe(!!a.previous)}}catch(s){console.error("Error fetching plans:",s),rt("Failed to fetch billing plans"),Xe(Ze),He(Ze.length),We(Math.ceil(Ze.length/Be)),Ge(!1),Qe(!1)}finally{tt(!1)}},[Be,S,E]),Ct=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;try{it(!0),dt(null),ut(e);const s=sessionStorage.getItem("authToken");console.log("Auth token exists for features:",!!s);const r={page:e};if(t&&(r.search=t),S){const e="desc"===E?`-${S}`:S;r.ordering=e}console.log("Fetching features with params:",r);const a=await Ye.getBillingFeatures(r);if(console.log("Features response:",a),"success"===a.status&&a.data)nt(a.data.results),xt(a.data.count),ht(Math.ceil(a.data.count/Be)),ft(!!a.data.next),yt(!!a.data.previous);else{if(!a.results||void 0===a.count)throw new Error("Failed to fetch billing features");nt(a.results),xt(a.count),ht(Math.ceil(a.count/Be)),ft(!!a.next),yt(!!a.previous)}}catch(s){console.error("Error fetching features:",s),dt("Failed to fetch billing features"),nt([]),xt(0),ht(0),ft(!1),yt(!1)}finally{it(!1)}},[Be,S,E]),Et=(0,r.useCallback)(async()=>{try{wt(!0),kt(null);const e=sessionStorage.getItem("authToken");console.log("Auth token exists for subscriptions:",!!e),console.log("Fetching school subscriptions...");const t=await Ye.getSchoolSubscriptions();console.log("Subscriptions response:",t),"success"===t.status&&t.data?jt(t.data.results):t.results&&t.results.length>0?jt(t.results):jt([])}catch(e){console.error("Error fetching subscriptions:",e),kt("Failed to fetch school subscriptions"),jt([])}finally{wt(!1)}},[]);(0,r.useEffect)(()=>{(async()=>{try{console.log("Testing API connectivity...");const e=await fetch("http://127.0.0.1:8000/api/v1/billing/plans/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${sessionStorage.getItem("authToken")}`}});console.log("Test API response status:",e.status),console.log("Test API response headers:",e.headers),e.ok||console.error("Test API failed:",e.status,e.statusText)}catch(st){console.error("Test API error:",st)}})(),St(1)},[St]),(0,r.useEffect)(()=>{"features"===P&&Ct(1)},[P,Ct]),(0,r.useEffect)(()=>{"subscriptions"===P&&Et()},[P,Et]),(0,r.useEffect)(()=>{const e=setTimeout(()=>{k(N),"plans"===P?St(1,N):"features"===P&&Ct(1,N)},500);return()=>clearTimeout(e)},[N,St,Ct,P]);const At=e=>{const t=e.charAt(0).toUpperCase()+e.slice(1);return(0,o.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${{basic:"bg-gray-100 text-gray-800",standard:"bg-blue-100 text-blue-800",premium:"bg-purple-100 text-purple-800",enterprise:"bg-green-100 text-green-800"}[e]||"bg-gray-100 text-gray-800"}`,children:t})},Pt=Je,Tt=e=>{S===e?A("asc"===E?"desc":"asc"):(C(e),A("asc")),St(1,_)},Lt=e=>S!==e?null:"asc"===E?z({className:"w-3 h-3"}):O({className:"w-3 h-3"}),Ft=(0,r.useCallback)(async()=>{try{const e=await l.schools.getAll();console.log("Schools API response:",e),e.data&&e.data.results&&Array.isArray(e.data.results)?(console.log("Setting schools from data.data.results:",e.data.results),ye(e.data.results)):e.results&&Array.isArray(e.results)?(console.log("Setting schools from data.results:",e.results),ye(e.results)):Array.isArray(e)?(console.log("Setting schools from direct array:",e),ye(e)):(console.error("Unexpected schools data format:",e),ye([]))}catch(st){console.error("Error fetching schools:",st),ye([])}},[]),Dt=(0,r.useCallback)(async()=>{try{const e=await Ye.getBillingPlans();console.log("Billing plans API response:",e),e.results&&Array.isArray(e.results)?Ne(e.results):e.data&&e.data.results&&Array.isArray(e.data.results)?Ne(e.data.results):(console.error("Unexpected billing plans data format:",e),Ne([]))}catch(st){console.error("Error fetching billing plans for subscription:",st),Ne([])}},[]),Ot=()=>{fe(!1),setTimeout(()=>{he(!1)},300)},zt=()=>{Le(!1),setTimeout(()=>{Pe(!1)},300)};return(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Billing Plans"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Create and manage global billing plans"})]}),(0,o.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:(0,o.jsx)("div",{className:"border-b border-gray-200",children:(0,o.jsxs)("div",{className:"flex items-center justify-between px-6",children:[(0,o.jsxs)("nav",{className:"flex space-x-8",children:[(0,o.jsx)("button",{onClick:()=>T("plans"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 "+("plans"===P?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Plans"}),(0,o.jsx)("button",{onClick:()=>T("features"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 "+("features"===P?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Features"}),(0,o.jsx)("button",{onClick:()=>T("subscriptions"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 "+("subscriptions"===P?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"School Subscriptions"}),(0,o.jsx)("button",{onClick:()=>T("pricing"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 "+("pricing"===P?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Pricing"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",placeholder:"features"===P?"Search features...":"subscriptions"===P?"Search subscriptions...":"Search plans...",value:N,onChange:e=>w(e.target.value),className:"pl-8 pr-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-xs"}),(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:ie({className:"h-3 w-3 text-gray-400"})})]}),(0,o.jsx)("button",{className:"px-3 py-1.5 border border-gray-300 rounded-md text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:"Filter"}),(0,o.jsxs)("select",{value:S,onChange:e=>C(e.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-md text-xs text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:[(0,o.jsx)("option",{value:"",children:"Sort by"}),(0,o.jsx)("option",{value:"name",children:"Name"}),(0,o.jsx)("option",{value:"plan_type",children:"Plan Type"}),(0,o.jsx)("option",{value:"is_active",children:"Status"}),(0,o.jsx)("option",{value:"created_at",children:"Created Date"})]}),(0,o.jsxs)("button",{onClick:"subscriptions"===P?async()=>{try{console.log("Opening subscription drawer, current schools state:",be),await Promise.all([Ft(),Dt()]),_e({school:"",start_date:"",interval:"monthly",status:"active",end_date:"",auto_renew:!0,base_price:"",custom_price:"",discount_percent:"",notes:"",plan:"",custom_plan_name:"",pricing_option:""}),Se({}),Ee(""),he(!0),setTimeout(()=>{fe(!0)},10)}catch(st){console.error("Error preparing subscription form:",st),U({message:"Failed to load form data. Please try again.",type:"error"})}}:()=>U({message:"Add plan functionality coming soon!",type:"success"}),className:"px-4 py-1.5 bg-blue-600 text-white rounded-md text-xs font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200",children:["+ Add ","subscriptions"===P?"Subscription":"Plan"]})]})]})})}),"plans"===P&&(0,o.jsxs)("div",{className:"bg-white rounded-md shadow-sm",children:[et&&(0,o.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Loading plans..."})]}),st&&(0,o.jsxs)("div",{className:"p-4 text-center",children:[(0,o.jsx)("div",{className:"text-red-600 text-sm mb-2",children:st}),(0,o.jsx)("button",{onClick:()=>St(1),className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors duration-200",children:"Retry"})]}),!et&&!st&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"overflow-x-auto border-0",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Tt("name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Name"}),Lt("name")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Tt("plan_type"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Plan Type"}),Lt("plan_type")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Description"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Tt("is_active"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Status"}),Lt("is_active")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Features"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Tt("created_at"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Created At"}),Lt("created_at")]})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Actions"})})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:Pt.map((e,t)=>{return(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-25",children:[(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.is_default&&(0,o.jsx)("span",{className:"inline-flex px-2 py-0.5 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 ml-2",children:"Default"})]})}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap",children:At(e.plan_type)}),(0,o.jsx)("td",{className:"px-3 py-1.5",children:(0,o.jsx)("div",{className:"text-sm text-gray-900 max-w-xs truncate",title:e.description,children:e.description||"-"})}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap",children:(s=e.is_active,(0,o.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(s?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:s?"Active":"Inactive"}))}),(0,o.jsxs)("td",{className:"px-3 py-1.5 whitespace-nowrap text-sm text-gray-900",children:[e.features.length," features"]}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-sm text-gray-900",children:new Date(e.created_at).toLocaleDateString()}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-sm text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,o.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{V(e),$(!0)})(e)},className:"p-1 rounded-md transition-colors duration-200 text-blue-600 hover:text-blue-700 hover:bg-blue-50",title:"View Plan Details",children:Q({className:"w-3 h-3"})}),(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)("button",{onClick:t=>{if(t.stopPropagation(),D(L===e.id?null:e.id),L!==e.id){const e=t.currentTarget.getBoundingClientRect();M({x:e.left,y:e.bottom+window.scrollY})}},className:"p-1 rounded-md transition-colors duration-200 "+(L===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:q({className:"w-3 h-3"})})})]})})]},e.id);var s})})]})})}),!et&&!st&&$e>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"h-4 mt-8 rounded-t-lg",style:{backgroundColor:"rgb(249,250,251)"}}),(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-b-lg border-0",style:{backgroundColor:"rgb(249,250,251)"},children:[(0,o.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(0,o.jsx)("span",{className:"font-medium",children:(Ie-1)*Be+1})," to ",(0,o.jsx)("span",{className:"font-medium",children:Math.min(Ie*Be,$e)})," of ",(0,o.jsx)("span",{className:"font-medium",children:$e})," results"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>St(Ie-1),disabled:!Ke,className:"px-3 py-1.5 text-xs font-medium border rounded-lg transition-colors duration-200 text-gray-500 border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"rgb(249,250,251)"},children:"Previous"}),(0,o.jsxs)("span",{className:"px-3 py-1.5 text-xs font-medium text-gray-700",children:["Page ",Ie," of ",qe," (",qe>1?`${qe} pages`:"1 page",")"]}),(0,o.jsx)("button",{onClick:()=>St(Ie+1),disabled:!Ve,className:"px-3 py-1.5 text-xs font-medium border rounded-lg transition-colors duration-200 text-gray-500 border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"rgb(249,250,251)"},children:"Next"})]})]})]})]}),"features"===P&&(0,o.jsxs)("div",{className:"bg-white rounded-md shadow-sm",children:[lt&&(0,o.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Loading features..."})]}),ot&&(0,o.jsxs)("div",{className:"p-4 text-center",children:[(0,o.jsx)("div",{className:"text-red-600 text-sm mb-2",children:ot}),(0,o.jsx)("button",{onClick:()=>Ct(1),className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors duration-200",children:"Retry"})]}),!lt&&!ot&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"overflow-x-auto border-0",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Name"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Code"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Description"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Is Active"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Is Billable"})})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:at.map((e,t)=>(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-25",children:[(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-gray-900 font-mono",children:e.code})}),(0,o.jsx)("td",{className:"px-3 py-1.5",children:(0,o.jsx)("div",{className:"text-sm text-gray-900 max-w-xs truncate",title:e.description,children:e.description||"-"})}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap",children:(0,o.jsx)("span",{className:"inline-flex px-2 py-0.5 text-xs font-semibold rounded-full "+(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Inactive"})}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap",children:(0,o.jsx)("span",{className:"inline-flex px-2 py-0.5 text-xs font-semibold rounded-full "+(e.is_billable?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.is_billable?"Billable":"Non-Billable"})})]},e.id))})]})}),pt>1&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"h-4 mt-4 rounded-t-lg",style:{backgroundColor:"rgb(249,250,251)"}}),(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border-0 mb-4",style:{backgroundColor:"rgb(249,250,251)",position:"relative",zIndex:10},children:[(0,o.jsxs)("div",{className:"text-xs text-gray-600",children:["Showing ",(0,o.jsx)("span",{className:"font-medium",children:(ct-1)*Be+1})," to ",(0,o.jsx)("span",{className:"font-medium",children:Math.min(ct*Be,mt)})," of ",(0,o.jsx)("span",{className:"font-medium",children:mt})," results"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>Ct(ct-1),disabled:!bt,className:"px-2.5 py-1 text-xs font-medium border rounded transition-colors duration-200 text-gray-500 border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"rgb(249,250,251)"},children:"Previous"}),(0,o.jsxs)("span",{className:"px-2.5 py-1 text-xs font-medium text-gray-600",children:["Page ",ct," of ",pt," (",pt>1?`${pt} pages`:"1 page",")"]}),(0,o.jsx)("button",{onClick:()=>Ct(ct+1),disabled:!gt,className:"px-2.5 py-1 text-xs font-medium border rounded transition-colors duration-200 text-gray-500 border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"rgb(249,250,251)"},children:"Next"})]})]})]})]})]}),"subscriptions"===P&&(0,o.jsxs)("div",{className:"bg-white rounded-md shadow-sm",children:[Nt&&(0,o.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Loading subscriptions..."})]}),_t&&(0,o.jsxs)("div",{className:"p-4 text-center",children:[(0,o.jsx)("div",{className:"text-red-600 text-sm mb-2",children:_t}),(0,o.jsx)("button",{onClick:()=>Et(),className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors duration-200",children:"Retry"})]}),!Nt&&!_t&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"overflow-x-auto border-0",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"School Name"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Plan Name"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Interval"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Status"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Start Date"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"End Date"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Auto Renew"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Students Count"})}),(0,o.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Actions"})})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:vt.length>0?vt.map((e,t)=>{var s,r;return(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-25",children:[(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(null===(s=e.school_details)||void 0===s?void 0:s.name)||"N/A"})}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-gray-900",children:(null===(r=e.plan_details)||void 0===r?void 0:r.name)||e.custom_plan_name||"N/A"})}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-gray-900 capitalize",children:e.interval||"N/A"})}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap",children:(0,o.jsx)("span",{className:"inline-flex px-2 py-0.5 text-xs font-semibold rounded-full "+("active"===e.status?"bg-green-100 text-green-800":"canceled"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status||"N/A"})}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-sm text-gray-900",children:e.start_date?new Date(e.start_date).toLocaleDateString():"N/A"}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-sm text-gray-900",children:e.end_date?new Date(e.end_date).toLocaleDateString():"N/A"}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap",children:(0,o.jsx)("span",{className:"inline-flex px-2 py-0.5 text-xs font-semibold rounded-full "+(e.auto_renew?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.auto_renew?"Yes":"No"})}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-sm text-gray-900",children:e.student_count||"0"}),(0,o.jsx)("td",{className:"px-3 py-1.5 whitespace-nowrap text-sm text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,o.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{ue(e),de(!0)})(e)},className:"p-1 rounded-md transition-colors duration-200 text-blue-600 hover:text-blue-700 hover:bg-blue-50",title:"View Subscription Details",children:Q({className:"w-3 h-3"})}),(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)("button",{onClick:t=>{if(t.stopPropagation(),D(L===e.id?null:e.id),L!==e.id){const e=t.currentTarget.getBoundingClientRect();M({x:e.left,y:e.bottom+window.scrollY})}},className:"p-1 rounded-md transition-colors duration-200 "+(L===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:q({className:"w-3 h-3"})})})]})})]},e.id)}):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:9,className:"px-4 py-8 text-center text-sm text-gray-500",children:"No school subscriptions found"})})})]})})})]}),"pricing"===P&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Pricing Management"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Configure pricing and billing settings."})]})}),L&&"plans"===P&&(0,ve.createPortal)((0,o.jsx)("div",{className:"fixed w-32 bg-white rounded-md shadow-lg border border-gray-200 z-[9999]","data-portal-dropdown":!0,style:{left:`${R.x}px`,top:`${R.y}px`},onClick:e=>e.stopPropagation(),children:(0,o.jsxs)("div",{className:"py-1",children:[(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=Je.find(e=>e.id===L);t&&(D(null),U({message:"Edit functionality coming soon!",type:"success"}))},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-colors duration-200",children:[H({className:"w-3 h-3 mr-2"}),"Edit"]}),(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=Je.find(e=>e.id===L);t&&(async e=>{try{Xe(t=>t.filter(t=>t.id!==e.id)),D(null),U({message:"Plan deleted successfully!",type:"success"})}catch(st){console.error("Error deleting plan:",st),U({message:"Failed to delete plan. Please try again.",type:"error"})}})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-red-50 hover:text-red-700 transition-colors duration-200",children:[xe({className:"w-3 h-3 mr-2"}),"Delete"]})]})}),document.body),L&&"subscriptions"===P&&(0,ve.createPortal)((0,o.jsx)("div",{className:"fixed w-32 bg-white rounded-md shadow-lg border border-gray-200 z-[9999]","data-portal-dropdown":!0,style:{left:`${R.x}px`,top:`${R.y}px`},onClick:e=>e.stopPropagation(),children:(0,o.jsxs)("div",{className:"py-1",children:[(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=vt.find(e=>e.id===L);t&&(async e=>{try{console.log("Opening edit subscription drawer for:",e),D(null),0===be.length&&await Ft(),0===je.length&&await Dt(),De(e),_e({school:e.school,start_date:e.start_date,interval:e.interval,status:e.status,end_date:e.end_date||"",auto_renew:e.auto_renew,base_price:e.base_price||"",custom_price:e.custom_price||"",discount_percent:e.discount_percent||"",notes:e.notes||"",plan:e.plan,custom_plan_name:e.custom_plan_name||"",pricing_option:e.pricing_option||""}),ze({}),Me(""),Pe(!0),setTimeout(()=>{Le(!0)},10)}catch(st){console.error("Error preparing edit subscription form:",st),U({message:"Failed to load subscription data. Please try again.",type:"error"})}})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-colors duration-200",children:[H({className:"w-3 h-3 mr-2"}),"Edit"]}),(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();vt.find(e=>e.id===L)&&(D(null),U({message:"Delete subscription functionality coming soon!",type:"success"}))},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-red-50 hover:text-red-700 transition-colors duration-200",children:[xe({className:"w-3 h-3 mr-2"}),"Delete"]})]})}),document.body),I&&(0,o.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[10000] flex items-center p-4 rounded-lg shadow-lg transition-all duration-300",children:(0,o.jsxs)("div",{className:`flex items-center space-x-3 ${"success"===I.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"} px-6 py-4 rounded-lg shadow-xl`,children:["success"===I.type?F({className:"w-5 h-5 text-green-600"}):me({className:"w-5 h-5 text-red-600"}),(0,o.jsx)("span",{className:"text-sm font-medium",children:I.message}),(0,o.jsx)("button",{onClick:()=>U(null),className:"ml-3 text-gray-400 hover:text-gray-600",children:me({className:"w-4 h-4"})})]})}),B&&W&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10001]",children:(0,o.jsxs)("div",{className:"bg-purple-50 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[85vh] overflow-hidden",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-purple-200",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-purple-600 rounded flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,o.jsx)("h2",{className:"text-lg font-bold text-purple-900",children:W.name})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>(async()=>{try{const e=await Ye.getBillingFeatures();e.results&&e.results.length>0?J(e.results):e.data&&e.data.results?J(e.data.results):J([]),X(""),te(""),ae(""),le(""),K(!0)}catch(st){console.error("Error fetching features:",st),U({message:"Failed to load available features",type:"error"})}})(),className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center text-white hover:bg-purple-700 transition-colors duration-200",title:"Add Feature",children:re({className:"w-3 h-3"})}),(0,o.jsx)("button",{onClick:()=>$(!1),className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center text-white hover:bg-purple-700 transition-colors duration-200",children:(0,o.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,o.jsx)("div",{className:"p-4 overflow-y-auto max-h-[calc(85vh-120px)]",children:W.features&&W.features.length>0?(0,o.jsx)("div",{className:"space-y-3",children:W.features.map((e,t)=>{var s,r,a,n;return(0,o.jsxs)("div",{className:"bg-white rounded-lg p-3 border border-purple-200 relative",children:[(0,o.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-purple-900",children:(null===(s=e.feature_details)||void 0===s?void 0:s.name)||"Unknown Feature"}),(0,o.jsx)("span",{className:"inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:(null===(r=e.feature_details)||void 0===r?void 0:r.code)||"N/A"})]})}),(0,o.jsx)("div",{className:"mb-2 pb-2 border-b border-purple-100",children:(0,o.jsx)("p",{className:"text-xs text-gray-600",children:(null===(a=e.feature_details)||void 0===a?void 0:a.description)||"No description available"})}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-purple-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-purple-900",children:"Included Quantity:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:(null===(n=e.included_quantity)||void 0===n?void 0:n.toLocaleString())||"0"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-purple-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-purple-900",children:"Price Per Unit:"}),(0,o.jsxs)("span",{className:"text-xs text-gray-700 font-semibold",children:["KSh ",e.price_per_unit||"0.00"]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-purple-900",children:"Overage Price:"}),(0,o.jsxs)("span",{className:"text-xs text-gray-700 font-semibold",children:["KSh ",e.overage_price_per_unit||"0.00"]})]})]}),(0,o.jsx)("button",{onClick:()=>{return t=W,s=e.id,U({message:"Remove feature functionality coming soon!",type:"success"}),void console.log("Removing feature from plan:",t,"Feature ID:",s);var t,s},className:"absolute top-2 right-2 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-white hover:bg-red-600 transition-colors duration-200",title:"Remove Feature",children:xe({className:"w-2.5 h-2.5"})})]},e.id)})}):(0,o.jsxs)("div",{className:"text-center py-6",children:[(0,o.jsx)("div",{className:"text-purple-400 mb-2",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-purple-900 mb-1",children:"No Features Found"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"This plan doesn't have any features configured yet."})]})}),(0,o.jsx)("div",{className:"flex items-center justify-end p-4 border-t border-purple-200 bg-purple-50",children:(0,o.jsx)("button",{onClick:()=>$(!1),className:"px-4 py-1.5 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors duration-200 font-medium text-sm",children:"Close"})})]})}),G&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-end z-[10002]",children:(0,o.jsxs)("div",{className:"bg-white h-full w-96 shadow-xl overflow-y-auto",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add Feature to Plan"}),(0,o.jsx)("button",{onClick:()=>K(!1),className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:me({className:"w-6 h-6"})})]}),(0,o.jsxs)("div",{className:"p-6 space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plan"}),(0,o.jsx)("input",{type:"text",value:(null===W||void 0===W?void 0:W.name)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-700"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Feature *"}),(0,o.jsxs)("select",{value:Z,onChange:e=>X(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,o.jsx)("option",{value:"",children:"Select a feature"}),Y.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Included Quantity"}),(0,o.jsx)("input",{type:"number",value:se,onChange:e=>ae(e.target.value),placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Per Unit"}),(0,o.jsx)("input",{type:"number",step:"0.01",value:ee,onChange:e=>te(e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Overage Price Per Unit"}),(0,o.jsx)("input",{type:"number",step:"0.01",value:ne,onChange:e=>le(e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[(0,o.jsx)("button",{onClick:()=>K(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if(Z&&W)try{const e={plan:W.id,feature:Z,included_quantity:parseInt(se)||0,price_per_unit:parseFloat(ee)||0,overage_price_per_unit:parseFloat(ne)||0};if(console.log("Adding feature to plan:",e),U({message:"Feature added successfully!",type:"success"}),K(!1),W){const e=Je.find(e=>e.id===W.id);e&&V(e)}}catch(st){console.error("Error adding feature:",st),U({message:"Failed to add feature",type:"error"})}else U({message:"Please select a feature",type:"error"})},className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors duration-200",children:"Add Feature"})]})]})}),pe&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-end z-[10002] transition-all duration-300 ease-in-out",children:(0,o.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 h-full w-96 shadow-2xl overflow-y-auto border-l border-gray-100 transform transition-transform duration-300 ease-out "+(ge?"translate-x-0":"translate-x-full"),children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Add New Subscription"})]}),(0,o.jsx)("button",{onClick:Ot,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[Ce&&(0,o.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-4 shadow-sm",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-sm font-medium text-red-800",children:Ce})})]})}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"School *"]}),(0,o.jsxs)("select",{value:we.school,onChange:e=>_e({...we,school:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(ke.school?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select a school"}),Array.isArray(be)&&be.length>0?be.map(e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id)):(0,o.jsx)("option",{value:"",disabled:!0,children:"Loading schools..."})]}),ke.school&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.school})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Plan *"]}),(0,o.jsxs)("select",{value:we.plan,onChange:e=>_e({...we,plan:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(ke.plan?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select a plan"}),Array.isArray(je)&&je.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.name," (",e.plan_type,")"]},e.id))]}),ke.plan&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.plan})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Custom Plan Name"]}),(0,o.jsx)("input",{type:"text",value:we.custom_plan_name,onChange:e=>_e({...we,custom_plan_name:e.target.value}),placeholder:"Enter custom plan name...",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+(ke.custom_plan_name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),ke.custom_plan_name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.custom_plan_name})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"Pricing Option *"]}),(0,o.jsxs)("select",{value:we.pricing_option,onChange:e=>_e({...we,pricing_option:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 transition-all duration-200 bg-white "+(ke.pricing_option?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select pricing option"}),(0,o.jsx)("option",{value:"feature_based",children:"Feature Based"}),(0,o.jsx)("option",{value:"student_based",children:"Student Based"}),(0,o.jsx)("option",{value:"custom_price",children:"Custom Price"})]}),ke.pricing_option&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.pricing_option})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Start Date *"]}),(0,o.jsx)("input",{type:"date",value:we.start_date,onChange:e=>_e({...we,start_date:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(ke.start_date?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),ke.start_date&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.start_date})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-1.5"}),"End Date"]}),(0,o.jsx)("input",{type:"date",value:we.end_date,onChange:e=>_e({...we,end_date:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-100 focus:border-red-500 transition-all duration-200 bg-white "+(ke.end_date?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),ke.end_date&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.end_date})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Billing Interval *"]}),(0,o.jsxs)("select",{value:we.interval,onChange:e=>_e({...we,interval:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+(ke.interval?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"monthly",children:"Monthly"}),(0,o.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,o.jsx)("option",{value:"yearly",children:"Yearly"}),(0,o.jsx)("option",{value:"custom",children:"Custom"})]}),ke.interval&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.interval})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-teal-500 rounded-full mr-1.5"}),"Status *"]}),(0,o.jsxs)("select",{value:we.status,onChange:e=>_e({...we,status:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-100 focus:border-teal-500 transition-all duration-200 bg-white "+(ke.status?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"active",children:"Active"}),(0,o.jsx)("option",{value:"pending",children:"Pending"}),(0,o.jsx)("option",{value:"canceled",children:"Canceled"}),(0,o.jsx)("option",{value:"expired",children:"Expired"}),(0,o.jsx)("option",{value:"trial",children:"Trial"})]}),ke.status&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.status})]})]}),(0,o.jsx)("div",{children:(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",checked:we.auto_renew,onChange:e=>_e({...we,auto_renew:e.target.checked}),className:"h-3 w-3 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsx)("span",{className:"ml-2 text-xs text-gray-700",children:"Auto Renew"})]})}),(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-1.5"}),"Base Price"]}),(0,o.jsx)("input",{type:"number",step:"0.01",value:we.base_price,onChange:e=>_e({...we,base_price:e.target.value}),placeholder:"0.00",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-500 transition-all duration-200 bg-white "+(ke.base_price?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),ke.base_price&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.base_price})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"Custom Price"]}),(0,o.jsx)("input",{type:"number",step:"0.01",value:we.custom_price,onChange:e=>_e({...we,custom_price:e.target.value}),placeholder:"0.00",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 transition-all duration-200 bg-white "+(ke.custom_price?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),ke.custom_price&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.custom_price})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-pink-500 rounded-full mr-1.5"}),"Discount %"]}),(0,o.jsx)("input",{type:"number",step:"0.01",value:we.discount_percent,onChange:e=>_e({...we,discount_percent:e.target.value}),placeholder:"0.00",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-pink-500 transition-all duration-200 bg-white "+(ke.discount_percent?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),ke.discount_percent&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.discount_percent})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-violet-500 rounded-full mr-1.5"}),"Notes"]}),(0,o.jsx)("textarea",{value:we.notes,onChange:e=>_e({...we,notes:e.target.value}),placeholder:"Enter notes...",rows:2,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-100 focus:border-violet-500 transition-all duration-200 bg-white resize-none "+(ke.notes?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),ke.notes&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.notes})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:Ot,className:"px-4 py-2 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{try{if(console.log("Submitting subscription:",we),!we.school||!we.plan||!we.start_date||!we.pricing_option)return void U({message:"Please fill in all required fields (School, Plan, Start Date, Pricing Option)",type:"error"});const e=await fetch("http://127.0.0.1:8000/api/v1/billing/subscriptions/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${sessionStorage.getItem("authToken")}`},body:JSON.stringify({school:we.school,start_date:we.start_date,custom_plan_name:we.custom_plan_name||"",interval:we.interval,status:we.status,end_date:we.end_date||null,auto_renew:we.auto_renew,base_price:we.base_price||"",custom_price:we.custom_price||"",discount_percent:we.discount_percent||"",notes:we.notes||"",plan:we.plan,pricing_option:we.pricing_option})});if(e.ok){const t=await e.json();console.log("Subscription created successfully:",t),U({message:"Subscription created successfully!",type:"success"}),Ot(),Et()}else{const t=await e.json().catch(()=>({}));if(console.error("Failed to create subscription:",e.status,t),Se({}),Ee(""),t.errors){const e={};Object.keys(t.errors).forEach(s=>{"non_field_errors"===s?Array.isArray(t.errors[s])?Ee(t.errors[s].join(", ")):Ee(t.errors[s]):Array.isArray(t.errors[s])?e[s]=t.errors[s].join(", "):e[s]=t.errors[s]}),Se(e)}else Ee(t.message||e.statusText||"Failed to create subscription")}}catch(st){console.error("Error creating subscription:",st),U({message:"Failed to create subscription. Please try again.",type:"error"})}},className:"px-4 py-2 text-xs bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-semibold shadow-sm hover:shadow-md",children:"Create Subscription"})]})]})}),Ae&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-end z-[10002] transition-all duration-300 ease-in-out",children:(0,o.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 h-full w-96 shadow-2xl overflow-y-auto border-l border-gray-100 transform transition-transform duration-300 ease-out "+(Te?"translate-x-0":"translate-x-full"),children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Edit Subscription"})]}),(0,o.jsx)("button",{onClick:zt,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[Re&&(0,o.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-4 shadow-sm",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-sm font-medium text-red-800",children:Re})})]})}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"School *"]}),(0,o.jsxs)("select",{value:we.school,onChange:e=>_e({...we,school:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(Oe.school?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select a school"}),Array.isArray(be)&&be.length>0?be.map(e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id)):(0,o.jsx)("option",{value:"",disabled:!0,children:"Loading schools..."})]}),Oe.school&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Oe.school})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Plan *"]}),(0,o.jsxs)("select",{value:we.plan,onChange:e=>_e({...we,plan:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(Oe.plan?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select a plan"}),Array.isArray(je)&&je.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.name," (",e.plan_type,")"]},e.id))]}),Oe.plan&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Oe.plan})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Custom Plan Name"]}),(0,o.jsx)("input",{type:"text",value:we.custom_plan_name,onChange:e=>_e({...we,custom_plan_name:e.target.value}),placeholder:"Enter custom plan name...",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+(Oe.custom_plan_name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Oe.custom_plan_name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Oe.custom_plan_name})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"Pricing Option *"]}),(0,o.jsxs)("select",{value:we.pricing_option,onChange:e=>_e({...we,pricing_option:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 transition-all duration-200 bg-white "+(Oe.pricing_option?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select pricing option"}),(0,o.jsx)("option",{value:"feature_based",children:"Feature Based"}),(0,o.jsx)("option",{value:"student_based",children:"Student Based"}),(0,o.jsx)("option",{value:"custom_price",children:"Custom Price"})]}),Oe.pricing_option&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Oe.pricing_option})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Start Date *"]}),(0,o.jsx)("input",{type:"date",value:we.start_date,onChange:e=>_e({...we,start_date:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(Oe.start_date?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Oe.start_date&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Oe.start_date})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-1.5"}),"End Date"]}),(0,o.jsx)("input",{type:"date",value:we.end_date,onChange:e=>_e({...we,end_date:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-100 focus:border-red-500 transition-all duration-200 bg-white "+(Oe.end_date?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Oe.end_date&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Oe.end_date})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Billing Interval *"]}),(0,o.jsxs)("select",{value:we.interval,onChange:e=>_e({...we,interval:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+(Oe.interval?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"monthly",children:"Monthly"}),(0,o.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,o.jsx)("option",{value:"yearly",children:"Yearly"}),(0,o.jsx)("option",{value:"custom",children:"Custom"})]}),Oe.interval&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Oe.interval})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-teal-500 rounded-full mr-1.5"}),"Status *"]}),(0,o.jsxs)("select",{value:we.status,onChange:e=>_e({...we,status:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-100 focus:border-teal-500 transition-all duration-200 bg-white "+(Oe.status?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"active",children:"Active"}),(0,o.jsx)("option",{value:"pending",children:"Pending"}),(0,o.jsx)("option",{value:"canceled",children:"Canceled"}),(0,o.jsx)("option",{value:"expired",children:"Expired"}),(0,o.jsx)("option",{value:"trial",children:"Trial"})]}),Oe.status&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Oe.status})]})]}),(0,o.jsx)("div",{children:(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",checked:we.auto_renew,onChange:e=>_e({...we,auto_renew:e.target.checked}),className:"h-3 w-3 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsx)("span",{className:"ml-2 text-xs text-gray-700",children:"Auto Renew"})]})}),(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-1.5"}),"Base Price"]}),(0,o.jsx)("input",{type:"number",step:"0.01",value:we.base_price,onChange:e=>_e({...we,base_price:e.target.value}),placeholder:"0.00",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-500 transition-all duration-200 bg-white "+(Oe.base_price?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Oe.base_price&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Oe.base_price})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"Custom Price"]}),(0,o.jsx)("input",{type:"number",step:"0.01",value:we.custom_price,onChange:e=>_e({...we,custom_price:e.target.value}),placeholder:"0.00",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 transition-all duration-200 bg-white "+(Oe.custom_price?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Oe.custom_price&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Oe.custom_price})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-pink-500 rounded-full mr-1.5"}),"Discount %"]}),(0,o.jsx)("input",{type:"number",step:"0.01",value:we.discount_percent,onChange:e=>_e({...we,discount_percent:e.target.value}),placeholder:"0.00",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-pink-500 transition-all duration-200 bg-white "+(Oe.discount_percent?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Oe.discount_percent&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Oe.discount_percent})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-violet-500 rounded-full mr-1.5"}),"Notes"]}),(0,o.jsx)("textarea",{value:we.notes,onChange:e=>_e({...we,notes:e.target.value}),placeholder:"Enter notes...",rows:2,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-100 focus:border-violet-500 transition-all duration-200 bg-white resize-none "+(Oe.notes?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Oe.notes&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Oe.notes})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:zt,className:"px-4 py-2 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{try{if(console.log("Updating subscription:",we),!Fe)return void U({message:"No subscription selected for editing",type:"error"});if(!we.school||!we.plan||!we.start_date||!we.pricing_option)return void U({message:"Please fill in all required fields (School, Plan, Start Date, Pricing Option)",type:"error"});const e=await fetch(`http://127.0.0.1:8000/api/v1/billing/subscriptions/${Fe.id}/`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${sessionStorage.getItem("authToken")}`},body:JSON.stringify({school:we.school,start_date:we.start_date,custom_plan_name:we.custom_plan_name||"",interval:we.interval,status:we.status,end_date:we.end_date||null,auto_renew:we.auto_renew,base_price:we.base_price||"",custom_price:we.custom_price||"",discount_percent:we.discount_percent||"",notes:we.notes||"",plan:we.plan,pricing_option:we.pricing_option})});if(e.ok){const t=await e.json();console.log("Subscription updated successfully:",t),U({message:"Subscription updated successfully!",type:"success"}),zt(),Et()}else{const t=await e.json().catch(()=>({}));if(console.error("Failed to update subscription:",e.status,t),ze({}),Me(""),t.errors){const e={};Object.keys(t.errors).forEach(s=>{"non_field_errors"===s?Array.isArray(t.errors[s])?Me(t.errors[s].join(", ")):Me(t.errors[s]):Array.isArray(t.errors[s])?e[s]=t.errors[s].join(", "):e[s]=t.errors[s]}),ze(e)}else Me(t.message||e.statusText||"Failed to update subscription")}}catch(st){console.error("Error updating subscription:",st),U({message:"Failed to update subscription. Please try again.",type:"error"})}},className:"px-4 py-2 text-xs bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-semibold shadow-sm hover:shadow-md",children:"Update Subscription"})]})]})}),oe&&ce&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10001]",children:(0,o.jsxs)("div",{className:"bg-purple-50 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[85vh] overflow-hidden",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-purple-200",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-purple-600 rounded flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,o.jsxs)("h2",{className:"text-lg font-bold text-purple-900",children:[null===(e=ce.school_details)||void 0===e?void 0:e.name," - Subscription"]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>U({message:"Add feature functionality coming soon!",type:"success"}),className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center text-white hover:bg-purple-700 transition-colors duration-200",title:"Add Feature",children:re({className:"w-3 h-3"})}),(0,o.jsx)("button",{onClick:()=>de(!1),className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center text-white hover:bg-purple-700 transition-colors duration-200",children:(0,o.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,o.jsxs)("div",{className:"p-4 overflow-y-auto max-h-[calc(85vh-120px)] space-y-4",children:[(0,o.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[(0,o.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-blue-900",children:"School Details"}),(0,o.jsx)("span",{className:"inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full "+(null!==(t=ce.school_details)&&void 0!==t&&t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:null!==(s=ce.school_details)&&void 0!==s&&s.is_active?"Active":"Inactive"})]})}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-blue-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-blue-900",children:"School Name:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:(null===(a=ce.school_details)||void 0===a?void 0:a.name)||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-blue-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-blue-900",children:"Domain:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:(null===(n=ce.school_details)||void 0===n?void 0:n.domain)||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-blue-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-blue-900",children:"Email:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:(null===(i=ce.school_details)||void 0===i?void 0:i.email)||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-blue-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-blue-900",children:"Phone:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:(null===(d=ce.school_details)||void 0===d?void 0:d.phone)||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-blue-900",children:"Max Students:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:(null===(c=ce.school_details)||void 0===c||null===(u=c.max_students)||void 0===u?void 0:u.toLocaleString())||"0"})]})]})]}),(0,o.jsxs)("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200",children:[(0,o.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-green-900",children:"Subscription Details"}),(0,o.jsx)("span",{className:"inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full "+("active"===ce.status?"bg-green-100 text-green-800":"canceled"===ce.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:ce.status||"N/A"})]})}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-green-900",children:"Billing Interval:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold capitalize",children:ce.interval||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-green-900",children:"Start Date:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:ce.start_date?new Date(ce.start_date).toLocaleDateString():"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-green-900",children:"End Date:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:ce.end_date?new Date(ce.end_date).toLocaleDateString():"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-green-900",children:"Auto Renew:"}),(0,o.jsx)("span",{className:"inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full "+(ce.auto_renew?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:ce.auto_renew?"Yes":"No"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-green-900",children:"Student Count:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:(null===(m=ce.student_count)||void 0===m?void 0:m.toLocaleString())||"0"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-green-900",children:"Pricing Option:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold capitalize",children:(null===(x=ce.pricing_option)||void 0===x?void 0:x.replace("_"," "))||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-green-900",children:"Notes:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:ce.notes||"N/A"})]})]})]}),(0,o.jsxs)("div",{className:"bg-purple-50 rounded-lg p-3 border border-purple-200",children:[(0,o.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-purple-900",children:"Plan Details"}),(0,o.jsx)("span",{className:"inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:(null===(p=ce.plan_details)||void 0===p?void 0:p.plan_type)||"N/A"})]})}),(0,o.jsx)("div",{className:"mb-2 pb-2 border-b border-purple-100",children:(0,o.jsx)("p",{className:"text-xs text-gray-600",children:(null===(h=ce.plan_details)||void 0===h?void 0:h.description)||"No description available"})}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-purple-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-purple-900",children:"Plan Name:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:(null===(g=ce.plan_details)||void 0===g?void 0:g.name)||ce.custom_plan_name||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-purple-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-purple-900",children:"Plan Status:"}),(0,o.jsx)("span",{className:"inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full "+(null!==(f=ce.plan_details)&&void 0!==f&&f.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:null!==(b=ce.plan_details)&&void 0!==b&&b.is_active?"Active":"Inactive"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-purple-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-purple-900",children:"Is Default:"}),(0,o.jsx)("span",{className:"inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full "+(null!==(y=ce.plan_details)&&void 0!==y&&y.is_default?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:null!==(v=ce.plan_details)&&void 0!==v&&v.is_default?"Yes":"No"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-purple-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-purple-900",children:"Base Price:"}),(0,o.jsxs)("span",{className:"text-xs text-gray-700 font-semibold",children:["KSh ",ce.base_price||"0.00"]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-purple-900",children:"Custom Price:"}),(0,o.jsxs)("span",{className:"text-xs text-gray-700 font-semibold",children:["KSh ",ce.custom_price||"0.00"]})]})]})]}),null!==(j=ce.plan_details)&&void 0!==j&&j.features&&ce.plan_details.features.length>0?(0,o.jsxs)("div",{className:"bg-orange-50 rounded-lg p-3 border border-orange-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-orange-900",children:"Plan Features"}),(0,o.jsxs)("span",{className:"inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full bg-orange-100 text-orange-800",children:[ce.plan_details.features.length," features"]})]}),(0,o.jsx)("div",{className:"space-y-3",children:ce.plan_details.features.map((e,t)=>{var s,r,a,n;return(0,o.jsxs)("div",{className:"bg-white rounded-lg p-3 border border-orange-200 relative",children:[(0,o.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("h4",{className:"text-sm font-semibold text-gray-900",children:(null===(s=e.feature_details)||void 0===s?void 0:s.name)||"Unknown Feature"}),(0,o.jsx)("span",{className:"inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full bg-orange-100 text-orange-800",children:(null===(r=e.feature_details)||void 0===r?void 0:r.code)||"N/A"})]})}),(0,o.jsx)("div",{className:"mb-2 pb-2 border-b border-orange-200",children:(0,o.jsx)("p",{className:"text-xs text-gray-600",children:(null===(a=e.feature_details)||void 0===a?void 0:a.description)||"No description available"})}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-orange-200",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-orange-900",children:"Included Quantity:"}),(0,o.jsx)("span",{className:"text-xs text-gray-900 font-semibold",children:(null===(n=e.included_quantity)||void 0===n?void 0:n.toLocaleString())||"0"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-orange-200",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-orange-900",children:"Price Per Unit:"}),(0,o.jsxs)("span",{className:"text-xs text-gray-900 font-semibold",children:["KSh ",e.price_per_unit||"0.00"]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-orange-900",children:"Overage Price:"}),(0,o.jsxs)("span",{className:"text-xs text-gray-900 font-semibold",children:["KSh ",e.overage_price_per_unit||"0.00"]})]})]}),(0,o.jsx)("button",{onClick:()=>U({message:"Remove feature functionality coming soon!",type:"success"}),className:"absolute top-2 right-2 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-white hover:bg-red-600 transition-colors duration-200",title:"Remove Feature",children:xe({className:"w-2.5 h-2.5"})})]},e.id)})})]}):(0,o.jsx)("div",{className:"bg-orange-50 rounded-lg p-3 border border-orange-200",children:(0,o.jsxs)("div",{className:"text-center py-6",children:[(0,o.jsx)("div",{className:"text-orange-400 mb-2",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-orange-900 mb-1",children:"No Features Found"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"This subscription doesn't have any features configured yet."})]})})]}),(0,o.jsx)("div",{className:"flex items-center justify-end p-4 border-t border-purple-200 bg-purple-50",children:(0,o.jsx)("button",{onClick:()=>de(!1),className:"px-4 py-1.5 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors duration-200 font-medium text-sm",children:"Close"})})]})})]})};const et=new class{async getAuditLogs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new URLSearchParams;Object.entries(e).forEach(e=>{let[s,r]=e;void 0!==r&&null!==r&&""!==r&&t.append(s,r.toString())});const s="/audit/logs/"+(t.toString()?`?${t.toString()}`:"");return await l.authenticatedRequest(s,{method:"GET",headers:{"Content-Type":"application/json"}})}async getAuditLog(e){return await l.authenticatedRequest(`/audit/logs/${e}/`,{method:"GET",headers:{"Content-Type":"application/json"}})}async getAuditLogStats(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return await l.authenticatedRequest(`/audit/logs/stats/?days=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}})}async getAuditLogSummary(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;return await l.authenticatedRequest(`/audit/logs/summary/?days=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}})}async getMyActivity(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;return await l.authenticatedRequest(`/audit/my-activity/?days=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}})}async getRecentLogins(){return await l.authenticatedRequest("/audit/my-activity/recent_logins/",{method:"GET",headers:{"Content-Type":"application/json"}})}},tt=[{value:"create",label:"Create"},{value:"update",label:"Update"},{value:"delete",label:"Delete"},{value:"view",label:"View"},{value:"login",label:"Login"},{value:"logout",label:"Logout"},{value:"download",label:"Download"},{value:"export",label:"Export"},{value:"import",label:"Import"},{value:"approve",label:"Approve"},{value:"reject",label:"Reject"},{value:"other",label:"Other"}],st=[{value:"info",label:"Info"},{value:"warning",label:"Warning"},{value:"error",label:"Error"},{value:"critical",label:"Critical"}],rt=e=>{var t,s,a,n,l,i,d,c,u;let{log:m,isOpen:x,onClose:p}=e;const[h,g]=(0,r.useState)({}),f=e=>new Date(e).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),b=e=>{switch(e){case"create":return"bg-green-100 text-green-800";case"update":return"bg-blue-100 text-blue-800";case"delete":return"bg-red-100 text-red-800";case"view":return"bg-gray-100 text-gray-800";case"login":return"bg-purple-100 text-purple-800";case"logout":return"bg-orange-100 text-orange-800";case"download":return"bg-indigo-100 text-indigo-800";case"export":return"bg-cyan-100 text-cyan-800";case"import":return"bg-teal-100 text-teal-800";case"approve":return"bg-emerald-100 text-emerald-800";case"reject":return"bg-rose-100 text-rose-800";default:return"bg-slate-100 text-slate-800"}},y=e=>{switch(e){case"info":return"bg-blue-100 text-blue-800";case"warning":return"bg-yellow-100 text-yellow-800";case"error":return"bg-red-100 text-red-800";case"critical":return"bg-red-200 text-red-900";default:return"bg-gray-100 text-gray-800"}},v=[{title:"Activity Information",tag:"activity_info",description:"Core activity identification and basic details",details:[{label:"Log ID",value:m.id},{label:"Action",value:m.action,isAction:!0},{label:"Level",value:m.level,isLevel:!0},{label:"Message",value:m.message},{label:"Timestamp",value:f(m.timestamp)}]},{title:"User Details",tag:"user_details",description:"User information who performed the action",details:[{label:"Username",value:(null===(t=m.user_details)||void 0===t?void 0:t.username)||"Unknown User"},{label:"Email",value:(null===(s=m.user_details)||void 0===s?void 0:s.email)||"No email"},{label:"First Name",value:(null===(a=m.user_details)||void 0===a?void 0:a.first_name)||"Not provided"},{label:"Last Name",value:(null===(n=m.user_details)||void 0===n?void 0:n.last_name)||"Not provided"},{label:"User ID",value:(null===(l=m.user_details)||void 0===l?void 0:l.id)||"Not provided"}]},{title:"School Information",tag:"school_details",description:"School context for the activity",details:[{label:"School Name",value:(null===(i=m.school_details)||void 0===i?void 0:i.name)||"Not provided"},{label:"School Code",value:(null===(d=m.school_details)||void 0===d?void 0:d.code)||"Not provided"},{label:"School ID",value:(null===(c=m.school_details)||void 0===c?void 0:c.id)||"Not provided"}]},{title:"Content Information",tag:"content_info",description:"Object and content details related to the activity",details:[{label:"Content Type",value:m.content_type},{label:"Object ID",value:m.object_id},{label:"Content Object",value:m.content_object||"N/A"},{label:"Object Representation",value:m.content_object_repr||"N/A"}]},{title:"HTTP Details",tag:"http_details",description:"HTTP request and response information",details:[{label:"HTTP Method",value:m.http_method},{label:"Status Code",value:m.status_code,isStatus:!0},{label:"URL",value:m.url},{label:"User IP",value:m.user_ip},{label:"User Agent",value:m.user_agent}]},{title:"System Information",tag:"system_info",description:"Creation and update timestamps",details:[{label:"Created At",value:f(m.created_at)},{label:"Updated At",value:f(m.updated_at)}]},{title:"Additional Details",tag:"additional_details",description:"Additional JSON details and metadata",details:[{label:"Details",value:m.details&&Object.keys(m.details).length>0?JSON.stringify(m.details,null,2):"No additional details",isJson:!0}]}];return x?(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10001]",children:(0,o.jsxs)("div",{className:"bg-blue-100 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[85vh] overflow-hidden",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-blue-200",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-blue-600 rounded flex items-center justify-center",children:Z({className:"w-4 h-4 text-white"})}),(0,o.jsxs)("h2",{className:"text-lg font-bold text-blue-900",children:["Activity Log - ",(null===(u=m.user_details)||void 0===u?void 0:u.username)||"Unknown User"," - ",m.action]})]}),(0,o.jsx)("div",{className:"flex items-center space-x-2",children:(0,o.jsx)("button",{onClick:p,className:"w-8 h-8 bg-white rounded-full flex items-center justify-center hover:bg-blue-50 transition-colors duration-200",title:"Close",children:me({className:"w-4 h-4 text-blue-600"})})})]}),(0,o.jsx)("div",{className:"overflow-y-auto max-h-[calc(85vh-120px)] p-3 space-y-3",children:v.map((e,t)=>(0,o.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,o.jsx)("h3",{className:"text-sm font-bold text-gray-900",children:e.title}),(0,o.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.tag})]}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:e.description}),(0,o.jsx)("div",{className:"space-y-0.5",children:e.details.map((e,t)=>{return(0,o.jsxs)("div",{className:"flex items-start py-1 border-b border-blue-200 last:border-b-0",children:[(0,o.jsxs)("span",{className:"text-xs font-semibold text-gray-800 flex-shrink-0 px-2 py-1 w-32",children:[e.label,":"]}),(0,o.jsx)("div",{className:"text-xs text-gray-900 flex-1 px-2 py-1",children:(0,o.jsx)("span",{children:e.isAction?(0,o.jsx)("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium ${b(m.action)}`,children:e.value}):e.isLevel?(0,o.jsx)("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium ${y(m.level)}`,children:e.value}):e.isStatus?(0,o.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium "+(s=m.status_code,s>=200&&s<300?"bg-green-100 text-green-800":s>=400?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.value}):e.isJson?(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap text-left overflow-auto max-h-32 bg-gray-50 p-2 rounded border",children:String(e.value)}),(0,o.jsx)("button",{onClick:()=>(async(e,t)=>{try{await navigator.clipboard.writeText(e),g(e=>({...e,[t]:!0})),setTimeout(()=>{g(e=>({...e,[t]:!1}))},2e3)}catch(s){console.error("Failed to copy text: ",s)}})(String(e.value),`json-${t}`),className:"absolute top-2 right-2 p-1 bg-white border border-gray-300 rounded hover:bg-gray-50 transition-colors duration-200",title:h[`json-${t}`]?"Copied!":"Copy JSON",children:h[`json-${t}`]?D({className:"w-3 h-3 text-green-600"}):U({className:"w-3 h-3 text-gray-600"})})]}):"URL"===e.label||"User Agent"===e.label?(0,o.jsx)("div",{className:"text-xs text-gray-700 break-all overflow-auto max-h-16",children:String(e.value||"Not provided")}):(0,o.jsx)("div",{className:"text-xs text-gray-700 break-words",children:String(e.value||"Not provided")})})})]},t);var s})})]},e.tag))}),(0,o.jsx)("div",{className:"px-4 pt-4 pb-6 border-t border-blue-200 bg-blue-50",children:(0,o.jsx)("div",{className:"flex justify-end space-x-2",children:(0,o.jsx)("button",{onClick:p,className:"px-6 py-1.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 font-medium text-sm",children:"Close"})})})]})}):null},at=e=>{let{searchQuery:t,setSearchQuery:s,debouncedSearchQuery:a,sortBy:n,setSortBy:l,sortDirection:i,setSortDirection:d,actionFilter:c,setActionFilter:u,levelFilter:m,setLevelFilter:x,contentTypeFilter:p,setContentTypeFilter:h,startDateFilter:g,setStartDateFilter:f,endDateFilter:b,setEndDateFilter:y,clearFilters:v}=e;const[j,N]=(0,r.useState)([]),[w,_]=(0,r.useState)(!0),[k,S]=(0,r.useState)(null),[C,E]=(0,r.useState)(null),[A,P]=(0,r.useState)(!1),[T,L]=(0,r.useState)(1),[F,D]=(0,r.useState)(0),[R]=(0,r.useState)(20),M=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{_(!0),S(null);const t={page:e,page_size:R,search:a||void 0,ordering:n?`${"desc"===i?"-":""}${n}`:void 0,action:c||void 0,level:m||void 0,content_type:p||void 0,start_date:g||void 0,end_date:b||void 0},s=await et.getAuditLogs(t);N(s.results||[]),D(s.count||0),L(e)}catch(t){console.error("Error fetching audit logs:",t),S("Failed to fetch audit logs")}finally{_(!1)}},[R,a,n,i,c,m,p,g,b]);(0,r.useEffect)(()=>{M()},[M]);const I=e=>{n===e?d("asc"===i?"desc":"asc"):(l(e),d("asc"))},U=e=>n!==e?null:"asc"===i?z({className:"w-3 h-3"}):O({className:"w-3 h-3"}),B=e=>{const t=tt.find(t=>t.value===e),s={create:"bg-green-100 text-green-800",update:"bg-blue-100 text-blue-800",delete:"bg-red-100 text-red-800",view:"bg-gray-100 text-gray-800",login:"bg-purple-100 text-purple-800",logout:"bg-orange-100 text-orange-800",download:"bg-indigo-100 text-indigo-800",export:"bg-cyan-100 text-cyan-800",import:"bg-teal-100 text-teal-800",approve:"bg-emerald-100 text-emerald-800",reject:"bg-rose-100 text-rose-800",other:"bg-slate-100 text-slate-800"};return(0,o.jsx)("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium ${s[e]||s.other}`,children:(null===t||void 0===t?void 0:t.label)||e})},$=e=>{const t=st.find(t=>t.value===e),s={info:"bg-blue-100 text-blue-800",warning:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800",critical:"bg-red-200 text-red-900"};return(0,o.jsx)("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium ${s[e]||s.info}`,children:(null===t||void 0===t?void 0:t.label)||e})},H=e=>{switch(e){case"info":return X({className:"w-2.5 h-2.5 text-blue-600"});case"warning":return G({className:"w-2.5 h-2.5 text-yellow-600"});case"error":return ue({className:"w-2.5 h-2.5 text-red-600"});case"critical":return G({className:"w-2.5 h-2.5 text-red-800"});default:return X({className:"w-2.5 h-2.5 text-gray-600"})}},q=e=>{const t=e>=200&&e<300,s=e>=400;return(0,o.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium "+(t?"bg-green-100 text-green-800":s?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e})},W=Math.ceil(F/R);return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[w&&(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading activity logs..."})]}),k&&(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsxs)("div",{className:"text-red-600 mb-4",children:[me({className:"w-12 h-12 mx-auto mb-2"}),(0,o.jsx)("p",{className:"text-lg font-medium",children:"Error Loading Activity Logs"}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:k})]}),(0,o.jsx)("button",{onClick:()=>M(),className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors duration-200",children:"Retry"})]}),!w&&!k&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"overflow-x-auto border-0",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-2 py-1.5 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>I("timestamp"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Timestamp"}),U("timestamp")]})}),(0,o.jsx)("th",{className:"px-2 py-1.5 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>I("user_details__username"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"User"}),U("user_details__username")]})}),(0,o.jsx)("th",{className:"px-2 py-1.5 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>I("action"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Action"}),U("action")]})}),(0,o.jsx)("th",{className:"px-2 py-1.5 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>I("content_type"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Type"}),U("content_type")]})}),(0,o.jsx)("th",{className:"px-2 py-1.5 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>I("content_object"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Object"}),U("content_object")]})}),(0,o.jsx)("th",{className:"px-2 py-1.5 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>I("level"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Level"}),U("level")]})}),(0,o.jsx)("th",{className:"px-2 py-1.5 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>I("status_code"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Status"}),U("status_code")]})}),(0,o.jsx)("th",{className:"px-2 py-1.5 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>I("message"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Message"}),U("message")]})}),(0,o.jsx)("th",{className:"px-2 py-1.5 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Actions"})})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:j.map((e,t)=>{var s,r,a;return(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-25",children:[(0,o.jsx)("td",{className:"px-2 py-1 whitespace-nowrap text-xs text-gray-900",children:(a=e.timestamp,new Date(a).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}))}),(0,o.jsx)("td",{className:"px-2 py-1 whitespace-nowrap text-xs text-gray-900",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,o.jsx)("div",{className:"w-5 h-5 bg-blue-100 rounded-full flex items-center justify-center",children:ge({className:"w-2.5 h-2.5 text-blue-600"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-medium text-xs",children:(null===(s=e.user_details)||void 0===s?void 0:s.username)||"Unknown User"}),(0,o.jsx)("div",{className:"text-gray-500 text-xs",children:(null===(r=e.user_details)||void 0===r?void 0:r.email)||"No email"})]})]})}),(0,o.jsx)("td",{className:"px-2 py-1 whitespace-nowrap text-xs text-gray-900",children:B(e.action)}),(0,o.jsx)("td",{className:"px-2 py-1 whitespace-nowrap text-xs text-gray-900",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e.content_type})}),(0,o.jsx)("td",{className:"px-2 py-1 whitespace-nowrap text-xs text-gray-900",children:(0,o.jsx)("div",{className:"max-w-xs truncate",title:e.content_object,children:e.content_object||"N/A"})}),(0,o.jsx)("td",{className:"px-2 py-1 whitespace-nowrap text-xs text-gray-900",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[H(e.level),$(e.level)]})}),(0,o.jsx)("td",{className:"px-2 py-1 whitespace-nowrap text-xs text-gray-900",children:q(e.status_code)}),(0,o.jsx)("td",{className:"px-2 py-1 text-xs text-gray-900",children:(0,o.jsx)("div",{className:"max-w-xs truncate",title:e.message,children:e.message})}),(0,o.jsx)("td",{className:"px-2 py-1 whitespace-nowrap text-xs text-gray-900",children:(0,o.jsx)("button",{onClick:()=>(e=>{E(e),P(!0)})(e),className:"p-0.5 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors duration-200",title:"View Details",children:Q({className:"w-3 h-3"})})})]},e.id)})})]})}),W>1&&(0,o.jsxs)("div",{className:"px-3 py-2 border-t border-gray-200 bg-gray-50 flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"text-xs text-gray-700",children:["Showing ",(T-1)*R+1," to ",Math.min(T*R,F)," of ",F," results"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>M(T-1),disabled:1===T,className:"px-2 py-1 text-xs border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,o.jsxs)("span",{className:"text-xs text-gray-700",children:["Page ",T," of ",W]}),(0,o.jsx)("button",{onClick:()=>M(T+1),disabled:T===W,className:"px-2 py-1 text-xs border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),!w&&!k&&0===j.length&&(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsxs)("div",{className:"text-gray-400 mb-4",children:[te({className:"w-12 h-12 mx-auto mb-2"}),(0,o.jsx)("p",{className:"text-lg font-medium text-gray-600",children:"No Activity Logs Found"}),(0,o.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"No activity logs match your current filters"})]}),(0,o.jsx)("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors duration-200",children:"Clear Filters"})]})]})]}),A&&C&&(0,o.jsx)(rt,{log:C,isOpen:A,onClose:()=>{P(!1),E(null)}})]})};const nt=()=>{var e,t,s,a,n,l;const[i,d]=(0,r.useState)(""),c=function(e,t){const[s,a]=(0,r.useState)(e);return(0,r.useEffect)(()=>{const s=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(s)}},[e,t]),s}(i,500),[u,m]=(0,r.useState)("timestamp"),[x,p]=(0,r.useState)("desc"),[h,g]=(0,r.useState)(""),[f,b]=(0,r.useState)(""),[y,v]=(0,r.useState)(""),[j,N]=(0,r.useState)(""),[w,_]=(0,r.useState)(""),[k,S]=(0,r.useState)(""),[E,A]=(0,r.useState)(""),[P,L]=(0,r.useState)(""),[F,D]=(0,r.useState)(!1),[O,z]=(0,r.useState)("activity-logs"),R=[{value:"",label:"All Actions"},{value:"create",label:"Create"},{value:"update",label:"Update"},{value:"delete",label:"Delete"},{value:"view",label:"View"},{value:"login",label:"Login"},{value:"logout",label:"Logout"},{value:"download",label:"Download"},{value:"export",label:"Export"},{value:"import",label:"Import"},{value:"approve",label:"Approve"},{value:"reject",label:"Reject"},{value:"other",label:"Other"}],M=[{value:"",label:"All Levels"},{value:"info",label:"Info"},{value:"warning",label:"Warning"},{value:"error",label:"Error"},{value:"critical",label:"Critical"}],I=[{value:"",label:"All Content Types"},{value:"student",label:"Student"},{value:"user",label:"User"},{value:"school",label:"School"},{value:"fee",label:"Fee"},{value:"payment",label:"Payment"},{value:"class",label:"Class"},{value:"stream",label:"Stream"},{value:"parent",label:"Parent"}],U=[{value:"",label:"All Users"},{value:"admin",label:"Admin"},{value:"teacher",label:"Teacher"},{value:"student",label:"Student"},{value:"parent",label:"Parent"}],B=[{value:"",label:"All Schools"},{value:"school1",label:"School 1"},{value:"school2",label:"School 2"},{value:"school3",label:"School 3"}],$=[{value:"",label:"All Status"},{value:"success",label:"Success"},{value:"error",label:"Error"},{value:"warning",label:"Warning"}],H=()=>{d(""),g(""),b(""),v(""),N(""),_(""),S(""),A(""),L(""),m("timestamp"),p("desc")},q=i||h||f||y||j||w||k||E||P,W=[{id:"activity-logs",label:"Activity Logs",icon:te},{id:"statistics",label:"Statistics",icon:T},{id:"reports",label:"Reports",icon:T}];return(0,o.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",children:[(0,o.jsxs)("div",{className:"mb-4 bg-white rounded-lg border border-gray-200 p-3",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("div",{className:"flex items-center space-x-6",children:W.map(e=>{const t=e.icon;return(0,o.jsxs)("button",{onClick:()=>z(e.id),className:"flex items-center space-x-1.5 py-1.5 px-1 border-b-2 font-medium text-sm transition-colors duration-200 "+(O===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[t({className:"w-3.5 h-3.5"}),(0,o.jsx)("span",{children:e.label})]},e.id)})}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2.5 flex items-center pointer-events-none",children:ie({className:"h-3.5 w-3.5 text-gray-400"})}),(0,o.jsx)("input",{type:"text",placeholder:"Search activity logs...",value:i,onChange:e=>d(e.target.value),className:"block w-56 pl-8 pr-3 py-1.5 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),(0,o.jsx)("select",{value:k,onChange:e=>S(e.target.value),className:"px-2.5 py-1.5 text-sm border border-gray-300 rounded-md bg-white hover:border-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 w-28",children:U.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,o.jsx)("select",{value:E,onChange:e=>A(e.target.value),className:"px-2.5 py-1.5 text-sm border border-gray-300 rounded-md bg-white hover:border-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 w-28",children:B.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,o.jsx)("select",{value:P,onChange:e=>L(e.target.value),className:"px-2.5 py-1.5 text-sm border border-gray-300 rounded-md bg-white hover:border-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 w-28",children:$.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),q&&(0,o.jsx)("button",{onClick:H,className:"text-xs font-medium text-gray-600 hover:text-gray-800 transition-colors duration-200 px-2 py-1",children:"Clear"})]})]}),q&&(0,o.jsxs)("div",{className:"mt-3 flex flex-wrap gap-1.5",children:[i&&(0,o.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Search: ",i,(0,o.jsx)("button",{onClick:()=>d(""),className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-blue-400 hover:bg-blue-200 hover:text-blue-500",children:me({className:"w-2 h-2"})})]}),h&&(0,o.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:["Action: ",null===(e=R.find(e=>e.value===h))||void 0===e?void 0:e.label,(0,o.jsx)("button",{onClick:()=>g(""),className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-green-400 hover:bg-green-200 hover:text-green-500",children:me({className:"w-2 h-2"})})]}),f&&(0,o.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:["Level: ",null===(t=M.find(e=>e.value===f))||void 0===t?void 0:t.label,(0,o.jsx)("button",{onClick:()=>b(""),className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-yellow-400 hover:bg-yellow-200 hover:text-yellow-500",children:me({className:"w-2 h-2"})})]}),y&&(0,o.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:["Type: ",null===(s=I.find(e=>e.value===y))||void 0===s?void 0:s.label,(0,o.jsx)("button",{onClick:()=>v(""),className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-purple-400 hover:bg-purple-200 hover:text-purple-500",children:me({className:"w-2 h-2"})})]}),j&&(0,o.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:["From: ",j,(0,o.jsx)("button",{onClick:()=>N(""),className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-indigo-400 hover:bg-indigo-200 hover:text-indigo-500",children:me({className:"w-2 h-2"})})]}),w&&(0,o.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-cyan-100 text-cyan-800",children:["To: ",w,(0,o.jsx)("button",{onClick:()=>_(""),className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-cyan-400 hover:bg-cyan-200 hover:text-cyan-500",children:me({className:"w-2 h-2"})})]}),k&&(0,o.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:["User: ",null===(a=U.find(e=>e.value===k))||void 0===a?void 0:a.label,(0,o.jsx)("button",{onClick:()=>S(""),className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-indigo-400 hover:bg-indigo-200 hover:text-indigo-500",children:me({className:"w-2 h-2"})})]}),E&&(0,o.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800",children:["School: ",null===(n=B.find(e=>e.value===E))||void 0===n?void 0:n.label,(0,o.jsx)("button",{onClick:()=>A(""),className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-emerald-400 hover:bg-emerald-200 hover:text-emerald-500",children:me({className:"w-2 h-2"})})]}),P&&(0,o.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-rose-100 text-rose-800",children:["Status: ",null===(l=$.find(e=>e.value===P))||void 0===l?void 0:l.label,(0,o.jsx)("button",{onClick:()=>L(""),className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-rose-400 hover:bg-rose-200 hover:text-rose-500",children:me({className:"w-2 h-2"})})]})]})]}),(0,o.jsxs)("div",{children:["activity-logs"===O&&(0,o.jsx)(at,{searchQuery:i,setSearchQuery:d,debouncedSearchQuery:c,sortBy:u,setSortBy:m,sortDirection:x,setSortDirection:p,actionFilter:h,setActionFilter:g,levelFilter:f,setLevelFilter:b,contentTypeFilter:y,setContentTypeFilter:v,startDateFilter:j,setStartDateFilter:N,endDateFilter:w,setEndDateFilter:_,clearFilters:H}),"statistics"===O&&(0,o.jsx)("div",{className:"p-8 text-center text-gray-500",children:(0,o.jsxs)("div",{className:"text-gray-400 mb-4",children:[T({className:"w-12 h-12 mx-auto mb-2"}),(0,o.jsx)("p",{className:"text-lg font-medium text-gray-600",children:"Statistics Coming Soon"}),(0,o.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Activity log statistics and analytics will be available here"})]})}),"reports"===O&&(0,o.jsx)("div",{className:"p-8 text-center text-gray-500",children:(0,o.jsxs)("div",{className:"text-gray-400 mb-4",children:[T({className:"w-12 h-12 mx-auto mb-2"}),(0,o.jsx)("p",{className:"text-lg font-medium text-gray-600",children:"Reports Coming Soon"}),(0,o.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Activity log reports and exports will be available here"})]})})]}),F&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm transition-all duration-300 ease-out z-50",children:(0,o.jsxs)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-300 ease-out flex flex-col",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-2 bg-blue-100 rounded-xl",children:(V={className:"w-5 h-5 text-blue-600"},C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"},child:[]}]})(V))}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Filter Activity Logs"}),(0,o.jsx)("p",{className:"text-sm text-gray-500",children:"Refine your search with advanced filters"})]})]}),(0,o.jsx)("button",{onClick:()=>D(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-xl transition-all duration-200",children:me({className:"w-4 h-4"})})]}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,o.jsxs)("div",{className:"p-6 space-y-4",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Action Type"]}),(0,o.jsx)("select",{value:h,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white hover:border-gray-400",children:R.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Security Level"]}),(0,o.jsx)("select",{value:f,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white hover:border-gray-400",children:M.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Content Type"]}),(0,o.jsx)("select",{value:y,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white hover:border-gray-400",children:I.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"User Type"]}),(0,o.jsx)("select",{value:k,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white hover:border-gray-400",children:U.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-1.5"}),"School"]}),(0,o.jsx)("select",{value:E,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-500 transition-all duration-200 bg-white hover:border-gray-400",children:B.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-rose-500 rounded-full mr-1.5"}),"Status"]}),(0,o.jsx)("select",{value:P,onChange:e=>L(e.target.value),className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-rose-100 focus:border-rose-500 transition-all duration-200 bg-white hover:border-gray-400",children:$.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Start Date"]}),(0,o.jsx)("input",{type:"date",value:j,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white hover:border-gray-400"})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"End Date"]}),(0,o.jsx)("input",{type:"date",value:w,onChange:e=>_(e.target.value),className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 transition-all duration-200 bg-white hover:border-gray-400"})]})]})]})}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-100 flex-shrink-0",children:[(0,o.jsx)("button",{onClick:H,className:"px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 transition-all duration-200",children:"Clear All"}),(0,o.jsx)("button",{onClick:()=>D(!1),className:"px-3 py-1.5 text-xs font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 transition-all duration-200",children:"Apply Filters"})]})]})})]});var V},lt=()=>{const[e,t]=(0,r.useState)("students"),{userRole:s}=g();return(0,o.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,o.jsx)(be,{currentPage:e,onPageChange:t}),(0,o.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,o.jsx)(ye,{pageTitle:(a=e,{students:"Students",fees:"Fees",ebook:"EBook",enrollments:"Enrollments",reports:"Reports",profile:"Manage Profile","admin-panel":"Admin Panel","admin-schools":"Admin - Schools","admin-users":"Admin - Users","admin-parents":"Admin - Parents","admin-features":"Admin - Switch Board","admin-activity-log":"Admin - Activity Log","admin-billing":"Admin - Billing","admin-billing-dashboard":"Admin - Billing Dashboard","admin-billing-plans":"Admin - Billing Plans"}[a]||"Dashboard")}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto",children:(()=>{switch(e){case"students":default:return(0,o.jsx)(Ee,{});case"fees":return(0,o.jsx)(Ge,{});case"ebook":return(0,o.jsx)("div",{className:"p-6 text-center text-gray-500",children:"EBook page coming soon..."});case"enrollments":return(0,o.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Enrollments page coming soon..."});case"reports":return(0,o.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Reports page coming soon..."});case"profile":return(0,o.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Profile page coming soon..."});case"admin-panel":return(0,o.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Admin Panel - Select a sub-item from the sidebar"});case"admin-schools":return(0,o.jsx)(Le,{});case"admin-users":return(0,o.jsx)(Pe,{});case"admin-parents":return(0,o.jsx)(Fe,{});case"admin-features":return(0,o.jsx)(Ae,{});case"admin-activity-log":return(0,o.jsx)(nt,{});case"admin-billing":return(0,o.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Billing - Select a sub-item from the sidebar"});case"admin-billing-dashboard":return"root"===s?(0,o.jsx)(Ke,{}):"super_admin"===s?(0,o.jsx)(Je,{}):(0,o.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Access denied. Only root and super admin users can access billing."});case"admin-billing-plans":return"root"===s?(0,o.jsx)(Xe,{}):(0,o.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Access denied. Only root users can access billing plans."})}})()})]})]});var a},it=()=>(0,o.jsxs)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 relative overflow-hidden",children:[(0,o.jsxs)("div",{className:"absolute inset-0",children:[(0,o.jsx)("div",{className:"absolute top-20 left-10 w-32 h-32 bg-blue-200 rounded-full opacity-30"}),(0,o.jsx)("div",{className:"absolute bottom-20 right-10 w-24 h-24 bg-blue-300 rounded-full opacity-20"}),(0,o.jsx)("div",{className:"absolute top-1/2 left-1/4 w-16 h-16 bg-blue-100 rounded-full opacity-40"})]}),(0,o.jsxs)("div",{className:"relative z-10 max-w-md",children:[(0,o.jsxs)("svg",{viewBox:"0 0 400 300",className:"w-full h-auto",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("rect",{x:"50",y:"200",width:"300",height:"20",fill:"#8B5CF6",rx:"4"}),(0,o.jsx)("rect",{x:"120",y:"140",width:"160",height:"100",fill:"#1F2937",rx:"8"}),(0,o.jsx)("rect",{x:"125",y:"145",width:"150",height:"85",fill:"#3B82F6",rx:"4"}),(0,o.jsx)("rect",{x:"130",y:"150",width:"140",height:"75",fill:"#1E40AF",rx:"2"}),(0,o.jsx)("rect",{x:"140",y:"160",width:"120",height:"8",fill:"#60A5FA",rx:"2"}),(0,o.jsx)("rect",{x:"140",y:"175",width:"80",height:"8",fill:"#60A5FA",rx:"2"}),(0,o.jsx)("rect",{x:"140",y:"190",width:"100",height:"8",fill:"#60A5FA",rx:"2"}),(0,o.jsx)("rect",{x:"140",y:"205",width:"60",height:"8",fill:"#60A5FA",rx:"2"}),(0,o.jsx)("circle",{cx:"200",cy:"120",r:"25",fill:"#F59E0B"}),(0,o.jsx)("rect",{x:"185",y:"145",width:"30",height:"40",fill:"#F59E0B"}),(0,o.jsx)("rect",{x:"175",y:"155",width:"15",height:"8",fill:"#F59E0B",rx:"4"}),(0,o.jsx)("rect",{x:"210",y:"155",width:"15",height:"8",fill:"#F59E0B",rx:"4"}),(0,o.jsx)("rect",{x:"280",y:"180",width:"20",height:"25",fill:"#EF4444",rx:"2"}),(0,o.jsx)("rect",{x:"285",y:"175",width:"10",height:"8",fill:"#EF4444",rx:"2"}),(0,o.jsx)("rect",{x:"80",y:"180",width:"8",height:"20",fill:"#059669"}),(0,o.jsx)("circle",{cx:"84",cy:"175",r:"12",fill:"#10B981"}),(0,o.jsx)("circle",{cx:"78",cy:"170",r:"8",fill:"#34D399"}),(0,o.jsx)("circle",{cx:"90",cy:"170",r:"6",fill:"#6EE7B7"}),(0,o.jsx)("rect",{x:"320",y:"160",width:"40",height:"50",fill:"#F3F4F6",rx:"2"}),(0,o.jsx)("rect",{x:"325",y:"165",width:"30",height:"3",fill:"#D1D5DB"}),(0,o.jsx)("rect",{x:"325",y:"175",width:"25",height:"3",fill:"#D1D5DB"}),(0,o.jsx)("rect",{x:"325",y:"185",width:"30",height:"3",fill:"#D1D5DB"}),(0,o.jsx)("rect",{x:"325",y:"195",width:"20",height:"3",fill:"#D1D5DB"})]}),(0,o.jsxs)("div",{className:"text-center mt-8",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Welcome Back"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Sign in to continue your learning journey"})]})]})]}),ot=e=>{let{onSwitchToRegister:t}=e;const[s,a]=(0,r.useState)(""),[n,l]=(0,r.useState)(""),[i,d]=(0,r.useState)(!1),{login:u,isLoading:m,error:x}=c();return(0,o.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center p-8",children:(0,o.jsx)("div",{className:"w-3/4 h-3/4 bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"hidden lg:flex lg:w-1/2",children:(0,o.jsx)(it,{})}),(0,o.jsx)("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:(0,o.jsxs)("div",{className:"w-full max-w-md",children:[(0,o.jsx)("div",{className:"text-center mb-8",children:(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Login"})}),x&&(0,o.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,o.jsx)("p",{className:"text-red-600 text-sm",children:x})}),(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await u({email:s,password:n})},className:"space-y-6",children:[(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:ge({className:"h-5 w-5 text-gray-400"})}),(0,o.jsx)("input",{id:"email",type:"email",value:s,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-4 bg-transparent border-b border-gray-200 text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400 transition-all duration-200",placeholder:"Email address",required:!0,disabled:m})]})}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,o.jsx)("div",{className:"w-5 h-5 flex items-center justify-center",children:(0,o.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full"})})}),(0,o.jsx)("input",{id:"password",type:i?"text":"password",value:n,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-12 py-4 bg-transparent border-b border-gray-200 text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400 transition-all duration-200",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,disabled:m}),(0,o.jsx)("button",{type:"button",onClick:()=>d(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:m,children:i?K({className:"h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors"}):Q({className:"h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors"})})]})}),(0,o.jsx)("div",{className:"flex justify-end",children:(0,o.jsx)("button",{type:"button",className:"text-sm text-blue-600 hover:text-blue-800 hover:underline transition-colors duration-200",disabled:m,children:"Forgot Password?"})}),(0,o.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-[#4292F0] hover:bg-[#3B82F6] text-white font-semibold py-3 px-4 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Signing In...":"Login"})]})]})})]})})})},dt=e=>{let{onSwitchToLogin:t}=e;const[s,a]=(0,r.useState)(""),[n,l]=(0,r.useState)(""),[i,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[x,p]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),{register:f,isLoading:b,error:y}=c();return(0,o.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center p-8",children:(0,o.jsx)("div",{className:"w-3/4 h-3/4 bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"hidden lg:flex lg:w-1/2",children:(0,o.jsx)(it,{})}),(0,o.jsx)("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:(0,o.jsxs)("div",{className:"w-full max-w-md",children:[(0,o.jsx)("div",{className:"text-center mb-8",children:(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Account"})}),y&&(0,o.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,o.jsx)("p",{className:"text-red-600 text-sm",children:y})}),(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i===u&&await f({name:s,email:n,password:i,confirmPassword:u})},className:"space-y-6",children:[(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:ge({className:"h-5 w-5 text-gray-400"})}),(0,o.jsx)("input",{id:"name",type:"text",value:s,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-4 bg-transparent border-b border-gray-200 text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400 transition-all duration-200",placeholder:"Full Name",required:!0,disabled:b})]})}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:W({className:"h-5 w-5 text-gray-400"})}),(0,o.jsx)("input",{id:"email",type:"email",value:n,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-4 bg-transparent border-b border-gray-200 text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400 transition-all duration-200",placeholder:"Email Address",required:!0,disabled:b})]})}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,o.jsx)("div",{className:"w-5 h-5 flex items-center justify-center",children:(0,o.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full"})})}),(0,o.jsx)("input",{id:"password",type:x?"text":"password",value:i,onChange:e=>d(e.target.value),className:"w-full pl-10 pr-12 py-4 bg-transparent border-b border-gray-200 text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400 transition-all duration-200",placeholder:"Password",required:!0,disabled:b}),(0,o.jsx)("button",{type:"button",onClick:()=>p(!x),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:b,children:x?K({className:"h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors"}):Q({className:"h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors"})})]})}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,o.jsx)("div",{className:"w-5 h-5 flex items-center justify-center",children:(0,o.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full"})})}),(0,o.jsx)("input",{id:"confirmPassword",type:h?"text":"password",value:u,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-12 py-4 bg-transparent border-b border-gray-200 text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400 transition-all duration-200",placeholder:"Confirm Password",required:!0,disabled:b}),(0,o.jsx)("button",{type:"button",onClick:()=>g(!h),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:b,children:h?K({className:"h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors"}):Q({className:"h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors"})})]})}),(0,o.jsx)("button",{type:"submit",disabled:b,className:"w-full bg-[#4292F0] hover:bg-[#3B82F6] text-white font-semibold py-3 px-4 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Creating Account...":"Sign Up"})]}),(0,o.jsx)("div",{className:"mt-8 text-center",children:(0,o.jsxs)("p",{className:"text-gray-600",children:["Already have an account?"," ",(0,o.jsx)("button",{type:"button",onClick:t,className:"text-blue-600 hover:text-blue-800 font-medium hover:underline transition-colors duration-200",disabled:b,children:"Sign In"})]})})]})})]})})})},ct=()=>{const[e,t]=(0,r.useState)("login");return(0,o.jsx)("div",{children:"login"===e?(0,o.jsx)(ot,{onSwitchToRegister:()=>t("register")}):(0,o.jsx)(dt,{onSwitchToLogin:()=>t("login")})})};function ut(){const{isAuthenticated:e,isLoading:t}=c();return t?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):e?(0,o.jsx)(lt,{}):(0,o.jsx)(ct,{})}const mt=function(){return(0,o.jsx)(u,{children:(0,o.jsx)(f,{children:(0,o.jsx)(x,{children:(0,o.jsx)(ut,{})})})})},xt=e=>{e&&e instanceof Function&&s.e(453).then(s.bind(s,453)).then(t=>{let{getCLS:s,getFID:r,getFCP:a,getLCP:n,getTTFB:l}=t;s(e),r(e),a(e),n(e),l(e)})};a.createRoot(document.getElementById("root")).render((0,o.jsx)(r.StrictMode,{children:(0,o.jsx)(mt,{})})),xt()})();
//# sourceMappingURL=main.73626626.js.map