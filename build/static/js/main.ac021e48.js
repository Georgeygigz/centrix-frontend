/*! For license information please see main.ac021e48.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,r)=>{var n=r(853),a=r(43),s=r(950);function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function o(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(o(e)!==e)throw Error(l(188))}function u(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=u(e)))return t;e=e.sibling}return null}var m=Object.assign,x=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),j=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var E=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var P=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L=Symbol.for("react.client.reference");function T(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===L?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case p:return"Fragment";case b:return"Profiler";case g:return"StrictMode";case N:return"Suspense";case k:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case h:return"Portal";case j:return(e.displayName||"Context")+".Provider";case v:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:T(e.type)||"Memo";case S:t=e._payload,e=e._init;try{return T(e(t))}catch(r){}}return null}var z=Array.isArray,F=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R={pending:!1,data:null,method:null,action:null},D=[],M=-1;function I(e){return{current:e}}function B(e){0>M||(e.current=D[M],D[M]=null,M--)}function U(e,t){M++,D[M]=e.current,e.current=t}var $=I(null),H=I(null),q=I(null),V=I(null);function W(e,t){switch(U(q,t),U(H,e),U($,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?au(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=su(t=au(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B($),U($,e)}function G(){B($),B(H),B(q)}function Q(e){null!==e.memoizedState&&U(V,e);var t=$.current,r=su(t,e.type);t!==r&&(U(H,e),U($,r))}function K(e){H.current===e&&(B($),B(H)),V.current===e&&(B(V),Qu._currentValue=R)}var Y=Object.prototype.hasOwnProperty,J=n.unstable_scheduleCallback,X=n.unstable_cancelCallback,Z=n.unstable_shouldYield,ee=n.unstable_requestPaint,te=n.unstable_now,re=n.unstable_getCurrentPriorityLevel,ne=n.unstable_ImmediatePriority,ae=n.unstable_UserBlockingPriority,se=n.unstable_NormalPriority,le=n.unstable_LowPriority,ie=n.unstable_IdlePriority,oe=n.log,ce=n.unstable_setDisableYieldValue,de=null,ue=null;function me(e){if("function"===typeof oe&&ce(e),ue&&"function"===typeof ue.setStrictMode)try{ue.setStrictMode(de,e)}catch(t){}}var xe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(fe(e)/he|0)|0},fe=Math.log,he=Math.LN2;var pe=256,ge=4194304;function be(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ye(e,t,r){var n=e.pendingLanes;if(0===n)return 0;var a=0,s=e.suspendedLanes,l=e.pingedLanes;e=e.warmLanes;var i=134217727&n;return 0!==i?0!==(n=i&~s)?a=be(n):0!==(l&=i)?a=be(l):r||0!==(r=i&~e)&&(a=be(r)):0!==(i=n&~s)?a=be(i):0!==l?a=be(l):r||0!==(r=n&~e)&&(a=be(r)),0===a?0:0!==t&&t!==a&&0===(t&s)&&((s=a&-a)>=(r=t&-t)||32===s&&0!==(4194048&r))?t:a}function ve(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function je(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function we(){var e=pe;return 0===(4194048&(pe<<=1))&&(pe=256),e}function Ne(){var e=ge;return 0===(62914560&(ge<<=1))&&(ge=4194304),e}function ke(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function _e(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Se(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-xe(t);e.entangledLanes|=t,e.entanglements[n]=1073741824|e.entanglements[n]|4194090&r}function Ce(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-xe(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}function Ee(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Pe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ae(){var e=O.p;return 0!==e?e:void 0===(e=window.event)?32:cm(e.type)}var Le=Math.random().toString(36).slice(2),Te="__reactFiber$"+Le,ze="__reactProps$"+Le,Fe="__reactContainer$"+Le,Oe="__reactEvents$"+Le,Re="__reactListeners$"+Le,De="__reactHandles$"+Le,Me="__reactResources$"+Le,Ie="__reactMarker$"+Le;function Be(e){delete e[Te],delete e[ze],delete e[Oe],delete e[Re],delete e[De]}function Ue(e){var t=e[Te];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Fe]||r[Te]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=yu(e);null!==e;){if(r=e[Te])return r;e=yu(e)}return t}r=(e=r).parentNode}return null}function $e(e){if(e=e[Te]||e[Fe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function He(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(l(33))}function qe(e){var t=e[Me];return t||(t=e[Me]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ve(e){e[Ie]=!0}var We=new Set,Ge={};function Qe(e,t){Ke(e,t),Ke(e+"Capture",t)}function Ke(e,t){for(Ge[e]=t,e=0;e<t.length;e++)We.add(t[e])}var Ye,Je,Xe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,r){if(a=t,Y.call(et,a)||!Y.call(Ze,a)&&(Xe.test(a)?et[a]=!0:(Ze[a]=!0,0)))if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var n=t.toLowerCase().slice(0,5);if("data-"!==n&&"aria-"!==n)return void e.removeAttribute(t)}e.setAttribute(t,""+r)}var a}function rt(e,t,r){if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+r)}}function nt(e,t,r,n){if(null===n)e.removeAttribute(r);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(r)}e.setAttributeNS(t,r,""+n)}}function at(e){if(void 0===Ye)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ye=t&&t[1]||"",Je=-1<r.stack.indexOf("\n    at")?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ye+e+Je}var st=!1;function lt(e,t){if(!e||st)return"";st=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var r=function(){throw Error()};if(Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(r,[])}catch(a){var n=a}Reflect.construct(e,[],r)}else{try{r.call()}catch(s){n=s}e.call(r.prototype)}}else{try{throw Error()}catch(l){n=l}(r=e())&&"function"===typeof r.catch&&r.catch(function(){})}}catch(i){if(i&&n&&"string"===typeof i.stack)return[i.stack,n.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=n.DetermineComponentFrameRoot(),l=s[0],i=s[1];if(l&&i){var o=l.split("\n"),c=i.split("\n");for(a=n=0;n<o.length&&!o[n].includes("DetermineComponentFrameRoot");)n++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(n===o.length||a===c.length)for(n=o.length-1,a=c.length-1;1<=n&&0<=a&&o[n]!==c[a];)a--;for(;1<=n&&0<=a;n--,a--)if(o[n]!==c[a]){if(1!==n||1!==a)do{if(n--,0>--a||o[n]!==c[a]){var d="\n"+o[n].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=n&&0<=a);break}}}finally{st=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?at(r):""}function it(e){switch(e.tag){case 26:case 27:case 5:return at(e.type);case 16:return at("Lazy");case 13:return at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return lt(e.type,!1);case 11:return lt(e.type.render,!1);case 1:return lt(e.type,!0);case 31:return at("Activity");default:return""}}function ot(e){try{var t="";do{t+=it(e),e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ut(e){e._valueTracker||(e._valueTracker=function(e){var t=dt(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function mt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=dt(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function xt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ft=/[\n"\\]/g;function ht(e){return e.replace(ft,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function pt(e,t,r,n,a,s,l,i){e.name="",null!=l&&"function"!==typeof l&&"symbol"!==typeof l&&"boolean"!==typeof l?e.type=l:e.removeAttribute("type"),null!=t?"number"===l?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==l&&"reset"!==l||e.removeAttribute("value"),null!=t?bt(e,l,ct(t)):null!=r?bt(e,l,ct(r)):null!=n&&e.removeAttribute("value"),null==a&&null!=s&&(e.defaultChecked=!!s),null!=a&&(e.checked=a&&"function"!==typeof a&&"symbol"!==typeof a),null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.name=""+ct(i):e.removeAttribute("name")}function gt(e,t,r,n,a,s,l,i){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=r){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;r=null!=r?""+ct(r):"",t=null!=t?""+ct(t):r,i||t===e.value||(e.value=t),e.defaultValue=t}n="function"!==typeof(n=null!=n?n:a)&&"symbol"!==typeof n&&!!n,e.checked=i?e.checked:!!n,e.defaultChecked=!!n,null!=l&&"function"!==typeof l&&"symbol"!==typeof l&&"boolean"!==typeof l&&(e.name=l)}function bt(e,t,r){"number"===t&&xt(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function yt(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ct(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function vt(e,t,r){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=r)?e.defaultValue=null!=r?""+ct(r):"":e.defaultValue!==t&&(e.defaultValue=t)}function jt(e,t,r,n){if(null==t){if(null!=n){if(null!=r)throw Error(l(92));if(z(n)){if(1<n.length)throw Error(l(93));n=n[0]}r=n}null==r&&(r=""),t=r}r=ct(t),e.defaultValue=r,(n=e.textContent)===r&&""!==n&&null!==n&&(e.value=n)}function wt(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var Nt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kt(e,t,r){var n=0===t.indexOf("--");null==r||"boolean"===typeof r||""===r?n?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":n?e.setProperty(t,r):"number"!==typeof r||0===r||Nt.has(t)?"float"===t?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function _t(e,t,r){if(null!=t&&"object"!==typeof t)throw Error(l(62));if(e=e.style,null!=r){for(var n in r)!r.hasOwnProperty(n)||null!=t&&t.hasOwnProperty(n)||(0===n.indexOf("--")?e.setProperty(n,""):"float"===n?e.cssFloat="":e[n]="");for(var a in t)n=t[a],t.hasOwnProperty(a)&&r[a]!==n&&kt(e,a,n)}else for(var s in t)t.hasOwnProperty(s)&&kt(e,s,t[s])}function St(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Et=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pt(e){return Et.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var At=null;function Lt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Tt=null,zt=null;function Ft(e){var t=$e(e);if(t&&(e=t.stateNode)){var r=e[ze]||null;e:switch(e=t.stateNode,t.type){case"input":if(pt(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ht(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=n[ze]||null;if(!a)throw Error(l(90));pt(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<r.length;t++)(n=r[t]).form===e.form&&mt(n)}break e;case"textarea":vt(e,r.value,r.defaultValue);break e;case"select":null!=(t=r.value)&&yt(e,!!r.multiple,t,!1)}}}var Ot=!1;function Rt(e,t,r){if(Ot)return e(t,r);Ot=!0;try{return e(t)}finally{if(Ot=!1,(null!==Tt||null!==zt)&&(Uc(),Tt&&(t=Tt,e=zt,zt=Tt=null,Ft(t),e)))for(t=0;t<e.length;t++)Ft(e[t])}}function Dt(e,t){var r=e.stateNode;if(null===r)return null;var n=r[ze]||null;if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(l(231,t,typeof r));return r}var Mt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),It=!1;if(Mt)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){It=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(zm){It=!1}var Ut=null,$t=null,Ht=null;function qt(){if(Ht)return Ht;var e,t,r=$t,n=r.length,a="value"in Ut?Ut.value:Ut.textContent,s=a.length;for(e=0;e<n&&r[e]===a[e];e++);var l=n-e;for(t=1;t<=l&&r[n-t]===a[s-t];t++);return Ht=a.slice(e,1<t?1-t:void 0)}function Vt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Wt(){return!0}function Gt(){return!1}function Qt(e){function t(t,r,n,a,s){for(var l in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(l)&&(t=e[l],this[l]=t?t(a):a[l]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Wt:Gt,this.isPropagationStopped=Gt,this}return m(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Wt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Wt)},persist:function(){},isPersistent:Wt}),t}var Kt,Yt,Jt,Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Qt(Xt),er=m({},Xt,{view:0,detail:0}),tr=Qt(er),rr=m({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jt&&(Jt&&"mousemove"===e.type?(Kt=e.screenX-Jt.screenX,Yt=e.screenY-Jt.screenY):Yt=Kt=0,Jt=e),Kt)},movementY:function(e){return"movementY"in e?e.movementY:Yt}}),nr=Qt(rr),ar=Qt(m({},rr,{dataTransfer:0})),sr=Qt(m({},er,{relatedTarget:0})),lr=Qt(m({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0})),ir=Qt(m({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),or=Qt(m({},Xt,{data:0})),cr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ur={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=ur[e])&&!!t[e]}function xr(){return mr}var fr=Qt(m({},er,{key:function(e){if(e.key){var t=cr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Vt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xr,charCode:function(e){return"keypress"===e.type?Vt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Vt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),hr=Qt(m({},rr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),pr=Qt(m({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xr})),gr=Qt(m({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0})),br=Qt(m({},rr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),yr=Qt(m({},Xt,{newState:0,oldState:0})),vr=[9,13,27,32],jr=Mt&&"CompositionEvent"in window,wr=null;Mt&&"documentMode"in document&&(wr=document.documentMode);var Nr=Mt&&"TextEvent"in window&&!wr,kr=Mt&&(!jr||wr&&8<wr&&11>=wr),_r=String.fromCharCode(32),Sr=!1;function Cr(e,t){switch(e){case"keyup":return-1!==vr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Er(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Pr=!1;var Ar={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ar[e.type]:"textarea"===t}function Tr(e,t,r,n){Tt?zt?zt.push(n):zt=[n]:Tt=n,0<(t=qd(t,"onChange")).length&&(r=new Zt("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var zr=null,Fr=null;function Or(e){Rd(e,0)}function Rr(e){if(mt(He(e)))return e}function Dr(e,t){if("change"===e)return t}var Mr=!1;if(Mt){var Ir;if(Mt){var Br="oninput"in document;if(!Br){var Ur=document.createElement("div");Ur.setAttribute("oninput","return;"),Br="function"===typeof Ur.oninput}Ir=Br}else Ir=!1;Mr=Ir&&(!document.documentMode||9<document.documentMode)}function $r(){zr&&(zr.detachEvent("onpropertychange",Hr),Fr=zr=null)}function Hr(e){if("value"===e.propertyName&&Rr(Fr)){var t=[];Tr(t,Fr,e,Lt(e)),Rt(Or,t)}}function qr(e,t,r){"focusin"===e?($r(),Fr=r,(zr=t).attachEvent("onpropertychange",Hr)):"focusout"===e&&$r()}function Vr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Rr(Fr)}function Wr(e,t){if("click"===e)return Rr(t)}function Gr(e,t){if("input"===e||"change"===e)return Rr(t)}var Qr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Kr(e,t){if(Qr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Y.call(t,a)||!Qr(e[a],t[a]))return!1}return!0}function Yr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jr(e,t){var r,n=Yr(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yr(n)}}function Xr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Xr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Zr(e){for(var t=xt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=xt((e=t.contentWindow).document)}return t}function en(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var tn=Mt&&"documentMode"in document&&11>=document.documentMode,rn=null,nn=null,an=null,sn=!1;function ln(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;sn||null==rn||rn!==xt(n)||("selectionStart"in(n=rn)&&en(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},an&&Kr(an,n)||(an=n,0<(n=qd(nn,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=rn)))}function on(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var cn={animationend:on("Animation","AnimationEnd"),animationiteration:on("Animation","AnimationIteration"),animationstart:on("Animation","AnimationStart"),transitionrun:on("Transition","TransitionRun"),transitionstart:on("Transition","TransitionStart"),transitioncancel:on("Transition","TransitionCancel"),transitionend:on("Transition","TransitionEnd")},dn={},un={};function mn(e){if(dn[e])return dn[e];if(!cn[e])return e;var t,r=cn[e];for(t in r)if(r.hasOwnProperty(t)&&t in un)return dn[e]=r[t];return e}Mt&&(un=document.createElement("div").style,"AnimationEvent"in window||(delete cn.animationend.animation,delete cn.animationiteration.animation,delete cn.animationstart.animation),"TransitionEvent"in window||delete cn.transitionend.transition);var xn=mn("animationend"),fn=mn("animationiteration"),hn=mn("animationstart"),pn=mn("transitionrun"),gn=mn("transitionstart"),bn=mn("transitioncancel"),yn=mn("transitionend"),vn=new Map,jn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wn(e,t){vn.set(e,t),Qe(t,[e])}jn.push("scrollEnd");var Nn=new WeakMap;function kn(e,t){if("object"===typeof e&&null!==e){var r=Nn.get(e);return void 0!==r?r:(t={value:e,source:t,stack:ot(t)},Nn.set(e,t),t)}return{value:e,source:t,stack:ot(t)}}var _n=[],Sn=0,Cn=0;function En(){for(var e=Sn,t=Cn=Sn=0;t<e;){var r=_n[t];_n[t++]=null;var n=_n[t];_n[t++]=null;var a=_n[t];_n[t++]=null;var s=_n[t];if(_n[t++]=null,null!==n&&null!==a){var l=n.pending;null===l?a.next=a:(a.next=l.next,l.next=a),n.pending=a}0!==s&&Tn(r,a,s)}}function Pn(e,t,r,n){_n[Sn++]=e,_n[Sn++]=t,_n[Sn++]=r,_n[Sn++]=n,Cn|=n,e.lanes|=n,null!==(e=e.alternate)&&(e.lanes|=n)}function An(e,t,r,n){return Pn(e,t,r,n),zn(e)}function Ln(e,t){return Pn(e,null,null,t),zn(e)}function Tn(e,t,r){e.lanes|=r;var n=e.alternate;null!==n&&(n.lanes|=r);for(var a=!1,s=e.return;null!==s;)s.childLanes|=r,null!==(n=s.alternate)&&(n.childLanes|=r),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(a=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,a&&null!==t&&(a=31-xe(r),null===(n=(e=s.hiddenUpdates)[a])?e[a]=[t]:n.push(t),t.lane=536870912|r),s):null}function zn(e){if(50<Tc)throw Tc=0,zc=null,Error(l(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Fn={};function On(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(e,t,r,n){return new On(e,t,r,n)}function Dn(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mn(e,t){var r=e.alternate;return null===r?((r=Rn(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=65011712&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function In(e,t){e.flags&=65011714;var r=e.alternate;return null===r?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Bn(e,t,r,n,a,s){var i=0;if(n=e,"function"===typeof e)Dn(e)&&(i=1);else if("string"===typeof e)i=function(e,t,r){if(1===r||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,r,$.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Rn(31,r,t,a)).elementType=C,e.lanes=s,e;case p:return Un(r.children,a,s,t);case g:i=8,a|=24;break;case b:return(e=Rn(12,r,t,2|a)).elementType=b,e.lanes=s,e;case N:return(e=Rn(13,r,t,a)).elementType=N,e.lanes=s,e;case k:return(e=Rn(19,r,t,a)).elementType=k,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case y:case j:i=10;break e;case v:i=9;break e;case w:i=11;break e;case _:i=14;break e;case S:i=16,n=null;break e}i=29,r=Error(l(130,null===e?"null":typeof e,"")),n=null}return(t=Rn(i,r,t,a)).elementType=e,t.type=n,t.lanes=s,t}function Un(e,t,r,n){return(e=Rn(7,e,n,t)).lanes=r,e}function $n(e,t,r){return(e=Rn(6,e,null,t)).lanes=r,e}function Hn(e,t,r){return(t=Rn(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qn=[],Vn=0,Wn=null,Gn=0,Qn=[],Kn=0,Yn=null,Jn=1,Xn="";function Zn(e,t){qn[Vn++]=Gn,qn[Vn++]=Wn,Wn=e,Gn=t}function ea(e,t,r){Qn[Kn++]=Jn,Qn[Kn++]=Xn,Qn[Kn++]=Yn,Yn=e;var n=Jn;e=Xn;var a=32-xe(n)-1;n&=~(1<<a),r+=1;var s=32-xe(t)+a;if(30<s){var l=a-a%5;s=(n&(1<<l)-1).toString(32),n>>=l,a-=l,Jn=1<<32-xe(t)+a|r<<a|n,Xn=s+e}else Jn=1<<s|r<<a|n,Xn=e}function ta(e){null!==e.return&&(Zn(e,1),ea(e,1,0))}function ra(e){for(;e===Wn;)Wn=qn[--Vn],qn[Vn]=null,Gn=qn[--Vn],qn[Vn]=null;for(;e===Yn;)Yn=Qn[--Kn],Qn[Kn]=null,Xn=Qn[--Kn],Qn[Kn]=null,Jn=Qn[--Kn],Qn[Kn]=null}var na=null,aa=null,sa=!1,la=null,ia=!1,oa=Error(l(519));function ca(e){throw ha(kn(Error(l(418,"")),e)),oa}function da(e){var t=e.stateNode,r=e.type,n=e.memoizedProps;switch(t[Te]=e,t[ze]=n,r){case"dialog":Dd("cancel",t),Dd("close",t);break;case"iframe":case"object":case"embed":Dd("load",t);break;case"video":case"audio":for(r=0;r<Fd.length;r++)Dd(Fd[r],t);break;case"source":Dd("error",t);break;case"img":case"image":case"link":Dd("error",t),Dd("load",t);break;case"details":Dd("toggle",t);break;case"input":Dd("invalid",t),gt(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),ut(t);break;case"select":Dd("invalid",t);break;case"textarea":Dd("invalid",t),jt(t,n.value,n.defaultValue,n.children),ut(t)}"string"!==typeof(r=n.children)&&"number"!==typeof r&&"bigint"!==typeof r||t.textContent===""+r||!0===n.suppressHydrationWarning||Yd(t.textContent,r)?(null!=n.popover&&(Dd("beforetoggle",t),Dd("toggle",t)),null!=n.onScroll&&Dd("scroll",t),null!=n.onScrollEnd&&Dd("scrollend",t),null!=n.onClick&&(t.onclick=Jd),t=!0):t=!1,t||ca(e)}function ua(e){for(na=e.return;na;)switch(na.tag){case 5:case 13:return void(ia=!1);case 27:case 3:return void(ia=!0);default:na=na.return}}function ma(e){if(e!==na)return!1;if(!sa)return ua(e),sa=!0,!1;var t,r=e.tag;if((t=3!==r&&27!==r)&&((t=5===r)&&(t=!("form"!==(t=e.type)&&"button"!==t)||lu(e.type,e.memoizedProps)),t=!t),t&&aa&&ca(e),ua(e),13===r){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(l(317));e:{for(e=e.nextSibling,r=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===r){aa=gu(e.nextSibling);break e}r--}else"$"!==t&&"$!"!==t&&"$?"!==t||r++;e=e.nextSibling}aa=null}}else 27===r?(r=aa,xu(e.type)?(e=bu,bu=null,aa=e):aa=r):aa=na?gu(e.stateNode.nextSibling):null;return!0}function xa(){aa=na=null,sa=!1}function fa(){var e=la;return null!==e&&(null===yc?yc=e:yc.push.apply(yc,e),la=null),e}function ha(e){null===la?la=[e]:la.push(e)}var pa=I(null),ga=null,ba=null;function ya(e,t,r){U(pa,t._currentValue),t._currentValue=r}function va(e){e._currentValue=pa.current,B(pa)}function ja(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function wa(e,t,r,n){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var s=a.dependencies;if(null!==s){var i=a.child;s=s.firstContext;e:for(;null!==s;){var o=s;s=a;for(var c=0;c<t.length;c++)if(o.context===t[c]){s.lanes|=r,null!==(o=s.alternate)&&(o.lanes|=r),ja(s.return,r,e),n||(i=null);break e}s=o.next}}else if(18===a.tag){if(null===(i=a.return))throw Error(l(341));i.lanes|=r,null!==(s=i.alternate)&&(s.lanes|=r),ja(i,r,e),i=null}else i=a.child;if(null!==i)i.return=a;else for(i=a;null!==i;){if(i===e){i=null;break}if(null!==(a=i.sibling)){a.return=i.return,i=a;break}i=i.return}a=i}}function Na(e,t,r,n){e=null;for(var a=t,s=!1;null!==a;){if(!s)if(0!==(524288&a.flags))s=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var i=a.alternate;if(null===i)throw Error(l(387));if(null!==(i=i.memoizedProps)){var o=a.type;Qr(a.pendingProps.value,i.value)||(null!==e?e.push(o):e=[o])}}else if(a===V.current){if(null===(i=a.alternate))throw Error(l(387));i.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(Qu):e=[Qu])}a=a.return}null!==e&&wa(t,e,r,n),t.flags|=262144}function ka(e){for(e=e.firstContext;null!==e;){if(!Qr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _a(e){ga=e,ba=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Sa(e){return Ea(ga,e)}function Ca(e,t){return null===ga&&_a(e),Ea(e,t)}function Ea(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},null===ba){if(null===e)throw Error(l(308));ba=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ba=ba.next=t;return r}var Pa="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Aa=n.unstable_scheduleCallback,La=n.unstable_NormalPriority,Ta={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function za(){return{controller:new Pa,data:new Map,refCount:0}}function Fa(e){e.refCount--,0===e.refCount&&Aa(La,function(){e.controller.abort()})}var Oa=null,Ra=0,Da=0,Ma=null;function Ia(){if(0===--Ra&&null!==Oa){null!==Ma&&(Ma.status="fulfilled");var e=Oa;Oa=null,Da=0,Ma=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ba=F.S;F.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Oa){var r=Oa=[];Ra=0,Da=Pd(),Ma={status:"pending",value:void 0,then:function(e){r.push(e)}}}Ra++,t.then(Ia,Ia)}(0,t),null!==Ba&&Ba(e,t)};var Ua=I(null);function $a(){var e=Ua.current;return null!==e?e:nc.pooledCache}function Ha(e,t){U(Ua,null===t?Ua.current:t.pool)}function qa(){var e=$a();return null===e?null:{parent:Ta._currentValue,pool:e}}var Va=Error(l(460)),Wa=Error(l(474)),Ga=Error(l(542)),Qa={then:function(){}};function Ka(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Ya(){}function Ja(e,t,r){switch(void 0===(r=e[r])?e.push(t):r!==t&&(t.then(Ya,Ya),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e;default:if("string"===typeof t.status)t.then(Ya,Ya);else{if(null!==(e=nc)&&100<e.shellSuspendCounter)throw Error(l(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var r=t;r.status="fulfilled",r.value=e}},function(e){if("pending"===t.status){var r=t;r.status="rejected",r.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e}throw Xa=t,Va}}var Xa=null;function Za(){if(null===Xa)throw Error(l(459));var e=Xa;return Xa=null,e}function es(e){if(e===Va||e===Ga)throw Error(l(483))}var ts=!1;function rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ns(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function as(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&rc)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,t=zn(e),Tn(e,null,r),t}return Pn(e,n,t,r),zn(e)}function ls(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Ce(e,r)}}function is(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var l={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};null===s?a=s=l:s=s.next=l,r=r.next}while(null!==r);null===s?a=s=t:s=s.next=t}else a=s=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,callbacks:n.callbacks},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var os=!1;function cs(){if(os){if(null!==Ma)throw Ma}}function ds(e,t,r,n){os=!1;var a=e.updateQueue;ts=!1;var s=a.firstBaseUpdate,l=a.lastBaseUpdate,i=a.shared.pending;if(null!==i){a.shared.pending=null;var o=i,c=o.next;o.next=null,null===l?s=c:l.next=c,l=o;var d=e.alternate;null!==d&&((i=(d=d.updateQueue).lastBaseUpdate)!==l&&(null===i?d.firstBaseUpdate=c:i.next=c,d.lastBaseUpdate=o))}if(null!==s){var u=a.baseState;for(l=0,d=c=o=null,i=s;;){var x=-536870913&i.lane,f=x!==i.lane;if(f?(sc&x)===x:(n&x)===x){0!==x&&x===Da&&(os=!0),null!==d&&(d=d.next={lane:0,tag:i.tag,payload:i.payload,callback:null,next:null});e:{var h=e,p=i;x=t;var g=r;switch(p.tag){case 1:if("function"===typeof(h=p.payload)){u=h.call(g,u,x);break e}u=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(x="function"===typeof(h=p.payload)?h.call(g,u,x):h)||void 0===x)break e;u=m({},u,x);break e;case 2:ts=!0}}null!==(x=i.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=a.callbacks)?a.callbacks=[x]:f.push(x))}else f={lane:x,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===d?(c=d=f,o=u):d=d.next=f,l|=x;if(null===(i=i.next)){if(null===(i=a.shared.pending))break;i=(f=i).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}null===d&&(o=u),a.baseState=o,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null===s&&(a.shared.lanes=0),xc|=l,e.lanes=l,e.memoizedState=u}}function us(e,t){if("function"!==typeof e)throw Error(l(191,e));e.call(t)}function ms(e,t){var r=e.callbacks;if(null!==r)for(e.callbacks=null,e=0;e<r.length;e++)us(r[e],t)}var xs=I(null),fs=I(0);function hs(e,t){U(fs,e=uc),U(xs,t),uc=e|t.baseLanes}function ps(){U(fs,uc),U(xs,xs.current)}function gs(){uc=fs.current,B(xs),B(fs)}var bs=0,ys=null,vs=null,js=null,ws=!1,Ns=!1,ks=!1,_s=0,Ss=0,Cs=null,Es=0;function Ps(){throw Error(l(321))}function As(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Qr(e[r],t[r]))return!1;return!0}function Ls(e,t,r,n,a,s){return bs=s,ys=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,F.H=null===e||null===e.memoizedState?Vl:Wl,ks=!1,s=r(n,a),ks=!1,Ns&&(s=zs(t,r,n,a)),Ts(e),s}function Ts(e){F.H=ql;var t=null!==vs&&null!==vs.next;if(bs=0,js=vs=ys=null,ws=!1,Ss=0,Cs=null,t)throw Error(l(300));null===e||Si||null!==(e=e.dependencies)&&ka(e)&&(Si=!0)}function zs(e,t,r,n){ys=e;var a=0;do{if(Ns&&(Cs=null),Ss=0,Ns=!1,25<=a)throw Error(l(301));if(a+=1,js=vs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}F.H=Gl,s=t(r,n)}while(Ns);return s}function Fs(){var e=F.H,t=e.useState()[0];return t="function"===typeof t.then?Bs(t):t,e=e.useState()[0],(null!==vs?vs.memoizedState:null)!==e&&(ys.flags|=1024),t}function Os(){var e=0!==_s;return _s=0,e}function Rs(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function Ds(e){if(ws){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ws=!1}bs=0,js=vs=ys=null,Ns=!1,Ss=_s=0,Cs=null}function Ms(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===js?ys.memoizedState=js=e:js=js.next=e,js}function Is(){if(null===vs){var e=ys.alternate;e=null!==e?e.memoizedState:null}else e=vs.next;var t=null===js?ys.memoizedState:js.next;if(null!==t)js=t,vs=e;else{if(null===e){if(null===ys.alternate)throw Error(l(467));throw Error(l(310))}e={memoizedState:(vs=e).memoizedState,baseState:vs.baseState,baseQueue:vs.baseQueue,queue:vs.queue,next:null},null===js?ys.memoizedState=js=e:js=js.next=e}return js}function Bs(e){var t=Ss;return Ss+=1,null===Cs&&(Cs=[]),e=Ja(Cs,e,t),t=ys,null===(null===js?t.memoizedState:js.next)&&(t=t.alternate,F.H=null===t||null===t.memoizedState?Vl:Wl),e}function Us(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Bs(e);if(e.$$typeof===j)return Sa(e)}throw Error(l(438,String(e)))}function $s(e){var t=null,r=ys.updateQueue;if(null!==r&&(t=r.memoCache),null==t){var n=ys.alternate;null!==n&&(null!==(n=n.updateQueue)&&(null!=(n=n.memoCache)&&(t={data:n.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===r&&(r={lastEffect:null,events:null,stores:null,memoCache:null},ys.updateQueue=r),r.memoCache=t,void 0===(r=t.data[t.index]))for(r=t.data[t.index]=Array(e),n=0;n<e;n++)r[n]=E;return t.index++,r}function Hs(e,t){return"function"===typeof t?t(e):t}function qs(e){return Vs(Is(),vs,e)}function Vs(e,t,r){var n=e.queue;if(null===n)throw Error(l(311));n.lastRenderedReducer=r;var a=e.baseQueue,s=n.pending;if(null!==s){if(null!==a){var i=a.next;a.next=s.next,s.next=i}t.baseQueue=a=s,n.pending=null}if(s=e.baseState,null===a)e.memoizedState=s;else{var o=i=null,c=null,d=t=a.next,u=!1;do{var m=-536870913&d.lane;if(m!==d.lane?(sc&m)===m:(bs&m)===m){var x=d.revertLane;if(0===x)null!==c&&(c=c.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),m===Da&&(u=!0);else{if((bs&x)===x){d=d.next,x===Da&&(u=!0);continue}m={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=m,i=s):c=c.next=m,ys.lanes|=x,xc|=x}m=d.action,ks&&r(s,m),s=d.hasEagerState?d.eagerState:r(s,m)}else x={lane:m,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=x,i=s):c=c.next=x,ys.lanes|=m,xc|=m;d=d.next}while(null!==d&&d!==t);if(null===c?i=s:c.next=o,!Qr(s,e.memoizedState)&&(Si=!0,u&&null!==(r=Ma)))throw r;e.memoizedState=s,e.baseState=i,e.baseQueue=c,n.lastRenderedState=s}return null===a&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Ws(e){var t=Is(),r=t.queue;if(null===r)throw Error(l(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,s=t.memoizedState;if(null!==a){r.pending=null;var i=a=a.next;do{s=e(s,i.action),i=i.next}while(i!==a);Qr(s,t.memoizedState)||(Si=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function Gs(e,t,r){var n=ys,a=Is(),s=sa;if(s){if(void 0===r)throw Error(l(407));r=r()}else r=t();var i=!Qr((vs||a).memoizedState,r);if(i&&(a.memoizedState=r,Si=!0),a=a.queue,pl(2048,8,Ys.bind(null,n,a,e),[e]),a.getSnapshot!==t||i||null!==js&&1&js.memoizedState.tag){if(n.flags|=2048,xl(9,{destroy:void 0,resource:void 0},Ks.bind(null,n,a,r,t),null),null===nc)throw Error(l(349));s||0!==(124&bs)||Qs(n,t,r)}return r}function Qs(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ys.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},ys.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ks(e,t,r,n){t.value=r,t.getSnapshot=n,Js(t)&&Xs(e)}function Ys(e,t,r){return r(function(){Js(t)&&Xs(e)})}function Js(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Qr(e,r)}catch(n){return!0}}function Xs(e){var t=Ln(e,2);null!==t&&Rc(t,e,2)}function Zs(e){var t=Ms();if("function"===typeof e){var r=e;if(e=r(),ks){me(!0);try{r()}finally{me(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:e},t}function el(e,t,r,n){return e.baseState=r,Vs(e,vs,"function"===typeof n?n:Hs)}function tl(e,t,r,n,a){if(Ul(e))throw Error(l(485));if(null!==(e=t.action)){var s={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==F.T?r(!0):s.isTransition=!1,n(s),null===(r=t.pending)?(s.next=t.pending=s,rl(t,s)):(s.next=r.next,t.pending=r.next=s)}}function rl(e,t){var r=t.action,n=t.payload,a=e.state;if(t.isTransition){var s=F.T,l={};F.T=l;try{var i=r(a,n),o=F.S;null!==o&&o(l,i),nl(e,t,i)}catch(c){sl(e,t,c)}finally{F.T=s}}else try{nl(e,t,s=r(a,n))}catch(d){sl(e,t,d)}}function nl(e,t,r){null!==r&&"object"===typeof r&&"function"===typeof r.then?r.then(function(r){al(e,t,r)},function(r){return sl(e,t,r)}):al(e,t,r)}function al(e,t,r){t.status="fulfilled",t.value=r,ll(t),e.state=r,null!==(t=e.pending)&&((r=t.next)===t?e.pending=null:(r=r.next,t.next=r,rl(e,r)))}function sl(e,t,r){var n=e.pending;if(e.pending=null,null!==n){n=n.next;do{t.status="rejected",t.reason=r,ll(t),t=t.next}while(t!==n)}e.action=null}function ll(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function il(e,t){return t}function ol(e,t){if(sa){var r=nc.formState;if(null!==r){e:{var n=ys;if(sa){if(aa){t:{for(var a=aa,s=ia;8!==a.nodeType;){if(!s){a=null;break t}if(null===(a=gu(a.nextSibling))){a=null;break t}}a="F!"===(s=a.data)||"F"===s?a:null}if(a){aa=gu(a.nextSibling),n="F!"===a.data;break e}}ca(n)}n=!1}n&&(t=r[0])}}return(r=Ms()).memoizedState=r.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:t},r.queue=n,r=Ml.bind(null,ys,n),n.dispatch=r,n=Zs(!1),s=Bl.bind(null,ys,!1,n.queue),a={state:t,dispatch:null,action:e,pending:null},(n=Ms()).queue=a,r=tl.bind(null,ys,a,s,r),a.dispatch=r,n.memoizedState=e,[t,r,!1]}function cl(e){return dl(Is(),vs,e)}function dl(e,t,r){if(t=Vs(e,t,il)[0],e=qs(Hs)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var n=Bs(t)}catch(l){if(l===Va)throw Ga;throw l}else n=t;var a=(t=Is()).queue,s=a.dispatch;return r!==t.memoizedState&&(ys.flags|=2048,xl(9,{destroy:void 0,resource:void 0},ul.bind(null,a,r),null)),[n,s,e]}function ul(e,t){e.action=t}function ml(e){var t=Is(),r=vs;if(null!==r)return dl(t,r,e);Is(),t=t.memoizedState;var n=(r=Is()).queue.dispatch;return r.memoizedState=e,[t,n,!1]}function xl(e,t,r,n){return e={tag:e,create:r,deps:n,inst:t,next:null},null===(t=ys.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},ys.updateQueue=t),null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function fl(){return Is().memoizedState}function hl(e,t,r,n){var a=Ms();n=void 0===n?null:n,ys.flags|=e,a.memoizedState=xl(1|t,{destroy:void 0,resource:void 0},r,n)}function pl(e,t,r,n){var a=Is();n=void 0===n?null:n;var s=a.memoizedState.inst;null!==vs&&null!==n&&As(n,vs.memoizedState.deps)?a.memoizedState=xl(t,s,r,n):(ys.flags|=e,a.memoizedState=xl(1|t,s,r,n))}function gl(e,t){hl(8390656,8,e,t)}function bl(e,t){pl(2048,8,e,t)}function yl(e,t){return pl(4,2,e,t)}function vl(e,t){return pl(4,4,e,t)}function jl(e,t){if("function"===typeof t){e=e();var r=t(e);return function(){"function"===typeof r?r():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function wl(e,t,r){r=null!==r&&void 0!==r?r.concat([e]):null,pl(4,4,jl.bind(null,t,e),r)}function Nl(){}function kl(e,t){var r=Is();t=void 0===t?null:t;var n=r.memoizedState;return null!==t&&As(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function _l(e,t){var r=Is();t=void 0===t?null:t;var n=r.memoizedState;if(null!==t&&As(t,n[1]))return n[0];if(n=e(),ks){me(!0);try{e()}finally{me(!1)}}return r.memoizedState=[n,t],n}function Sl(e,t,r){return void 0===r||0!==(1073741824&bs)?e.memoizedState=t:(e.memoizedState=r,e=Oc(),ys.lanes|=e,xc|=e,r)}function Cl(e,t,r,n){return Qr(r,t)?r:null!==xs.current?(e=Sl(e,r,n),Qr(e,t)||(Si=!0),e):0===(42&bs)?(Si=!0,e.memoizedState=r):(e=Oc(),ys.lanes|=e,xc|=e,t)}function El(e,t,r,n,a){var s=O.p;O.p=0!==s&&8>s?s:8;var l=F.T,i={};F.T=i,Bl(e,!1,t,r);try{var o=a(),c=F.S;if(null!==c&&c(i,o),null!==o&&"object"===typeof o&&"function"===typeof o.then)Il(e,t,function(e,t){var r=[],n={status:"pending",value:null,reason:null,then:function(e){r.push(e)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var e=0;e<r.length;e++)(0,r[e])(t)},function(e){for(n.status="rejected",n.reason=e,e=0;e<r.length;e++)(0,r[e])(void 0)}),n}(o,n),Fc());else Il(e,t,n,Fc())}catch(d){Il(e,t,{then:function(){},status:"rejected",reason:d},Fc())}finally{O.p=s,F.T=l}}function Pl(){}function Al(e,t,r,n){if(5!==e.tag)throw Error(l(476));var a=Ll(e).queue;El(e,a,t,R,null===r?Pl:function(){return Tl(e),r(n)})}function Ll(e){var t=e.memoizedState;if(null!==t)return t;var r={};return(t={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:R},next:null}).next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:r},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Tl(e){Il(e,Ll(e).next.queue,{},Fc())}function zl(){return Sa(Qu)}function Fl(){return Is().memoizedState}function Ol(){return Is().memoizedState}function Rl(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var r=Fc(),n=ss(t,e=as(r),r);return null!==n&&(Rc(n,t,r),ls(n,t,r)),t={cache:za()},void(e.payload=t)}t=t.return}}function Dl(e,t,r){var n=Fc();r={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Ul(e)?$l(t,r):null!==(r=An(e,t,r,n))&&(Rc(r,e,n),Hl(r,t,n))}function Ml(e,t,r){Il(e,t,r,Fc())}function Il(e,t,r,n){var a={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ul(e))$l(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var l=t.lastRenderedState,i=s(l,r);if(a.hasEagerState=!0,a.eagerState=i,Qr(i,l))return Pn(e,t,a,0),null===nc&&En(),!1}catch(o){}if(null!==(r=An(e,t,a,n)))return Rc(r,e,n),Hl(r,t,n),!0}return!1}function Bl(e,t,r,n){if(n={lane:2,revertLane:Pd(),action:n,hasEagerState:!1,eagerState:null,next:null},Ul(e)){if(t)throw Error(l(479))}else null!==(t=An(e,r,n,2))&&Rc(t,e,2)}function Ul(e){var t=e.alternate;return e===ys||null!==t&&t===ys}function $l(e,t){Ns=ws=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Hl(e,t,r){if(0!==(4194048&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Ce(e,r)}}var ql={readContext:Sa,use:Us,useCallback:Ps,useContext:Ps,useEffect:Ps,useImperativeHandle:Ps,useLayoutEffect:Ps,useInsertionEffect:Ps,useMemo:Ps,useReducer:Ps,useRef:Ps,useState:Ps,useDebugValue:Ps,useDeferredValue:Ps,useTransition:Ps,useSyncExternalStore:Ps,useId:Ps,useHostTransitionStatus:Ps,useFormState:Ps,useActionState:Ps,useOptimistic:Ps,useMemoCache:Ps,useCacheRefresh:Ps},Vl={readContext:Sa,use:Us,useCallback:function(e,t){return Ms().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:gl,useImperativeHandle:function(e,t,r){r=null!==r&&void 0!==r?r.concat([e]):null,hl(4194308,4,jl.bind(null,t,e),r)},useLayoutEffect:function(e,t){return hl(4194308,4,e,t)},useInsertionEffect:function(e,t){hl(4,2,e,t)},useMemo:function(e,t){var r=Ms();t=void 0===t?null:t;var n=e();if(ks){me(!0);try{e()}finally{me(!1)}}return r.memoizedState=[n,t],n},useReducer:function(e,t,r){var n=Ms();if(void 0!==r){var a=r(t);if(ks){me(!0);try{r(t)}finally{me(!1)}}}else a=t;return n.memoizedState=n.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},n.queue=e,e=e.dispatch=Dl.bind(null,ys,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Ms().memoizedState=e},useState:function(e){var t=(e=Zs(e)).queue,r=Ml.bind(null,ys,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:Nl,useDeferredValue:function(e,t){return Sl(Ms(),e,t)},useTransition:function(){var e=Zs(!1);return e=El.bind(null,ys,e.queue,!0,!1),Ms().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var n=ys,a=Ms();if(sa){if(void 0===r)throw Error(l(407));r=r()}else{if(r=t(),null===nc)throw Error(l(349));0!==(124&sc)||Qs(n,t,r)}a.memoizedState=r;var s={value:r,getSnapshot:t};return a.queue=s,gl(Ys.bind(null,n,s,e),[e]),n.flags|=2048,xl(9,{destroy:void 0,resource:void 0},Ks.bind(null,n,s,r,t),null),r},useId:function(){var e=Ms(),t=nc.identifierPrefix;if(sa){var r=Xn;t="\xab"+t+"R"+(r=(Jn&~(1<<32-xe(Jn)-1)).toString(32)+r),0<(r=_s++)&&(t+="H"+r.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(r=Es++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:zl,useFormState:ol,useActionState:ol,useOptimistic:function(e){var t=Ms();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=Bl.bind(null,ys,!0,r),r.dispatch=t,[e,t]},useMemoCache:$s,useCacheRefresh:function(){return Ms().memoizedState=Rl.bind(null,ys)}},Wl={readContext:Sa,use:Us,useCallback:kl,useContext:Sa,useEffect:bl,useImperativeHandle:wl,useInsertionEffect:yl,useLayoutEffect:vl,useMemo:_l,useReducer:qs,useRef:fl,useState:function(){return qs(Hs)},useDebugValue:Nl,useDeferredValue:function(e,t){return Cl(Is(),vs.memoizedState,e,t)},useTransition:function(){var e=qs(Hs)[0],t=Is().memoizedState;return["boolean"===typeof e?e:Bs(e),t]},useSyncExternalStore:Gs,useId:Fl,useHostTransitionStatus:zl,useFormState:cl,useActionState:cl,useOptimistic:function(e,t){return el(Is(),0,e,t)},useMemoCache:$s,useCacheRefresh:Ol},Gl={readContext:Sa,use:Us,useCallback:kl,useContext:Sa,useEffect:bl,useImperativeHandle:wl,useInsertionEffect:yl,useLayoutEffect:vl,useMemo:_l,useReducer:Ws,useRef:fl,useState:function(){return Ws(Hs)},useDebugValue:Nl,useDeferredValue:function(e,t){var r=Is();return null===vs?Sl(r,e,t):Cl(r,vs.memoizedState,e,t)},useTransition:function(){var e=Ws(Hs)[0],t=Is().memoizedState;return["boolean"===typeof e?e:Bs(e),t]},useSyncExternalStore:Gs,useId:Fl,useHostTransitionStatus:zl,useFormState:ml,useActionState:ml,useOptimistic:function(e,t){var r=Is();return null!==vs?el(r,0,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:$s,useCacheRefresh:Ol},Ql=null,Kl=0;function Yl(e){var t=Kl;return Kl+=1,null===Ql&&(Ql=[]),Ja(Ql,e,t)}function Jl(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Xl(e,t){if(t.$$typeof===x)throw Error(l(525));throw e=Object.prototype.toString.call(t),Error(l(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zl(e){return(0,e._init)(e._payload)}function ei(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Mn(e,t)).index=0,e.sibling=null,e}function s(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=67108866,r):n:(t.flags|=67108866,r):(t.flags|=1048576,r)}function i(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function o(e,t,r,n){return null===t||6!==t.tag?((t=$n(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var s=r.type;return s===p?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===S&&Zl(s)===t.type)?(Jl(t=a(t,r.props),r),t.return=e,t):(Jl(t=Bn(r.type,r.key,r.props,null,e.mode,n),r),t.return=e,t)}function d(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Hn(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function u(e,t,r,n,s){return null===t||7!==t.tag?((t=Un(r,e.mode,n,s)).return=e,t):((t=a(t,r)).return=e,t)}function m(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=$n(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return Jl(r=Bn(t.type,t.key,t.props,null,e.mode,r),t),r.return=e,r;case h:return(t=Hn(t,e.mode,r)).return=e,t;case S:return m(e,t=(0,t._init)(t._payload),r)}if(z(t)||A(t))return(t=Un(t,e.mode,r,null)).return=e,t;if("function"===typeof t.then)return m(e,Yl(t),r);if(t.$$typeof===j)return m(e,Ca(e,t),r);Xl(e,t)}return null}function x(e,t,r,n){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return null!==a?null:o(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case f:return r.key===a?c(e,t,r,n):null;case h:return r.key===a?d(e,t,r,n):null;case S:return x(e,t,r=(a=r._init)(r._payload),n)}if(z(r)||A(r))return null!==a?null:u(e,t,r,n,null);if("function"===typeof r.then)return x(e,t,Yl(r),n);if(r.$$typeof===j)return x(e,t,Ca(e,r),n);Xl(e,r)}return null}function g(e,t,r,n,a){if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return o(t,e=e.get(r)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case f:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case h:return d(t,e=e.get(null===n.key?r:n.key)||null,n,a);case S:return g(e,t,r,n=(0,n._init)(n._payload),a)}if(z(n)||A(n))return u(t,e=e.get(r)||null,n,a,null);if("function"===typeof n.then)return g(e,t,r,Yl(n),a);if(n.$$typeof===j)return g(e,t,r,Ca(t,n),a);Xl(t,n)}return null}function b(o,c,d,u){if("object"===typeof d&&null!==d&&d.type===p&&null===d.key&&(d=d.props.children),"object"===typeof d&&null!==d){switch(d.$$typeof){case f:e:{for(var y=d.key;null!==c;){if(c.key===y){if((y=d.type)===p){if(7===c.tag){r(o,c.sibling),(u=a(c,d.props.children)).return=o,o=u;break e}}else if(c.elementType===y||"object"===typeof y&&null!==y&&y.$$typeof===S&&Zl(y)===c.type){r(o,c.sibling),Jl(u=a(c,d.props),d),u.return=o,o=u;break e}r(o,c);break}t(o,c),c=c.sibling}d.type===p?((u=Un(d.props.children,o.mode,u,d.key)).return=o,o=u):(Jl(u=Bn(d.type,d.key,d.props,null,o.mode,u),d),u.return=o,o=u)}return i(o);case h:e:{for(y=d.key;null!==c;){if(c.key===y){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){r(o,c.sibling),(u=a(c,d.children||[])).return=o,o=u;break e}r(o,c);break}t(o,c),c=c.sibling}(u=Hn(d,o.mode,u)).return=o,o=u}return i(o);case S:return b(o,c,d=(y=d._init)(d._payload),u)}if(z(d))return function(a,l,i,o){for(var c=null,d=null,u=l,f=l=0,h=null;null!==u&&f<i.length;f++){u.index>f?(h=u,u=null):h=u.sibling;var p=x(a,u,i[f],o);if(null===p){null===u&&(u=h);break}e&&u&&null===p.alternate&&t(a,u),l=s(p,l,f),null===d?c=p:d.sibling=p,d=p,u=h}if(f===i.length)return r(a,u),sa&&Zn(a,f),c;if(null===u){for(;f<i.length;f++)null!==(u=m(a,i[f],o))&&(l=s(u,l,f),null===d?c=u:d.sibling=u,d=u);return sa&&Zn(a,f),c}for(u=n(u);f<i.length;f++)null!==(h=g(u,a,f,i[f],o))&&(e&&null!==h.alternate&&u.delete(null===h.key?f:h.key),l=s(h,l,f),null===d?c=h:d.sibling=h,d=h);return e&&u.forEach(function(e){return t(a,e)}),sa&&Zn(a,f),c}(o,c,d,u);if(A(d)){if("function"!==typeof(y=A(d)))throw Error(l(150));return function(a,i,o,c){if(null==o)throw Error(l(151));for(var d=null,u=null,f=i,h=i=0,p=null,b=o.next();null!==f&&!b.done;h++,b=o.next()){f.index>h?(p=f,f=null):p=f.sibling;var y=x(a,f,b.value,c);if(null===y){null===f&&(f=p);break}e&&f&&null===y.alternate&&t(a,f),i=s(y,i,h),null===u?d=y:u.sibling=y,u=y,f=p}if(b.done)return r(a,f),sa&&Zn(a,h),d;if(null===f){for(;!b.done;h++,b=o.next())null!==(b=m(a,b.value,c))&&(i=s(b,i,h),null===u?d=b:u.sibling=b,u=b);return sa&&Zn(a,h),d}for(f=n(f);!b.done;h++,b=o.next())null!==(b=g(f,a,h,b.value,c))&&(e&&null!==b.alternate&&f.delete(null===b.key?h:b.key),i=s(b,i,h),null===u?d=b:u.sibling=b,u=b);return e&&f.forEach(function(e){return t(a,e)}),sa&&Zn(a,h),d}(o,c,d=y.call(d),u)}if("function"===typeof d.then)return b(o,c,Yl(d),u);if(d.$$typeof===j)return b(o,c,Ca(o,d),u);Xl(o,d)}return"string"===typeof d&&""!==d||"number"===typeof d||"bigint"===typeof d?(d=""+d,null!==c&&6===c.tag?(r(o,c.sibling),(u=a(c,d)).return=o,o=u):(r(o,c),(u=$n(d,o.mode,u)).return=o,o=u),i(o)):r(o,c)}return function(e,t,r,n){try{Kl=0;var a=b(e,t,r,n);return Ql=null,a}catch(l){if(l===Va||l===Ga)throw l;var s=Rn(29,l,null,e.mode);return s.lanes=n,s.return=e,s}}}var ti=ei(!0),ri=ei(!1),ni=I(null),ai=null;function si(e){var t=e.alternate;U(ci,1&ci.current),U(ni,e),null===ai&&(null===t||null!==xs.current||null!==t.memoizedState)&&(ai=e)}function li(e){if(22===e.tag){if(U(ci,ci.current),U(ni,e),null===ai){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ai=e)}}else ii()}function ii(){U(ci,ci.current),U(ni,ni.current)}function oi(e){B(ni),ai===e&&(ai=null),B(ci)}var ci=I(0);function di(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||pu(r)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ui(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:m({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var mi={enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Fc(),a=as(n);a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=ss(e,a,n))&&(Rc(t,e,n),ls(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Fc(),a=as(n);a.tag=1,a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=ss(e,a,n))&&(Rc(t,e,n),ls(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Fc(),n=as(r);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=ss(e,n,r))&&(Rc(t,e,r),ls(t,e,r))}};function xi(e,t,r,n,a,s,l){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,l):!t.prototype||!t.prototype.isPureReactComponent||(!Kr(r,n)||!Kr(a,s))}function fi(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&mi.enqueueReplaceState(t,t.state,null)}function hi(e,t){var r=t;if("ref"in t)for(var n in r={},t)"ref"!==n&&(r[n]=t[n]);if(e=e.defaultProps)for(var a in r===t&&(r=m({},r)),e)void 0===r[a]&&(r[a]=e[a]);return r}var pi="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function gi(e){pi(e)}function bi(e){console.error(e)}function yi(e){pi(e)}function vi(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function ji(e,t,r){try{(0,e.onCaughtError)(r.value,{componentStack:r.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function wi(e,t,r){return(r=as(r)).tag=3,r.payload={element:null},r.callback=function(){vi(e,t)},r}function Ni(e){return(e=as(e)).tag=3,e}function ki(e,t,r,n){var a=r.type.getDerivedStateFromError;if("function"===typeof a){var s=n.value;e.payload=function(){return a(s)},e.callback=function(){ji(t,r,n)}}var l=r.stateNode;null!==l&&"function"===typeof l.componentDidCatch&&(e.callback=function(){ji(t,r,n),"function"!==typeof a&&(null===kc?kc=new Set([this]):kc.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})})}var _i=Error(l(461)),Si=!1;function Ci(e,t,r,n){t.child=null===e?ri(t,null,r,n):ti(t,e.child,r,n)}function Ei(e,t,r,n,a){r=r.render;var s=t.ref;if("ref"in n){var l={};for(var i in n)"ref"!==i&&(l[i]=n[i])}else l=n;return _a(t),n=Ls(e,t,r,l,s,a),i=Os(),null===e||Si?(sa&&i&&ta(t),t.flags|=1,Ci(e,t,n,a),t.child):(Rs(e,t,a),Qi(e,t,a))}function Pi(e,t,r,n,a){if(null===e){var s=r.type;return"function"!==typeof s||Dn(s)||void 0!==s.defaultProps||null!==r.compare?((e=Bn(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ai(e,t,s,n,a))}if(s=e.child,!Ki(e,a)){var l=s.memoizedProps;if((r=null!==(r=r.compare)?r:Kr)(l,n)&&e.ref===t.ref)return Qi(e,t,a)}return t.flags|=1,(e=Mn(s,n)).ref=t.ref,e.return=t,t.child=e}function Ai(e,t,r,n,a){if(null!==e){var s=e.memoizedProps;if(Kr(s,n)&&e.ref===t.ref){if(Si=!1,t.pendingProps=n=s,!Ki(e,a))return t.lanes=e.lanes,Qi(e,t,a);0!==(131072&e.flags)&&(Si=!0)}}return Fi(e,t,r,n,a)}function Li(e,t,r){var n=t.pendingProps,a=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode){if(0!==(128&t.flags)){if(n=null!==s?s.baseLanes|r:r,null!==e){for(a=t.child=e.child,s=0;null!==a;)s=s|a.lanes|a.childLanes,a=a.sibling;t.childLanes=s&~n}else t.childLanes=0,t.child=null;return Ti(e,t,n,r)}if(0===(536870912&r))return t.lanes=t.childLanes=536870912,Ti(e,t,null!==s?s.baseLanes|r:r,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ha(0,null!==s?s.cachePool:null),null!==s?hs(t,s):ps(),li(t)}else null!==s?(Ha(0,s.cachePool),hs(t,s),ii(),t.memoizedState=null):(null!==e&&Ha(0,null),ps(),ii());return Ci(e,t,a,r),t.child}function Ti(e,t,r,n){var a=$a();return a=null===a?null:{parent:Ta._currentValue,pool:a},t.memoizedState={baseLanes:r,cachePool:a},null!==e&&Ha(0,null),ps(),li(t),null!==e&&Na(e,t,n,!0),null}function zi(e,t){var r=t.ref;if(null===r)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof r&&"object"!==typeof r)throw Error(l(284));null!==e&&e.ref===r||(t.flags|=4194816)}}function Fi(e,t,r,n,a){return _a(t),r=Ls(e,t,r,n,void 0,a),n=Os(),null===e||Si?(sa&&n&&ta(t),t.flags|=1,Ci(e,t,r,a),t.child):(Rs(e,t,a),Qi(e,t,a))}function Oi(e,t,r,n,a,s){return _a(t),t.updateQueue=null,r=zs(t,n,r,a),Ts(e),n=Os(),null===e||Si?(sa&&n&&ta(t),t.flags|=1,Ci(e,t,r,s),t.child):(Rs(e,t,s),Qi(e,t,s))}function Ri(e,t,r,n,a){if(_a(t),null===t.stateNode){var s=Fn,l=r.contextType;"object"===typeof l&&null!==l&&(s=Sa(l)),s=new r(n,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=mi,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=n,s.state=t.memoizedState,s.refs={},rs(t),l=r.contextType,s.context="object"===typeof l&&null!==l?Sa(l):Fn,s.state=t.memoizedState,"function"===typeof(l=r.getDerivedStateFromProps)&&(ui(t,r,l,n),s.state=t.memoizedState),"function"===typeof r.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(l=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),l!==s.state&&mi.enqueueReplaceState(s,s.state,null),ds(t,n,s,a),cs(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),n=!0}else if(null===e){s=t.stateNode;var i=t.memoizedProps,o=hi(r,i);s.props=o;var c=s.context,d=r.contextType;l=Fn,"object"===typeof d&&null!==d&&(l=Sa(d));var u=r.getDerivedStateFromProps;d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate,i=t.pendingProps!==i,d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(i||c!==l)&&fi(t,s,n,l),ts=!1;var m=t.memoizedState;s.state=m,ds(t,n,s,a),cs(),c=t.memoizedState,i||m!==c||ts?("function"===typeof u&&(ui(t,r,u,n),c=t.memoizedState),(o=ts||xi(t,r,o,n,m,c,l))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=l,n=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,ns(e,t),d=hi(r,l=t.memoizedProps),s.props=d,u=t.pendingProps,m=s.context,c=r.contextType,o=Fn,"object"===typeof c&&null!==c&&(o=Sa(c)),(c="function"===typeof(i=r.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(l!==u||m!==o)&&fi(t,s,n,o),ts=!1,m=t.memoizedState,s.state=m,ds(t,n,s,a),cs();var x=t.memoizedState;l!==u||m!==x||ts||null!==e&&null!==e.dependencies&&ka(e.dependencies)?("function"===typeof i&&(ui(t,r,i,n),x=t.memoizedState),(d=ts||xi(t,r,d,n,m,x,o)||null!==e&&null!==e.dependencies&&ka(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(n,x,o),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,x,o)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),s.props=n,s.state=x,s.context=o,n=d):("function"!==typeof s.componentDidUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return s=n,zi(e,t),n=0!==(128&t.flags),s||n?(s=t.stateNode,r=n&&"function"!==typeof r.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&n?(t.child=ti(t,e.child,null,a),t.child=ti(t,null,r,a)):Ci(e,t,r,a),t.memoizedState=s.state,e=t.child):e=Qi(e,t,a),e}function Di(e,t,r,n){return xa(),t.flags|=256,Ci(e,t,r,n),t.child}var Mi={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ii(e){return{baseLanes:e,cachePool:qa()}}function Bi(e,t,r){return e=null!==e?e.childLanes&~r:0,t&&(e|=pc),e}function Ui(e,t,r){var n,a=t.pendingProps,s=!1,i=0!==(128&t.flags);if((n=i)||(n=(null===e||null!==e.memoizedState)&&0!==(2&ci.current)),n&&(s=!0,t.flags&=-129),n=0!==(32&t.flags),t.flags&=-33,null===e){if(sa){if(s?si(t):ii(),sa){var o,c=aa;if(o=c){e:{for(o=c,c=ia;8!==o.nodeType;){if(!c){c=null;break e}if(null===(o=gu(o.nextSibling))){c=null;break e}}c=o}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Yn?{id:Jn,overflow:Xn}:null,retryLane:536870912,hydrationErrors:null},(o=Rn(18,null,null,0)).stateNode=c,o.return=t,t.child=o,na=t,aa=null,o=!0):o=!1}o||ca(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return pu(c)?t.lanes=32:t.lanes=536870912,null;oi(t)}return c=a.children,a=a.fallback,s?(ii(),c=Hi({mode:"hidden",children:c},s=t.mode),a=Un(a,s,r,null),c.return=t,a.return=t,c.sibling=a,t.child=c,(s=t.child).memoizedState=Ii(r),s.childLanes=Bi(e,n,r),t.memoizedState=Mi,a):(si(t),$i(t,c))}if(null!==(o=e.memoizedState)&&null!==(c=o.dehydrated)){if(i)256&t.flags?(si(t),t.flags&=-257,t=qi(e,t,r)):null!==t.memoizedState?(ii(),t.child=e.child,t.flags|=128,t=null):(ii(),s=a.fallback,c=t.mode,a=Hi({mode:"visible",children:a.children},c),(s=Un(s,c,r,null)).flags|=2,a.return=t,s.return=t,a.sibling=s,t.child=a,ti(t,e.child,null,r),(a=t.child).memoizedState=Ii(r),a.childLanes=Bi(e,n,r),t.memoizedState=Mi,t=s);else if(si(t),pu(c)){if(n=c.nextSibling&&c.nextSibling.dataset)var d=n.dgst;n=d,(a=Error(l(419))).stack="",a.digest=n,ha({value:a,source:null,stack:null}),t=qi(e,t,r)}else if(Si||Na(e,t,r,!1),n=0!==(r&e.childLanes),Si||n){if(null!==(n=nc)&&(0!==(a=0!==((a=0!==(42&(a=r&-r))?1:Ee(a))&(n.suspendedLanes|r))?0:a)&&a!==o.retryLane))throw o.retryLane=a,Ln(e,a),Rc(n,e,a),_i;"$?"===c.data||Gc(),t=qi(e,t,r)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=o.treeContext,aa=gu(c.nextSibling),na=t,sa=!0,la=null,ia=!1,null!==e&&(Qn[Kn++]=Jn,Qn[Kn++]=Xn,Qn[Kn++]=Yn,Jn=e.id,Xn=e.overflow,Yn=t),(t=$i(t,a.children)).flags|=4096);return t}return s?(ii(),s=a.fallback,c=t.mode,d=(o=e.child).sibling,(a=Mn(o,{mode:"hidden",children:a.children})).subtreeFlags=65011712&o.subtreeFlags,null!==d?s=Mn(d,s):(s=Un(s,c,r,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,null===(c=e.child.memoizedState)?c=Ii(r):(null!==(o=c.cachePool)?(d=Ta._currentValue,o=o.parent!==d?{parent:d,pool:d}:o):o=qa(),c={baseLanes:c.baseLanes|r,cachePool:o}),s.memoizedState=c,s.childLanes=Bi(e,n,r),t.memoizedState=Mi,a):(si(t),e=(r=e.child).sibling,(r=Mn(r,{mode:"visible",children:a.children})).return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r)}function $i(e,t){return(t=Hi({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Hi(e,t){return(e=Rn(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function qi(e,t,r){return ti(t,e.child,null,r),(e=$i(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vi(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ja(e.return,t,r)}function Wi(e,t,r,n,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function Gi(e,t,r){var n=t.pendingProps,a=n.revealOrder,s=n.tail;if(Ci(e,t,n.children,r),0!==(2&(n=ci.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vi(e,r,t);else if(19===e.tag)Vi(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(U(ci,n),a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===di(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Wi(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===di(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Wi(t,!0,r,null,s);break;case"together":Wi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qi(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),xc|=t.lanes,0===(r&t.childLanes)){if(null===e)return null;if(Na(e,t,r,!1),0===(r&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(l(153));if(null!==t.child){for(r=Mn(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Mn(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Ki(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!ka(e))}function Yi(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps)Si=!0;else{if(!Ki(e,r)&&0===(128&t.flags))return Si=!1,function(e,t,r){switch(t.tag){case 3:W(t,t.stateNode.containerInfo),ya(0,Ta,e.memoizedState.cache),xa();break;case 27:case 5:Q(t);break;case 4:W(t,t.stateNode.containerInfo);break;case 10:ya(0,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(null!==n)return null!==n.dehydrated?(si(t),t.flags|=128,null):0!==(r&t.child.childLanes)?Ui(e,t,r):(si(t),null!==(e=Qi(e,t,r))?e.sibling:null);si(t);break;case 19:var a=0!==(128&e.flags);if((n=0!==(r&t.childLanes))||(Na(e,t,r,!1),n=0!==(r&t.childLanes)),a){if(n)return Gi(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),U(ci,ci.current),n)break;return null;case 22:case 23:return t.lanes=0,Li(e,t,r);case 24:ya(0,Ta,e.memoizedState.cache)}return Qi(e,t,r)}(e,t,r);Si=0!==(131072&e.flags)}else Si=!1,sa&&0!==(1048576&t.flags)&&ea(t,Gn,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,a=n._init;if(n=a(n._payload),t.type=n,"function"!==typeof n){if(void 0!==n&&null!==n){if((a=n.$$typeof)===w){t.tag=11,t=Ei(null,t,n,e,r);break e}if(a===_){t.tag=14,t=Pi(null,t,n,e,r);break e}}throw t=T(n)||n,Error(l(306,t,""))}Dn(n)?(e=hi(n,e),t.tag=1,t=Ri(null,t,n,e,r)):(t.tag=0,t=Fi(null,t,n,e,r))}return t;case 0:return Fi(e,t,t.type,t.pendingProps,r);case 1:return Ri(e,t,n=t.type,a=hi(n,t.pendingProps),r);case 3:e:{if(W(t,t.stateNode.containerInfo),null===e)throw Error(l(387));n=t.pendingProps;var s=t.memoizedState;a=s.element,ns(e,t),ds(t,n,null,r);var i=t.memoizedState;if(n=i.cache,ya(0,Ta,n),n!==s.cache&&wa(t,[Ta],r,!0),cs(),n=i.element,s.isDehydrated){if(s={element:n,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Di(e,t,n,r);break e}if(n!==a){ha(a=kn(Error(l(424)),t)),t=Di(e,t,n,r);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(aa=gu(e.firstChild),na=t,sa=!0,la=null,ia=!0,r=ri(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(xa(),n===a){t=Qi(e,t,r);break e}Ci(e,t,n,r)}t=t.child}return t;case 26:return zi(e,t),null===e?(r=Eu(t.type,null,t.pendingProps,null))?t.memoizedState=r:sa||(r=t.type,e=t.pendingProps,(n=nu(q.current).createElement(r))[Te]=t,n[ze]=e,eu(n,r,e),Ve(n),t.stateNode=n):t.memoizedState=Eu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&sa&&(n=t.stateNode=vu(t.type,t.pendingProps,q.current),na=t,ia=!0,a=aa,xu(t.type)?(bu=a,aa=gu(n.firstChild)):aa=a),Ci(e,t,t.pendingProps.children,r),zi(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&sa&&((a=n=aa)&&(null!==(n=function(e,t,r,n){for(;1===e.nodeType;){var a=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(n){if(!e[Ie])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===s)return e}if(null===(e=gu(e.nextSibling)))break}return null}(n,t.type,t.pendingProps,ia))?(t.stateNode=n,na=t,aa=gu(n.firstChild),ia=!1,a=!0):a=!1),a||ca(t)),Q(t),a=t.type,s=t.pendingProps,i=null!==e?e.memoizedProps:null,n=s.children,lu(a,s)?n=null:null!==i&&lu(a,i)&&(t.flags|=32),null!==t.memoizedState&&(a=Ls(e,t,Fs,null,null,r),Qu._currentValue=a),zi(e,t),Ci(e,t,n,r),t.child;case 6:return null===e&&sa&&((e=r=aa)&&(null!==(r=function(e,t,r){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!r)return null;if(null===(e=gu(e.nextSibling)))return null}return e}(r,t.pendingProps,ia))?(t.stateNode=r,na=t,aa=null,e=!0):e=!1),e||ca(t)),null;case 13:return Ui(e,t,r);case 4:return W(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=ti(t,null,n,r):Ci(e,t,n,r),t.child;case 11:return Ei(e,t,t.type,t.pendingProps,r);case 7:return Ci(e,t,t.pendingProps,r),t.child;case 8:case 12:return Ci(e,t,t.pendingProps.children,r),t.child;case 10:return n=t.pendingProps,ya(0,t.type,n.value),Ci(e,t,n.children,r),t.child;case 9:return a=t.type._context,n=t.pendingProps.children,_a(t),n=n(a=Sa(a)),t.flags|=1,Ci(e,t,n,r),t.child;case 14:return Pi(e,t,t.type,t.pendingProps,r);case 15:return Ai(e,t,t.type,t.pendingProps,r);case 19:return Gi(e,t,r);case 31:return n=t.pendingProps,r=t.mode,n={mode:n.mode,children:n.children},null===e?((r=Hi(n,r)).ref=t.ref,t.child=r,r.return=t,t=r):((r=Mn(e.child,n)).ref=t.ref,t.child=r,r.return=t,t=r),t;case 22:return Li(e,t,r);case 24:return _a(t),n=Sa(Ta),null===e?(null===(a=$a())&&(a=nc,s=za(),a.pooledCache=s,s.refCount++,null!==s&&(a.pooledCacheLanes|=r),a=s),t.memoizedState={parent:n,cache:a},rs(t),ya(0,Ta,a)):(0!==(e.lanes&r)&&(ns(e,t),ds(t,null,null,r),cs()),a=e.memoizedState,s=t.memoizedState,a.parent!==n?(a={parent:n,cache:n},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),ya(0,Ta,n)):(n=s.cache,ya(0,Ta,n),n!==a.cache&&wa(t,[Ta],r,!0))),Ci(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function Ji(e){e.flags|=4}function Xi(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Uu(t)){if(null!==(t=ni.current)&&((4194048&sc)===sc?null!==ai:(62914560&sc)!==sc&&0===(536870912&sc)||t!==ai))throw Xa=Qa,Wa;e.flags|=8192}}function Zi(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ne():536870912,e.lanes|=t,gc|=t)}function eo(e,t){if(!sa)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function to(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=65011712&a.subtreeFlags,n|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function ro(e,t,r){var n=t.pendingProps;switch(ra(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return to(t),null;case 3:return r=t.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),va(Ta),G(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ma(t)?Ji(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,fa())),to(t),null;case 26:return r=t.memoizedState,null===e?(Ji(t),null!==r?(to(t),Xi(t,r)):(to(t),t.flags&=-16777217)):r?r!==e.memoizedState?(Ji(t),to(t),Xi(t,r)):(to(t),t.flags&=-16777217):(e.memoizedProps!==n&&Ji(t),to(t),t.flags&=-16777217),null;case 27:K(t),r=q.current;var a=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==n&&Ji(t);else{if(!n){if(null===t.stateNode)throw Error(l(166));return to(t),null}e=$.current,ma(t)?da(t):(e=vu(a,n,r),t.stateNode=e,Ji(t))}return to(t),null;case 5:if(K(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&Ji(t);else{if(!n){if(null===t.stateNode)throw Error(l(166));return to(t),null}if(e=$.current,ma(t))da(t);else{switch(a=nu(q.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof n.is?a.createElement("select",{is:n.is}):a.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e="string"===typeof n.is?a.createElement(r,{is:n.is}):a.createElement(r)}}e[Te]=t,e[ze]=n;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(eu(e,r,n),r){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ji(t)}}return to(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==n&&Ji(t);else{if("string"!==typeof n&&null===t.stateNode)throw Error(l(166));if(e=q.current,ma(t)){if(e=t.stateNode,r=t.memoizedProps,n=null,null!==(a=na))switch(a.tag){case 27:case 5:n=a.memoizedProps}e[Te]=t,(e=!!(e.nodeValue===r||null!==n&&!0===n.suppressHydrationWarning||Yd(e.nodeValue,r)))||ca(t)}else(e=nu(e).createTextNode(n))[Te]=t,t.stateNode=e}return to(t),null;case 13:if(n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=ma(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(l(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(l(317));a[Te]=t}else xa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;to(t),a=!1}else a=fa(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(oi(t),t):(oi(t),null)}if(oi(t),0!==(128&t.flags))return t.lanes=r,t;if(r=null!==n,e=null!==e&&null!==e.memoizedState,r){a=null,null!==(n=t.child).alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(a=n.alternate.memoizedState.cachePool.pool);var s=null;null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(s=n.memoizedState.cachePool.pool),s!==a&&(n.flags|=2048)}return r!==e&&r&&(t.child.flags|=8192),Zi(t,t.updateQueue),to(t),null;case 4:return G(),null===e&&Bd(t.stateNode.containerInfo),to(t),null;case 10:return va(t.type),to(t),null;case 19:if(B(ci),null===(a=t.memoizedState))return to(t),null;if(n=0!==(128&t.flags),null===(s=a.rendering))if(n)eo(a,!1);else{if(0!==mc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=di(e))){for(t.flags|=128,eo(a,!1),e=s.updateQueue,t.updateQueue=e,Zi(t,e),t.subtreeFlags=0,e=r,r=t.child;null!==r;)In(r,e),r=r.sibling;return U(ci,1&ci.current|2),t.child}e=e.sibling}null!==a.tail&&te()>wc&&(t.flags|=128,n=!0,eo(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=di(s))){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,Zi(t,e),eo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!s.alternate&&!sa)return to(t),null}else 2*te()-a.renderingStartTime>wc&&536870912!==r&&(t.flags|=128,n=!0,eo(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=a.last)?e.sibling=s:t.child=s,a.last=s)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=te(),t.sibling=null,e=ci.current,U(ci,n?1&e|2:1&e),t):(to(t),null);case 22:case 23:return oi(t),gs(),n=null!==t.memoizedState,null!==e?null!==e.memoizedState!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?0!==(536870912&r)&&0===(128&t.flags)&&(to(t),6&t.subtreeFlags&&(t.flags|=8192)):to(t),null!==(r=t.updateQueue)&&Zi(t,r.retryQueue),r=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),n=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),n!==r&&(t.flags|=2048),null!==e&&B(Ua),null;case 24:return r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),va(Ta),to(t),null;case 25:case 30:return null}throw Error(l(156,t.tag))}function no(e,t){switch(ra(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return va(Ta),G(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return K(t),null;case 13:if(oi(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(l(340));xa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(ci),null;case 4:return G(),null;case 10:return va(t.type),null;case 22:case 23:return oi(t),gs(),null!==e&&B(Ua),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return va(Ta),null;default:return null}}function ao(e,t){switch(ra(t),t.tag){case 3:va(Ta),G();break;case 26:case 27:case 5:K(t);break;case 4:G();break;case 13:oi(t);break;case 19:B(ci);break;case 10:va(t.type);break;case 22:case 23:oi(t),gs(),null!==e&&B(Ua);break;case 24:va(Ta)}}function so(e,t){try{var r=t.updateQueue,n=null!==r?r.lastEffect:null;if(null!==n){var a=n.next;r=a;do{if((r.tag&e)===e){n=void 0;var s=r.create,l=r.inst;n=s(),l.destroy=n}r=r.next}while(r!==a)}}catch(i){dd(t,t.return,i)}}function lo(e,t,r){try{var n=t.updateQueue,a=null!==n?n.lastEffect:null;if(null!==a){var s=a.next;n=s;do{if((n.tag&e)===e){var l=n.inst,i=l.destroy;if(void 0!==i){l.destroy=void 0,a=t;var o=r,c=i;try{c()}catch(d){dd(a,o,d)}}}n=n.next}while(n!==s)}}catch(d){dd(t,t.return,d)}}function io(e){var t=e.updateQueue;if(null!==t){var r=e.stateNode;try{ms(t,r)}catch(n){dd(e,e.return,n)}}}function oo(e,t,r){r.props=hi(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(n){dd(e,t,n)}}function co(e,t){try{var r=e.ref;if(null!==r){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;default:n=e.stateNode}"function"===typeof r?e.refCleanup=r(n):r.current=n}}catch(a){dd(e,t,a)}}function uo(e,t){var r=e.ref,n=e.refCleanup;if(null!==r)if("function"===typeof n)try{n()}catch(a){dd(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof r)try{r(null)}catch(s){dd(e,t,s)}else r.current=null}function mo(e){var t=e.type,r=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break e;case"img":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(a){dd(e,e.return,a)}}function xo(e,t,r){try{var n=e.stateNode;!function(e,t,r,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,s=null,i=null,o=null,c=null,d=null,u=null;for(f in r){var m=r[f];if(r.hasOwnProperty(f)&&null!=m)switch(f){case"checked":case"value":break;case"defaultValue":c=m;default:n.hasOwnProperty(f)||Xd(e,t,f,null,n,m)}}for(var x in n){var f=n[x];if(m=r[x],n.hasOwnProperty(x)&&(null!=f||null!=m))switch(x){case"type":s=f;break;case"name":a=f;break;case"checked":d=f;break;case"defaultChecked":u=f;break;case"value":i=f;break;case"defaultValue":o=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(l(137,t));break;default:f!==m&&Xd(e,t,x,f,n,m)}}return void pt(e,i,o,c,d,u,s,a);case"select":for(s in f=i=o=x=null,r)if(c=r[s],r.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":f=c;default:n.hasOwnProperty(s)||Xd(e,t,s,null,n,c)}for(a in n)if(s=n[a],c=r[a],n.hasOwnProperty(a)&&(null!=s||null!=c))switch(a){case"value":x=s;break;case"defaultValue":o=s;break;case"multiple":i=s;default:s!==c&&Xd(e,t,a,s,n,c)}return t=o,r=i,n=f,void(null!=x?yt(e,!!r,x,!1):!!n!==!!r&&(null!=t?yt(e,!!r,t,!0):yt(e,!!r,r?[]:"",!1)));case"textarea":for(o in f=x=null,r)if(a=r[o],r.hasOwnProperty(o)&&null!=a&&!n.hasOwnProperty(o))switch(o){case"value":case"children":break;default:Xd(e,t,o,null,n,a)}for(i in n)if(a=n[i],s=r[i],n.hasOwnProperty(i)&&(null!=a||null!=s))switch(i){case"value":x=a;break;case"defaultValue":f=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(l(91));break;default:a!==s&&Xd(e,t,i,a,n,s)}return void vt(e,x,f);case"option":for(var h in r)if(x=r[h],r.hasOwnProperty(h)&&null!=x&&!n.hasOwnProperty(h))if("selected"===h)e.selected=!1;else Xd(e,t,h,null,n,x);for(c in n)if(x=n[c],f=r[c],n.hasOwnProperty(c)&&x!==f&&(null!=x||null!=f))if("selected"===c)e.selected=x&&"function"!==typeof x&&"symbol"!==typeof x;else Xd(e,t,c,x,n,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var p in r)x=r[p],r.hasOwnProperty(p)&&null!=x&&!n.hasOwnProperty(p)&&Xd(e,t,p,null,n,x);for(d in n)if(x=n[d],f=r[d],n.hasOwnProperty(d)&&x!==f&&(null!=x||null!=f))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=x)throw Error(l(137,t));break;default:Xd(e,t,d,x,n,f)}return;default:if(St(t)){for(var g in r)x=r[g],r.hasOwnProperty(g)&&void 0!==x&&!n.hasOwnProperty(g)&&Zd(e,t,g,void 0,n,x);for(u in n)x=n[u],f=r[u],!n.hasOwnProperty(u)||x===f||void 0===x&&void 0===f||Zd(e,t,u,x,n,f);return}}for(var b in r)x=r[b],r.hasOwnProperty(b)&&null!=x&&!n.hasOwnProperty(b)&&Xd(e,t,b,null,n,x);for(m in n)x=n[m],f=r[m],!n.hasOwnProperty(m)||x===f||null==x&&null==f||Xd(e,t,m,x,n,f)}(n,e.type,r,t),n[ze]=t}catch(a){dd(e,e.return,a)}}function fo(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&xu(e.type)||4===e.tag}function ho(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||fo(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&xu(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function po(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?(9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).insertBefore(e,t):((t=9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Jd));else if(4!==n&&(27===n&&xu(e.type)&&(r=e.stateNode,t=null),null!==(e=e.child)))for(po(e,t,r),e=e.sibling;null!==e;)po(e,t,r),e=e.sibling}function go(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&(27===n&&xu(e.type)&&(r=e.stateNode),null!==(e=e.child)))for(go(e,t,r),e=e.sibling;null!==e;)go(e,t,r),e=e.sibling}function bo(e){var t=e.stateNode,r=e.memoizedProps;try{for(var n=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);eu(t,n,r),t[Te]=e,t[ze]=r}catch(s){dd(e,e.return,s)}}var yo=!1,vo=!1,jo=!1,wo="function"===typeof WeakSet?WeakSet:Set,No=null;function ko(e,t,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:Do(e,r),4&n&&so(5,r);break;case 1:if(Do(e,r),4&n)if(e=r.stateNode,null===t)try{e.componentDidMount()}catch(l){dd(r,r.return,l)}else{var a=hi(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){dd(r,r.return,i)}}64&n&&io(r),512&n&&co(r,r.return);break;case 3:if(Do(e,r),64&n&&null!==(e=r.updateQueue)){if(t=null,null!==r.child)switch(r.child.tag){case 27:case 5:case 1:t=r.child.stateNode}try{ms(e,t)}catch(l){dd(r,r.return,l)}}break;case 27:null===t&&4&n&&bo(r);case 26:case 5:Do(e,r),null===t&&4&n&&mo(r),512&n&&co(r,r.return);break;case 12:Do(e,r);break;case 13:Do(e,r),4&n&&Ao(e,r),64&n&&(null!==(e=r.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var r=e.ownerDocument;if("$?"!==e.data||"complete"===r.readyState)t();else{var n=function(){t(),r.removeEventListener("DOMContentLoaded",n)};r.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}(e,r=fd.bind(null,r))));break;case 22:if(!(n=null!==r.memoizedState||yo)){t=null!==t&&null!==t.memoizedState||vo,a=yo;var s=vo;yo=n,(vo=t)&&!s?Io(e,r,0!==(8772&r.subtreeFlags)):Do(e,r),yo=a,vo=s}break;case 30:break;default:Do(e,r)}}function _o(e){var t=e.alternate;null!==t&&(e.alternate=null,_o(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Be(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var So=null,Co=!1;function Eo(e,t,r){for(r=r.child;null!==r;)Po(e,t,r),r=r.sibling}function Po(e,t,r){if(ue&&"function"===typeof ue.onCommitFiberUnmount)try{ue.onCommitFiberUnmount(de,r)}catch(s){}switch(r.tag){case 26:vo||uo(r,t),Eo(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode).parentNode.removeChild(r);break;case 27:vo||uo(r,t);var n=So,a=Co;xu(r.type)&&(So=r.stateNode,Co=!1),Eo(e,t,r),ju(r.stateNode),So=n,Co=a;break;case 5:vo||uo(r,t);case 6:if(n=So,a=Co,So=null,Eo(e,t,r),Co=a,null!==(So=n))if(Co)try{(9===So.nodeType?So.body:"HTML"===So.nodeName?So.ownerDocument.body:So).removeChild(r.stateNode)}catch(l){dd(r,t,l)}else try{So.removeChild(r.stateNode)}catch(l){dd(r,t,l)}break;case 18:null!==So&&(Co?(fu(9===(e=So).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,r.stateNode),Cm(e)):fu(So,r.stateNode));break;case 4:n=So,a=Co,So=r.stateNode.containerInfo,Co=!0,Eo(e,t,r),So=n,Co=a;break;case 0:case 11:case 14:case 15:vo||lo(2,r,t),vo||lo(4,r,t),Eo(e,t,r);break;case 1:vo||(uo(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount&&oo(r,t,n)),Eo(e,t,r);break;case 21:Eo(e,t,r);break;case 22:vo=(n=vo)||null!==r.memoizedState,Eo(e,t,r),vo=n;break;default:Eo(e,t,r)}}function Ao(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Cm(e)}catch(r){dd(t,t.return,r)}}function Lo(e,t){var r=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new wo),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new wo),t;default:throw Error(l(435,e.tag))}}(e);t.forEach(function(t){var n=hd.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}function To(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n],s=e,i=t,o=i;e:for(;null!==o;){switch(o.tag){case 27:if(xu(o.type)){So=o.stateNode,Co=!1;break e}break;case 5:So=o.stateNode,Co=!1;break e;case 3:case 4:So=o.stateNode.containerInfo,Co=!0;break e}o=o.return}if(null===So)throw Error(l(160));Po(s,i,a),So=null,Co=!1,null!==(s=a.alternate)&&(s.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Fo(t,e),t=t.sibling}var zo=null;function Fo(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:To(t,e),Oo(e),4&n&&(lo(3,e,e.return),so(3,e),lo(5,e,e.return));break;case 1:To(t,e),Oo(e),512&n&&(vo||null===r||uo(r,r.return)),64&n&&yo&&(null!==(e=e.updateQueue)&&(null!==(n=e.callbacks)&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===r?n:r.concat(n))));break;case 26:var a=zo;if(To(t,e),Oo(e),512&n&&(vo||null===r||uo(r,r.return)),4&n){var s=null!==r?r.memoizedState:null;if(n=e.memoizedState,null===r)if(null===n)if(null===e.stateNode){e:{n=e.type,r=e.memoizedProps,a=a.ownerDocument||a;t:switch(n){case"title":(!(s=a.getElementsByTagName("title")[0])||s[Ie]||s[Te]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=a.createElement(n),a.head.insertBefore(s,a.querySelector("head > title"))),eu(s,n,r),s[Te]=e,Ve(s),n=s;break e;case"link":var i=Iu("link","href",a).get(n+(r.href||""));if(i)for(var o=0;o<i.length;o++)if((s=i[o]).getAttribute("href")===(null==r.href||""===r.href?null:r.href)&&s.getAttribute("rel")===(null==r.rel?null:r.rel)&&s.getAttribute("title")===(null==r.title?null:r.title)&&s.getAttribute("crossorigin")===(null==r.crossOrigin?null:r.crossOrigin)){i.splice(o,1);break t}eu(s=a.createElement(n),n,r),a.head.appendChild(s);break;case"meta":if(i=Iu("meta","content",a).get(n+(r.content||"")))for(o=0;o<i.length;o++)if((s=i[o]).getAttribute("content")===(null==r.content?null:""+r.content)&&s.getAttribute("name")===(null==r.name?null:r.name)&&s.getAttribute("property")===(null==r.property?null:r.property)&&s.getAttribute("http-equiv")===(null==r.httpEquiv?null:r.httpEquiv)&&s.getAttribute("charset")===(null==r.charSet?null:r.charSet)){i.splice(o,1);break t}eu(s=a.createElement(n),n,r),a.head.appendChild(s);break;default:throw Error(l(468,n))}s[Te]=e,Ve(s),n=s}e.stateNode=n}else Bu(a,e.type,e.stateNode);else e.stateNode=Fu(a,n,e.memoizedProps);else s!==n?(null===s?null!==r.stateNode&&(r=r.stateNode).parentNode.removeChild(r):s.count--,null===n?Bu(a,e.type,e.stateNode):Fu(a,n,e.memoizedProps)):null===n&&null!==e.stateNode&&xo(e,e.memoizedProps,r.memoizedProps)}break;case 27:To(t,e),Oo(e),512&n&&(vo||null===r||uo(r,r.return)),null!==r&&4&n&&xo(e,e.memoizedProps,r.memoizedProps);break;case 5:if(To(t,e),Oo(e),512&n&&(vo||null===r||uo(r,r.return)),32&e.flags){a=e.stateNode;try{wt(a,"")}catch(f){dd(e,e.return,f)}}4&n&&null!=e.stateNode&&xo(e,a=e.memoizedProps,null!==r?r.memoizedProps:a),1024&n&&(jo=!0);break;case 6:if(To(t,e),Oo(e),4&n){if(null===e.stateNode)throw Error(l(162));n=e.memoizedProps,r=e.stateNode;try{r.nodeValue=n}catch(f){dd(e,e.return,f)}}break;case 3:if(Mu=null,a=zo,zo=ku(t.containerInfo),To(t,e),zo=a,Oo(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Cm(t.containerInfo)}catch(f){dd(e,e.return,f)}jo&&(jo=!1,Ro(e));break;case 4:n=zo,zo=ku(e.stateNode.containerInfo),To(t,e),Oo(e),zo=n;break;case 12:default:To(t,e),Oo(e);break;case 13:To(t,e),Oo(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==r&&null!==r.memoizedState)&&(jc=te()),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Lo(e,n)));break;case 22:a=null!==e.memoizedState;var c=null!==r&&null!==r.memoizedState,d=yo,u=vo;if(yo=d||a,vo=u||c,To(t,e),vo=u,yo=d,Oo(e),8192&n)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===r||c||yo||vo||Mo(e)),r=null,t=e;;){if(5===t.tag||26===t.tag){if(null===r){c=r=t;try{if(s=c.stateNode,a)"function"===typeof(i=s.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{o=c.stateNode;var m=c.memoizedProps.style,x=void 0!==m&&null!==m&&m.hasOwnProperty("display")?m.display:null;o.style.display=null==x||"boolean"===typeof x?"":(""+x).trim()}}catch(f){dd(c,c.return,f)}}}else if(6===t.tag){if(null===r){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(f){dd(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}4&n&&(null!==(n=e.updateQueue)&&(null!==(r=n.retryQueue)&&(n.retryQueue=null,Lo(e,r))));break;case 19:To(t,e),Oo(e),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Lo(e,n)));case 30:case 21:}}function Oo(e){var t=e.flags;if(2&t){try{for(var r,n=e.return;null!==n;){if(fo(n)){r=n;break}n=n.return}if(null==r)throw Error(l(160));switch(r.tag){case 27:var a=r.stateNode;go(e,ho(e),a);break;case 5:var s=r.stateNode;32&r.flags&&(wt(s,""),r.flags&=-33),go(e,ho(e),s);break;case 3:case 4:var i=r.stateNode.containerInfo;po(e,ho(e),i);break;default:throw Error(l(161))}}catch(o){dd(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ro(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ro(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Do(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)ko(e,t.alternate,t),t=t.sibling}function Mo(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:lo(4,t,t.return),Mo(t);break;case 1:uo(t,t.return);var r=t.stateNode;"function"===typeof r.componentWillUnmount&&oo(t,t.return,r),Mo(t);break;case 27:ju(t.stateNode);case 26:case 5:uo(t,t.return),Mo(t);break;case 22:null===t.memoizedState&&Mo(t);break;default:Mo(t)}e=e.sibling}}function Io(e,t,r){for(r=r&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var n=t.alternate,a=e,s=t,l=s.flags;switch(s.tag){case 0:case 11:case 15:Io(a,s,r),so(4,s);break;case 1:if(Io(a,s,r),"function"===typeof(a=(n=s).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){dd(n,n.return,c)}if(null!==(a=(n=s).updateQueue)){var i=n.stateNode;try{var o=a.shared.hiddenCallbacks;if(null!==o)for(a.shared.hiddenCallbacks=null,a=0;a<o.length;a++)us(o[a],i)}catch(c){dd(n,n.return,c)}}r&&64&l&&io(s),co(s,s.return);break;case 27:bo(s);case 26:case 5:Io(a,s,r),r&&null===n&&4&l&&mo(s),co(s,s.return);break;case 12:Io(a,s,r);break;case 13:Io(a,s,r),r&&4&l&&Ao(a,s);break;case 22:null===s.memoizedState&&Io(a,s,r),co(s,s.return);break;case 30:break;default:Io(a,s,r)}t=t.sibling}}function Bo(e,t){var r=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==r&&(null!=e&&e.refCount++,null!=r&&Fa(r))}function Uo(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Fa(e))}function $o(e,t,r,n){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Ho(e,t,r,n),t=t.sibling}function Ho(e,t,r,n){var a=t.flags;switch(t.tag){case 0:case 11:case 15:$o(e,t,r,n),2048&a&&so(9,t);break;case 1:case 13:default:$o(e,t,r,n);break;case 3:$o(e,t,r,n),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Fa(e)));break;case 12:if(2048&a){$o(e,t,r,n),e=t.stateNode;try{var s=t.memoizedProps,l=s.id,i=s.onPostCommit;"function"===typeof i&&i(l,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(o){dd(t,t.return,o)}}else $o(e,t,r,n);break;case 23:break;case 22:s=t.stateNode,l=t.alternate,null!==t.memoizedState?2&s._visibility?$o(e,t,r,n):Vo(e,t):2&s._visibility?$o(e,t,r,n):(s._visibility|=2,qo(e,t,r,n,0!==(10256&t.subtreeFlags))),2048&a&&Bo(l,t);break;case 24:$o(e,t,r,n),2048&a&&Uo(t.alternate,t)}}function qo(e,t,r,n,a){for(a=a&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,l=t,i=r,o=n,c=l.flags;switch(l.tag){case 0:case 11:case 15:qo(s,l,i,o,a),so(8,l);break;case 23:break;case 22:var d=l.stateNode;null!==l.memoizedState?2&d._visibility?qo(s,l,i,o,a):Vo(s,l):(d._visibility|=2,qo(s,l,i,o,a)),a&&2048&c&&Bo(l.alternate,l);break;case 24:qo(s,l,i,o,a),a&&2048&c&&Uo(l.alternate,l);break;default:qo(s,l,i,o,a)}t=t.sibling}}function Vo(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var r=e,n=t,a=n.flags;switch(n.tag){case 22:Vo(r,n),2048&a&&Bo(n.alternate,n);break;case 24:Vo(r,n),2048&a&&Uo(n.alternate,n);break;default:Vo(r,n)}t=t.sibling}}var Wo=8192;function Go(e){if(e.subtreeFlags&Wo)for(e=e.child;null!==e;)Qo(e),e=e.sibling}function Qo(e){switch(e.tag){case 26:Go(e),e.flags&Wo&&null!==e.memoizedState&&function(e,t,r){if(null===$u)throw Error(l(475));var n=$u;if("stylesheet"===t.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var a=Pu(r.href),s=e.querySelector(Au(a));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(n.count++,n=qu.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=s,void Ve(s);s=e.ownerDocument||e,r=Lu(r),(a=wu.get(a))&&Ru(r,a),Ve(s=s.createElement("link"));var i=s;i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),eu(s,"link",r),t.instance=s}null===n.stylesheets&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(n.count++,t=qu.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}(zo,e.memoizedState,e.memoizedProps);break;case 5:default:Go(e);break;case 3:case 4:var t=zo;zo=ku(e.stateNode.containerInfo),Go(e),zo=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Wo,Wo=16777216,Go(e),Wo=t):Go(e))}}function Ko(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Yo(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];No=n,Zo(n,e)}Ko(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Jo(e),e=e.sibling}function Jo(e){switch(e.tag){case 0:case 11:case 15:Yo(e),2048&e.flags&&lo(9,e,e.return);break;case 3:case 12:default:Yo(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Xo(e)):Yo(e)}}function Xo(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];No=n,Zo(n,e)}Ko(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:lo(8,t,t.return),Xo(t);break;case 22:2&(r=t.stateNode)._visibility&&(r._visibility&=-3,Xo(t));break;default:Xo(t)}e=e.sibling}}function Zo(e,t){for(;null!==No;){var r=No;switch(r.tag){case 0:case 11:case 15:lo(8,r,t);break;case 23:case 22:if(null!==r.memoizedState&&null!==r.memoizedState.cachePool){var n=r.memoizedState.cachePool.pool;null!=n&&n.refCount++}break;case 24:Fa(r.memoizedState.cache)}if(null!==(n=r.child))n.return=r,No=n;else e:for(r=e;null!==No;){var a=(n=No).sibling,s=n.return;if(_o(n),n===r){No=null;break e}if(null!==a){a.return=s,No=a;break e}No=s}}}var ec={getCacheForType:function(e){var t=Sa(Ta),r=t.data.get(e);return void 0===r&&(r=e(),t.data.set(e,r)),r}},tc="function"===typeof WeakMap?WeakMap:Map,rc=0,nc=null,ac=null,sc=0,lc=0,ic=null,oc=!1,cc=!1,dc=!1,uc=0,mc=0,xc=0,fc=0,hc=0,pc=0,gc=0,bc=null,yc=null,vc=!1,jc=0,wc=1/0,Nc=null,kc=null,_c=0,Sc=null,Cc=null,Ec=0,Pc=0,Ac=null,Lc=null,Tc=0,zc=null;function Fc(){if(0!==(2&rc)&&0!==sc)return sc&-sc;if(null!==F.T){return 0!==Da?Da:Pd()}return Ae()}function Oc(){0===pc&&(pc=0===(536870912&sc)||sa?we():536870912);var e=ni.current;return null!==e&&(e.flags|=32),pc}function Rc(e,t,r){(e!==nc||2!==lc&&9!==lc)&&null===e.cancelPendingCommit||(Hc(e,0),Bc(e,sc,pc,!1)),_e(e,r),0!==(2&rc)&&e===nc||(e===nc&&(0===(2&rc)&&(fc|=r),4===mc&&Bc(e,sc,pc,!1)),wd(e))}function Dc(e,t,r){if(0!==(6&rc))throw Error(l(327));for(var n=!r&&0===(124&t)&&0===(t&e.expiredLanes)||ve(e,t),a=n?function(e,t){var r=rc;rc|=2;var n=Vc(),a=Wc();nc!==e||sc!==t?(Nc=null,wc=te()+500,Hc(e,t)):cc=ve(e,t);e:for(;;)try{if(0!==lc&&null!==ac){t=ac;var s=ic;t:switch(lc){case 1:lc=0,ic=null,Zc(e,t,s,1);break;case 2:case 9:if(Ka(s)){lc=0,ic=null,Xc(t);break}t=function(){2!==lc&&9!==lc||nc!==e||(lc=7),wd(e)},s.then(t,t);break e;case 3:lc=7;break e;case 4:lc=5;break e;case 7:Ka(s)?(lc=0,ic=null,Xc(t)):(lc=0,ic=null,Zc(e,t,s,7));break;case 5:var i=null;switch(ac.tag){case 26:i=ac.memoizedState;case 5:case 27:var o=ac;if(!i||Uu(i)){lc=0,ic=null;var c=o.sibling;if(null!==c)ac=c;else{var d=o.return;null!==d?(ac=d,ed(d)):ac=null}break t}}lc=0,ic=null,Zc(e,t,s,5);break;case 6:lc=0,ic=null,Zc(e,t,s,6);break;case 8:$c(),mc=6;break e;default:throw Error(l(462))}}Yc();break}catch(u){qc(e,u)}return ba=ga=null,F.H=n,F.A=a,rc=r,null!==ac?0:(nc=null,sc=0,En(),mc)}(e,t):Qc(e,t,!0),s=n;;){if(0===a){cc&&!n&&Bc(e,t,0,!1);break}if(r=e.current.alternate,!s||Ic(r)){if(2===a){if(s=t,e.errorRecoveryDisabledLanes&s)var i=0;else i=0!==(i=-536870913&e.pendingLanes)?i:536870912&i?536870912:0;if(0!==i){t=i;e:{var o=e;a=bc;var c=o.current.memoizedState.isDehydrated;if(c&&(Hc(o,i).flags|=256),2!==(i=Qc(o,i,!1))){if(dc&&!c){o.errorRecoveryDisabledLanes|=s,fc|=s,a=4;break e}s=yc,yc=a,null!==s&&(null===yc?yc=s:yc.push.apply(yc,s))}a=i}if(s=!1,2!==a)continue}}if(1===a){Hc(e,0),Bc(e,t,0,!0);break}e:{switch(n=e,s=a){case 0:case 1:throw Error(l(345));case 4:if((4194048&t)!==t)break;case 6:Bc(n,t,pc,!oc);break e;case 2:yc=null;break;case 3:case 5:break;default:throw Error(l(329))}if((62914560&t)===t&&10<(a=jc+300-te())){if(Bc(n,t,pc,!oc),0!==ye(n,0,!0))break e;n.timeoutHandle=ou(Mc.bind(null,n,r,yc,Nc,vc,t,pc,fc,gc,oc,s,2,-0,0),a)}else Mc(n,r,yc,Nc,vc,t,pc,fc,gc,oc,s,0,-0,0)}break}a=Qc(e,t,!1),s=!1}wd(e)}function Mc(e,t,r,n,a,s,i,o,c,d,u,m,x,f){if(e.timeoutHandle=-1,(8192&(m=t.subtreeFlags)||16785408===(16785408&m))&&($u={stylesheets:null,count:0,unsuspend:Hu},Qo(t),null!==(m=function(){if(null===$u)throw Error(l(475));var e=$u;return e.stylesheets&&0===e.count&&Wu(e,e.stylesheets),0<e.count?function(t){var r=setTimeout(function(){if(e.stylesheets&&Wu(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(r)}}:null}())))return e.cancelPendingCommit=m(rd.bind(null,e,t,s,r,n,a,i,o,c,u,1,x,f)),void Bc(e,s,i,!d);rd(e,t,s,r,n,a,i,o,c)}function Ic(e){for(var t=e;;){var r=t.tag;if((0===r||11===r||15===r)&&16384&t.flags&&(null!==(r=t.updateQueue)&&null!==(r=r.stores)))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!Qr(s(),a))return!1}catch(l){return!1}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bc(e,t,r,n){t&=~hc,t&=~fc,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var a=t;0<a;){var s=31-xe(a),l=1<<s;n[s]=-1,a&=~l}0!==r&&Se(e,r,t)}function Uc(){return 0!==(6&rc)||(Nd(0,!1),!1)}function $c(){if(null!==ac){if(0===lc)var e=ac.return;else ba=ga=null,Ds(e=ac),Ql=null,Kl=0,e=ac;for(;null!==e;)ao(e.alternate,e),e=e.return;ac=null}}function Hc(e,t){var r=e.timeoutHandle;-1!==r&&(e.timeoutHandle=-1,cu(r)),null!==(r=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,r()),$c(),nc=e,ac=r=Mn(e.current,null),sc=t,lc=0,ic=null,oc=!1,cc=ve(e,t),dc=!1,gc=pc=hc=fc=xc=mc=0,yc=bc=null,vc=!1,0!==(8&t)&&(t|=32&t);var n=e.entangledLanes;if(0!==n)for(e=e.entanglements,n&=t;0<n;){var a=31-xe(n),s=1<<a;t|=e[a],n&=~s}return uc=t,En(),r}function qc(e,t){ys=null,F.H=ql,t===Va||t===Ga?(t=Za(),lc=3):t===Wa?(t=Za(),lc=4):lc=t===_i?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,ic=t,null===ac&&(mc=1,vi(e,kn(t,e.current)))}function Vc(){var e=F.H;return F.H=ql,null===e?ql:e}function Wc(){var e=F.A;return F.A=ec,e}function Gc(){mc=4,oc||(4194048&sc)!==sc&&null!==ni.current||(cc=!0),0===(134217727&xc)&&0===(134217727&fc)||null===nc||Bc(nc,sc,pc,!1)}function Qc(e,t,r){var n=rc;rc|=2;var a=Vc(),s=Wc();nc===e&&sc===t||(Nc=null,Hc(e,t)),t=!1;var l=mc;e:for(;;)try{if(0!==lc&&null!==ac){var i=ac,o=ic;switch(lc){case 8:$c(),l=6;break e;case 3:case 2:case 9:case 6:null===ni.current&&(t=!0);var c=lc;if(lc=0,ic=null,Zc(e,i,o,c),r&&cc){l=0;break e}break;default:c=lc,lc=0,ic=null,Zc(e,i,o,c)}}Kc(),l=mc;break}catch(d){qc(e,d)}return t&&e.shellSuspendCounter++,ba=ga=null,rc=n,F.H=a,F.A=s,null===ac&&(nc=null,sc=0,En()),l}function Kc(){for(;null!==ac;)Jc(ac)}function Yc(){for(;null!==ac&&!Z();)Jc(ac)}function Jc(e){var t=Yi(e.alternate,e,uc);e.memoizedProps=e.pendingProps,null===t?ed(e):ac=t}function Xc(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=Oi(r,t,t.pendingProps,t.type,void 0,sc);break;case 11:t=Oi(r,t,t.pendingProps,t.type.render,t.ref,sc);break;case 5:Ds(t);default:ao(r,t),t=Yi(r,t=ac=In(t,uc),uc)}e.memoizedProps=e.pendingProps,null===t?ed(e):ac=t}function Zc(e,t,r,n){ba=ga=null,Ds(t),Ql=null,Kl=0;var a=t.return;try{if(function(e,t,r,n,a){if(r.flags|=32768,null!==n&&"object"===typeof n&&"function"===typeof n.then){if(null!==(t=r.alternate)&&Na(t,r,a,!0),null!==(r=ni.current)){switch(r.tag){case 13:return null===ai?Gc():null===r.alternate&&0===mc&&(mc=3),r.flags&=-257,r.flags|=65536,r.lanes=a,n===Qa?r.flags|=16384:(null===(t=r.updateQueue)?r.updateQueue=new Set([n]):t.add(n),ud(e,n,a)),!1;case 22:return r.flags|=65536,n===Qa?r.flags|=16384:(null===(t=r.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=t):null===(r=t.retryQueue)?t.retryQueue=new Set([n]):r.add(n),ud(e,n,a)),!1}throw Error(l(435,r.tag))}return ud(e,n,a),Gc(),!1}if(sa)return null!==(t=ni.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,n!==oa&&ha(kn(e=Error(l(422),{cause:n}),r))):(n!==oa&&ha(kn(t=Error(l(423),{cause:n}),r)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,n=kn(n,r),is(e,a=wi(e.stateNode,n,a)),4!==mc&&(mc=2)),!1;var s=Error(l(520),{cause:n});if(s=kn(s,r),null===bc?bc=[s]:bc.push(s),4!==mc&&(mc=2),null===t)return!0;n=kn(n,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=a&-a,r.lanes|=e,is(r,e=wi(r.stateNode,n,e)),!1;case 1:if(t=r.type,s=r.stateNode,0===(128&r.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===kc||!kc.has(s))))return r.flags|=65536,a&=-a,r.lanes|=a,ki(a=Ni(a),e,r,n),is(r,a),!1}r=r.return}while(null!==r);return!1}(e,a,t,r,sc))return mc=1,vi(e,kn(r,e.current)),void(ac=null)}catch(s){if(null!==a)throw ac=a,s;return mc=1,vi(e,kn(r,e.current)),void(ac=null)}32768&t.flags?(sa||1===n?e=!0:cc||0!==(536870912&sc)?e=!1:(oc=e=!0,(2===n||9===n||3===n||6===n)&&(null!==(n=ni.current)&&13===n.tag&&(n.flags|=16384))),td(t,e)):ed(t)}function ed(e){var t=e;do{if(0!==(32768&t.flags))return void td(t,oc);e=t.return;var r=ro(t.alternate,t,uc);if(null!==r)return void(ac=r);if(null!==(t=t.sibling))return void(ac=t);ac=t=e}while(null!==t);0===mc&&(mc=5)}function td(e,t){do{var r=no(e.alternate,e);if(null!==r)return r.flags&=32767,void(ac=r);if(null!==(r=e.return)&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&null!==(e=e.sibling))return void(ac=e);ac=e=r}while(null!==e);mc=6,ac=null}function rd(e,t,r,n,a,s,i,o,c){e.cancelPendingCommit=null;do{id()}while(0!==_c);if(0!==(6&rc))throw Error(l(327));if(null!==t){if(t===e.current)throw Error(l(177));if(s=t.lanes|t.childLanes,function(e,t,r,n,a,s){var l=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var i=e.entanglements,o=e.expirationTimes,c=e.hiddenUpdates;for(r=l&~r;0<r;){var d=31-xe(r),u=1<<d;i[d]=0,o[d]=-1;var m=c[d];if(null!==m)for(c[d]=null,d=0;d<m.length;d++){var x=m[d];null!==x&&(x.lane&=-536870913)}r&=~u}0!==n&&Se(e,n,0),0!==s&&0===a&&0!==e.tag&&(e.suspendedLanes|=s&~(l&~t))}(e,r,s|=Cn,i,o,c),e===nc&&(ac=nc=null,sc=0),Cc=t,Sc=e,Ec=r,Pc=s,Ac=a,Lc=n,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,J(se,function(){return od(),null})):(e.callbackNode=null,e.callbackPriority=0),n=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||n){n=F.T,F.T=null,a=O.p,O.p=2,i=rc,rc|=4;try{!function(e,t){if(e=e.containerInfo,tu=rm,en(e=Zr(e))){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch(p){r=null;break e}var i=0,o=-1,c=-1,d=0,u=0,m=e,x=null;t:for(;;){for(var f;m!==r||0!==a&&3!==m.nodeType||(o=i+a),m!==s||0!==n&&3!==m.nodeType||(c=i+n),3===m.nodeType&&(i+=m.nodeValue.length),null!==(f=m.firstChild);)x=m,m=f;for(;;){if(m===e)break t;if(x===r&&++d===a&&(o=i),x===s&&++u===n&&(c=i),null!==(f=m.nextSibling))break;x=(m=x).parentNode}m=f}r=-1===o||-1===c?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ru={focusedElem:e,selectionRange:r},rm=!1,No=t;null!==No;)if(e=(t=No).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,No=e;else for(;null!==No;){switch(s=(t=No).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,r=t,a=s.memoizedProps,s=s.memoizedState,n=r.stateNode;try{var h=hi(r.type,a,(r.elementType,r.type));e=n.getSnapshotBeforeUpdate(h,s),n.__reactInternalSnapshotBeforeUpdate=e}catch(g){dd(r,r.return,g)}}break;case 3:if(0!==(1024&e))if(9===(r=(e=t.stateNode.containerInfo).nodeType))hu(e);else if(1===r)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":hu(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(l(163))}if(null!==(e=t.sibling)){e.return=t.return,No=e;break}No=t.return}}(e,t)}finally{rc=i,O.p=a,F.T=n}}_c=1,nd(),ad(),sd()}}function nd(){if(1===_c){_c=0;var e=Sc,t=Cc,r=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||r){r=F.T,F.T=null;var n=O.p;O.p=2;var a=rc;rc|=4;try{Fo(t,e);var s=ru,l=Zr(e.containerInfo),i=s.focusedElem,o=s.selectionRange;if(l!==i&&i&&i.ownerDocument&&Xr(i.ownerDocument.documentElement,i)){if(null!==o&&en(i)){var c=o.start,d=o.end;if(void 0===d&&(d=c),"selectionStart"in i)i.selectionStart=c,i.selectionEnd=Math.min(d,i.value.length);else{var u=i.ownerDocument||document,m=u&&u.defaultView||window;if(m.getSelection){var x=m.getSelection(),f=i.textContent.length,h=Math.min(o.start,f),p=void 0===o.end?h:Math.min(o.end,f);!x.extend&&h>p&&(l=p,p=h,h=l);var g=Jr(i,h),b=Jr(i,p);if(g&&b&&(1!==x.rangeCount||x.anchorNode!==g.node||x.anchorOffset!==g.offset||x.focusNode!==b.node||x.focusOffset!==b.offset)){var y=u.createRange();y.setStart(g.node,g.offset),x.removeAllRanges(),h>p?(x.addRange(y),x.extend(b.node,b.offset)):(y.setEnd(b.node,b.offset),x.addRange(y))}}}}for(u=[],x=i;x=x.parentNode;)1===x.nodeType&&u.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<u.length;i++){var v=u[i];v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}rm=!!tu,ru=tu=null}finally{rc=a,O.p=n,F.T=r}}e.current=t,_c=2}}function ad(){if(2===_c){_c=0;var e=Sc,t=Cc,r=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||r){r=F.T,F.T=null;var n=O.p;O.p=2;var a=rc;rc|=4;try{ko(e,t.alternate,t)}finally{rc=a,O.p=n,F.T=r}}_c=3}}function sd(){if(4===_c||3===_c){_c=0,ee();var e=Sc,t=Cc,r=Ec,n=Lc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?_c=5:(_c=0,Cc=Sc=null,ld(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(kc=null),Pe(r),t=t.stateNode,ue&&"function"===typeof ue.onCommitFiberRoot)try{ue.onCommitFiberRoot(de,t,void 0,128===(128&t.current.flags))}catch(o){}if(null!==n){t=F.T,a=O.p,O.p=2,F.T=null;try{for(var s=e.onRecoverableError,l=0;l<n.length;l++){var i=n[l];s(i.value,{componentStack:i.stack})}}finally{F.T=t,O.p=a}}0!==(3&Ec)&&id(),wd(e),a=e.pendingLanes,0!==(4194090&r)&&0!==(42&a)?e===zc?Tc++:(Tc=0,zc=e):Tc=0,Nd(0,!1)}}function ld(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Fa(t)))}function id(e){return nd(),ad(),sd(),od()}function od(){if(5!==_c)return!1;var e=Sc,t=Pc;Pc=0;var r=Pe(Ec),n=F.T,a=O.p;try{O.p=32>r?32:r,F.T=null,r=Ac,Ac=null;var s=Sc,i=Ec;if(_c=0,Cc=Sc=null,Ec=0,0!==(6&rc))throw Error(l(331));var o=rc;if(rc|=4,Jo(s.current),Ho(s,s.current,i,r),rc=o,Nd(0,!1),ue&&"function"===typeof ue.onPostCommitFiberRoot)try{ue.onPostCommitFiberRoot(de,s)}catch(c){}return!0}finally{O.p=a,F.T=n,ld(e,t)}}function cd(e,t,r){t=kn(r,t),null!==(e=ss(e,t=wi(e.stateNode,t,2),2))&&(_e(e,2),wd(e))}function dd(e,t,r){if(3===e.tag)cd(e,e,r);else for(;null!==t;){if(3===t.tag){cd(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===kc||!kc.has(n))){e=kn(r,e),null!==(n=ss(t,r=Ni(2),2))&&(ki(r,n,t,e),_e(n,2),wd(n));break}}t=t.return}}function ud(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new tc;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(dc=!0,a.add(r),e=md.bind(null,e,t,r),t.then(e,e))}function md(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,nc===e&&(sc&r)===r&&(4===mc||3===mc&&(62914560&sc)===sc&&300>te()-jc?0===(2&rc)&&Hc(e,0):hc|=r,gc===sc&&(gc=0)),wd(e)}function xd(e,t){0===t&&(t=Ne()),null!==(e=Ln(e,t))&&(_e(e,t),wd(e))}function fd(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),xd(e,r)}function hd(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(l(314))}null!==n&&n.delete(t),xd(e,r)}var pd=null,gd=null,bd=!1,yd=!1,vd=!1,jd=0;function wd(e){e!==gd&&null===e.next&&(null===gd?pd=gd=e:gd=gd.next=e),yd=!0,bd||(bd=!0,uu(function(){0!==(6&rc)?J(ne,kd):_d()}))}function Nd(e,t){if(!vd&&yd){vd=!0;do{for(var r=!1,n=pd;null!==n;){if(!t)if(0!==e){var a=n.pendingLanes;if(0===a)var s=0;else{var l=n.suspendedLanes,i=n.pingedLanes;s=(1<<31-xe(42|e)+1)-1,s=201326741&(s&=a&~(l&~i))?201326741&s|1:s?2|s:0}0!==s&&(r=!0,Ed(n,s))}else s=sc,0===(3&(s=ye(n,n===nc?s:0,null!==n.cancelPendingCommit||-1!==n.timeoutHandle)))||ve(n,s)||(r=!0,Ed(n,s));n=n.next}}while(r);vd=!1}}function kd(){_d()}function _d(){yd=bd=!1;var e=0;0!==jd&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==iu&&(iu=e,!0);return iu=null,!1}()&&(e=jd),jd=0);for(var t=te(),r=null,n=pd;null!==n;){var a=n.next,s=Sd(n,t);0===s?(n.next=null,null===r?pd=a:r.next=a,null===a&&(gd=r)):(r=n,(0!==e||0!==(3&s))&&(yd=!0)),n=a}Nd(e,!1)}function Sd(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var l=31-xe(s),i=1<<l,o=a[l];-1===o?0!==(i&r)&&0===(i&n)||(a[l]=je(i,t)):o<=t&&(e.expiredLanes|=i),s&=~i}if(r=sc,r=ye(e,e===(t=nc)?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),n=e.callbackNode,0===r||e===t&&(2===lc||9===lc)||null!==e.cancelPendingCommit)return null!==n&&null!==n&&X(n),e.callbackNode=null,e.callbackPriority=0;if(0===(3&r)||ve(e,r)){if((t=r&-r)===e.callbackPriority)return t;switch(null!==n&&X(n),Pe(r)){case 2:case 8:r=ae;break;case 32:default:r=se;break;case 268435456:r=ie}return n=Cd.bind(null,e),r=J(r,n),e.callbackPriority=t,e.callbackNode=r,t}return null!==n&&null!==n&&X(n),e.callbackPriority=2,e.callbackNode=null,2}function Cd(e,t){if(0!==_c&&5!==_c)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(id()&&e.callbackNode!==r)return null;var n=sc;return 0===(n=ye(e,e===nc?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Dc(e,n,t),Sd(e,te()),null!=e.callbackNode&&e.callbackNode===r?Cd.bind(null,e):null)}function Ed(e,t){if(id())return null;Dc(e,t,!0)}function Pd(){return 0===jd&&(jd=we()),jd}function Ad(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Pt(""+e)}function Ld(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}for(var Td=0;Td<jn.length;Td++){var zd=jn[Td];wn(zd.toLowerCase(),"on"+(zd[0].toUpperCase()+zd.slice(1)))}wn(xn,"onAnimationEnd"),wn(fn,"onAnimationIteration"),wn(hn,"onAnimationStart"),wn("dblclick","onDoubleClick"),wn("focusin","onFocus"),wn("focusout","onBlur"),wn(pn,"onTransitionRun"),wn(gn,"onTransitionStart"),wn(bn,"onTransitionCancel"),wn(yn,"onTransitionEnd"),Ke("onMouseEnter",["mouseout","mouseover"]),Ke("onMouseLeave",["mouseout","mouseover"]),Ke("onPointerEnter",["pointerout","pointerover"]),Ke("onPointerLeave",["pointerout","pointerover"]),Qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Od=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fd));function Rd(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var l=n.length-1;0<=l;l--){var i=n[l],o=i.instance,c=i.currentTarget;if(i=i.listener,o!==s&&a.isPropagationStopped())break e;s=i,a.currentTarget=c;try{s(a)}catch(d){pi(d)}a.currentTarget=null,s=o}else for(l=0;l<n.length;l++){if(o=(i=n[l]).instance,c=i.currentTarget,i=i.listener,o!==s&&a.isPropagationStopped())break e;s=i,a.currentTarget=c;try{s(a)}catch(d){pi(d)}a.currentTarget=null,s=o}}}}function Dd(e,t){var r=t[Oe];void 0===r&&(r=t[Oe]=new Set);var n=e+"__bubble";r.has(n)||(Ud(t,e,2,!1),r.add(n))}function Md(e,t,r){var n=0;t&&(n|=4),Ud(r,e,n,t)}var Id="_reactListening"+Math.random().toString(36).slice(2);function Bd(e){if(!e[Id]){e[Id]=!0,We.forEach(function(t){"selectionchange"!==t&&(Od.has(t)||Md(t,!1,e),Md(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Id]||(t[Id]=!0,Md("selectionchange",!1,t))}}function Ud(e,t,r,n){switch(cm(t)){case 2:var a=nm;break;case 8:a=am;break;default:a=sm}r=a.bind(null,t,r,e),a=void 0,!It||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function $d(e,t,r,n,a){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var l=n.tag;if(3===l||4===l){var i=n.stateNode.containerInfo;if(i===a)break;if(4===l)for(l=n.return;null!==l;){var c=l.tag;if((3===c||4===c)&&l.stateNode.containerInfo===a)return;l=l.return}for(;null!==i;){if(null===(l=Ue(i)))return;if(5===(c=l.tag)||6===c||26===c||27===c){n=s=l;continue e}i=i.parentNode}}n=n.return}Rt(function(){var n=s,a=Lt(r),l=[];e:{var i=vn.get(e);if(void 0!==i){var c=Zt,d=e;switch(e){case"keypress":if(0===Vt(r))break e;case"keydown":case"keyup":c=fr;break;case"focusin":d="focus",c=sr;break;case"focusout":d="blur",c=sr;break;case"beforeblur":case"afterblur":c=sr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=nr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ar;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=pr;break;case xn:case fn:case hn:c=lr;break;case yn:c=gr;break;case"scroll":case"scrollend":c=tr;break;case"wheel":c=br;break;case"copy":case"cut":case"paste":c=ir;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=hr;break;case"toggle":case"beforetoggle":c=yr}var u=0!==(4&t),m=!u&&("scroll"===e||"scrollend"===e),x=u?null!==i?i+"Capture":null:i;u=[];for(var f,h=n;null!==h;){var p=h;if(f=p.stateNode,5!==(p=p.tag)&&26!==p&&27!==p||null===f||null===x||null!=(p=Dt(h,x))&&u.push(Hd(h,p,f)),m)break;h=h.return}0<u.length&&(i=new c(i,d,null,r,a),l.push({event:i,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||r===At||!(d=r.relatedTarget||r.fromElement)||!Ue(d)&&!d[Fe])&&(c||i)&&(i=a.window===a?a:(i=a.ownerDocument)?i.defaultView||i.parentWindow:window,c?(c=n,null!==(d=(d=r.relatedTarget||r.toElement)?Ue(d):null)&&(m=o(d),u=d.tag,d!==m||5!==u&&27!==u&&6!==u)&&(d=null)):(c=null,d=n),c!==d)){if(u=nr,p="onMouseLeave",x="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(u=hr,p="onPointerLeave",x="onPointerEnter",h="pointer"),m=null==c?i:He(c),f=null==d?i:He(d),(i=new u(p,h+"leave",c,r,a)).target=m,i.relatedTarget=f,p=null,Ue(a)===n&&((u=new u(x,h+"enter",d,r,a)).target=f,u.relatedTarget=m,p=u),m=p,c&&d)e:{for(x=d,h=0,f=u=c;f;f=Vd(f))h++;for(f=0,p=x;p;p=Vd(p))f++;for(;0<h-f;)u=Vd(u),h--;for(;0<f-h;)x=Vd(x),f--;for(;h--;){if(u===x||null!==x&&u===x.alternate)break e;u=Vd(u),x=Vd(x)}u=null}else u=null;null!==c&&Wd(l,i,c,u,!1),null!==d&&null!==m&&Wd(l,m,d,u,!0)}if("select"===(c=(i=n?He(n):window).nodeName&&i.nodeName.toLowerCase())||"input"===c&&"file"===i.type)var g=Dr;else if(Lr(i))if(Mr)g=Gr;else{g=Vr;var b=qr}else!(c=i.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type?n&&St(n.elementType)&&(g=Dr):g=Wr;switch(g&&(g=g(e,n))?Tr(l,g,r,a):(b&&b(e,i,n),"focusout"===e&&n&&"number"===i.type&&null!=n.memoizedProps.value&&bt(i,"number",i.value)),b=n?He(n):window,e){case"focusin":(Lr(b)||"true"===b.contentEditable)&&(rn=b,nn=n,an=null);break;case"focusout":an=nn=rn=null;break;case"mousedown":sn=!0;break;case"contextmenu":case"mouseup":case"dragend":sn=!1,ln(l,r,a);break;case"selectionchange":if(tn)break;case"keydown":case"keyup":ln(l,r,a)}var y;if(jr)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Pr?Cr(e,r)&&(v="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(v="onCompositionStart");v&&(kr&&"ko"!==r.locale&&(Pr||"onCompositionStart"!==v?"onCompositionEnd"===v&&Pr&&(y=qt()):($t="value"in(Ut=a)?Ut.value:Ut.textContent,Pr=!0)),0<(b=qd(n,v)).length&&(v=new or(v,e,null,r,a),l.push({event:v,listeners:b}),y?v.data=y:null!==(y=Er(r))&&(v.data=y))),(y=Nr?function(e,t){switch(e){case"compositionend":return Er(t);case"keypress":return 32!==t.which?null:(Sr=!0,_r);case"textInput":return(e=t.data)===_r&&Sr?null:e;default:return null}}(e,r):function(e,t){if(Pr)return"compositionend"===e||!jr&&Cr(e,t)?(e=qt(),Ht=$t=Ut=null,Pr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(v=qd(n,"onBeforeInput")).length&&(b=new or("onBeforeInput","beforeinput",null,r,a),l.push({event:b,listeners:v}),b.data=y)),function(e,t,r,n,a){if("submit"===t&&r&&r.stateNode===a){var s=Ad((a[ze]||null).action),l=n.submitter;l&&null!==(t=(t=l[ze]||null)?Ad(t.formAction):l.getAttribute("formAction"))&&(s=t,l=null);var i=new Zt("action","action",null,n,a);e.push({event:i,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(0!==jd){var e=l?Ld(a,l):new FormData(a);Al(r,{pending:!0,data:e,method:a.method,action:s},null,e)}}else"function"===typeof s&&(i.preventDefault(),e=l?Ld(a,l):new FormData(a),Al(r,{pending:!0,data:e,method:a.method,action:s},s,e))},currentTarget:a}]})}}(l,e,n,r,a)}Rd(l,t)})}function Hd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function qd(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,s=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===s||(null!=(a=Dt(e,r))&&n.unshift(Hd(e,a,s)),null!=(a=Dt(e,t))&&n.push(Hd(e,a,s))),3===e.tag)return n;e=e.return}return[]}function Vd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Wd(e,t,r,n,a){for(var s=t._reactName,l=[];null!==r&&r!==n;){var i=r,o=i.alternate,c=i.stateNode;if(i=i.tag,null!==o&&o===n)break;5!==i&&26!==i&&27!==i||null===c||(o=c,a?null!=(c=Dt(r,s))&&l.unshift(Hd(r,c,o)):a||null!=(c=Dt(r,s))&&l.push(Hd(r,c,o))),r=r.return}0!==l.length&&e.push({event:t,listeners:l})}var Gd=/\r\n?/g,Qd=/\u0000|\uFFFD/g;function Kd(e){return("string"===typeof e?e:""+e).replace(Gd,"\n").replace(Qd,"")}function Yd(e,t){return t=Kd(t),Kd(e)===t}function Jd(){}function Xd(e,t,r,n,a,s){switch(r){case"children":"string"===typeof n?"body"===t||"textarea"===t&&""===n||wt(e,n):("number"===typeof n||"bigint"===typeof n)&&"body"!==t&&wt(e,""+n);break;case"className":rt(e,"class",n);break;case"tabIndex":rt(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":rt(e,r,n);break;case"style":_t(e,n,s);break;case"data":if("object"!==t){rt(e,"data",n);break}case"src":case"href":if(""===n&&("a"!==t||"href"!==r)){e.removeAttribute(r);break}if(null==n||"function"===typeof n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(r);break}n=Pt(""+n),e.setAttribute(r,n);break;case"action":case"formAction":if("function"===typeof n){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===r?("input"!==t&&Xd(e,t,"name",a.name,a,null),Xd(e,t,"formEncType",a.formEncType,a,null),Xd(e,t,"formMethod",a.formMethod,a,null),Xd(e,t,"formTarget",a.formTarget,a,null)):(Xd(e,t,"encType",a.encType,a,null),Xd(e,t,"method",a.method,a,null),Xd(e,t,"target",a.target,a,null))),null==n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(r);break}n=Pt(""+n),e.setAttribute(r,n);break;case"onClick":null!=n&&(e.onclick=Jd);break;case"onScroll":null!=n&&Dd("scroll",e);break;case"onScrollEnd":null!=n&&Dd("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(l(61));if(null!=(r=n.__html)){if(null!=a.children)throw Error(l(60));e.innerHTML=r}}break;case"multiple":e.multiple=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"muted":e.muted=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==n||"function"===typeof n||"boolean"===typeof n||"symbol"===typeof n){e.removeAttribute("xlink:href");break}r=Pt(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,""+n):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":!0===n?e.setAttribute(r,""):!1!==n&&null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,n):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":null!=n&&"function"!==typeof n&&"symbol"!==typeof n&&!isNaN(n)&&1<=n?e.setAttribute(r,n):e.removeAttribute(r);break;case"rowSpan":case"start":null==n||"function"===typeof n||"symbol"===typeof n||isNaN(n)?e.removeAttribute(r):e.setAttribute(r,n);break;case"popover":Dd("beforetoggle",e),Dd("toggle",e),tt(e,"popover",n);break;case"xlinkActuate":nt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":nt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":nt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":nt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":nt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":nt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":nt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":nt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":nt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":tt(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<r.length)||"o"!==r[0]&&"O"!==r[0]||"n"!==r[1]&&"N"!==r[1])&&tt(e,r=Ct.get(r)||r,n)}}function Zd(e,t,r,n,a,s){switch(r){case"style":_t(e,n,s);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(l(61));if(null!=(r=n.__html)){if(null!=a.children)throw Error(l(60));e.innerHTML=r}}break;case"children":"string"===typeof n?wt(e,n):("number"===typeof n||"bigint"===typeof n)&&wt(e,""+n);break;case"onScroll":null!=n&&Dd("scroll",e);break;case"onScrollEnd":null!=n&&Dd("scrollend",e);break;case"onClick":null!=n&&(e.onclick=Jd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ge.hasOwnProperty(r)||("o"!==r[0]||"n"!==r[1]||(a=r.endsWith("Capture"),t=r.slice(2,a?r.length-7:void 0),"function"===typeof(s=null!=(s=e[ze]||null)?s[r]:null)&&e.removeEventListener(t,s,a),"function"!==typeof n)?r in e?e[r]=n:!0===n?e.setAttribute(r,""):tt(e,r,n):("function"!==typeof s&&null!==s&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,n,a)))}}function eu(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dd("error",e),Dd("load",e);var n,a=!1,s=!1;for(n in r)if(r.hasOwnProperty(n)){var i=r[n];if(null!=i)switch(n){case"src":a=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Xd(e,t,n,i,r,null)}}return s&&Xd(e,t,"srcSet",r.srcSet,r,null),void(a&&Xd(e,t,"src",r.src,r,null));case"input":Dd("invalid",e);var o=n=i=s=null,c=null,d=null;for(a in r)if(r.hasOwnProperty(a)){var u=r[a];if(null!=u)switch(a){case"name":s=u;break;case"type":i=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":n=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(l(137,t));break;default:Xd(e,t,a,u,r,null)}}return gt(e,n,o,c,d,i,s,!1),void ut(e);case"select":for(s in Dd("invalid",e),a=i=n=null,r)if(r.hasOwnProperty(s)&&null!=(o=r[s]))switch(s){case"value":n=o;break;case"defaultValue":i=o;break;case"multiple":a=o;default:Xd(e,t,s,o,r,null)}return t=n,r=i,e.multiple=!!a,void(null!=t?yt(e,!!a,t,!1):null!=r&&yt(e,!!a,r,!0));case"textarea":for(i in Dd("invalid",e),n=s=a=null,r)if(r.hasOwnProperty(i)&&null!=(o=r[i]))switch(i){case"value":a=o;break;case"defaultValue":s=o;break;case"children":n=o;break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(l(91));break;default:Xd(e,t,i,o,r,null)}return jt(e,a,s,n),void ut(e);case"option":for(c in r)if(r.hasOwnProperty(c)&&null!=(a=r[c]))if("selected"===c)e.selected=a&&"function"!==typeof a&&"symbol"!==typeof a;else Xd(e,t,c,a,r,null);return;case"dialog":Dd("beforetoggle",e),Dd("toggle",e),Dd("cancel",e),Dd("close",e);break;case"iframe":case"object":Dd("load",e);break;case"video":case"audio":for(a=0;a<Fd.length;a++)Dd(Fd[a],e);break;case"image":Dd("error",e),Dd("load",e);break;case"details":Dd("toggle",e);break;case"embed":case"source":case"link":Dd("error",e),Dd("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in r)if(r.hasOwnProperty(d)&&null!=(a=r[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Xd(e,t,d,a,r,null)}return;default:if(St(t)){for(u in r)r.hasOwnProperty(u)&&(void 0!==(a=r[u])&&Zd(e,t,u,a,r,void 0));return}}for(o in r)r.hasOwnProperty(o)&&(null!=(a=r[o])&&Xd(e,t,o,a,r,null))}var tu=null,ru=null;function nu(e){return 9===e.nodeType?e:e.ownerDocument}function au(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function su(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function lu(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var iu=null;var ou="function"===typeof setTimeout?setTimeout:void 0,cu="function"===typeof clearTimeout?clearTimeout:void 0,du="function"===typeof Promise?Promise:void 0,uu="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof du?function(e){return du.resolve(null).then(e).catch(mu)}:ou;function mu(e){setTimeout(function(){throw e})}function xu(e){return"head"===e}function fu(e,t){var r=t,n=0,a=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&8===s.nodeType)if("/$"===(r=s.data)){if(0<n&&8>n){r=n;var l=e.ownerDocument;if(1&r&&ju(l.documentElement),2&r&&ju(l.body),4&r)for(ju(r=l.head),l=r.firstChild;l;){var i=l.nextSibling,o=l.nodeName;l[Ie]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===l.rel.toLowerCase()||r.removeChild(l),l=i}}if(0===a)return e.removeChild(s),void Cm(t);a--}else"$"===r||"$?"===r||"$!"===r?a++:n=r.charCodeAt(0)-48;else n=0;r=s}while(r);Cm(t)}function hu(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":hu(r),Be(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===r.rel.toLowerCase())continue}e.removeChild(r)}}function pu(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function gu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bu=null;function yu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}function vu(e,t,r){switch(t=nu(r),e){case"html":if(!(e=t.documentElement))throw Error(l(452));return e;case"head":if(!(e=t.head))throw Error(l(453));return e;case"body":if(!(e=t.body))throw Error(l(454));return e;default:throw Error(l(451))}}function ju(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Be(e)}var wu=new Map,Nu=new Set;function ku(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var _u=O.d;O.d={f:function(){var e=_u.f(),t=Uc();return e||t},r:function(e){var t=$e(e);null!==t&&5===t.tag&&"form"===t.type?Tl(t):_u.r(e)},D:function(e){_u.D(e),Cu("dns-prefetch",e,null)},C:function(e,t){_u.C(e,t),Cu("preconnect",e,t)},L:function(e,t,r){_u.L(e,t,r);var n=Su;if(n&&e&&t){var a='link[rel="preload"][as="'+ht(t)+'"]';"image"===t&&r&&r.imageSrcSet?(a+='[imagesrcset="'+ht(r.imageSrcSet)+'"]',"string"===typeof r.imageSizes&&(a+='[imagesizes="'+ht(r.imageSizes)+'"]')):a+='[href="'+ht(e)+'"]';var s=a;switch(t){case"style":s=Pu(e);break;case"script":s=Tu(e)}wu.has(s)||(e=m({rel:"preload",href:"image"===t&&r&&r.imageSrcSet?void 0:e,as:t},r),wu.set(s,e),null!==n.querySelector(a)||"style"===t&&n.querySelector(Au(s))||"script"===t&&n.querySelector(zu(s))||(eu(t=n.createElement("link"),"link",e),Ve(t),n.head.appendChild(t)))}},m:function(e,t){_u.m(e,t);var r=Su;if(r&&e){var n=t&&"string"===typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+ht(n)+'"][href="'+ht(e)+'"]',s=a;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Tu(e)}if(!wu.has(s)&&(e=m({rel:"modulepreload",href:e},t),wu.set(s,e),null===r.querySelector(a))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(zu(s)))return}eu(n=r.createElement("link"),"link",e),Ve(n),r.head.appendChild(n)}}},X:function(e,t){_u.X(e,t);var r=Su;if(r&&e){var n=qe(r).hoistableScripts,a=Tu(e),s=n.get(a);s||((s=r.querySelector(zu(a)))||(e=m({src:e,async:!0},t),(t=wu.get(a))&&Du(e,t),Ve(s=r.createElement("script")),eu(s,"link",e),r.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(a,s))}},S:function(e,t,r){_u.S(e,t,r);var n=Su;if(n&&e){var a=qe(n).hoistableStyles,s=Pu(e);t=t||"default";var l=a.get(s);if(!l){var i={loading:0,preload:null};if(l=n.querySelector(Au(s)))i.loading=5;else{e=m({rel:"stylesheet",href:e,"data-precedence":t},r),(r=wu.get(s))&&Ru(e,r);var o=l=n.createElement("link");Ve(o),eu(o,"link",e),o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),o.addEventListener("load",function(){i.loading|=1}),o.addEventListener("error",function(){i.loading|=2}),i.loading|=4,Ou(l,t,n)}l={type:"stylesheet",instance:l,count:1,state:i},a.set(s,l)}}},M:function(e,t){_u.M(e,t);var r=Su;if(r&&e){var n=qe(r).hoistableScripts,a=Tu(e),s=n.get(a);s||((s=r.querySelector(zu(a)))||(e=m({src:e,async:!0,type:"module"},t),(t=wu.get(a))&&Du(e,t),Ve(s=r.createElement("script")),eu(s,"link",e),r.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(a,s))}}};var Su="undefined"===typeof document?null:document;function Cu(e,t,r){var n=Su;if(n&&"string"===typeof t&&t){var a=ht(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"===typeof r&&(a+='[crossorigin="'+r+'"]'),Nu.has(a)||(Nu.add(a),e={rel:e,crossOrigin:r,href:t},null===n.querySelector(a)&&(eu(t=n.createElement("link"),"link",e),Ve(t),n.head.appendChild(t)))}}function Eu(e,t,r,n){var a,s,i,o,c=(c=q.current)?ku(c):null;if(!c)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof r.precedence&&"string"===typeof r.href?(t=Pu(r.href),(n=(r=qe(c).hoistableStyles).get(t))||(n={type:"style",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===r.rel&&"string"===typeof r.href&&"string"===typeof r.precedence){e=Pu(r.href);var d=qe(c).hoistableStyles,u=d.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=c.querySelector(Au(e)))&&!d._p&&(u.instance=d,u.state.loading=5),wu.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},wu.set(e,r),d||(a=c,s=e,i=r,o=u.state,a.querySelector('link[rel="preload"][as="style"]['+s+"]")?o.loading=1:(s=a.createElement("link"),o.preload=s,s.addEventListener("load",function(){return o.loading|=1}),s.addEventListener("error",function(){return o.loading|=2}),eu(s,"link",i),Ve(s),a.head.appendChild(s))))),t&&null===n)throw Error(l(528,""));return u}if(t&&null!==n)throw Error(l(529,""));return null;case"script":return t=r.async,"string"===typeof(r=r.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Tu(r),(n=(r=qe(c).hoistableScripts).get(t))||(n={type:"script",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Pu(e){return'href="'+ht(e)+'"'}function Au(e){return'link[rel="stylesheet"]['+e+"]"}function Lu(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function Tu(e){return'[src="'+ht(e)+'"]'}function zu(e){return"script[async]"+e}function Fu(e,t,r){if(t.count++,null===t.instance)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+ht(r.href)+'"]');if(n)return t.instance=n,Ve(n),n;var a=m({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return Ve(n=(e.ownerDocument||e).createElement("style")),eu(n,"style",a),Ou(n,r.precedence,e),t.instance=n;case"stylesheet":a=Pu(r.href);var s=e.querySelector(Au(a));if(s)return t.state.loading|=4,t.instance=s,Ve(s),s;n=Lu(r),(a=wu.get(a))&&Ru(n,a),Ve(s=(e.ownerDocument||e).createElement("link"));var i=s;return i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),eu(s,"link",n),t.state.loading|=4,Ou(s,r.precedence,e),t.instance=s;case"script":return s=Tu(r.src),(a=e.querySelector(zu(s)))?(t.instance=a,Ve(a),a):(n=r,(a=wu.get(s))&&Du(n=m({},r),a),Ve(a=(e=e.ownerDocument||e).createElement("script")),eu(a,"link",n),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(l(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(n=t.instance,t.state.loading|=4,Ou(n,r.precedence,e));return t.instance}function Ou(e,t,r){for(var n=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=n.length?n[n.length-1]:null,s=a,l=0;l<n.length;l++){var i=n[l];if(i.dataset.precedence===t)s=i;else if(s!==a)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===r.nodeType?r.head:r).insertBefore(e,t.firstChild)}function Ru(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Du(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Mu=null;function Iu(e,t,r){if(null===Mu){var n=new Map,a=Mu=new Map;a.set(r,n)}else(n=(a=Mu).get(r))||(n=new Map,a.set(r,n));if(n.has(e))return n;for(n.set(e,null),r=r.getElementsByTagName(e),a=0;a<r.length;a++){var s=r[a];if(!(s[Ie]||s[Te]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var l=s.getAttribute(t)||"";l=e+l;var i=n.get(l);i?i.push(s):n.set(l,[s])}}return n}function Bu(e,t,r){(e=e.ownerDocument||e).head.insertBefore(r,"title"===t?e.querySelector("head > title"):null)}function Uu(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var $u=null;function Hu(){}function qu(){if(this.count--,0===this.count)if(this.stylesheets)Wu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Vu=null;function Wu(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Vu=new Map,t.forEach(Gu,e),Vu=null,qu.call(e))}function Gu(e,t){if(!(4&t.state.loading)){var r=Vu.get(e);if(r)var n=r.get(null);else{r=new Map,Vu.set(e,r);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<a.length;s++){var l=a[s];"LINK"!==l.nodeName&&"not all"===l.getAttribute("media")||(r.set(l.dataset.precedence,l),n=l)}n&&r.set(null,n)}l=(a=t.instance).getAttribute("data-precedence"),(s=r.get(l)||n)===n&&r.set(null,a),r.set(l,a),this.count++,n=qu.bind(this),a.addEventListener("load",n),a.addEventListener("error",n),s?s.parentNode.insertBefore(a,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var Qu={$$typeof:j,Provider:null,Consumer:null,_currentValue:R,_currentValue2:R,_threadCount:0};function Ku(e,t,r,n,a,s,l,i){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.hiddenUpdates=ke(null),this.identifierPrefix=n,this.onUncaughtError=a,this.onCaughtError=s,this.onRecoverableError=l,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=i,this.incompleteTransitions=new Map}function Yu(e,t,r,n,a,s,l,i,o,c,d,u){return e=new Ku(e,t,r,l,i,o,c,u),t=1,!0===s&&(t|=24),s=Rn(3,null,null,t),e.current=s,s.stateNode=e,(t=za()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:n,isDehydrated:r,cache:t},rs(s),e}function Ju(e){return e?e=Fn:Fn}function Xu(e,t,r,n,a,s){a=Ju(a),null===n.context?n.context=a:n.pendingContext=a,(n=as(t)).payload={element:r},null!==(s=void 0===s?null:s)&&(n.callback=s),null!==(r=ss(e,n,t))&&(Rc(r,0,t),ls(r,e,t))}function Zu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function em(e,t){Zu(e,t),(e=e.alternate)&&Zu(e,t)}function tm(e){if(13===e.tag){var t=Ln(e,67108864);null!==t&&Rc(t,0,67108864),em(e,67108864)}}var rm=!0;function nm(e,t,r,n){var a=F.T;F.T=null;var s=O.p;try{O.p=2,sm(e,t,r,n)}finally{O.p=s,F.T=a}}function am(e,t,r,n){var a=F.T;F.T=null;var s=O.p;try{O.p=8,sm(e,t,r,n)}finally{O.p=s,F.T=a}}function sm(e,t,r,n){if(rm){var a=lm(n);if(null===a)$d(e,t,n,im,r),bm(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return um=ym(um,e,t,r,n,a),!0;case"dragenter":return mm=ym(mm,e,t,r,n,a),!0;case"mouseover":return xm=ym(xm,e,t,r,n,a),!0;case"pointerover":var s=a.pointerId;return fm.set(s,ym(fm.get(s)||null,e,t,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,hm.set(s,ym(hm.get(s)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(bm(e,n),4&t&&-1<gm.indexOf(e)){for(;null!==a;){var s=$e(a);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var l=be(s.pendingLanes);if(0!==l){var i=s;for(i.pendingLanes|=2,i.entangledLanes|=2;l;){var o=1<<31-xe(l);i.entanglements[1]|=o,l&=~o}wd(s),0===(6&rc)&&(wc=te()+500,Nd(0,!1))}}break;case 13:null!==(i=Ln(s,2))&&Rc(i,0,2),Uc(),em(s,2)}if(null===(s=lm(n))&&$d(e,t,n,im,r),s===a)break;a=s}null!==a&&n.stopPropagation()}else $d(e,t,n,null,r)}}function lm(e){return om(e=Lt(e))}var im=null;function om(e){if(im=null,null!==(e=Ue(e))){var t=o(e);if(null===t)e=null;else{var r=t.tag;if(13===r){if(null!==(e=c(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return im=e,null}function cm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(re()){case ne:return 2;case ae:return 8;case se:case le:return 32;case ie:return 268435456;default:return 32}default:return 32}}var dm=!1,um=null,mm=null,xm=null,fm=new Map,hm=new Map,pm=[],gm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bm(e,t){switch(e){case"focusin":case"focusout":um=null;break;case"dragenter":case"dragleave":mm=null;break;case"mouseover":case"mouseout":xm=null;break;case"pointerover":case"pointerout":fm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hm.delete(t.pointerId)}}function ym(e,t,r,n,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=$e(t))&&tm(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function vm(e){var t=Ue(e.target);if(null!==t){var r=o(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=c(r)))return e.blockedOn=t,void function(e,t){var r=O.p;try{return O.p=e,t()}finally{O.p=r}}(e.priority,function(){if(13===r.tag){var e=Fc();e=Ee(e);var t=Ln(r,e);null!==t&&Rc(t,0,e),em(r,e)}})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function jm(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=lm(e.nativeEvent);if(null!==r)return null!==(t=$e(r))&&tm(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);At=n,r.target.dispatchEvent(n),At=null,t.shift()}return!0}function wm(e,t,r){jm(e)&&r.delete(t)}function Nm(){dm=!1,null!==um&&jm(um)&&(um=null),null!==mm&&jm(mm)&&(mm=null),null!==xm&&jm(xm)&&(xm=null),fm.forEach(wm),hm.forEach(wm)}function km(e,t){e.blockedOn===t&&(e.blockedOn=null,dm||(dm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Nm)))}var _m=null;function Sm(e){_m!==e&&(_m=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){_m===e&&(_m=null);for(var t=0;t<e.length;t+=3){var r=e[t],n=e[t+1],a=e[t+2];if("function"!==typeof n){if(null===om(n||r))continue;break}var s=$e(r);null!==s&&(e.splice(t,3),t-=3,Al(s,{pending:!0,data:a,method:r.method,action:n},n,a))}}))}function Cm(e){function t(t){return km(t,e)}null!==um&&km(um,e),null!==mm&&km(mm,e),null!==xm&&km(xm,e),fm.forEach(t),hm.forEach(t);for(var r=0;r<pm.length;r++){var n=pm[r];n.blockedOn===e&&(n.blockedOn=null)}for(;0<pm.length&&null===(r=pm[0]).blockedOn;)vm(r),null===r.blockedOn&&pm.shift();if(null!=(r=(e.ownerDocument||e).$$reactFormReplay))for(n=0;n<r.length;n+=3){var a=r[n],s=r[n+1],l=a[ze]||null;if("function"===typeof s)l||Sm(r);else if(l){var i=null;if(s&&s.hasAttribute("formAction")){if(a=s,l=s[ze]||null)i=l.formAction;else if(null!==om(a))continue}else i=l.action;"function"===typeof i?r[n+1]=i:(r.splice(n,3),n-=3),Sm(r)}}}function Em(e){this._internalRoot=e}function Pm(e){this._internalRoot=e}Pm.prototype.render=Em.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(l(409));Xu(t.current,Fc(),e,t,null,null)},Pm.prototype.unmount=Em.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Xu(e.current,2,null,e,null,null),Uc(),t[Fe]=null}},Pm.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ae();e={blockedOn:null,target:e,priority:t};for(var r=0;r<pm.length&&0!==t&&t<pm[r].priority;r++);pm.splice(r,0,e),0===r&&vm(e)}};var Am=a.version;if("19.1.1"!==Am)throw Error(l(527,Am,"19.1.1"));O.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(l(188));throw e=Object.keys(e).join(","),Error(l(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=o(e)))throw Error(l(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(n=a.return)){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return d(a),e;if(s===n)return d(a),t;s=s.sibling}throw Error(l(188))}if(r.return!==n.return)r=a,n=s;else{for(var i=!1,c=a.child;c;){if(c===r){i=!0,r=a,n=s;break}if(c===n){i=!0,n=a,r=s;break}c=c.sibling}if(!i){for(c=s.child;c;){if(c===r){i=!0,r=s,n=a;break}if(c===n){i=!0,n=s,r=a;break}c=c.sibling}if(!i)throw Error(l(189))}}if(r.alternate!==n)throw Error(l(190))}if(3!==r.tag)throw Error(l(188));return r.stateNode.current===r?e:t}(t),e=null===(e=null!==e?u(e):null)?null:e.stateNode};var Lm={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Tm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tm.isDisabled&&Tm.supportsFiber)try{de=Tm.inject(Lm),ue=Tm}catch(Fm){}}t.createRoot=function(e,t){if(!i(e))throw Error(l(299));var r=!1,n="",a=gi,s=bi,o=yi;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(o=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Yu(e,1,!1,null,0,r,n,a,s,o,0,null),e[Fe]=t.current,Bd(e),new Em(t)},t.hydrateRoot=function(e,t,r){if(!i(e))throw Error(l(299));var n=!1,a="",s=gi,o=bi,c=yi,d=null;return null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onUncaughtError&&(s=r.onUncaughtError),void 0!==r.onCaughtError&&(o=r.onCaughtError),void 0!==r.onRecoverableError&&(c=r.onRecoverableError),void 0!==r.unstable_transitionCallbacks&&r.unstable_transitionCallbacks,void 0!==r.formState&&(d=r.formState)),(t=Yu(e,1,!0,t,0,n,a,s,o,c,0,d)).context=Ju(null),r=t.current,(a=as(n=Ee(n=Fc()))).callback=null,ss(r,a,n),r=n,t.current.lanes=r,_e(t,r),wd(t),e[Fe]=t.current,Bd(e),new Pm(t)},t.version="19.1.1"},43:(e,t,r)=>{e.exports=r(288)},288:(e,t)=>{var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),x=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,p={};function g(e,t,r){this.props=e,this.context=t,this.refs=p,this.updater=r||f}function b(){}function y(e,t,r){this.props=e,this.context=t,this.refs=p,this.updater=r||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=g.prototype;var v=y.prototype=new b;v.constructor=y,h(v,g.prototype),v.isPureReactComponent=!0;var j=Array.isArray,w={H:null,A:null,T:null,S:null,V:null},N=Object.prototype.hasOwnProperty;function k(e,t,n,a,s,l){return n=l.ref,{$$typeof:r,type:e,key:t,ref:void 0!==n?n:null,props:l}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var S=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(){}function P(e,t,a,s,l){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var o,c,d=!1;if(null===e)d=!0;else switch(i){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case r:case n:d=!0;break;case m:return P((d=e._init)(e._payload),t,a,s,l)}}if(d)return l=l(e),d=""===s?"."+C(e,0):s,j(l)?(a="",null!=d&&(a=d.replace(S,"$&/")+"/"),P(l,t,a,"",function(e){return e})):null!=l&&(_(l)&&(o=l,c=a+(null==l.key||e&&e.key===l.key?"":(""+l.key).replace(S,"$&/")+"/")+d,l=k(o.type,c,void 0,0,0,o.props)),t.push(l)),1;d=0;var u,f=""===s?".":s+":";if(j(e))for(var h=0;h<e.length;h++)d+=P(s=e[h],t,a,i=f+C(s,h),l);else if("function"===typeof(h=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=x&&u[x]||u["@@iterator"])?u:null))for(e=h.call(e),h=0;!(s=e.next()).done;)d+=P(s=s.value,t,a,i=f+C(s,h++),l);else if("object"===i){if("function"===typeof e.then)return P(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(E,E):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,s,l);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return d}function A(e,t,r){if(null==e)return e;var n=[],a=0;return P(e,n,"","",function(e){return t.call(r,e,a++)}),n}function L(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function z(){}t.Children={map:A,forEach:function(e,t,r){A(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=l,t.PureComponent=y,t.StrictMode=s,t.Suspense=d,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var n=h({},e.props),a=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(a=""+t.key),t)!N.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(n[s]=t[s]);var s=arguments.length-2;if(1===s)n.children=r;else if(1<s){for(var l=Array(s),i=0;i<s;i++)l[i]=arguments[i+2];n.children=l}return k(e.type,a,void 0,0,0,n)},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:i,_context:e},e},t.createElement=function(e,t,r){var n,a={},s=null;if(null!=t)for(n in void 0!==t.key&&(s=""+t.key),t)N.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(a[n]=t[n]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var i=Array(l),o=0;o<l;o++)i[o]=arguments[o+2];a.children=i}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===a[n]&&(a[n]=l[n]);return k(e,s,void 0,0,0,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=w.T,r={};w.T=r;try{var n=e(),a=w.S;null!==a&&a(r,n),"object"===typeof n&&null!==n&&"function"===typeof n.then&&n.then(z,T)}catch(s){T(s)}finally{w.T=t}},t.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},t.use=function(e){return w.H.use(e)},t.useActionState=function(e,t,r){return w.H.useActionState(e,t,r)},t.useCallback=function(e,t){return w.H.useCallback(e,t)},t.useContext=function(e){return w.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},t.useEffect=function(e,t,r){var n=w.H;if("function"===typeof r)throw Error("useEffect CRUD overload is not enabled in this build of React.");return n.useEffect(e,t)},t.useId=function(){return w.H.useId()},t.useImperativeHandle=function(e,t,r){return w.H.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return w.H.useMemo(e,t)},t.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},t.useReducer=function(e,t,r){return w.H.useReducer(e,t,r)},t.useRef=function(e){return w.H.useRef(e)},t.useState=function(e){return w.H.useState(e)},t.useSyncExternalStore=function(e,t,r){return w.H.useSyncExternalStore(e,t,r)},t.useTransition=function(){return w.H.useTransition()},t.version="19.1.1"},391:(e,t,r)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(4)},579:(e,t,r)=>{e.exports=r(799)},672:(e,t,r)=>{var n=r(43);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var l={d:{f:s,r:function(){throw Error(a(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},i=Symbol.for("react.portal");var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:i,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.flushSync=function(e){var t=o.T,r=l.p;try{if(o.T=null,l.p=2,e)return e()}finally{o.T=t,l.p=r,l.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,l.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&l.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var r=t.as,n=c(r,t.crossOrigin),a="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===r?l.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:n,integrity:a,fetchPriority:s}):"script"===r&&l.d.X(e,{crossOrigin:n,integrity:a,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var r=c(t.as,t.crossOrigin);l.d.M(e,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&l.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var r=t.as,n=c(r,t.crossOrigin);l.d.L(e,r,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var r=c(t.as,t.crossOrigin);l.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else l.d.m(e)},t.requestFormReset=function(e){l.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,r){return o.H.useFormState(e,t,r)},t.useFormStatus=function(){return o.H.useHostTransitionStatus()},t.version="19.1.1"},799:(e,t)=>{var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(e,t,n){var a=null;if(void 0!==n&&(a=""+n),void 0!==t.key&&(a=""+t.key),"key"in t)for(var s in n={},t)"key"!==s&&(n[s]=t[s]);else n=t;return t=n.ref,{$$typeof:r,type:e,key:a,ref:void 0!==t?t:null,props:n}}t.Fragment=n,t.jsx=a,t.jsxs=a},853:(e,t,r)=>{e.exports=r(896)},896:(e,t)=>{function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<s(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,l=a>>>1;n<l;){var i=2*(n+1)-1,o=e[i],c=i+1,d=e[c];if(0>s(o,r))c<a&&0>s(d,o)?(e[n]=d,e[c]=r,n=c):(e[n]=o,e[i]=r,n=i);else{if(!(c<a&&0>s(d,r)))break e;e[n]=d,e[c]=r,n=c}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var c=[],d=[],u=1,m=null,x=3,f=!1,h=!1,p=!1,g=!1,b="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function j(e){for(var t=n(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,r(c,t)}t=n(d)}}function w(e){if(p=!1,j(e),!h)if(null!==n(c))h=!0,k||(k=!0,N());else{var t=n(d);null!==t&&T(w,t.startTime-e)}}var N,k=!1,_=-1,S=5,C=-1;function E(){return!!g||!(t.unstable_now()-C<S)}function P(){if(g=!1,k){var e=t.unstable_now();C=e;var r=!0;try{e:{h=!1,p&&(p=!1,y(_),_=-1),f=!0;var s=x;try{t:{for(j(e),m=n(c);null!==m&&!(m.expirationTime>e&&E());){var l=m.callback;if("function"===typeof l){m.callback=null,x=m.priorityLevel;var i=l(m.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof i){m.callback=i,j(e),r=!0;break t}m===n(c)&&a(c),j(e)}else a(c);m=n(c)}if(null!==m)r=!0;else{var o=n(d);null!==o&&T(w,o.startTime-e),r=!1}}break e}finally{m=null,x=s,f=!1}r=void 0}}finally{r?N():k=!1}}}if("function"===typeof v)N=function(){v(P)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,L=A.port2;A.port1.onmessage=P,N=function(){L.postMessage(null)}}else N=function(){b(P,0)};function T(e,r){_=b(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(e){switch(x){case 1:case 2:case 3:var t=3;break;default:t=x}var r=x;x=t;try{return e()}finally{x=r}},t.unstable_requestPaint=function(){g=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=x;x=e;try{return t()}finally{x=r}},t.unstable_scheduleCallback=function(e,a,s){var l=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?l+s:l:s=l,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:s,expirationTime:i=s+i,sortIndex:-1},s>l?(e.sortIndex=s,r(d,e),null===n(c)&&e===n(d)&&(p?(y(_),_=-1):p=!0,T(w,s-l))):(e.sortIndex=i,r(c,e),h||f||(h=!0,k||(k=!0,N()))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=x;return function(){var r=x;x=t;try{return e.apply(this,arguments)}finally{x=r}}}},950:(e,t,r)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(672)}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.m=e,r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((t,n)=>(r.f[n](e,t),t),[])),r.u=e=>"static/js/"+e+".2055e5f4.chunk.js",r.miniCssF=e=>{},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="centrix-frontend:";r.l=(n,a,s,l)=>{if(e[n])e[n].push(a);else{var i,o;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+s){i=u;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.setAttribute("data-webpack",t+s),i.src=n),e[n]=[a];var m=(t,r)=>{i.onerror=i.onload=null,clearTimeout(x);var a=e[n];if(delete e[n],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach(e=>e(r)),t)return t(r)},x=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),o&&document.head.appendChild(i)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/",(()=>{var e={792:0};r.f.j=(t,n)=>{var a=r.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var s=new Promise((r,n)=>a=e[t]=[r,n]);n.push(a[2]=s);var l=r.p+r.u(t),i=new Error;r.l(l,n=>{if(r.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+s+": "+l+")",i.name="ChunkLoadError",i.type=s,i.request=l,a[1](i)}},"chunk-"+t,t)}};var t=(t,n)=>{var a,s,l=n[0],i=n[1],o=n[2],c=0;if(l.some(t=>0!==e[t])){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(o)o(r)}for(t&&t(n);c<l.length;c++)s=l[c],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0},n=self.webpackChunkcentrix_frontend=self.webpackChunkcentrix_frontend||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=r(43),a=r(391);const s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://127.0.0.1:8000/api/v1",l={login:async e=>{const t=await fetch(`${s}/users/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json().catch(()=>({}));if(!t.ok)throw new Error(r.message||"Login failed");if("error"===r.status)throw new Error(r.message||"Login failed");return"success"===r.status?r.data:r},getCurrentUser:async()=>l.authenticatedRequest("/users/me",{method:"GET"}),getToken:()=>sessionStorage.getItem("authToken"),setToken:e=>{sessionStorage.setItem("authToken",e)},removeToken:()=>{sessionStorage.removeItem("authToken")},getAuthHeaders:()=>{const e=l.getToken(),t={"Content-Type":"application/json"};return e&&(t.Authorization=`Bearer ${e}`),t},authenticatedRequest:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=l.getAuthHeaders(),n=e.startsWith("/")?e.substring(1):e,a=`${s}/${n}`,i=await fetch(a,{...t,headers:{...r,...t.headers}}),o=await i.json().catch(()=>({}));if(!i.ok){const e=new Error(o.message||"Request failed");throw e.response={data:o},e}if("error"===o.status){const e=new Error(o.message||"Request failed");throw e.response={data:o},e}return"success"===o.status?o.data:o},schools:{getAll:async function(){let e=arguments.length>2?arguments[2]:void 0,t=arguments.length>3?arguments[3]:void 0,r=`/schools?page=${arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}&page_size=${arguments.length>1&&void 0!==arguments[1]?arguments[1]:20}`;return e&&(r+=`&search=${encodeURIComponent(e)}`),t&&(r+=`&ordering=${encodeURIComponent(t)}`),l.authenticatedRequest(r,{method:"GET"})},detect:async e=>{const t=await fetch(`${s}/schools/detect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e})}),r=await t.json().catch(()=>({}));if(!t.ok)throw new Error(r.message||"Failed to detect school");if("error"===r.status)throw new Error(r.message||"Failed to detect school");return"success"===r.status?r.data:r},getById:async e=>{const t=await fetch(`${s}/schools/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}),r=await t.json().catch(()=>({}));if(!t.ok)throw new Error(r.message||"Failed to fetch school");if("error"===r.status)throw new Error(r.message||"Failed to fetch school");return"success"===r.status?r.data:r},create:async e=>l.authenticatedRequest("/schools/create",{method:"POST",body:JSON.stringify(e)})},students:{getAll:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{page:t=1,page_size:r=20,search:n,admission_year:a,boarding_status:s,class_on_admission:i,current_only:o,exempted_from_religious_instruction:c,gender:d,max_age:u,min_age:m,ordering:x}=e;let f=`/students/admissions?page=${t}&page_size=${r}`;return n&&(f+=`&search=${encodeURIComponent(n)}`),void 0!==a&&(f+=`&admission_year=${a}`),s&&(f+=`&boarding_status=${encodeURIComponent(s)}`),i&&(f+=`&class_on_admission=${encodeURIComponent(i)}`),o&&(f+=`&current_only=${encodeURIComponent(o)}`),void 0!==c&&(f+=`&exempted_from_religious_instruction=${c}`),d&&(f+=`&gender=${encodeURIComponent(d)}`),void 0!==u&&(f+=`&max_age=${u}`),void 0!==m&&(f+=`&min_age=${m}`),x&&(f+=`&ordering=${encodeURIComponent(x)}`),l.authenticatedRequest(f,{method:"GET"})},getById:async e=>l.authenticatedRequest(`/students/admissions/${e}`,{method:"GET"}),create:async e=>l.authenticatedRequest("/students/admissions",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>l.authenticatedRequest(`/students/admissions/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>l.authenticatedRequest(`/students/admissions/${e}`,{method:"DELETE"}),bulkCreate:async e=>l.authenticatedRequest("/students/bulk-create",{method:"POST",body:JSON.stringify({students:e})}),bulkUpdate:async e=>l.authenticatedRequest("/students/bulk-update",{method:"PUT",body:JSON.stringify({students:e})}),bulkDelete:async e=>l.authenticatedRequest("/students/bulk-delete",{method:"DELETE",body:JSON.stringify({student_ids:e})}),getStats:async()=>l.authenticatedRequest("/students/statistics",{method:"GET"}),getDetailedFeatureStatus:async()=>l.authenticatedRequest("/students/features/detailed-status",{method:"GET"}),getStreams:async()=>l.authenticatedRequest("/students/streams/",{method:"GET"}),getClasses:async()=>l.authenticatedRequest("/students/classes/",{method:"GET"}),updateClass:async(e,t)=>l.authenticatedRequest(`/students/classes/${e}/`,{method:"PUT",body:JSON.stringify(t)}),updateStream:async(e,t)=>l.authenticatedRequest(`/students/streams/${e}/`,{method:"PUT",body:JSON.stringify(t)}),associateParent:async(e,t)=>l.authenticatedRequest(`/students/admissions/${e}/parents`,{method:"POST",body:JSON.stringify(t)}),getParents:async e=>l.authenticatedRequest(`/students/admissions/${e}/parents`,{method:"GET"}),disassociateParent:async(e,t)=>l.authenticatedRequest(`/students/admissions/${e}/parents/${t}`,{method:"DELETE"})},featureFlags:{getAll:async()=>{const e=l.getAuthHeaders(),t=`${s}/switch/flags/`,r=await fetch(t,{method:"GET",headers:{...e}}),n=await r.json().catch(()=>({}));if(!r.ok){const e=new Error(n.message||"Request failed");throw e.response={data:n},e}if("error"===n.status){const e=new Error(n.message||"Request failed");throw e.response={data:n},e}return n},getById:async e=>l.authenticatedRequest(`/switch/flags/${e}`,{method:"GET"}),checkFeature:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return l.authenticatedRequest("/switch/check/",{method:"POST",body:JSON.stringify({feature_name:e,scope_type:t,scope_id:r})})},checkFeaturesBulk:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return l.authenticatedRequest("/switch/check/bulk/",{method:"POST",body:JSON.stringify({features:e,scope_type:t,scope_id:r})})},getFeatureFlagStates:async(e,t,r)=>{let n="/switch/states/";const a=new URLSearchParams;return e&&a.append("feature_flag",e),t&&a.append("scope_type",t),r&&a.append("scope_id",r),a.toString()&&(n+=`?${a.toString()}`),l.authenticatedRequest(n,{method:"GET"})},create:async e=>l.authenticatedRequest("/switch/flags/",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>l.authenticatedRequest(`/switch/flags/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>l.authenticatedRequest(`/switch/flags/${e}`,{method:"DELETE"}),toggle:async e=>l.authenticatedRequest(`/switch/flags/${e}/toggle`,{method:"POST"})},featureFlagStates:{getAll:async()=>{const e=l.getAuthHeaders(),t=`${s}/switch/states/`,r=await fetch(t,{method:"GET",headers:{...e}}),n=await r.json().catch(()=>({}));if(!r.ok){const e=new Error(n.message||"Request failed");throw e.response={data:n},e}if("error"===n.status){const e=new Error(n.message||"Request failed");throw e.response={data:n},e}return n},getById:async e=>l.authenticatedRequest(`/switch/states/${e}`,{method:"GET"}),create:async e=>l.authenticatedRequest("/switch/states/",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>l.authenticatedRequest(`/switch/states/${e}/`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>l.authenticatedRequest(`/switch/states/${e}`,{method:"DELETE"})},users:{getAll:async e=>{const t=new URLSearchParams;null!==e&&void 0!==e&&e.page&&t.append("page",e.page.toString()),null!==e&&void 0!==e&&e.page_size&&t.append("page_size",e.page_size.toString()),null!==e&&void 0!==e&&e.search&&t.append("search",e.search),null!==e&&void 0!==e&&e.sort_by&&t.append("sort_by",e.sort_by),null!==e&&void 0!==e&&e.sort_direction&&t.append("sort_direction",e.sort_direction);const r=t.toString(),n=r?`/users?${r}`:"/users";return l.authenticatedRequest(n,{method:"GET"})},getById:async e=>l.authenticatedRequest(`/users/${e}`,{method:"GET"}),create:async e=>l.authenticatedRequest("/users",{method:"POST",body:JSON.stringify(e)}),signup:async e=>l.authenticatedRequest("/users/signup",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>l.authenticatedRequest(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>l.authenticatedRequest(`/users/${e}`,{method:"DELETE"}),resetPassword:async(e,t)=>l.authenticatedRequest(`/users/password/reset/${e}`,{method:"POST",body:JSON.stringify({password:t})})},parents:{getAll:async e=>{const t=new URLSearchParams;null!==e&&void 0!==e&&e.page&&t.append("page",e.page.toString()),null!==e&&void 0!==e&&e.page_size&&t.append("page_size",e.page_size.toString()),null!==e&&void 0!==e&&e.search&&t.append("search",e.search),null!==e&&void 0!==e&&e.relationship&&t.append("relationship",e.relationship),null!==e&&void 0!==e&&e.ordering&&t.append("ordering",e.ordering);const r=t.toString(),n=r?`/parents?${r}`:"/parents";return l.authenticatedRequest(n,{method:"GET"})},getById:async e=>l.authenticatedRequest(`/parents/${e}`,{method:"GET"}),create:async e=>l.authenticatedRequest("/parents/",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>l.authenticatedRequest(`/parents/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>l.authenticatedRequest(`/parents/${e}`,{method:"DELETE"}),getStudents:async e=>l.authenticatedRequest(`/students/parents/${e}/students`,{method:"GET"})}},i=l;var o=r(579);const c=(0,n.createContext)(void 0),d=()=>{const e=(0,n.useContext)(c);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},u=e=>{let{children:t}=e;const[r,a]=(0,n.useState)({user:null,isAuthenticated:!1,isLoading:!0,error:null});(0,n.useEffect)(()=>{if(l.getToken()){(async()=>{try{var e,t;const r=await l.getCurrentUser(),n={id:r.id||"unknown",email:r.email||"",username:r.first_name||r.username||"user",is_pin_set:r.is_pin_set||!1,school_id:(null===(e=r.school)||void 0===e?void 0:e.id)||"",school_name:(null===(t=r.school)||void 0===t?void 0:t.name)||"",role:r.role||"user"};a(e=>({...e,user:n,isAuthenticated:!0,isLoading:!1}))}catch(r){console.error("Failed to fetch user data on app load:",r),l.removeToken(),a(e=>({...e,user:null,isAuthenticated:!1,isLoading:!1}))}})()}else a(e=>({...e,isLoading:!1}))},[]);const s={...r,login:async e=>{a(e=>({...e,isLoading:!0,error:null}));try{var t,r;const n={...e},s=await l.login(n);sessionStorage.removeItem("authToken"),s&&s.token&&sessionStorage.setItem("authToken",s.token);const i=await l.getCurrentUser(),o={id:i.id||"unknown",email:i.email||"",username:i.first_name||i.username||"user",is_pin_set:i.is_pin_set||!1,school_id:(null===(t=i.school)||void 0===t?void 0:t.id)||"",school_name:(null===(r=i.school)||void 0===r?void 0:r.name)||"",role:i.role||"user"};a({user:o,isAuthenticated:!0,isLoading:!1,error:null})}catch(n){console.error("Login error in AuthContext:",n),a(e=>({...e,isLoading:!1,error:n instanceof Error?n.message:"Login failed. Please try again."}))}},register:async e=>{a(e=>({...e,isLoading:!0,error:null}));try{await new Promise(e=>setTimeout(e,1e3));const t={id:"1",email:e.email,username:e.name,is_pin_set:!1,school_id:"",school_name:""};a({user:t,isAuthenticated:!0,isLoading:!1,error:null})}catch(t){a(e=>({...e,isLoading:!1,error:"Registration failed. Please try again."}))}},logout:()=>{l.removeToken(),a({user:null,isAuthenticated:!1,isLoading:!1,error:null})}};return(0,o.jsx)(c.Provider,{value:s,children:t})},m=(0,n.createContext)(void 0),x=e=>{let{children:t}=e;const{user:r}=d(),[a,s]=(0,n.useState)(null),[l,i]=(0,n.useState)(!0);(0,n.useEffect)(()=>{if(r&&r.school_id&&r.school_name){const e={id:r.school_id,name:r.school_name};s(e),sessionStorage.setItem("currentSchool",JSON.stringify(e))}else{const t=sessionStorage.getItem("currentSchool");if(t)try{s(JSON.parse(t))}catch(e){console.error("Error parsing stored school:",e)}}i(!1)},[r]);return(0,o.jsx)(m.Provider,{value:{currentSchool:a,setCurrentSchool:e=>{s(e),e?sessionStorage.setItem("currentSchool",JSON.stringify(e)):sessionStorage.removeItem("currentSchool")},isLoading:l},children:t})},f={root:["create_school","view_all_schools","view_own_school","register_users","assign_root_super_admin","assign_admin","student_crud","view_students","view_all_users","view_school_users","manage_users","access_reports","access_settings","access_customer_support","access_admin_panel","access_billing","manage_billing_features","manage_billing_plans","view_billing_dashboard","manage_school_subscriptions","view_invoices","manage_invoices"],super_admin:["view_own_school","assign_admin","student_crud","view_students","view_school_users","manage_users","access_reports","access_settings","access_customer_support","access_admin_panel","access_billing","manage_billing_features","manage_billing_plans","view_billing_dashboard","manage_school_subscriptions","view_invoices","manage_invoices"],admin:["view_own_school","student_crud","view_students","access_reports","access_settings"],user:["view_own_school","view_students"]},h=(0,n.createContext)(void 0),p=()=>{const e=(0,n.useContext)(h);if(void 0===e)throw new Error("useRBAC must be used within an RBACProvider");return e},g=e=>{let{children:t}=e;const{user:r}=d(),a=(0,n.useMemo)(()=>{if(null===r||void 0===r||!r.role)return"user";return["root","super_admin","admin","user"].includes(r.role)?r.role:"user"},[null===r||void 0===r?void 0:r.role]),s=e=>(f[a]||[]).includes(e),l=e=>e.some(e=>s(e)),i={userRole:a,hasPermission:s,hasAnyPermission:l,hasAllPermissions:e=>e.every(e=>s(e)),canAccess:e=>0===e.length||l(e),getRequiredRole:e=>{const t=["root","super_admin","admin","user"];for(const r of t)if(f[r].includes(e))return r;return null}};return(0,o.jsx)(h.Provider,{value:i,children:t})};var b={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},y=n.createContext&&n.createContext(b),v=["attr","size","title"];function j(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w.apply(this,arguments)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach(function(t){_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){return e&&e.map((e,t)=>n.createElement(e.tag,k({key:t},e.attr),S(e.child)))}function C(e){return t=>n.createElement(E,w({attr:k({},e.attr)},t),S(e.child))}function E(e){var t=t=>{var r,{attr:a,size:s,title:l}=e,i=j(e,v),o=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",w({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,i,{className:r,style:k(k({color:e.color||t.color},t.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),l&&n.createElement("title",null,l),e.children)};return void 0!==y?n.createElement(y.Consumer,null,e=>t(e)):t(b)}function P(e){return C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(e)}function A(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(e)}function L(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(e)}function T(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(e)}function z(e){return C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function F(e){return C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(e)}function O(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(e)}function R(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(e)}function D(e){return C({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M512.1 191l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0L552 6.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zm-10.5-58.8c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.7-82.4 14.3-52.8 52.8zM386.3 286.1l33.7 16.8c10.1 5.8 14.5 18.1 10.5 29.1-8.9 24.2-26.4 46.4-42.6 65.8-7.4 8.9-20.2 11.1-30.3 5.3l-29.1-16.8c-16 13.7-34.6 24.6-54.9 31.7v33.6c0 11.6-8.3 21.6-19.7 23.6-24.6 4.2-50.4 4.4-75.9 0-11.5-2-20-11.9-20-23.6V418c-20.3-7.2-38.9-18-54.9-31.7L74 403c-10 5.8-22.9 3.6-30.3-5.3-16.2-19.4-33.3-41.6-42.2-65.7-4-10.9.4-23.2 10.5-29.1l33.3-16.8c-3.9-20.9-3.9-42.4 0-63.4L12 205.8c-10.1-5.8-14.6-18.1-10.5-29 8.9-24.2 26-46.4 42.2-65.8 7.4-8.9 20.2-11.1 30.3-5.3l29.1 16.8c16-13.7 34.6-24.6 54.9-31.7V57.1c0-11.5 8.2-21.5 19.6-23.5 24.6-4.2 50.5-4.4 76-.1 11.5 2 20 11.9 20 23.6v33.6c20.3 7.2 38.9 18 54.9 31.7l29.1-16.8c10-5.8 22.9-3.6 30.3 5.3 16.2 19.4 33.2 41.6 42.1 65.8 4 10.9.1 23.2-10 29.1l-33.7 16.8c3.9 21 3.9 42.5 0 63.5zm-117.6 21.1c59.2-77-28.7-164.9-105.7-105.7-59.2 77 28.7 164.9 105.7 105.7zm243.4 182.7l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0l8.2-14.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zM501.6 431c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.6-82.4 14.3-52.8 52.8z"},child:[]}]})(e)}function M(e){return C({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(e)}function I(e){return C({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function B(e){return C({tag:"svg",attr:{viewBox:"0 0 192 512"},child:[{tag:"path",attr:{d:"M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z"},child:[]}]})(e)}function U(e){return C({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function $(e){return C({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(e)}function H(e){return C({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function q(e){return C({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 80v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8zm144 263.88V440c0 4.42-3.58 8-8 8h-16c-4.42 0-8-3.58-8-8v-24.29c-11.29-.58-22.27-4.52-31.37-11.35-3.9-2.93-4.1-8.77-.57-12.14l11.75-11.21c2.77-2.64 6.89-2.76 10.13-.73 3.87 2.42 8.26 3.72 12.82 3.72h28.11c6.5 0 11.8-5.92 11.8-13.19 0-5.95-3.61-11.19-8.77-12.73l-45-13.5c-18.59-5.58-31.58-23.42-31.58-43.39 0-24.52 19.05-44.44 42.67-45.07V232c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v24.29c11.29.58 22.27 4.51 31.37 11.35 3.9 2.93 4.1 8.77.57 12.14l-11.75 11.21c-2.77 2.64-6.89 2.76-10.13.73-3.87-2.43-8.26-3.72-12.82-3.72h-28.11c-6.5 0-11.8 5.92-11.8 13.19 0 5.95 3.61 11.19 8.77 12.73l45 13.5c18.59 5.58 31.58 23.42 31.58 43.39 0 24.53-19.05 44.44-42.67 45.07z"},child:[]}]})(e)}function V(e){return C({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"},child:[]}]})(e)}function W(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 480H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v352c0 26.51-21.49 48-48 48zM128 120c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm0 96c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm0 96c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm288-136v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12zm0 96v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12zm0 96v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12z"},child:[]}]})(e)}function G(e){return C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function Q(e){return C({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M0 224v272c0 8.84 7.16 16 16 16h80V192H32c-17.67 0-32 14.33-32 32zm360-48h-24v-40c0-4.42-3.58-8-8-8h-16c-4.42 0-8 3.58-8 8v64c0 4.42 3.58 8 8 8h48c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zm137.75-63.96l-160-106.67a32.02 32.02 0 0 0-35.5 0l-160 106.67A32.002 32.002 0 0 0 128 138.66V512h128V368c0-8.84 7.16-16 16-16h96c8.84 0 16 7.16 16 16v144h128V138.67c0-10.7-5.35-20.7-14.25-26.63zM320 256c-44.18 0-80-35.82-80-80s35.82-80 80-80 80 35.82 80 80-35.82 80-80 80zm288-64h-64v320h80c8.84 0 16-7.16 16-16V224c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function K(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function Y(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(e)}function J(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z"},child:[]}]})(e)}function X(e){return C({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function Z(e){return C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function ee(e){return C({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"},child:[]}]})(e)}function te(e){return C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M319.4 320.6L224 416l-95.4-95.4C57.1 323.7 0 382.2 0 454.4v9.6c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-9.6c0-72.2-57.1-130.7-128.6-133.8zM13.6 79.8l6.4 1.5v58.4c-7 4.2-12 11.5-12 20.3 0 8.4 4.6 15.4 11.1 19.7L3.5 242c-1.7 6.9 2.1 14 7.6 14h41.8c5.5 0 9.3-7.1 7.6-14l-15.6-62.3C51.4 175.4 56 168.4 56 160c0-8.8-5-16.1-12-20.3V87.1l66 15.9c-8.6 17.2-14 36.4-14 57 0 70.7 57.3 128 128 128s128-57.3 128-128c0-20.6-5.3-39.8-14-57l96.3-23.2c18.2-4.4 18.2-27.1 0-31.5l-190.4-46c-13-3.1-26.7-3.1-39.7 0L13.6 48.2c-18.1 4.4-18.1 27.2 0 31.6z"},child:[]}]})(e)}function re(e){return C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function ne(e){return C({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}const ae=e=>{let{currentPage:t,onPageChange:r}=e;const{logout:n}=d(),{userRole:a,hasPermission:s}=p(),l=[{id:"students",label:"Students",icon:te,requiredPermissions:["view_students"]},{id:"reports",label:"Reports",icon:A,requiredPermissions:["access_reports"]},{id:"admin-panel",label:"Admin Panel",icon:R,requiredPermissions:["access_admin_panel"],children:[..."super_admin"!==a?[{id:"admin-schools",label:"Schools",icon:Q}]:[],{id:"admin-users",label:"Users",icon:ne},{id:"admin-parents",label:"Parents",icon:ee},..."super_admin"!==a?[{id:"admin-features",label:"Switch Board",icon:R}]:[],{id:"admin-billing",label:"Billing",icon:M,requiredPermissions:["access_billing"],children:[{id:"admin-billing-dashboard",label:"Dashboard",icon:L},{id:"admin-billing-plans",label:"Billing Plans",icon:D},{id:"admin-billing-features",label:"Billing Features",icon:W},{id:"admin-billing-plan-features",label:"Plan Features",icon:D},{id:"admin-billing-subscriptions",label:"School Subscriptions",icon:Q},{id:"admin-billing-invoices",label:"Invoices",icon:q}]}]}];return(0,o.jsxs)("div",{className:"w-56 bg-white h-screen shadow-lg border-r border-gray-200",children:[(0,o.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,o.jsxs)("button",{onClick:n,className:"flex items-center space-x-2 hover:bg-gray-50 rounded-lg p-2 transition-all duration-200 group",title:"Click to logout",children:[(0,o.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:(i={className:"w-5 h-5 text-white"},C({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"},child:[]}]})(i))}),(0,o.jsx)("h1",{className:"text-lg font-bold text-gray-800 group-hover:text-blue-600 transition-colors duration-200",children:"Centrix"})]})}),(0,o.jsx)("nav",{className:"p-3",children:(0,o.jsx)("ul",{className:"space-y-1",children:l.map(e=>!e.requiredPermissions||e.requiredPermissions.some(e=>s(e))?(0,o.jsxs)("li",{children:[(0,o.jsxs)("button",{onClick:()=>r(e.id),className:"w-full flex items-center justify-between px-3 py-2 rounded-md text-left transition-all duration-200 group "+(t===e.id||e.children&&e.children.some(e=>e.id===t)?"bg-blue-50 text-blue-700 border-l-4 border-blue-500 shadow-sm":"text-gray-600 hover:bg-gray-50 hover:text-gray-800"),children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[e.icon({className:"w-4 h-4 "+(t===e.id||e.children&&e.children.some(e=>e.id===t)?"text-blue-600":"text-gray-400 group-hover:text-gray-600")}),(0,o.jsx)("span",{className:"text-xs font-medium",children:e.label})]}),e.children&&z({className:"w-3 h-3 transition-transform duration-200 "+(t===e.id||e.children&&e.children.some(e=>e.id===t)?"text-blue-600":"text-gray-400")})]}),e.children&&(0,o.jsx)("ul",{className:"mt-1 ml-4 space-y-1",children:e.children.map(e=>!e.requiredPermissions||e.requiredPermissions.some(e=>s(e))?(0,o.jsxs)("li",{children:[(0,o.jsxs)("button",{onClick:()=>r(e.id),className:"w-full flex items-center space-x-2 px-2 py-1 rounded text-left transition-all duration-200 "+(t===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:bg-gray-50 hover:text-gray-800"),children:[e.icon({className:"w-3 h-3 "+(t===e.id?"text-blue-600":"text-gray-400")}),(0,o.jsx)("span",{className:"text-xs",children:e.label})]}),e.children&&(t===e.id||e.children.some(e=>e.id===t))&&(0,o.jsx)("ul",{className:"mt-1 ml-4 space-y-1",children:e.children.map(e=>(0,o.jsx)("li",{children:(0,o.jsxs)("button",{onClick:()=>r(e.id),className:"w-full flex items-center space-x-2 px-2 py-1 rounded text-left transition-all duration-200 "+(t===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:bg-gray-50 hover:text-gray-800"),children:[e.icon({className:"w-3 h-3 "+(t===e.id?"text-blue-600":"text-gray-400")}),(0,o.jsx)("span",{className:"text-xs",children:e.label})]})},e.id))})]},e.id):null)})]},e.id):null)})})]});var i},se=e=>{let{pageTitle:t}=e;const{logout:r,user:a}=d(),s=n.useMemo(()=>(null===a||void 0===a?void 0:a.username)||"User",[null===a||void 0===a?void 0:a.username]),l=n.useMemo(()=>`${(null===a||void 0===a?void 0:a.role)||"User"} \u2022 ${(null===a||void 0===a?void 0:a.school_name)||"Default School"}`,[null===a||void 0===a?void 0:a.role,null===a||void 0===a?void 0:a.school_name]);return(0,o.jsx)("div",{className:"bg-white border-b border-gray-200 px-4 py-3",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsx)("div",{children:(0,o.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:t})}),(0,o.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1 bg-blue-50 rounded-lg",children:[(i={className:"w-4 h-4 text-blue-600"},C({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"},child:[]}]})(i)),(0,o.jsx)("div",{className:"text-sm",children:(0,o.jsx)("p",{className:"font-medium text-blue-900",children:(null===a||void 0===a?void 0:a.school_name)||"Default School"})})]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("button",{className:"p-1.5 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-md transition-all duration-200",children:V({className:"w-4 h-4"})}),(0,o.jsx)("button",{className:"p-1.5 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-md transition-all duration-200",children:J({className:"w-4 h-4"})}),(0,o.jsxs)("button",{className:"p-1.5 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-md transition-all duration-200 relative",children:[P({className:"w-4 h-4"}),(0,o.jsx)("span",{className:"absolute -top-0.5 -right-0.5 bg-red-500 text-white text-xs rounded-full w-3 h-3 flex items-center justify-center",children:"3"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsx)("p",{className:"text-xs font-medium text-gray-900",children:s}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:l})]}),(0,o.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:re({className:"w-4 h-4 text-white"})}),(0,o.jsx)("button",{onClick:r,className:"p-1.5 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-md transition-all duration-200",title:"Logout",children:Y({className:"w-4 h-4"})})]})]})]})});var i};var le=r(950);const ie=e=>{let{student:t,isOpen:r,onClose:a}=e;const[s,i]=(0,n.useState)([]),[c,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(!1),[x,f]=(0,n.useState)([]),[h,p]=(0,n.useState)(!1),[g,b]=(0,n.useState)({parent:"",relationship_type:"",is_primary_contact:!1,is_emergency_contact:!1,can_pick_up:!1,notes:""}),[y,v]=(0,n.useState)({}),[j,w]=(0,n.useState)(""),[N,k]=(0,n.useState)(!1),_=(0,n.useCallback)(async()=>{if(null!==t&&void 0!==t&&t.id){d(!0);try{console.log("Fetching parents for student:",t.id);const e=await l.students.getParents(t.id);let r;if(console.log("API response:",e),e.data&&e.data.results)r=e.data.results,console.log("Using wrapped response format");else{if(!e.results)return void console.error("Unexpected response format:",e);r=e.results,console.log("Using direct response format")}console.log("Parents results:",r),console.log("Setting studentParents state with:",r),i(r)}catch(e){console.error("Error fetching student parents:",e)}finally{d(!1)}}},[null===t||void 0===t?void 0:t.id]),S=()=>{m(!1),b({parent:"",relationship_type:"",is_primary_contact:!1,is_emergency_contact:!1,can_pick_up:!1,notes:""}),v({}),w(""),k(!1)},C=async()=>{p(!0);try{const e=await l.parents.getAll();f(e.results||[])}catch(e){console.error("Error fetching parents list:",e)}finally{p(!1)}},E=e=>{var t;return(null===(t=y[e])||void 0===t?void 0:t[0])||""};return(0,n.useEffect)(()=>{r&&t&&_()},[r,t,_]),r&&t?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Student Details"}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:t.pupil_name||t.fullName})]}),(0,o.jsx)("button",{onClick:a,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:X({className:"w-5 h-5"})})]}),(0,o.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Student Information"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name"}),(0,o.jsx)("p",{className:"text-sm text-gray-900",children:t.pupil_name||t.fullName})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Admission Number"}),(0,o.jsx)("p",{className:"text-sm text-gray-900",children:t.admission_number||t.admissionNumber})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Guardian Phone"}),(0,o.jsx)("p",{className:"text-sm text-gray-900",children:t.guardian_phone||t.guardianPhone||"N/A"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Guardian Name"}),(0,o.jsx)("p",{className:"text-sm text-gray-900",children:t.guardian_name||t.guardianName||"N/A"})]})]})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Parents"}),(0,o.jsxs)("button",{onClick:()=>{m(!0),C()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[G({className:"w-4 h-4 inline mr-2"}),"Add Parent"]})]}),c?(0,o.jsxs)("div",{className:"text-center py-4",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Loading parents..."})]}):0===s.length?(0,o.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[ee({className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,o.jsx)("p",{className:"text-gray-600",children:"No parents associated with this student"})]}):(0,o.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,o.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("h4",{className:"font-medium text-gray-900",children:["Parent ID: ",e.parent]}),(0,o.jsxs)("p",{className:"text-sm text-gray-500",children:["Relationship: ",e.relationship_type]})]}),(0,o.jsx)("button",{onClick:()=>(async e=>{if(null!==t&&void 0!==t&&t.id&&window.confirm("Are you sure you want to dis-associate this parent from the student?"))try{await l.students.disassociateParent(t.id,e),console.log("Parent dis-associated successfully"),_()}catch(r){console.error("Error dis-associating parent:",r),alert("Failed to dis-associate parent. Please try again.")}})(e.id),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg",children:Z({className:"w-4 h-4"})})]})},e.id))})]})]})]})}),u&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-end z-50",children:(0,o.jsxs)("div",{className:"bg-white h-full w-96 shadow-2xl overflow-y-auto",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Add Parent"}),(0,o.jsx)("p",{className:"text-xs text-gray-600",children:"Associate a parent with this student"})]}),(0,o.jsx)("button",{onClick:S,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full",children:X({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Parent *"]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",value:j,onChange:e=>w(e.target.value),onFocus:()=>k(!0),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white",placeholder:"Search for a parent..."}),N&&(0,o.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:h?(0,o.jsx)("div",{className:"p-4 text-center text-sm text-gray-500",children:"Loading..."}):x.filter(e=>{var t,r,n;return(null===(t=e.first_name)||void 0===t?void 0:t.toLowerCase().includes(j.toLowerCase()))||(null===(r=e.last_name)||void 0===r?void 0:r.toLowerCase().includes(j.toLowerCase()))||(null===(n=e.email)||void 0===n?void 0:n.toLowerCase().includes(j.toLowerCase()))}).map(e=>(0,o.jsxs)("button",{onClick:()=>{b(t=>({...t,parent:e.id})),w(`${e.first_name} ${e.last_name}`),k(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 border-b border-gray-100 last:border-b-0",children:[(0,o.jsxs)("div",{className:"font-medium",children:[e.first_name," ",e.last_name]}),(0,o.jsx)("div",{className:"text-xs text-gray-500",children:e.email})]},e.id))})]}),E("parent")&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:E("parent")})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Relationship Type *"]}),(0,o.jsxs)("select",{value:g.relationship_type,onChange:e=>b(t=>({...t,relationship_type:e.target.value})),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white",children:[(0,o.jsx)("option",{value:"",children:"Select relationship type"}),(0,o.jsx)("option",{value:"father",children:"Father"}),(0,o.jsx)("option",{value:"mother",children:"Mother"}),(0,o.jsx)("option",{value:"guardian",children:"Guardian"}),(0,o.jsx)("option",{value:"sibling",children:"Sibling"}),(0,o.jsx)("option",{value:"other",children:"Other"})]}),E("relationship_type")&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:E("relationship_type")})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"flex items-center p-2 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg",children:[(0,o.jsx)("input",{type:"checkbox",id:"is_primary_contact",checked:g.is_primary_contact,onChange:e=>{b(t=>({...t,is_primary_contact:e.target.checked}))},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),(0,o.jsx)("label",{htmlFor:"is_primary_contact",className:"ml-2 text-xs font-medium text-gray-800",children:"Primary Contact"})]}),(0,o.jsxs)("div",{className:"flex items-center p-2 bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg",children:[(0,o.jsx)("input",{type:"checkbox",id:"is_emergency_contact",checked:g.is_emergency_contact,onChange:e=>{b(t=>({...t,is_emergency_contact:e.target.checked}))},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),(0,o.jsx)("label",{htmlFor:"is_emergency_contact",className:"ml-2 text-xs font-medium text-gray-800",children:"Emergency Contact"})]}),(0,o.jsxs)("div",{className:"flex items-center p-2 bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg",children:[(0,o.jsx)("input",{type:"checkbox",id:"can_pick_up",checked:g.can_pick_up,onChange:e=>{b(t=>({...t,can_pick_up:e.target.checked}))},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),(0,o.jsx)("label",{htmlFor:"can_pick_up",className:"ml-2 text-xs font-medium text-gray-800",children:"Can Pick Up"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-violet-500 rounded-full mr-1.5"}),"Notes"]}),(0,o.jsx)("textarea",{value:g.notes,onChange:e=>b(t=>({...t,notes:e.target.value})),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-100 focus:border-violet-500 transition-all duration-200 bg-white resize-none",placeholder:"Additional notes about this parent relationship",rows:2})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:S,className:"px-4 py-2 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if(null!==t&&void 0!==t&&t.id)try{await l.students.associateParent(t.id,g),console.log("Parent added successfully"),S(),_()}catch(n){var e,r;console.error("Error adding parent:",n),null!==(e=n.response)&&void 0!==e&&null!==(r=e.data)&&void 0!==r&&r.errors&&v(n.response.data.errors)}},disabled:!g.parent||!g.relationship_type,className:"px-4 py-2 text-xs bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-200 font-semibold shadow-sm hover:shadow-md",children:"Add Parent"})]})]})})]}):null},oe=()=>{const e=p();return{canCreateSchool:()=>e.hasPermission("create_school"),canViewAllSchools:()=>e.hasPermission("view_all_schools"),canViewOwnSchool:()=>e.hasPermission("view_own_school"),canRegisterUsers:()=>e.hasPermission("register_users"),canAssignRootSuperAdmin:()=>e.hasPermission("assign_root_super_admin"),canAssignAdmin:()=>e.hasPermission("assign_admin"),canManageStudents:()=>e.hasPermission("student_crud"),canViewStudents:()=>e.hasPermission("view_students"),canViewAllUsers:()=>e.hasPermission("view_all_users"),canViewSchoolUsers:()=>e.hasPermission("view_school_users"),canManageUsers:()=>e.hasPermission("manage_users"),canAccessReports:()=>e.hasPermission("access_reports"),canAccessSettings:()=>e.hasPermission("access_settings"),canAccessCustomerSupport:()=>e.hasPermission("access_customer_support"),canAccessAdminPanel:()=>e.hasPermission("access_admin_panel"),isRoot:()=>"root"===e.userRole,isSuperAdmin:()=>"super_admin"===e.userRole,isAdmin:()=>"admin"===e.userRole,isUser:()=>"user"===e.userRole,isAtLeastAdmin:()=>["root","super_admin","admin"].includes(e.userRole),isAtLeastSuperAdmin:()=>["root","super_admin"].includes(e.userRole),canCreateStudent:()=>e.hasPermission("student_crud"),canUpdateStudent:()=>e.hasPermission("student_crud"),canDeleteStudent:()=>e.hasPermission("student_crud"),canBulkManageStudents:()=>e.hasPermission("student_crud"),canCreateUser:()=>e.hasPermission("manage_users"),canUpdateUser:()=>e.hasPermission("manage_users"),canDeleteUser:()=>e.hasPermission("manage_users"),canAssignRoles:()=>e.hasAnyPermission(["assign_root_super_admin","assign_admin"]),hasPermission:e.hasPermission,hasAnyPermission:e.hasAnyPermission,hasAllPermissions:e.hasAllPermissions,canAccess:e.canAccess,getRequiredRole:e.getRequiredRole,userRole:e.userRole}},ce=e=>{let{children:t,permissions:r=[],roles:n=[],fallback:a=null,errorMessage:s="You do not have permission to access this feature.",showError:l=!1,mode:i="any"}=e;const c=oe();return(0===n.length||n.includes(c.userRole))&&(0===r.length||("all"===i?c.hasAllPermissions(r):c.hasAnyPermission(r)))?(0,o.jsx)(o.Fragment,{children:t}):l?(0,o.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Access Denied"}),(0,o.jsxs)("div",{className:"mt-2 text-sm text-red-700",children:[(0,o.jsx)("p",{children:s}),r.length>0&&(0,o.jsxs)("p",{className:"mt-1",children:["Required permissions: ",r.join(", ")]}),n.length>0&&(0,o.jsxs)("p",{className:"mt-1",children:["Required roles: ",n.join(", ")]})]})]})]})}):a?(0,o.jsx)(o.Fragment,{children:a}):null};const de=new class{constructor(){this.baseURL=void 0,this.baseURL={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://localhost:8000/api/v1"}async checkFeature(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{return(await l.authenticatedRequest("/switch/check/",{method:"POST",body:JSON.stringify({feature_name:e,scope_type:t,scope_id:r})})).data}catch(n){throw console.error(`Error checking feature ${e}:`,n),n}}async checkFeaturesBulk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{return(await l.authenticatedRequest("/switch/check/bulk/",{method:"POST",body:JSON.stringify({features:e,scope_type:t,scope_id:r})})).data}catch(n){throw console.error("Error checking features in bulk:",n),n}}async getStudentAdmissionDetailedStatus(){try{const e=await l.authenticatedRequest("/students/features/detailed-status",{method:"GET"});if(e.data)return e.data;if(e.detailed_status)return{detailed_status:e.detailed_status};throw console.error("Unexpected response structure:",e),new Error("Unexpected response structure from API")}catch(e){throw console.error("Error getting student admission detailed status:",e),e}}async isStudentAdmissionBlocked(e){if("root"===e)return{isBlocked:!1,billingBlocked:!1,maintenanceBlocked:!1,message:"Root user - all features enabled"};try{const e=(await this.getStudentAdmissionDetailedStatus()).detailed_status.combined_status;return{isBlocked:e.is_enabled,billingBlocked:e.billing_blocked,maintenanceBlocked:e.maintenance_blocked,message:e.message}}catch(t){return console.error("Error checking if student admission is blocked:",t),{isBlocked:!1,billingBlocked:!1,maintenanceBlocked:!1,message:"Unable to determine feature status"}}}async checkStudentAdmissionFeatures(){try{const e=await this.checkFeaturesBulk(["student_admission_billing","student_admission_maintenance"]);return{billing:e.results.student_admission_billing,maintenance:e.results.student_admission_maintenance}}catch(e){throw console.error("Error checking student admission features:",e),e}}async getFeatureFlags(e,t){try{let r="/switch/flags/";const n=new URLSearchParams;e&&n.append("feature_type",e),void 0!==t&&n.append("is_active",t.toString()),n.toString()&&(r+=`?${n.toString()}`);return await l.authenticatedRequest(r,{method:"GET"})}catch(r){throw console.error("Error fetching feature flags:",r),r}}async getFeatureFlagStates(e,t,r){try{let n="/switch/states/";const a=new URLSearchParams;e&&a.append("feature_flag",e),t&&a.append("scope_type",t),r&&a.append("scope_id",r),a.toString()&&(n+=`?${a.toString()}`);return await l.authenticatedRequest(n,{method:"GET"})}catch(n){throw console.error("Error fetching feature flag states:",n),n}}async getStudentAdmissionFeatureData(){try{var e,t,r,n;const[a,s]=await Promise.all([this.getFeatureFlags(),this.getFeatureFlagStates()]),l=(null===(e=a.data)||void 0===e||null===(t=e.results)||void 0===t?void 0:t.filter(e=>e.name.includes("student_admission")))||[];return{flags:l,states:(null===(r=s.data)||void 0===r||null===(n=r.results)||void 0===n?void 0:n.filter(e=>{var t;return null===(t=e.feature_flag_name)||void 0===t?void 0:t.includes("student_admission")}))||[]}}catch(a){throw console.error("Error fetching student admission feature data:",a),a}}},ue=e=>{let{children:t,tooltipMessage:r,className:a="",disabled:s=!0}=e;const[l,i]=(0,n.useState)(!1);return s?(0,o.jsxs)("div",{className:"relative inline-block",children:[(0,o.jsx)("div",{className:`${a} opacity-50 cursor-not-allowed`,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:t}),l&&(0,o.jsxs)("div",{className:"absolute z-50 px-3 py-2 text-xs text-white bg-gray-900 rounded-lg shadow-lg whitespace-nowrap -top-12 left-1/2 transform -translate-x-1/2",children:[r,(0,o.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]}):(0,o.jsx)("div",{className:a,children:t})},me=e=>{let{title:t,children:r,defaultExpanded:a=!0,isActive:s=!1,onSectionClick:l}=e;const[i,c]=(0,n.useState)(a);return(0,o.jsxs)("div",{className:"border rounded-lg transition-all duration-200 "+(s?"border-blue-300 bg-blue-50/30":"border-gray-200 hover:border-gray-300"),children:[(0,o.jsxs)("button",{onClick:()=>{c(!i),l&&l()},className:"w-full px-4 py-3 flex items-center justify-between text-sm font-semibold transition-all duration-200 rounded-t-lg "+(s?"text-blue-900 bg-blue-100/50 hover:bg-blue-100":"text-gray-900 bg-gray-50 hover:bg-gray-100"),children:[(0,o.jsx)("span",{children:t}),i?F({className:"w-4 h-4 transition-colors duration-200 "+(s?"text-blue-600":"text-gray-500")}):z({className:"w-4 h-4 transition-colors duration-200 "+(s?"text-blue-600":"text-gray-500")})]}),i&&(0,o.jsx)("div",{className:"p-4 space-y-4 transition-all duration-200 "+(s?"bg-blue-50/20":""),children:r})]})},xe=()=>{var e,t,r;const{user:a}=d(),{isStudentAdmissionBlocked:s,blockMessage:i,isLoading:c,error:u,refreshStatus:m}=(()=>{var e;const{user:t}=d(),[r,a]=(0,n.useState)(null),[s,l]=(0,n.useState)(!0),[i,o]=(0,n.useState)(null),c="root"===(null===t||void 0===t?void 0:t.role),u=(0,n.useCallback)(async()=>{if(c)return a({detailed_status:{exempt_from_restrictions:{users:[],schools:[]},to_be_restricted:{users:[],schools:[]},billing_status:[],maintenance_status:[],combined_status:{is_enabled:!0,billing_blocked:!1,maintenance_blocked:!1,billing_status:{is_enabled:!0,message:"Root user - billing restrictions bypassed"},maintenance_status:{is_enabled:!0,message:"Root user - maintenance restrictions bypassed"},message:"Root user - all features enabled"}}}),void l(!1);try{l(!0),o(null);const e=await de.getStudentAdmissionDetailedStatus();a(e)}catch(e){console.error("Error loading student admission detailed status:",e),o(e instanceof Error?e.message:"Failed to load feature status"),a({detailed_status:{exempt_from_restrictions:{users:[],schools:[]},to_be_restricted:{users:[],schools:[]},billing_status:[],maintenance_status:[],combined_status:{is_enabled:!0,billing_blocked:!1,maintenance_blocked:!1,billing_status:{is_enabled:!0,message:"Feature is active"},maintenance_status:{is_enabled:!0,message:"Feature is active"},message:"Unable to determine feature status"}}})}finally{l(!1)}},[c]),m=(0,n.useCallback)(async()=>{await u()},[u]);(0,n.useEffect)(()=>{u()},[u]);const x=null===r||void 0===r||null===(e=r.detailed_status)||void 0===e?void 0:e.combined_status;return{studentAdmissionDetailedStatus:r,isStudentAdmissionBlocked:!c&&!(null!==x&&void 0!==x&&x.is_enabled),isBillingBlocked:!c&&((null===x||void 0===x?void 0:x.billing_blocked)||!1),isMaintenanceBlocked:!c&&((null===x||void 0===x?void 0:x.maintenance_blocked)||!1),blockMessage:c?"Root user - all features enabled":(null===x||void 0===x?void 0:x.message)||"",isLoading:s,error:i,refreshStatus:m}})(),x="root"===(null===a||void 0===a?void 0:a.role),[f,h]=(0,n.useState)(""),[p,g]=(0,n.useState)(""),[b,y]=(0,n.useState)(""),[v,j]=(0,n.useState)("asc"),[w,N]=(0,n.useState)(null),[k,_]=(0,n.useState)(!1),[S,C]=(0,n.useState)("admission"),[E,P]=(0,n.useState)(null),[A,L]=(0,n.useState)({x:0,y:0}),[O,R]=(0,n.useState)(!1),[D,M]=(0,n.useState)(null),[U,$]=(0,n.useState)(null),[q,V]=(0,n.useState)(null),[W,G]=(0,n.useState)(null),[Q,Y]=(0,n.useState)(null),[J,te]=(0,n.useState)(null),[re,ne]=(0,n.useState)(!1),[ae,se]=(0,n.useState)(null),[oe,xe]=(0,n.useState)(!1),[fe,he]=(0,n.useState)(null),[pe,ge]=(0,n.useState)([]),[be,ye]=(0,n.useState)(!1),[ve,je]=(0,n.useState)({parent:"",relationship_type:"",is_primary_contact:!1,is_emergency_contact:!1,can_pick_up:!1,notes:""}),[we,Ne]=(0,n.useState)({}),[ke,_e]=(0,n.useState)(""),[Se,Ce]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const e=e=>{e.target.closest(".parent-dropdown-container")||(Ce(!1),_e(""))};return Se&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[Se]);const[Ee,Pe]=(0,n.useState)("basic-info"),[Ae,Le]=(0,n.useState)("basic-info"),[Te,ze]=(0,n.useState)({}),[Fe,Oe]=(0,n.useState)({}),[Re,De]=(0,n.useState)({admissionNumber:"",fullName:"",dateOfBirth:"",gender:"M",dateOfAdmission:"",classOnAdmission:"",currentClass:"",lastSchoolAttended:"",guardianName:"",guardianPhone:"",guardianRelationship:"",address:"",boardingStatus:"Day",exemptedFromReligiousInstruction:!1,birthCertificateNo:"",image:"",dateOfLeaving:"",schoolLeavingCertificateNumber:"",remarks:""}),[Me,Ie]=(0,n.useState)({name:"",code:"",description:""}),[Be,Ue]=(0,n.useState)({name:"",code:"",streamId:"",level:0,capacity:0}),[$e,He]=(0,n.useState)([]),[qe,Ve]=(0,n.useState)([]),[We,Ge]=(0,n.useState)([]),[Qe,Ke]=(0,n.useState)(!0),[Ye,Je]=(0,n.useState)(!1),[Xe,Ze]=(0,n.useState)(!1),[et,tt]=(0,n.useState)(1),[rt,nt]=(0,n.useState)(0),[at,st]=(0,n.useState)(!1),[lt,it]=(0,n.useState)(!1),ot=e=>{var t,r,n,a;return{id:e.id,admissionNumber:e.admission_number||e.admissionNumber,fullName:e.pupil_name||e.fullName,dateOfBirth:e.date_of_birth||e.dateOfBirth,gender:e.gender,dateOfAdmission:e.date_of_admission||e.dateOfAdmission,classOnAdmission:(null===(t=e.class_on_admission)||void 0===t?void 0:t.id)||e.class_on_admission_id||e.classOnAdmission,currentClass:(null===(r=e.current_class)||void 0===r?void 0:r.id)||e.current_class_id||e.currentClass,class_on_admission:e.class_on_admission,current_class:e.current_class,lastSchoolAttended:e.last_school_attended||e.lastSchoolAttended,guardianName:e.guardian_name||e.guardianName,guardianPhone:e.guardian_phone||e.guardianPhone,guardianRelationship:e.guardian_relationship||e.guardianRelationship,address:e.address,boardingStatus:e.boarding_status||e.boardingStatus,exemptedFromReligiousInstruction:e.exempted_from_religious_instruction||e.exemptedFromReligiousInstruction,birthCertificateNo:e.birth_certificate_no||e.birthCertificateNo,image:e.image,dateOfLeaving:e.date_of_leaving||e.dateOfLeaving,schoolLeavingCertificateNumber:e.school_leaving_certificate_number||e.schoolLeavingCertificateNumber,remarks:e.remarks,class:e.class_on_admission||e.class,parentName:e.guardian_name||e.parentName,contactInfo:e.guardian_phone||e.contactInfo,admission_number:e.admission_number,pupil_name:e.pupil_name,date_of_birth:e.date_of_birth,date_of_admission:e.date_of_admission,class_on_admission_id:(null===(n=e.class_on_admission)||void 0===n?void 0:n.id)||e.class_on_admission_id,current_class_id:(null===(a=e.current_class)||void 0===a?void 0:a.id)||e.current_class_id,last_school_attended:e.last_school_attended,guardian_name:e.guardian_name,guardian_phone:e.guardian_phone,guardian_relationship:e.guardian_relationship,boarding_status:e.boarding_status,exempted_from_religious_instruction:e.exempted_from_religious_instruction,birth_certificate_no:e.birth_certificate_no,date_of_leaving:e.date_of_leaving,school_leaving_certificate_number:e.school_leaving_certificate_number,is_current_student:e.is_current_student,created_at:e.created_at,updated_at:e.updated_at,deleted:e.deleted,contact_1:e.contact_1,contact_2:e.contact_2}};(0,n.useEffect)(()=>{const e=setTimeout(()=>{g(f)},500);return()=>clearTimeout(e)},[f]);const ct=(0,n.useCallback)(async()=>{try{Ke(!0);const e=await l.students.getAll({page:et,page_size:20,search:p||void 0,ordering:b?`${"desc"===v?"-":""}${b}`:void 0}),t=(e.results||e||[]).map(ot);He(t),nt(e.count||0),st(!!e.next),it(!!e.previous)}catch(e){console.error("Error loading students:",e),He([]),nt(0),st(!1),it(!1)}finally{Ke(!1)}},[et,20,p,b,v]);(0,n.useEffect)(()=>{ct()},[et,p,S,b,v,ct]),(0,n.useEffect)(()=>{(async()=>{try{Je(!0);const e=await l.students.getStreams();Ve(e||[])}catch(e){console.error("Error loading streams:",e),Ve([])}finally{Je(!1)}})()},[]),(0,n.useEffect)(()=>{(async()=>{try{Ze(!0);const e=await l.students.getClasses();Ge(e||[])}catch(e){console.error("Error loading classes:",e),Ge([])}finally{Ze(!1)}})()},[]);const dt=Math.ceil(rt/20),ut=20*(et-1),mt=Math.min(ut+20,rt),xt=$e;(0,n.useEffect)(()=>{tt(1)},[p]);const ft=()=>{ne(!1),De({admissionNumber:"",fullName:"",class:"",gender:"Male",dateOfBirth:"",parentName:"",contactInfo:"",address:"",dateOfAdmission:""}),Ie({name:"",code:"",description:""}),Ue({name:"",code:"",streamId:"",level:0,capacity:0})},ht=e=>{var t;return(null===(t=Te[e])||void 0===t?void 0:t[0])||null},pt=e=>{var t;return(null===(t=Fe[e])||void 0===t?void 0:t[0])||null},gt=(e,t)=>{De(r=>({...r,[e]:t})),Te[e]&&ze(t=>{const r={...t};return delete r[e],r})},bt=(e,t)=>{Ie(r=>({...r,[e]:t})),Te[e]&&ze(t=>{const r={...t};return delete r[e],r})},yt=(e,t)=>{Ue(r=>({...r,[e]:t})),Te[e]&&ze(t=>{const r={...t};return delete r[e],r})},vt=e=>{b===e?j("asc"===v?"desc":"asc"):(y(e),j("asc"))};(0,n.useEffect)(()=>{const e=e=>{const t=e.target;t.closest("[data-dropdown-container]")||t.closest("[data-portal-dropdown]")||P(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const jt=(e,t)=>{if(E===e)P(null);else{const r=t.currentTarget.getBoundingClientRect(),n=window.innerHeight,a=window.innerWidth,s=80,l=128;let i=r.right-l,o=r.bottom+4;r.bottom+s>n&&(o=r.top-s-4),i<0&&(i=0),i+l>a&&(i=a-l),L({x:i,y:o}),P(e)}},wt=()=>!(!q||!W)&&(q.name!==W.name||q.code!==W.code||q.description!==W.description),Nt=()=>{var e,t;return!(!Q||!J)&&(Q.name!==J.name||Q.code!==J.code||(null===(e=Q.stream)||void 0===e?void 0:e.id)!==(null===(t=J.stream)||void 0===t?void 0:t.id)||Q.level!==J.level||Q.capacity!==J.capacity)},kt=()=>!(!D||!U)&&(D.admissionNumber!==U.admissionNumber||D.fullName!==U.fullName||D.dateOfBirth!==U.dateOfBirth||D.gender!==U.gender||D.dateOfAdmission!==U.dateOfAdmission||D.classOnAdmission!==U.classOnAdmission||D.currentClass!==U.currentClass||D.lastSchoolAttended!==U.lastSchoolAttended||D.guardianName!==U.guardianName||D.guardianPhone!==U.guardianPhone||D.guardianRelationship!==U.guardianRelationship||D.address!==U.address||D.boardingStatus!==U.boardingStatus||D.exemptedFromReligiousInstruction!==U.exemptedFromReligiousInstruction||D.birthCertificateNo!==U.birthCertificateNo||D.image!==U.image||D.dateOfLeaving!==U.dateOfLeaving||D.schoolLeavingCertificateNumber!==U.schoolLeavingCertificateNumber||D.remarks!==U.remarks),_t=()=>{R(!1),M(null),$(null),V(null),G(null),Y(null),te(null),Oe({})},St=()=>{xe(!1),he(null),je({parent:"",relationship_type:"",is_primary_contact:!1,is_emergency_contact:!1,can_pick_up:!1,notes:""}),Ne({})},Ct=async()=>{try{ye(!0);const e=await l.parents.getAll();ge(e.results||[])}catch(e){console.error("Error fetching parents:",e),se({message:"Failed to fetch parents. Please try again.",type:"error"})}finally{ye(!1)}},Et=e=>{var t;return(null===(t=we[e])||void 0===t?void 0:t[0])||null},Pt=async()=>{if(D&&U)try{const e=((e,t)=>{const r={},n=e=>null===e||void 0===e?"":String(e).trim();return n(e.fullName||e.pupil_name)!==n(t.fullName)&&(r.pupil_name=t.fullName||""),n(e.dateOfBirth||e.date_of_birth)!==n(t.dateOfBirth)&&(r.date_of_birth=t.dateOfBirth||""),n(e.gender)!==n(t.gender)&&(r.gender=t.gender||""),n(e.dateOfAdmission||e.date_of_admission)!==n(t.dateOfAdmission)&&(r.date_of_admission=t.dateOfAdmission||""),n(e.classOnAdmission||e.class_on_admission_id||e.class)!==n(t.classOnAdmission)&&(r.class_on_admission_id=t.classOnAdmission||""),n(e.currentClass||e.current_class_id)!==n(t.currentClass)&&(r.current_class_id=t.currentClass||""),n(e.guardianName||e.guardian_name||e.parentName)!==n(t.guardianName)&&(r.guardian_name=t.guardianName||""),n(e.guardianPhone||e.guardian_phone)!==n(t.guardianPhone)&&(r.guardian_phone=t.guardianPhone||""),n(e.guardianRelationship||e.guardian_relationship)!==n(t.guardianRelationship)&&(r.guardian_relationship=t.guardianRelationship||""),n(e.address)!==n(t.address)&&(r.address=t.address||""),n(e.lastSchoolAttended||e.last_school_attended)!==n(t.lastSchoolAttended)&&(r.last_school_attended=t.lastSchoolAttended||""),n(e.boardingStatus||e.boarding_status)!==n(t.boardingStatus)&&(r.boarding_status=t.boardingStatus||""),e.exemptedFromReligiousInstruction!==t.exemptedFromReligiousInstruction&&(r.exempted_from_religious_instruction=t.exemptedFromReligiousInstruction||!1),n(e.birthCertificateNo||e.birth_certificate_no)!==n(t.birthCertificateNo)&&(r.birth_certificate_no=t.birthCertificateNo||""),n(e.dateOfLeaving||e.date_of_leaving)!==n(t.dateOfLeaving)&&(r.date_of_leaving=t.dateOfLeaving||""),n(e.school_leaving_certificate_number)!==n(t.school_leaving_certificate_number)&&(r.school_leaving_certificate_number=t.school_leaving_certificate_number||""),n(e.remarks)!==n(t.remarks)&&(r.remarks=t.remarks||""),r})(U,D);if(0===Object.keys(e).length)return se({message:"No changes detected. Student information is already up to date.",type:"success"}),void _t();const t=D.id||U.id;if(!t)throw new Error("Student ID is required for update");await l.students.update(t,e),await ct(),se({message:"Student updated successfully!",type:"success"}),Oe({}),_t(),setTimeout(()=>{se(null)},3e3)}catch(n){var e,t,r;if(console.error("Error updating student:",n),null!==(e=n.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors){const e={};Object.entries(n.response.data.errors).forEach(t=>{let[r,n]=t,a=r.replace(/_([a-z])/g,e=>e[1].toUpperCase());"pupil_name"===r&&(a="fullName"),e[a]=n}),Oe(e),se({message:n.response.data.message||"Please fix the validation errors below.",type:"error"})}else if(null!==(r=n.response)&&void 0!==r&&r.data)if("object"===typeof n.response.data&&null!==n.response.data){const e=n.response.data.errors||n.response.data;if("object"===typeof e&&null!==e){const t={};Object.entries(e).forEach(e=>{let[r,n]=e,a=r.replace(/_([a-z])/g,e=>e[1].toUpperCase());"pupil_name"===r&&(a="fullName"),t[a]=Array.isArray(n)?n:[String(n)]}),Oe(t),se({message:"Please fix the validation errors below.",type:"error"})}else Oe({}),se({message:"Failed to update student. Please try again.",type:"error"})}else Oe({}),se({message:"Failed to update student. Please try again.",type:"error"});else Oe({}),se({message:"Failed to update student. Please try again.",type:"error"});setTimeout(()=>{se(null)},5e3)}},At=(e,t)=>{D&&(M({...D,[e]:t}),Fe[e]&&Oe(t=>{const r={...t};return delete r[e],r}))},Lt=(e,t)=>{q&&(V({...q,[e]:t}),Fe[e]&&Oe(t=>{const r={...t};return delete r[e],r}))},Tt=(e,t)=>{Q&&(Y({...Q,[e]:t}),Fe[e]&&Oe(t=>{const r={...t};return delete r[e],r}))},zt=e=>b!==e?null:"asc"===v?F({className:"w-3 h-3"}):z({className:"w-3 h-3"});return(0,o.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-4 mb-4",children:(0,o.jsxs)("div",{className:"mb-4",children:[!c&&"admission"===S&&!x&&s&&(0,o.jsx)("div",{className:"mb-3 p-2 rounded-md text-xs font-medium flex items-center space-x-2",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1 text-red-700 bg-red-50 px-2 py-1 rounded",children:[(0,o.jsx)("span",{children:"\ud83d\udeab"}),(0,o.jsx)("span",{children:"Student Admission Blocked"})]})}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("nav",{className:"flex space-x-6",children:[(0,o.jsx)("button",{onClick:()=>C("admission"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("admission"===S?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Admission"}),(0,o.jsx)("button",{onClick:()=>C("classes"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("classes"===S?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Classes"}),(0,o.jsx)("button",{onClick:()=>C("streams"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("streams"===S?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Streams"}),(0,o.jsx)("button",{onClick:()=>C("academic"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("academic"===S?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Academic"}),(0,o.jsx)("button",{onClick:()=>C("financial"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("financial"===S?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Financial"}),(0,o.jsx)("button",{onClick:()=>C("attendance"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("attendance"===S?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Attendance"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[u&&(0,o.jsx)("button",{onClick:m,className:"px-3 py-1.5 border border-red-300 bg-red-50 text-red-700 rounded-md text-xs font-medium hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors duration-200",title:"Refresh feature status",children:"Refresh Status"}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",placeholder:"admission"===S?"Search students...":"classes"===S?"Search classes...":"streams"===S?"Search streams...":"academic"===S?"Search academic...":"financial"===S?"Search financial...":"attendance"===S?"Search attendance...":"Search...",value:f,onChange:e=>h(e.target.value),disabled:"admission"===S&&!c&&s,className:"pl-8 pr-3 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:border-transparent text-xs transition-colors duration-200 "+("admission"===S&&!c&&s?"border-gray-200 bg-gray-100 text-gray-500 cursor-not-allowed":"border-gray-300 focus:ring-blue-500 focus:border-transparent")}),(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:K({className:"h-3 w-3 "+("admission"===S&&!c&&s?"text-gray-300":"text-gray-400")})})]}),(0,o.jsx)("button",{disabled:"admission"===S&&!c&&s,className:"px-3 py-1.5 border rounded-md text-xs transition-colors duration-200 "+("admission"===S&&!c&&s?"border-gray-200 bg-gray-100 text-gray-500 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),children:"Filter"}),(0,o.jsxs)("select",{value:b,onChange:e=>y(e.target.value),disabled:"admission"===S&&!c&&s,className:"px-3 py-1.5 border rounded-md text-xs focus:outline-none focus:ring-2 focus:border-transparent transition-colors duration-200 "+("admission"===S&&!c&&s?"border-gray-200 bg-gray-100 text-gray-500 cursor-not-allowed":"border-gray-300 text-gray-700 focus:ring-blue-500 focus:border-transparent"),children:[(0,o.jsx)("option",{value:"",children:"Sort by"}),"admission"===S&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("option",{value:"admissionNumber",children:"Admission Number"}),(0,o.jsx)("option",{value:"fullName",children:"Full Name"}),(0,o.jsx)("option",{value:"class",children:"Class"}),(0,o.jsx)("option",{value:"gender",children:"Gender"}),(0,o.jsx)("option",{value:"dateOfAdmission",children:"Date of Admission"})]}),"classes"===S&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("option",{value:"name",children:"Class Name"}),(0,o.jsx)("option",{value:"code",children:"Class Code"}),(0,o.jsx)("option",{value:"stream.name",children:"Stream"}),(0,o.jsx)("option",{value:"capacity",children:"Capacity"}),(0,o.jsx)("option",{value:"created_at",children:"Created At"})]}),"streams"===S&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("option",{value:"name",children:"Stream Name"}),(0,o.jsx)("option",{value:"code",children:"Stream Code"}),(0,o.jsx)("option",{value:"description",children:"Description"}),(0,o.jsx)("option",{value:"created_at",children:"Created At"})]}),"academic"===S&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("option",{value:"subject",children:"Subject"}),(0,o.jsx)("option",{value:"grade",children:"Grade"}),(0,o.jsx)("option",{value:"teacher",children:"Teacher"})]}),"financial"===S&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("option",{value:"feeType",children:"Fee Type"}),(0,o.jsx)("option",{value:"amount",children:"Amount"}),(0,o.jsx)("option",{value:"dueDate",children:"Due Date"}),(0,o.jsx)("option",{value:"status",children:"Status"})]}),"attendance"===S&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("option",{value:"date",children:"Date"}),(0,o.jsx)("option",{value:"status",children:"Status"}),(0,o.jsx)("option",{value:"student",children:"Student"})]})]}),(0,o.jsx)(ce,{permissions:["student_crud"],children:(0,o.jsx)(ue,{tooltipMessage:!c&&s?i:"",disabled:!c&&s,className:"inline-block",children:(0,o.jsxs)("button",{onClick:()=>{ne(!0),Pe("basic-info"),ze({})},disabled:!c&&s,className:"px-4 py-1.5 bg-blue-600 text-white rounded-md text-xs font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:["admission"===S&&"+ Add Student","classes"===S&&"+ Add Class","streams"===S&&"+ Add Stream","academic"===S&&"+ Add Academic","financial"===S&&"+ Add Financial","attendance"===S&&"+ Add Attendance"]})})})]})]})]})}),"admission"===S&&(0,o.jsxs)("div",{className:"bg-white rounded-md shadow-sm relative",children:[!c&&s&&(0,o.jsx)("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-15 z-10 flex items-center justify-center",title:i,children:(0,o.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg text-center",children:[(0,o.jsx)("div",{className:"text-gray-600 mb-2",children:(0,o.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,o.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Student Admission Temporarily Unavailable"}),(0,o.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:i})]})}),Qe?(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading students..."})]}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>vt("admissionNumber"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Admn number"}),zt("admissionNumber")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>vt("fullName"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Full name"}),zt("fullName")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>vt("class"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Class"}),zt("class")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>vt("gender"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Gender"}),zt("gender")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>vt("dateOfAdmission"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Date of admission"}),zt("dateOfAdmission")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:xt.map((e,t)=>{var r,n;return(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs font-medium text-gray-900",children:e.admissionNumber}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.fullName}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.current_class?`${e.current_class.name} - ${(null===(r=e.current_class.stream)||void 0===r?void 0:r.name)||"No Stream"}`:e.class_on_admission?`${e.class_on_admission.name} - ${(null===(n=e.class_on_admission.stream)||void 0===n?void 0:n.name)||"No Stream"}`:e.classOnAdmission||e.class||""}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.gender}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.dateOfAdmission}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("button",{onClick:()=>(e=>{N(e),_(!0)})(e),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors duration-200",title:"View Details",children:H({className:"w-3 h-3"})}),(0,o.jsx)(ce,{permissions:["student_crud"],children:(0,o.jsx)("div",{className:"relative","data-dropdown-container":!0,children:(0,o.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation();const r=e.id||`student-${Math.random()}`;jt(r,t)},className:"p-1 rounded-md transition-colors duration-200 cursor-pointer "+(E===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:B({className:"w-3 h-3"})})})})]})})]},e.id||`student-${t}`)})})]})})]}),"classes"===S&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm relative",children:Xe?(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading classes..."})]}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>vt("name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Class Name"}),zt("name")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>vt("code"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Class Code"}),zt("code")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>vt("stream.name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Stream"}),zt("stream.name")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>vt("capacity"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Capacity"}),zt("capacity")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>vt("created_at"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Created At"}),zt("created_at")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===We.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:6,className:"px-4 py-8 text-center text-sm text-gray-500",children:"No classes found"})}):We.map((e,t)=>{var r;return(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs font-medium text-gray-900",children:e.name}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.code}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:(null===(r=e.stream)||void 0===r?void 0:r.name)||"N/A"}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.capacity}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:new Date(e.created_at).toLocaleDateString()}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("button",{onClick:()=>{},className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors duration-200",title:"View Details",children:H({className:"w-3 h-3"})}),(0,o.jsx)(ce,{permissions:["student_crud"],children:(0,o.jsx)("div",{className:"relative","data-dropdown-container":!0,children:(0,o.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),jt(e.id,t)},className:"p-1 rounded-md transition-colors duration-200 cursor-pointer "+(E===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:B({className:"w-3 h-3"})})})})]})})]},e.id)})})]})})}),"streams"===S&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm relative",children:Ye?(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading streams..."})]}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>vt("name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Stream Name"}),zt("name")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>vt("code"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Stream Code"}),zt("code")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>vt("description"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Description"}),zt("description")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>vt("created_at"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Created At"}),zt("created_at")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===qe.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:5,className:"px-4 py-8 text-center text-sm text-gray-500",children:"No streams found"})}):qe.map((e,t)=>(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs font-medium text-gray-900",children:e.name}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.code}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.description}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:new Date(e.created_at).toLocaleDateString()}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("button",{onClick:()=>{},className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors duration-200",title:"View Details",children:H({className:"w-3 h-3"})}),(0,o.jsx)(ce,{permissions:["student_crud"],children:(0,o.jsx)("div",{className:"relative","data-dropdown-container":!0,children:(0,o.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),jt(e.id,t)},className:"p-1 rounded-md transition-colors duration-200 cursor-pointer "+(E===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:B({className:"w-3 h-3"})})})})]})})]},e.id))})]})})}),"academic"===S&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Academic Information"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Academic data will be displayed here."})]})}),"financial"===S&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Financial Information"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Financial data will be displayed here."})]})}),"attendance"===S&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Attendance Information"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Attendance data will be displayed here."})]})}),(0,o.jsxs)("div",{className:"flex items-center justify-between mt-8",children:[(0,o.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(0,o.jsx)("span",{className:"font-medium",children:ut+1})," to ",(0,o.jsx)("span",{className:"font-medium",children:mt})," of ",(0,o.jsx)("span",{className:"font-medium",children:rt})," results"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>{tt(e=>Math.max(e-1,1))},disabled:!lt||"admission"===S&&!c&&s,className:"px-3 py-1.5 text-xs font-medium border rounded-lg transition-colors duration-200 "+("admission"===S&&!c&&s?"text-gray-400 bg-gray-100 border-gray-200 cursor-not-allowed":"text-gray-500 bg-white border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),children:"Previous"}),(0,o.jsxs)("span",{className:"px-3 py-1.5 text-xs font-medium text-gray-700",children:["Page ",et," of ",dt," (",dt>1?`${dt} pages`:"1 page",")"]}),(0,o.jsx)("button",{onClick:()=>{tt(e=>Math.min(e+1,dt))},disabled:!at||"admission"===S&&!c&&s,className:"px-3 py-1.5 text-xs font-medium border rounded-lg transition-colors duration-200 "+("admission"===S&&!c&&s?"text-gray-400 bg-gray-100 border-gray-200 cursor-not-allowed":"text-gray-500 bg-white border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),children:"Next"})]})]})]}),k&&w&&(0,o.jsx)(ie,{student:w,isOpen:k,onClose:()=>{_(!1),N(null)}}),(0,o.jsx)("div",{className:"fixed inset-0 bg-black transition-opacity duration-500 ease-out z-50 "+(O?"bg-opacity-50":"bg-opacity-0 pointer-events-none"),children:(0,o.jsx)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-500 ease-out flex flex-col "+(O?"translate-x-0":"translate-x-full"),children:(D||Q||q)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("h2",{className:"text-xl font-bold text-gray-900 font-elegant",children:["admission"===S&&"Edit Student","classes"===S&&"Edit Class","streams"===S&&"Edit Stream","academic"===S&&"Edit Academic","financial"===S&&"Edit Financial","attendance"===S&&"Edit Attendance"]}),(0,o.jsxs)("p",{className:"text-xs text-gray-500 mt-1 font-modern",children:["admission"===S&&"Update student information","classes"===S&&"Update class information","streams"===S&&"Update stream information","academic"===S&&"Update academic information","financial"===S&&"Update financial information","attendance"===S&&"Update attendance information"]})]}),(0,o.jsx)("button",{onClick:_t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-all duration-200",children:X({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[Object.keys(Fe).length>0&&(0,o.jsxs)("div",{className:"mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,o.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:(0,o.jsx)("span",{className:"text-white text-xs font-bold",children:"!"})}),(0,o.jsx)("h3",{className:"text-sm font-semibold text-red-800",children:"Please fix the following errors:"})]}),(0,o.jsx)("ul",{className:"text-xs text-red-700 space-y-1",children:Object.entries(Fe).map(e=>{let[t,r]=e;const n={admissionNumber:"Admission Number",fullName:"Full Name",dateOfBirth:"Date of Birth",dateOfAdmission:"Date of Admission",classOnAdmission:"Class on Admission ID",currentClass:"Current Class ID",lastSchoolAttended:"Last School Attended",guardianName:"Guardian Name",guardianPhone:"Guardian Phone",guardianRelationship:"Guardian Relationship",boardingStatus:"Boarding Status",address:"Address",birthCertificateNo:"Birth Certificate Number",schoolLeavingCertificateNumber:"School Leaving Certificate Number",remarks:"Remarks"}[t]||t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase());return(0,o.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,o.jsx)("span",{className:"text-red-500 mt-0.5",children:"\u2022"}),(0,o.jsxs)("span",{children:[(0,o.jsxs)("span",{className:"font-medium",children:[n,":"]})," ",r[0]]})]},t)})})]}),(0,o.jsxs)("div",{className:"p-6 space-y-4",children:[D&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(me,{title:"Basic Information *",defaultExpanded:!0,isActive:"basic-info"===Ae,onSectionClick:()=>Le("basic-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Admission Number *"}),(0,o.jsx)("input",{type:"text",value:D.admissionNumber,onChange:e=>At("admissionNumber",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("admissionNumber")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter admission number"}),pt("admissionNumber")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("admissionNumber")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Full Names *"}),(0,o.jsx)("input",{type:"text",value:D.fullName,onChange:e=>At("fullName",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("fullName")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter full names"}),pt("fullName")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("fullName")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Date Of Birth *"}),(0,o.jsx)("input",{type:"date",value:D.dateOfBirth,onChange:e=>At("dateOfBirth",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("dateOfBirth")?"border-red-300 focus:ring-red-500":"border-gray-200")}),pt("dateOfBirth")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("dateOfBirth")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Gender *"}),(0,o.jsxs)("select",{value:D.gender,onChange:e=>At("gender",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("gender")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"Male",children:"Male"}),(0,o.jsx)("option",{value:"Female",children:"Female"}),(0,o.jsx)("option",{value:"Other",children:"Other"})]}),pt("gender")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("gender")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Date Of Admission *"}),(0,o.jsx)("input",{type:"date",value:D.dateOfAdmission,onChange:e=>At("dateOfAdmission",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("dateOfAdmission")?"border-red-300 focus:ring-red-500":"border-gray-200")}),pt("dateOfAdmission")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("dateOfAdmission")})]})]}),(0,o.jsxs)(me,{title:"Academic Information *",defaultExpanded:!0,isActive:"academic-info"===Ae,onSectionClick:()=>Le("academic-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Class On Admission *"}),(0,o.jsxs)("select",{value:D.classOnAdmission,onChange:e=>At("classOnAdmission",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("classOnAdmission")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"",children:"Select class on admission"}),We.map(e=>{var t;return(0,o.jsxs)("option",{value:e.id,children:[e.name," - ",(null===(t=e.stream)||void 0===t?void 0:t.name)||"No Stream"]},e.id)})]}),pt("classOnAdmission")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("classOnAdmission")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Current Class *"}),(0,o.jsxs)("select",{value:D.currentClass,onChange:e=>At("currentClass",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("currentClass")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"",children:"Select current class"}),We.map(e=>{var t;return(0,o.jsxs)("option",{value:e.id,children:[e.name," - ",(null===(t=e.stream)||void 0===t?void 0:t.name)||"No Stream"]},e.id)})]}),pt("currentClass")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("currentClass")})]})]}),(0,o.jsxs)(me,{title:"Parent Information",defaultExpanded:!1,isActive:"parent-info"===Ae,onSectionClick:()=>Le("parent-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Guardian Name *"}),(0,o.jsx)("input",{type:"text",value:D.guardianName,onChange:e=>At("guardianName",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("guardianName")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter guardian name"}),pt("guardianName")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("guardianName")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Guardian Phone *"}),(0,o.jsx)("input",{type:"tel",value:D.guardianPhone,onChange:e=>At("guardianPhone",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("guardianPhone")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter guardian phone"}),pt("guardianPhone")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("guardianPhone")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Guardian Relationship"}),(0,o.jsxs)("select",{value:D.guardianRelationship,onChange:e=>At("guardianRelationship",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("guardianRelationship")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"",children:"Select relationship"}),(0,o.jsx)("option",{value:"Father",children:"Father"}),(0,o.jsx)("option",{value:"Mother",children:"Mother"}),(0,o.jsx)("option",{value:"Guardian",children:"Guardian"}),(0,o.jsx)("option",{value:"Other",children:"Other"})]}),pt("guardianRelationship")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("guardianRelationship")})]})]}),(0,o.jsxs)(me,{title:"Other Information",defaultExpanded:!1,isActive:"other-info"===Ae,onSectionClick:()=>Le("other-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Address"}),(0,o.jsx)("textarea",{value:D.address,onChange:e=>At("address",e.target.value),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white resize-none text-xs "+(pt("address")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter address"}),pt("address")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("address")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Last School Attended"}),(0,o.jsx)("input",{type:"text",value:D.lastSchoolAttended,onChange:e=>At("lastSchoolAttended",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("lastSchoolAttended")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter last school attended"}),pt("lastSchoolAttended")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("lastSchoolAttended")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Birth Certificate Number"}),(0,o.jsx)("input",{type:"text",value:D.birthCertificateNo,onChange:e=>At("birthCertificateNo",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("birthCertificateNo")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter birth certificate number"}),pt("birthCertificateNo")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("birthCertificateNo")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Boarding Status"}),(0,o.jsxs)("select",{value:D.boardingStatus,onChange:e=>At("boardingStatus",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("boardingStatus")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"",children:"Select boarding status"}),(0,o.jsx)("option",{value:"Day",children:"Day"}),(0,o.jsx)("option",{value:"Boarding",children:"Boarding"})]}),pt("boardingStatus")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("boardingStatus")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Exempted From Religious Instruction"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:"checkbox",checked:D.exemptedFromReligiousInstruction,onChange:e=>At("exemptedFromReligiousInstruction",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,o.jsx)("span",{className:"text-xs text-gray-600",children:"Yes, exempted from religious instruction"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Date of Leaving"}),(0,o.jsx)("input",{type:"date",value:D.dateOfLeaving,onChange:e=>At("dateOfLeaving",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("dateOfLeaving")?"border-red-300 focus:ring-red-500":"border-gray-200")}),pt("dateOfLeaving")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("dateOfLeaving")})]})]})]}),q&&(0,o.jsxs)(me,{title:"Stream Information *",defaultExpanded:!0,isActive:"stream-info"===Ae,onSectionClick:()=>Le("stream-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Stream Name *"}),(0,o.jsx)("input",{type:"text",value:q.name,onChange:e=>Lt("name",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("name")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter stream name"}),pt("name")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("name")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Stream Code *"}),(0,o.jsx)("input",{type:"text",value:q.code,onChange:e=>Lt("code",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("code")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter stream code"}),pt("code")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("code")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Description"}),(0,o.jsx)("textarea",{value:q.description,onChange:e=>Lt("description",e.target.value),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white resize-none text-xs "+(pt("description")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter stream description"}),pt("description")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("description")})]})]}),Q&&(0,o.jsxs)(me,{title:"Class Information *",defaultExpanded:!0,isActive:"class-info"===Ae,onSectionClick:()=>Le("class-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Class Name *"}),(0,o.jsx)("input",{type:"text",value:Q.name,onChange:e=>Tt("name",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("name")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter class name"}),pt("name")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("name")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Class Code *"}),(0,o.jsx)("input",{type:"text",value:Q.code,onChange:e=>Tt("code",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("code")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter class code"}),pt("code")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("code")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Stream *"}),(0,o.jsxs)("select",{value:(null===(e=Q.stream)||void 0===e?void 0:e.id)||"",onChange:e=>Tt("streamId",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("streamId")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"",children:"Select a stream"}),qe.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]}),pt("streamId")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("streamId")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Level *"}),(0,o.jsx)("input",{type:"number",value:Q.level,onChange:e=>Tt("level",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("level")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter class level"}),pt("level")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("level")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Capacity *"}),(0,o.jsx)("input",{type:"number",value:Q.capacity,onChange:e=>Tt("capacity",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pt("capacity")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter class capacity"}),pt("capacity")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pt("capacity")})]})]})]})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-100 flex-shrink-0",children:[(0,o.jsx)("button",{onClick:_t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:()=>{D?Pt():q?(async()=>{if(q&&W)try{if(!wt())return void se({message:"No changes detected.",type:"error"});const e={name:q.name,code:q.code,description:q.description},t=await l.students.updateStream(q.id,e);Ve(e=>e.map(e=>e.id===q.id?t:e)),se({message:"Stream updated successfully!",type:"success"}),Oe({}),_t(),setTimeout(()=>{se(null)},3e3)}catch(r){var e,t;if(console.error("Error updating stream:",r),null!==(e=r.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors){const e={};Object.entries(r.response.data.errors).forEach(t=>{let[r,n]=t;e[r]=n}),Oe(e),se({message:r.response.data.message||"Please fix the validation errors below.",type:"error"})}else Oe({}),se({message:"Failed to update stream. Please try again.",type:"error"});setTimeout(()=>{se(null)},5e3)}})():Q&&(async()=>{if(Q&&J)try{var e;if(!Nt())return void se({message:"No changes detected.",type:"error"});const t={name:Q.name,code:Q.code,stream_id:null===(e=Q.stream)||void 0===e?void 0:e.id,level:Q.level,capacity:Q.capacity},r=await l.students.updateClass(Q.id,t);Ge(e=>e.map(e=>e.id===Q.id?r:e)),se({message:"Class updated successfully!",type:"success"}),Oe({}),_t(),setTimeout(()=>{se(null)},3e3)}catch(n){var t,r;if(console.error("Error updating class:",n),null!==(t=n.response)&&void 0!==t&&null!==(r=t.data)&&void 0!==r&&r.errors){const e={};Object.entries(n.response.data.errors).forEach(t=>{let[r,n]=t,a=r.replace(/_([a-z])/g,e=>e[1].toUpperCase());"stream_id"===r&&(a="streamId"),e[a]=n}),Oe(e),se({message:n.response.data.message||"Please fix the validation errors below.",type:"error"})}else Oe({}),se({message:"Failed to update class. Please try again.",type:"error"});setTimeout(()=>{se(null)},5e3)}})()},disabled:D&&!kt()||q&&!wt()||Q&&!Nt()||!1,className:"px-4 py-2 rounded-lg transition-all duration-200 font-medium "+(D&&!kt()||q&&!wt()||Q&&!Nt()?"text-gray-400 bg-gray-100 cursor-not-allowed":"text-white bg-blue-600 hover:bg-blue-700"),children:"Save Changes"})]})]})})}),(0,o.jsx)("div",{className:"fixed inset-0 bg-black transition-opacity duration-500 ease-out z-50 "+(re?"bg-opacity-50":"bg-opacity-0 pointer-events-none"),children:(0,o.jsx)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-500 ease-out flex flex-col "+(re?"translate-x-0":"translate-x-full"),children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("h2",{className:"text-xl font-bold text-gray-900 font-elegant",children:["admission"===S&&"Add New Student","classes"===S&&"Add New Class","streams"===S&&"Add New Stream","academic"===S&&"Add New Academic","financial"===S&&"Add New Financial","attendance"===S&&"Add New Attendance"]}),(0,o.jsxs)("p",{className:"text-xs text-gray-500 mt-1 font-modern",children:["admission"===S&&"Enter student information","classes"===S&&"Enter class information","streams"===S&&"Enter stream information","academic"===S&&"Enter academic information","financial"===S&&"Enter financial information","attendance"===S&&"Enter attendance information"]})]}),(0,o.jsx)("button",{onClick:ft,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-all duration-200",children:X({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[Object.keys(Te).length>0&&(0,o.jsxs)("div",{className:"mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,o.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:(0,o.jsx)("span",{className:"text-white text-xs font-bold",children:"!"})}),(0,o.jsx)("h3",{className:"text-sm font-semibold text-red-800",children:"Please fix the following errors:"})]}),(0,o.jsx)("ul",{className:"text-xs text-red-700 space-y-1",children:Object.entries(Te).map(e=>{let[t,r]=e;const n={admissionNumber:"Admission Number",fullName:"Full Name",dateOfBirth:"Date of Birth",dateOfAdmission:"Date of Admission",classOnAdmission:"Class on Admission ID",currentClass:"Current Class ID",lastSchoolAttended:"Last School Attended",guardianName:"Guardian Name",guardianPhone:"Guardian Phone",guardianRelationship:"Guardian Relationship",boardingStatus:"Boarding Status",address:"Address",birthCertificateNo:"Birth Certificate Number",schoolLeavingCertificateNumber:"School Leaving Certificate Number",remarks:"Remarks"}[t]||t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase());return(0,o.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,o.jsx)("span",{className:"text-red-500 mt-0.5",children:"\u2022"}),(0,o.jsxs)("span",{children:[(0,o.jsxs)("span",{className:"font-medium",children:[n,":"]})," ",r[0]]})]},t)})})]}),(0,o.jsxs)("div",{className:"p-6 space-y-4",children:["admission"===S&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(me,{title:"Basic Information *",defaultExpanded:!0,isActive:"basic-info"===Ee,onSectionClick:()=>Pe("basic-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Admission Number *"}),(0,o.jsx)("input",{type:"text",value:Re.admissionNumber,onChange:e=>gt("admissionNumber",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(ht("admissionNumber")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter admission number"}),ht("admissionNumber")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("admissionNumber")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Full Names *"}),(0,o.jsx)("input",{type:"text",value:Re.fullName,onChange:e=>gt("fullName",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(ht("fullName")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter full names"}),ht("fullName")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("fullName")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Date Of Birth *"}),(0,o.jsx)("input",{type:"date",value:Re.dateOfBirth,onChange:e=>gt("dateOfBirth",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(ht("dateOfBirth")?"border-red-300 focus:ring-red-500":"border-gray-200")}),ht("dateOfBirth")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("dateOfBirth")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Gender *"}),(0,o.jsxs)("select",{value:Re.gender,onChange:e=>gt("gender",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(ht("gender")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"Male",children:"Male"}),(0,o.jsx)("option",{value:"Female",children:"Female"}),(0,o.jsx)("option",{value:"Other",children:"Other"})]}),ht("gender")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("gender")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Date Of Admission *"}),(0,o.jsx)("input",{type:"date",value:Re.dateOfAdmission,onChange:e=>gt("dateOfAdmission",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(ht("dateOfAdmission")?"border-red-300 focus:ring-red-500":"border-gray-200")}),ht("dateOfAdmission")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("dateOfAdmission")})]})]}),(0,o.jsxs)(me,{title:"Academic Information *",defaultExpanded:!0,isActive:"academic-info"===Ee,onSectionClick:()=>Pe("academic-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Class On Admission *"}),(0,o.jsxs)("select",{value:Re.classOnAdmission,onChange:e=>gt("classOnAdmission",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(ht("classOnAdmission")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"",children:"Select class on admission"}),We.map(e=>{var t;return(0,o.jsxs)("option",{value:e.id,children:[e.name," - ",(null===(t=e.stream)||void 0===t?void 0:t.name)||"No Stream"]},e.id)})]}),ht("classOnAdmission")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("classOnAdmission")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Current Class *"}),(0,o.jsxs)("select",{value:Re.currentClass,onChange:e=>gt("currentClass",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(ht("currentClass")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"",children:"Select current class"}),We.map(e=>{var t;return(0,o.jsxs)("option",{value:e.id,children:[e.name," - ",(null===(t=e.stream)||void 0===t?void 0:t.name)||"No Stream"]},e.id)})]}),ht("currentClass")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("currentClass")})]})]}),(0,o.jsxs)(me,{title:"Parent Information",defaultExpanded:!1,isActive:"parent-info"===Ee,onSectionClick:()=>Pe("parent-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Guardian Name *"}),(0,o.jsx)("input",{type:"text",value:Re.guardianName,onChange:e=>gt("guardianName",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(ht("guardianName")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter guardian name"}),ht("guardianName")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("guardianName")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Guardian Phone *"}),(0,o.jsx)("input",{type:"tel",value:Re.guardianPhone,onChange:e=>gt("guardianPhone",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(ht("guardianPhone")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter guardian phone"}),ht("guardianPhone")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("guardianPhone")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Guardian Relationship"}),(0,o.jsxs)("select",{value:Re.guardianRelationship,onChange:e=>gt("guardianRelationship",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",children:[(0,o.jsx)("option",{value:"",children:"Select relationship"}),(0,o.jsx)("option",{value:"Father",children:"Father"}),(0,o.jsx)("option",{value:"Mother",children:"Mother"}),(0,o.jsx)("option",{value:"Guardian",children:"Guardian"}),(0,o.jsx)("option",{value:"Other",children:"Other"})]})]})]}),(0,o.jsxs)(me,{title:"Other Information",defaultExpanded:!1,isActive:"other-info"===Ee,onSectionClick:()=>Pe("other-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Address"}),(0,o.jsx)("textarea",{value:Re.address,onChange:e=>gt("address",e.target.value),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white resize-none text-xs "+(ht("address")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter address"}),ht("address")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("address")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Last School Attended"}),(0,o.jsx)("input",{type:"text",value:Re.lastSchoolAttended,onChange:e=>gt("lastSchoolAttended",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"Enter last school attended"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Birth Certificate Number"}),(0,o.jsx)("input",{type:"text",value:Re.birthCertificateNo,onChange:e=>gt("birthCertificateNo",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(ht("birthCertificateNo")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter birth certificate number"}),ht("birthCertificateNo")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("birthCertificateNo")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Boarding Status"}),(0,o.jsxs)("select",{value:Re.boardingStatus,onChange:e=>gt("boardingStatus",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(ht("boardingStatus")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"",children:"Select boarding status"}),(0,o.jsx)("option",{value:"Day",children:"Day"}),(0,o.jsx)("option",{value:"Boarding",children:"Boarding"})]}),ht("boardingStatus")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("boardingStatus")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Exempted From Religious Instruction"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:"checkbox",checked:Re.exemptedFromReligiousInstruction,onChange:e=>gt("exemptedFromReligiousInstruction",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,o.jsx)("span",{className:"text-xs text-gray-600",children:"Yes, exempted from religious instruction"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Date of Leaving"}),(0,o.jsx)("input",{type:"date",value:Re.dateOfLeaving,onChange:e=>gt("dateOfLeaving",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs"})]})]})]}),"streams"===S&&(0,o.jsxs)(me,{title:"Stream Information *",defaultExpanded:!0,isActive:"stream-info"===Ee,onSectionClick:()=>Pe("stream-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Stream Name *"}),(0,o.jsx)("input",{type:"text",value:(null===Me||void 0===Me?void 0:Me.name)||"",onChange:e=>bt("name",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(ht("name")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter stream name"}),ht("name")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("name")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Stream Code *"}),(0,o.jsx)("input",{type:"text",value:(null===Me||void 0===Me?void 0:Me.code)||"",onChange:e=>bt("code",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(ht("code")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter stream code"}),ht("code")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("code")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Description"}),(0,o.jsx)("textarea",{value:(null===Me||void 0===Me?void 0:Me.description)||"",onChange:e=>bt("description",e.target.value),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white resize-none text-xs "+(ht("description")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter stream description"}),ht("description")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("description")})]})]}),"classes"===S&&(0,o.jsxs)(me,{title:"Class Information *",defaultExpanded:!0,isActive:"class-info"===Ee,onSectionClick:()=>Pe("class-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Class Name *"}),(0,o.jsx)("input",{type:"text",value:(null===Be||void 0===Be?void 0:Be.name)||"",onChange:e=>yt("name",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(ht("name")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter class name"}),ht("name")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("name")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Class Code *"}),(0,o.jsx)("input",{type:"text",value:(null===Be||void 0===Be?void 0:Be.code)||"",onChange:e=>yt("code",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(ht("code")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter class code"}),ht("code")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("code")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Stream *"}),(0,o.jsxs)("select",{value:(null===Be||void 0===Be?void 0:Be.streamId)||"",onChange:e=>yt("streamId",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(ht("streamId")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"",children:"Select a stream"}),qe.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]}),ht("streamId")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("streamId")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Level *"}),(0,o.jsx)("input",{type:"number",value:(null===Be||void 0===Be?void 0:Be.level)||"",onChange:e=>yt("level",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(ht("level")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter class level"}),ht("level")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("level")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Capacity *"}),(0,o.jsx)("input",{type:"number",value:(null===Be||void 0===Be?void 0:Be.capacity)||"",onChange:e=>yt("capacity",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(ht("capacity")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter class capacity"}),ht("capacity")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:ht("capacity")})]})]})]})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-100 flex-shrink-0",children:[(0,o.jsx)("button",{onClick:ft,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsxs)("button",{onClick:async()=>{try{if("admission"===S){const e={admission_number:(n=Re).admissionNumber||n.admission_number||"",pupil_name:n.fullName||n.pupil_name||"",date_of_birth:n.dateOfBirth||n.date_of_birth||"",gender:n.gender||"M",date_of_admission:n.dateOfAdmission||n.date_of_admission||"",class_on_admission_id:n.classOnAdmission||n.class_on_admission_id||n.class||"",current_class_id:n.currentClass||n.current_class_id||"",guardian_name:n.guardianName||n.guardian_name||n.parentName||"",guardian_phone:n.guardianPhone||n.guardian_phone||"",guardian_relationship:n.guardianRelationship||n.guardian_relationship||"",address:n.address||"",last_school_attended:n.lastSchoolAttended||n.last_school_attended||"",boarding_status:n.boardingStatus||n.boarding_status||"Day",exempted_from_religious_instruction:n.exemptedFromReligiousInstruction||n.exempted_from_religious_instruction||!1,birth_certificate_no:n.birthCertificateNo||n.birth_certificate_no||"",image:n.image||"",date_of_leaving:n.dateOfLeaving||n.date_of_leaving||"",school_leaving_certificate_number:n.schoolLeavingCertificateNumber||n.school_leaving_certificate_number||"",remarks:n.remarks||""};await l.students.create(e),await ct(),se({message:"Student added successfully!",type:"success"})}else"streams"===S?(console.log("Adding stream:",Me),se({message:"Stream added successfully!",type:"success"})):"classes"===S&&(console.log("Adding class:",Be),se({message:"Class added successfully!",type:"success"}));ze({}),De({admissionNumber:"",fullName:"",dateOfBirth:"",gender:"M",dateOfAdmission:"",classOnAdmission:"",currentClass:"",lastSchoolAttended:"",guardianName:"",guardianPhone:"",guardianRelationship:"",address:"",boardingStatus:"Day",exemptedFromReligiousInstruction:!1,birthCertificateNo:"",image:"",dateOfLeaving:"",schoolLeavingCertificateNumber:"",remarks:""}),Ie({name:"",code:"",description:""}),Ue({name:"",code:"",streamId:"",level:0,capacity:0}),setTimeout(()=>{ft()},100),setTimeout(()=>{se(null)},3e3)}catch(a){var e,t,r;if(console.error("Error adding item:",a),null!==(e=a.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors){const e={};Object.entries(a.response.data.errors).forEach(t=>{let[r,n]=t,a=r.replace(/_([a-z])/g,e=>e[1].toUpperCase());"pupil_name"===r&&(a="fullName"),e[a]=n}),ze(e),se({message:a.response.data.message||"Please fix the validation errors below.",type:"error"})}else if(null!==(r=a.response)&&void 0!==r&&r.data)if("object"===typeof a.response.data&&null!==a.response.data){const e=a.response.data.errors||a.response.data;if("object"===typeof e&&null!==e){const t={};Object.entries(e).forEach(e=>{let[r,n]=e,a=r.replace(/_([a-z])/g,e=>e[1].toUpperCase());"pupil_name"===r&&(a="fullName"),t[a]=Array.isArray(n)?n:[String(n)]}),ze(t),se({message:"Please fix the validation errors below.",type:"error"})}else ze({}),se({message:"Failed to add item. Please try again.",type:"error"})}else ze({}),se({message:"Failed to add item. Please try again.",type:"error"});else ze({}),se({message:"Failed to add item. Please try again.",type:"error"});setTimeout(()=>{se(null)},5e3)}var n},disabled:"admission"===S&&(!Re.fullName||!Re.admissionNumber||!Re.dateOfBirth||!Re.dateOfAdmission||!Re.classOnAdmission||!Re.currentClass||!Re.guardianName||!Re.guardianPhone||!Re.address)||"streams"===S&&(!Me.name||!Me.code)||"classes"===S&&(!Be.name||!Be.code||!Be.streamId),className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium",children:["admission"===S&&"Add Student","classes"===S&&"Add Class","streams"===S&&"Add Stream","academic"===S&&"Add Academic","financial"===S&&"Add Financial","attendance"===S&&"Add Attendance"]})]})]})})}),E&&(0,le.createPortal)((0,o.jsx)("div",{className:"fixed w-32 bg-white rounded-md shadow-lg border border-gray-200 z-[9999]","data-portal-dropdown":!0,style:{left:`${A.x}px`,top:`${A.y}px`},onClick:e=>e.stopPropagation(),children:(0,o.jsxs)("div",{className:"py-1",children:[(0,o.jsx)(ce,{permissions:["student_crud"],children:(0,o.jsx)(ue,{tooltipMessage:!c&&s?i:"",disabled:!c&&s,className:"w-full",children:(0,o.jsxs)("button",{onClick:e=>{if(e.stopPropagation(),"admission"===S){if(!c&&!s){const e=$e.find(e=>e.id===E);e&&(e=>{M(e),$(e),R(!0),P(null),Le("basic-info"),Oe({})})(e)}}else if("classes"===S){const e=We.find(e=>e.id===E);e&&(e=>{Y(e),te(e),R(!0),P(null),Le("class-info"),Oe({})})(e)}else if("streams"===S){const e=qe.find(e=>e.id===E);e&&(e=>{V(e),G(e),R(!0),P(null),Le("stream-info"),Oe({})})(e)}},disabled:"admission"===S&&!c&&s,className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[I({className:"w-3 h-3 mr-2"}),"Edit"]})})}),"admission"===S&&(0,o.jsx)(ce,{permissions:["student_crud"],children:(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=$e.find(e=>e.id===E);t&&(e=>{he(e),xe(!0),P(null),je({parent:"",relationship_type:"",is_primary_contact:!1,is_emergency_contact:!1,can_pick_up:!1,notes:""}),Ct()})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-green-50 hover:text-green-700 transition-colors duration-200",children:[ee({className:"w-3 h-3 mr-2"}),"Add Parent"]})}),(0,o.jsx)(ce,{permissions:["student_crud"],children:(0,o.jsx)(ue,{tooltipMessage:!c&&s?i:"",disabled:!c&&s,className:"w-full",children:(0,o.jsxs)("button",{onClick:e=>{if(e.stopPropagation(),"admission"===S){if(!c&&!s){const e=$e.find(e=>e.id===E);e&&(async e=>{try{e.id&&await l.students.delete(e.id),He(t=>t.filter(t=>t.id!==e.id)),P(null)}catch(t){console.error("Error deleting student:",t)}})(e)}}else if("classes"===S){const e=We.find(e=>e.id===E);e&&console.log("Delete class:",e)}else if("streams"===S){const e=qe.find(e=>e.id===E);e&&console.log("Delete stream:",e)}},disabled:"admission"===S&&!c&&s,className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-red-50 hover:text-red-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[Z({className:"w-3 h-3 mr-2"}),"Delete"]})})})]})}),document.body),oe&&fe&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black transition-opacity duration-500 ease-out z-50 "+(oe?"bg-opacity-50":"bg-opacity-0 pointer-events-none"),children:(0,o.jsxs)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-500 ease-out flex flex-col "+(oe?"translate-x-0":"translate-x-full"),children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-elegant",children:"Add Parent"}),(0,o.jsxs)("p",{className:"text-xs text-gray-500 mt-1 font-modern",children:["Associate parent with ",fe.fullName||fe.pupil_name]})]}),(0,o.jsx)("button",{onClick:St,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-all duration-200",children:X({className:"w-4 h-4"})})]}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,o.jsxs)("div",{className:"p-6 space-y-4",children:[we.non_field_errors&&we.non_field_errors.length>0&&(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-xs text-red-800",children:we.non_field_errors[0]})})]})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Parent *"}),be?(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,o.jsx)("span",{className:"text-xs text-gray-500",children:"Loading parents..."})]}):(0,o.jsxs)("div",{className:"relative parent-dropdown-container",children:[(0,o.jsx)("div",{className:"w-full px-3 py-2 border rounded-lg focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-transparent transition-all duration-200 bg-gray-50 focus-within:bg-white text-xs cursor-pointer "+(Et("parent")?"border-red-300 focus-within:ring-red-500":"border-gray-200"),onClick:()=>Ce(!Se),children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("span",{className:ve.parent?"text-gray-900":"text-gray-500",children:ve.parent?(null===(t=pe.find(e=>e.id===ve.parent))||void 0===t?void 0:t.full_name)+" ("+(null===(r=pe.find(e=>e.id===ve.parent))||void 0===r?void 0:r.relationship)+")":"Select a parent"}),(0,o.jsx)("svg",{className:"w-4 h-4 text-gray-400 transition-transform duration-200 "+(Se?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),Se&&(0,o.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[(0,o.jsx)("div",{className:"p-2 border-b border-gray-100",children:(0,o.jsx)("input",{type:"text",placeholder:"Search parents...",value:ke,onChange:e=>_e(e.target.value),className:"w-full px-3 py-2 text-xs border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onClick:e=>e.stopPropagation()})}),(0,o.jsxs)("div",{className:"max-h-48 overflow-y-auto",children:[pe.filter(e=>e.full_name.toLowerCase().includes(ke.toLowerCase())||e.relationship.toLowerCase().includes(ke.toLowerCase())||e.email.toLowerCase().includes(ke.toLowerCase())).map(e=>(0,o.jsxs)("div",{className:"px-3 py-2 text-xs hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>{je(t=>({...t,parent:e.id})),Ce(!1),_e(""),we.parent&&Ne(e=>({...e,parent:[]}))},children:[(0,o.jsx)("div",{className:"font-medium text-gray-900",children:e.full_name}),(0,o.jsxs)("div",{className:"text-gray-500 text-xs",children:[e.relationship," \u2022 ",e.email]})]},e.id)),0===pe.filter(e=>e.full_name.toLowerCase().includes(ke.toLowerCase())||e.relationship.toLowerCase().includes(ke.toLowerCase())||e.email.toLowerCase().includes(ke.toLowerCase())).length&&(0,o.jsx)("div",{className:"px-3 py-2 text-xs text-gray-500 text-center",children:"No parents found"})]})]})]}),Et("parent")&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Et("parent")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Relationship Type *"}),(0,o.jsxs)("select",{value:ve.relationship_type,onChange:e=>{je(t=>({...t,relationship_type:e.target.value})),we.relationship_type&&Ne(e=>({...e,relationship_type:[]}))},className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(Et("relationship_type")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"",children:"Select relationship"}),(0,o.jsx)("option",{value:"Father",children:"Father"}),(0,o.jsx)("option",{value:"Mother",children:"Mother"}),(0,o.jsx)("option",{value:"Guardian",children:"Guardian"}),(0,o.jsx)("option",{value:"Other",children:"Other"})]}),Et("relationship_type")&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Et("relationship_type")})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",id:"is_primary_contact",checked:ve.is_primary_contact,onChange:e=>{je(t=>({...t,is_primary_contact:e.target.checked})),we.is_primary_contact&&Ne(e=>({...e,is_primary_contact:[]}))},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 "+(Et("is_primary_contact")?"border-red-300":"")}),(0,o.jsx)("label",{htmlFor:"is_primary_contact",className:"ml-2 text-xs text-gray-700",children:"Primary Contact"})]}),Et("is_primary_contact")&&(0,o.jsx)("p",{className:"mt-1 ml-6 text-xs text-red-600",children:Et("is_primary_contact")})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",id:"is_emergency_contact",checked:ve.is_emergency_contact,onChange:e=>{je(t=>({...t,is_emergency_contact:e.target.checked})),we.is_emergency_contact&&Ne(e=>({...e,is_emergency_contact:[]}))},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 "+(Et("is_emergency_contact")?"border-red-300":"")}),(0,o.jsx)("label",{htmlFor:"is_emergency_contact",className:"ml-2 text-xs text-gray-700",children:"Emergency Contact"})]}),Et("is_emergency_contact")&&(0,o.jsx)("p",{className:"mt-1 ml-6 text-xs text-red-600",children:Et("is_emergency_contact")})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",id:"can_pick_up",checked:ve.can_pick_up,onChange:e=>{je(t=>({...t,can_pick_up:e.target.checked})),we.can_pick_up&&Ne(e=>({...e,can_pick_up:[]}))},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 "+(Et("can_pick_up")?"border-red-300":"")}),(0,o.jsx)("label",{htmlFor:"can_pick_up",className:"ml-2 text-xs text-gray-700",children:"Can Pick Up"})]}),Et("can_pick_up")&&(0,o.jsx)("p",{className:"mt-1 ml-6 text-xs text-red-600",children:Et("can_pick_up")})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Notes"}),(0,o.jsx)("textarea",{value:ve.notes,onChange:e=>{je(t=>({...t,notes:e.target.value})),we.notes&&Ne(e=>({...e,notes:[]}))},className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(Et("notes")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Additional notes about this parent relationship",rows:3}),Et("notes")&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Et("notes")})]})]})}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-100 flex-shrink-0",children:[(0,o.jsx)("button",{onClick:St,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if(fe&&fe.id&&ve.parent&&ve.relationship_type)try{await l.students.associateParent(fe.id,ve),se({message:"Parent associated successfully!",type:"success"}),St()}catch(n){var e,t,r;if(console.error("Error associating parent:",n),console.log("Error response data:",null===(e=n.response)||void 0===e?void 0:e.data),null!==(t=n.response)&&void 0!==t&&null!==(r=t.data)&&void 0!==r&&r.errors){const e=n.response.data.errors;console.log("Setting form errors:",e),Ne(e),e.non_field_errors&&e.non_field_errors.length>0&&se({message:e.non_field_errors[0],type:"error"})}else se({message:"Failed to associate parent. Please try again.",type:"error"})}else se({message:"Please fill in all required fields.",type:"error"})},disabled:!ve.parent||!ve.relationship_type,className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium",children:"Add Parent"})]})]})}),ae&&(0,o.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[10000] flex items-center p-4 rounded-lg shadow-lg transition-all duration-300",children:(0,o.jsxs)("div",{className:`flex items-center space-x-3 ${"success"===ae.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"} px-6 py-4 rounded-lg shadow-xl`,children:["success"===ae.type?T({className:"w-5 h-5 text-green-600"}):X({className:"w-5 h-5 text-red-600"}),(0,o.jsx)("span",{className:"text-sm font-medium",children:ae.message}),(0,o.jsx)("button",{onClick:()=>se(null),className:"ml-3 text-gray-400 hover:text-gray-600",children:X({className:"w-4 h-4"})})]})})]})},fe=e=>{let{title:t,children:r,defaultExpanded:a=!0,isActive:s=!1,onSectionClick:l}=e;const[i,c]=(0,n.useState)(a);return(0,o.jsxs)("div",{className:"border rounded-lg transition-all duration-200 "+(s?"border-blue-300 bg-blue-50/30":"border-gray-200 hover:border-gray-300"),children:[(0,o.jsxs)("button",{onClick:()=>{c(!i),l&&l()},className:"w-full px-4 py-3 flex items-center justify-between text-sm font-semibold transition-all duration-200 rounded-t-lg "+(s?"text-blue-900 bg-blue-100/50 hover:bg-blue-100":"text-gray-900 bg-gray-50 hover:bg-gray-100"),children:[(0,o.jsx)("span",{children:t}),i?F({className:"w-4 h-4 transition-colors duration-200 "+(s?"text-blue-600":"text-gray-500")}):z({className:"w-4 h-4 transition-colors duration-200 "+(s?"text-blue-600":"text-gray-500")})]}),i&&(0,o.jsx)("div",{className:"p-4 space-y-4 transition-all duration-200 "+(s?"bg-blue-50/20":""),children:r})]})},he=()=>{const{isAuthenticated:e,isLoading:t}=d(),[r,a]=(0,n.useState)(""),[s,i]=(0,n.useState)(""),[c,u]=(0,n.useState)("features"),[m,x]=(0,n.useState)(""),[f,h]=(0,n.useState)("asc"),[p,g]=(0,n.useState)(""),[b,y]=(0,n.useState)("asc"),[v,j]=(0,n.useState)(null),[w,N]=(0,n.useState)({x:0,y:0}),[k,_]=(0,n.useState)(!1),[S,C]=(0,n.useState)(!1),[E,P]=(0,n.useState)(null),[A,L]=(0,n.useState)(null),[O,R]=(0,n.useState)(null),[D,M]=(0,n.useState)("basic-info"),[U,$]=(0,n.useState)("basic-info"),[q,V]=(0,n.useState)({}),[W,G]=(0,n.useState)({}),[Q,Y]=(0,n.useState)({name:"",display_name:"",description:"",feature_type:"",is_active:!0}),[J,ee]=(0,n.useState)({feature_flag:"",scope_type:"",scope_id:null,is_enabled:!1,percentage:100,start_date:null,end_date:null}),[te,re]=(0,n.useState)([]),[ne,ae]=(0,n.useState)([]),[se,ie]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!t&&e){(async()=>{ie(!0);try{const e=await l.featureFlags.getAll();let t=[];if(e&&"success"===e.status&&e.data&&e.data.results)t=e.data.results;else if(Array.isArray(e))t=e;else if(e&&Array.isArray(e.data))t=e.data;else{if(!(e&&e.features&&Array.isArray(e.features)))throw e&&"error"===e.status?new Error(e.message||"Feature Flags API Error"):(t=[],new Error("Unexpected feature flags API response structure"));t=e.features}re(t);const r=await l.featureFlagStates.getAll();let n=[];n=r&&"success"===r.status&&r.data&&r.data.results?r.data.results:Array.isArray(r)?r:r&&Array.isArray(r.data)?r.data:r&&r.states&&Array.isArray(r.states)?r.states:(r&&r.status,[]),ae(n)}catch(e){console.error("Error loading data:",e),re([]),ae([]),R({message:`Failed to load data: ${e instanceof Error?e.message:"Unknown error"}`,type:"error"}),setTimeout(()=>{R(null)},5e3)}finally{ie(!1)}})()}else t||e||(re([]),ae([]))},[e,t]),(0,n.useEffect)(()=>{const e=setTimeout(()=>{i(r)},500);return()=>clearTimeout(e)},[r]);const oe=(0,n.useMemo)(()=>{if(!Array.isArray(te))return console.warn("Features is not an array:",te),[];let e=te.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())||e.display_name.toLowerCase().includes(s.toLowerCase())||e.description.toLowerCase().includes(s.toLowerCase())||e.feature_type.toLowerCase().includes(s.toLowerCase()));return m&&e.sort((e,t)=>{const r=e[m],n=t[m];if("string"===typeof r&&"string"===typeof n){const e=r.localeCompare(n);return"asc"===f?e:-e}if("boolean"===typeof r&&"boolean"===typeof n){const e=r===n?0:r?-1:1;return"asc"===f?e:-e}return 0}),e},[te,s,m,f]),de=(0,n.useMemo)(()=>{if(!Array.isArray(ne))return console.warn("Feature flag states is not an array:",ne),[];let e=ne.filter(e=>e.scope_type.toLowerCase().includes(s.toLowerCase())||e.scope_id&&e.scope_id.toLowerCase().includes(s.toLowerCase())||e.feature_flag_name.toLowerCase().includes(s.toLowerCase())||e.feature_flag_display_name.toLowerCase().includes(s.toLowerCase()));return p&&e.sort((e,t)=>{const r=e[p],n=t[p];if("string"===typeof r&&"string"===typeof n){const e=r.localeCompare(n);return"asc"===b?e:-e}if("boolean"===typeof r&&"boolean"===typeof n){const e=r===n?0:r?-1:1;return"asc"===b?e:-e}if("number"===typeof r&&"number"===typeof n){const e=r-n;return"asc"===b?e:-e}return 0}),e},[ne,s,p,b]),ue=e=>{"features"===c?m===e?h("asc"===f?"desc":"asc"):(x(e),h("asc")):"feature-flag-states"===c&&(p===e?y("asc"===b?"desc":"asc"):(g(e),y("asc")))},me=e=>"features"===c?m!==e?null:"asc"===f?F({className:"w-3 h-3"}):z({className:"w-3 h-3"}):"feature-flag-states"===c?p!==e?null:"asc"===b?F({className:"w-3 h-3"}):z({className:"w-3 h-3"}):null,xe=()=>{_(!1),Y({name:"",display_name:"",description:"",feature_type:"",is_active:!0})},he=()=>{_(!1),ee({feature_flag:"",scope_type:"",scope_id:null,is_enabled:!1,percentage:100,start_date:null,end_date:null})},pe=(e,t)=>{Y(r=>({...r,[e]:t})),q[e]&&V(t=>{const r={...t};return delete r[e],r})},ge=(e,t)=>{ee(r=>({...r,[e]:t})),q[e]&&V(t=>{const r={...t};return delete r[e],r})},be=()=>{C(!1),P(null),L(null),G({})},ye=(e,t)=>{E&&(P({...E,[e]:t}),W[e]&&G(t=>{const r={...t};return delete r[e],r}))},ve=(e,t)=>{A&&(L({...A,[e]:t}),W[e]&&G(t=>{const r={...t};return delete r[e],r}))};(0,n.useEffect)(()=>{const e=e=>{const t=e.target;t.closest("[data-dropdown-container]")||t.closest("[data-portal-dropdown]")||j(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const je=(e,t)=>{if(v===e)j(null);else{const r=t.currentTarget.getBoundingClientRect(),n=window.innerHeight,a=window.innerWidth,s=80,l=128;let i=r.right-l,o=r.bottom+4;r.bottom+s>n&&(o=r.top-s-4),i<0&&(i=0),i+l>a&&(i=a-l),N({x:i,y:o}),j(e)}};return(0,o.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-4 mb-4",children:(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("nav",{className:"flex space-x-6",children:[(0,o.jsx)("button",{onClick:()=>u("features"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("features"===c?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Feature Flags"}),(0,o.jsx)("button",{onClick:()=>u("feature-flag-states"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("feature-flag-states"===c?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Feature Flag States"}),(0,o.jsx)("button",{onClick:()=>u("settings"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("settings"===c?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Settings"}),(0,o.jsx)("button",{onClick:()=>u("logs"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("logs"===c?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Logs"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",placeholder:"feature-flag-states"===c?"Search feature flag states...":"Search feature flags...",value:r,onChange:e=>a(e.target.value),className:"pl-8 pr-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-xs"}),(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:K({className:"h-3 w-3 text-gray-400"})})]}),(0,o.jsx)("button",{className:"px-3 py-1.5 border border-gray-300 rounded-md text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:"Filter"}),(0,o.jsxs)("select",{value:"features"===c?m:"feature-flag-states"===c?p:"",onChange:e=>{"features"===c?x(e.target.value):"feature-flag-states"===c&&g(e.target.value)},className:"px-3 py-1.5 border border-gray-300 rounded-md text-xs text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:[(0,o.jsx)("option",{value:"",children:"Sort by"}),"features"===c?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("option",{value:"name",children:"Name"}),(0,o.jsx)("option",{value:"display_name",children:"Display Name"}),(0,o.jsx)("option",{value:"feature_type",children:"Feature Type"}),(0,o.jsx)("option",{value:"is_active",children:"Is Active"}),(0,o.jsx)("option",{value:"created_at",children:"Created At"}),(0,o.jsx)("option",{value:"updated_at",children:"Updated At"})]}):"feature-flag-states"===c?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("option",{value:"feature_flag_name",children:"Feature Flag Name"}),(0,o.jsx)("option",{value:"scope_type",children:"Scope Type"}),(0,o.jsx)("option",{value:"scope_id",children:"Scope Id"}),(0,o.jsx)("option",{value:"is_enabled",children:"Is Enabled"}),(0,o.jsx)("option",{value:"percentage",children:"Percentage"}),(0,o.jsx)("option",{value:"start_date",children:"Start Date"}),(0,o.jsx)("option",{value:"end_date",children:"End Date"}),(0,o.jsx)("option",{value:"updated_at",children:"Updated At"})]}):null]}),(0,o.jsx)("button",{onClick:()=>{if(e){(async()=>{ie(!0);try{const e=await l.featureFlags.getAll();e&&"success"===e.status&&e.data&&e.data.results&&re(e.data.results);const t=await l.featureFlagStates.getAll();t&&"success"===t.status&&t.data&&t.data.results&&ae(t.data.results),R({message:"Data refreshed successfully!",type:"success"})}catch(e){console.error("Error refreshing data:",e),R({message:"Failed to refresh data",type:"error"})}finally{ie(!1),setTimeout(()=>R(null),3e3)}})()}},disabled:!e||se,className:"px-3 py-1.5 border border-gray-300 rounded-md text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh data",children:"\u21bb Refresh"}),(0,o.jsxs)(ce,{permissions:["access_admin_panel"],children:["features"===c&&(0,o.jsx)("button",{onClick:()=>{_(!0),M("basic-info"),V({})},className:"px-4 py-1.5 bg-blue-600 text-white rounded-md text-xs font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200",children:"+ Add Feature"}),"feature-flag-states"===c&&(0,o.jsx)("button",{onClick:()=>{_(!0),M("basic-info"),V({})},className:"px-4 py-1.5 bg-blue-600 text-white rounded-md text-xs font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200",children:"+ Add State"})]})]})]})})}),"features"===c&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm",children:t?(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading authentication..."})]}):e?se?(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading feature flags..."})]}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Name"}),me("name")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("display_name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Display Name"}),me("display_name")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Description"})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("feature_type"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Feature Type"}),me("feature_type")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("is_active"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Is Active"}),me("is_active")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("created_at"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Created At"}),me("created_at")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("updated_at"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Updated At"}),me("updated_at")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:oe.map((e,t)=>(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs font-medium text-gray-900",children:e.name}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs font-medium text-gray-900",children:e.display_name}),(0,o.jsx)("td",{className:"px-4 py-2 text-xs text-gray-900 max-w-xs truncate",children:e.description}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.feature_type}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"true":"false"})}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.created_at}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.updated_at}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("button",{onClick:()=>{},className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors duration-200",title:"View Details",children:H({className:"w-3 h-3"})}),(0,o.jsx)(ce,{permissions:["access_admin_panel"],children:(0,o.jsx)("div",{className:"relative","data-dropdown-container":!0,children:(0,o.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),je(e.id,t)},className:"p-1 rounded-md transition-colors duration-200 cursor-pointer "+(v===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:B({className:"w-3 h-3"})})})})]})})]},e.id))})]})}):(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Authentication Required"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Please log in to view feature flags."})]})}),"feature-flag-states"===c&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm",children:t?(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading authentication..."})]}):e?se?(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading feature flag states..."})]}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("feature_flag_name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Feature Flag Name"}),me("feature_flag_name")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("scope_type"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Scope Type"}),me("scope_type")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("scope_id"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Scope Id"}),me("scope_id")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("school_name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"School Name"}),me("school_name")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("username"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Username"}),me("username")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("is_enabled"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Is Enabled"}),me("is_enabled")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("percentage"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Percentage"}),me("percentage")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("start_date"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Start Date"}),me("start_date")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("end_date"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"End Date"}),me("end_date")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("updated_at"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Updated At"}),me("updated_at")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:de.map((e,t)=>(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs font-medium text-gray-900",children:e.feature_flag_name}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.scope_type}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.scope_id||"-"}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.school_name||"-"}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.username||"-"}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.is_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_enabled?"true":"false"})}),(0,o.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:[e.percentage,"%"]}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.start_date||"-"}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.end_date||"-"}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.updated_at}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("button",{onClick:()=>{},className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors duration-200",title:"View Details",children:H({className:"w-3 h-3"})}),(0,o.jsx)(ce,{permissions:["access_admin_panel"],children:(0,o.jsx)("div",{className:"relative","data-dropdown-container":!0,children:(0,o.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),je(e.id,t)},className:"p-1 rounded-md transition-colors duration-200 cursor-pointer "+(v===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:B({className:"w-3 h-3"})})})})]})})]},e.id))})]})}):(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Authentication Required"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Please log in to view feature flag states."})]})}),"settings"===c&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsxs)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Switch Board Settings"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Configure system settings and preferences."})]})}),"logs"===c&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"System Logs"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"View system activity and error logs."})]})})]}),(0,o.jsx)("div",{className:"fixed inset-0 bg-black transition-opacity duration-500 ease-out z-50 "+(k?"bg-opacity-50":"bg-opacity-0 pointer-events-none"),children:(0,o.jsx)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-500 ease-out flex flex-col "+(k?"translate-x-0":"translate-x-full"),children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-elegant",children:"features"===c?"Add New Feature":"Add New Feature Flag State"}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1 font-modern",children:"features"===c?"Enter feature information":"Enter feature flag state information"})]}),(0,o.jsx)("button",{onClick:"features"===c?xe:he,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-all duration-200",children:X({className:"w-4 h-4"})})]}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,o.jsx)("div",{className:"p-6 space-y-4",children:"features"===c?(0,o.jsxs)(fe,{title:"Basic Information *",defaultExpanded:!0,isActive:"basic-info"===D,onSectionClick:()=>M("basic-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Feature Name *"}),(0,o.jsx)("input",{type:"text",value:Q.name,onChange:e=>pe("name",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"Enter feature name (e.g., student_admission_billing)"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Display Name *"}),(0,o.jsx)("input",{type:"text",value:Q.display_name,onChange:e=>pe("display_name",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"Enter display name (e.g., Student Admission Billing Control)"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Description *"}),(0,o.jsx)("textarea",{value:Q.description,onChange:e=>pe("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white resize-none text-xs",placeholder:"Enter feature description"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Feature Type *"}),(0,o.jsxs)("select",{value:Q.feature_type,onChange:e=>pe("feature_type",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",children:[(0,o.jsx)("option",{value:"",children:"Select feature type"}),(0,o.jsx)("option",{value:"billing",children:"Billing"}),(0,o.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,o.jsx)("option",{value:"test",children:"Test"}),(0,o.jsx)("option",{value:"core",children:"Core"}),(0,o.jsx)("option",{value:"academic",children:"Academic"}),(0,o.jsx)("option",{value:"financial",children:"Financial"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Status *"}),(0,o.jsxs)("select",{value:Q.is_active?"true":"false",onChange:e=>pe("is_active","true"===e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",children:[(0,o.jsx)("option",{value:"true",children:"Active"}),(0,o.jsx)("option",{value:"false",children:"Inactive"})]})]})]}):(0,o.jsxs)(fe,{title:"Basic Information *",defaultExpanded:!0,isActive:"basic-info"===D,onSectionClick:()=>M("basic-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Feature Flag *"}),(0,o.jsxs)("select",{value:J.feature_flag,onChange:e=>ge("feature_flag",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",children:[(0,o.jsx)("option",{value:"",children:"Select feature flag"}),te.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.display_name," (",e.name,")"]},e.id))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Scope Type *"}),(0,o.jsxs)("select",{value:J.scope_type,onChange:e=>ge("scope_type",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",children:[(0,o.jsx)("option",{value:"",children:"Select scope type"}),(0,o.jsx)("option",{value:"global",children:"Global"}),(0,o.jsx)("option",{value:"school",children:"School"}),(0,o.jsx)("option",{value:"user",children:"User"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Scope ID"}),(0,o.jsx)("input",{type:"text",value:J.scope_id||"",onChange:e=>ge("scope_id",e.target.value||null),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"Enter scope ID (optional)"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Is Enabled *"}),(0,o.jsxs)("select",{value:J.is_enabled?"true":"false",onChange:e=>ge("is_enabled","true"===e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",children:[(0,o.jsx)("option",{value:"true",children:"Enabled"}),(0,o.jsx)("option",{value:"false",children:"Disabled"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Percentage *"}),(0,o.jsx)("input",{type:"number",min:"0",max:"100",value:J.percentage,onChange:e=>ge("percentage",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"Enter percentage (0-100)"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Start Date"}),(0,o.jsx)("input",{type:"datetime-local",value:J.start_date||"",onChange:e=>ge("start_date",e.target.value||null),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"End Date"}),(0,o.jsx)("input",{type:"datetime-local",value:J.end_date||"",onChange:e=>ge("end_date",e.target.value||null),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs"})]})]})})}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-100 flex-shrink-0",children:[(0,o.jsx)("button",{onClick:"features"===c?xe:he,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:"features"===c?async()=>{try{var e;const t={name:Q.name||"",display_name:Q.display_name||"",description:Q.description||"",feature_type:Q.feature_type||"",is_active:null===(e=Q.is_active)||void 0===e||e},r=await l.featureFlags.create(t);re(e=>[...e,r]),R({message:"Feature flag added successfully!",type:"success"}),V({}),Y({name:"",display_name:"",description:"",feature_type:"",is_active:!0}),setTimeout(()=>{xe()},100),setTimeout(()=>{R(null)},3e3)}catch(t){console.error("Error adding feature flag:",t),R({message:"Failed to add feature flag. Please try again.",type:"error"}),setTimeout(()=>{R(null)},5e3)}}:async()=>{try{var e,t,r,n,a;const s=e=>{if(!e)return null;return new Date(e).toISOString()},i={feature_flag:J.feature_flag||"",scope_type:J.scope_type||"",scope_id:null!==(e=J.scope_id)&&void 0!==e?e:null,is_enabled:null!==(t=J.is_enabled)&&void 0!==t&&t,percentage:null!==(r=J.percentage)&&void 0!==r?r:100,start_date:s(null!==(n=J.start_date)&&void 0!==n?n:null),end_date:s(null!==(a=J.end_date)&&void 0!==a?a:null)},o=await l.featureFlagStates.create(i);let c;if(o&&"success"===o.status&&o.data)c=o.data;else if(o&&o.id)c=o;else{const e=te.find(e=>e.id===i.feature_flag);c={id:"temp-"+Date.now(),feature_flag:i.feature_flag,feature_flag_name:(null===e||void 0===e?void 0:e.name)||"",feature_flag_display_name:(null===e||void 0===e?void 0:e.display_name)||"",scope_type:i.scope_type,scope_id:i.scope_id,school_name:null,username:null,is_enabled:i.is_enabled,percentage:i.percentage,start_date:i.start_date,end_date:i.end_date,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}}ae(e=>[...e,c]),R({message:"Feature flag state added successfully!",type:"success"}),V({}),ee({feature_flag:"",scope_type:"",scope_id:null,is_enabled:!1,percentage:100,start_date:null,end_date:null}),setTimeout(()=>{he()},100),setTimeout(()=>{R(null)},3e3)}catch(s){console.error("Error adding feature flag state:",s),R({message:"Failed to add feature flag state. Please try again.",type:"error"}),setTimeout(()=>{R(null)},5e3)}},disabled:"features"===c?!Q.name||!Q.display_name||!Q.description||!Q.feature_type:!J.feature_flag||!J.scope_type,className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium",children:"features"===c?"Add Feature":"Add State"})]})]})})}),(0,o.jsx)("div",{className:"fixed inset-0 bg-black transition-opacity duration-500 ease-out z-50 "+(S?"bg-opacity-50":"bg-opacity-0 pointer-events-none"),children:(0,o.jsx)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-500 ease-out flex flex-col "+(S?"translate-x-0":"translate-x-full"),children:(E||A)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-elegant",children:E?"Edit Feature":"Edit Feature Flag State"}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1 font-modern",children:E?"Update feature information":"Update feature flag state information"})]}),(0,o.jsx)("button",{onClick:be,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-all duration-200",children:X({className:"w-4 h-4"})})]}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,o.jsx)("div",{className:"p-6 space-y-4",children:E?(0,o.jsxs)(fe,{title:"Basic Information *",defaultExpanded:!0,isActive:"basic-info"===U,onSectionClick:()=>$("basic-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Feature Name *"}),(0,o.jsx)("input",{type:"text",value:E.name,onChange:e=>ye("name",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"Enter feature name (e.g., student_admission_billing)"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Display Name *"}),(0,o.jsx)("input",{type:"text",value:E.display_name,onChange:e=>ye("display_name",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"Enter display name (e.g., Student Admission Billing Control)"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Description *"}),(0,o.jsx)("textarea",{value:E.description,onChange:e=>ye("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white resize-none text-xs",placeholder:"Enter feature description"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Feature Type *"}),(0,o.jsxs)("select",{value:E.feature_type,onChange:e=>ye("feature_type",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",children:[(0,o.jsx)("option",{value:"",children:"Select feature type"}),(0,o.jsx)("option",{value:"billing",children:"Billing"}),(0,o.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,o.jsx)("option",{value:"test",children:"Test"}),(0,o.jsx)("option",{value:"core",children:"Core"}),(0,o.jsx)("option",{value:"academic",children:"Academic"}),(0,o.jsx)("option",{value:"financial",children:"Financial"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Status *"}),(0,o.jsxs)("select",{value:E.is_active?"true":"false",onChange:e=>ye("is_active","true"===e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",children:[(0,o.jsx)("option",{value:"true",children:"Active"}),(0,o.jsx)("option",{value:"false",children:"Inactive"})]})]})]}):A?(0,o.jsxs)(fe,{title:"Basic Information *",defaultExpanded:!0,isActive:"basic-info"===U,onSectionClick:()=>$("basic-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Feature Flag *"}),(0,o.jsxs)("select",{value:A.feature_flag,onChange:e=>ve("feature_flag",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",children:[(0,o.jsx)("option",{value:"",children:"Select feature flag"}),te.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.display_name," (",e.name,")"]},e.id))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Scope Type *"}),(0,o.jsxs)("select",{value:A.scope_type,onChange:e=>ve("scope_type",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",children:[(0,o.jsx)("option",{value:"",children:"Select scope type"}),(0,o.jsx)("option",{value:"global",children:"Global"}),(0,o.jsx)("option",{value:"school",children:"School"}),(0,o.jsx)("option",{value:"user",children:"User"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Scope ID"}),(0,o.jsx)("input",{type:"text",value:A.scope_id||"",onChange:e=>ve("scope_id",e.target.value||null),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"Enter scope ID (optional)"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Is Enabled *"}),(0,o.jsxs)("select",{value:A.is_enabled?"true":"false",onChange:e=>ve("is_enabled","true"===e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",children:[(0,o.jsx)("option",{value:"true",children:"Enabled"}),(0,o.jsx)("option",{value:"false",children:"Disabled"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Percentage *"}),(0,o.jsx)("input",{type:"number",min:"0",max:"100",value:A.percentage,onChange:e=>ve("percentage",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"Enter percentage (0-100)"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Start Date"}),(0,o.jsx)("input",{type:"datetime-local",value:A.start_date?A.start_date.slice(0,16):"",onChange:e=>ve("start_date",e.target.value||null),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"End Date"}),(0,o.jsx)("input",{type:"datetime-local",value:A.end_date?A.end_date.slice(0,16):"",onChange:e=>ve("end_date",e.target.value||null),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs"})]})]}):null})}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-100 flex-shrink-0",children:[(0,o.jsx)("button",{onClick:be,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:E?async()=>{if(E)try{const e=await l.featureFlags.update(E.id,{name:E.name,display_name:E.display_name,description:E.description,feature_type:E.feature_type,is_active:E.is_active});re(t=>t.map(t=>t.id===E.id?e:t)),R({message:"Feature flag updated successfully!",type:"success"}),G({}),be(),setTimeout(()=>{R(null)},3e3)}catch(e){console.error("Error updating feature flag:",e),R({message:"Failed to update feature flag. Please try again.",type:"error"}),setTimeout(()=>{R(null)},5e3)}}:async()=>{if(A)try{const e=e=>{if(!e)return null;return new Date(e).toISOString()},t={feature_flag:A.feature_flag,scope_type:A.scope_type,scope_id:A.scope_id,is_enabled:A.is_enabled,percentage:A.percentage,start_date:e(A.start_date),end_date:e(A.end_date)},r=await l.featureFlagStates.update(A.id,t);ae(e=>e.map(e=>e.id===A.id?r:e)),R({message:"Feature flag state updated successfully!",type:"success"}),G({}),be(),setTimeout(()=>{R(null)},3e3)}catch(e){console.error("Error updating feature flag state:",e),R({message:"Failed to update feature flag state. Please try again.",type:"error"}),setTimeout(()=>{R(null)},5e3)}},className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-all duration-200 font-medium",children:"Save Changes"})]})]})})}),v&&(0,le.createPortal)((0,o.jsx)("div",{className:"fixed w-32 bg-white rounded-md shadow-lg border border-gray-200 z-[9999]","data-portal-dropdown":!0,style:{left:`${w.x}px`,top:`${w.y}px`},onClick:e=>e.stopPropagation(),children:(0,o.jsx)("div",{className:"py-1",children:(0,o.jsxs)(ce,{permissions:["access_admin_panel"],children:["features"===c&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=te.find(e=>e.id===v);t&&(e=>{P(e),C(!0),j(null),$("basic-info"),G({})})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-colors duration-200",children:[I({className:"w-3 h-3 mr-2"}),"Edit"]}),(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=te.find(e=>e.id===v);t&&(async e=>{try{await l.featureFlags.delete(e.id),re(t=>t.filter(t=>t.id!==e.id)),j(null),R({message:"Feature flag deleted successfully!",type:"success"}),setTimeout(()=>{R(null)},3e3)}catch(t){console.error("Error deleting feature flag:",t),R({message:"Failed to delete feature flag. Please try again.",type:"error"}),setTimeout(()=>{R(null)},5e3)}})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-red-50 hover:text-red-700 transition-colors duration-200",children:[Z({className:"w-3 h-3 mr-2"}),"Delete"]})]}),"feature-flag-states"===c&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=ne.find(e=>e.id===v);t&&(e=>{L(e),C(!0),j(null),$("basic-info"),G({})})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-colors duration-200",children:[I({className:"w-3 h-3 mr-2"}),"Edit"]}),(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=ne.find(e=>e.id===v);t&&(async e=>{try{await l.featureFlagStates.delete(e.id),ae(t=>t.filter(t=>t.id!==e.id)),j(null),R({message:"Feature flag state deleted successfully!",type:"success"}),setTimeout(()=>{R(null)},3e3)}catch(t){console.error("Error deleting feature flag state:",t),R({message:"Failed to delete feature flag state. Please try again.",type:"error"}),setTimeout(()=>{R(null)},5e3)}})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-red-50 hover:text-red-700 transition-colors duration-200",children:[Z({className:"w-3 h-3 mr-2"}),"Delete"]})]})]})})}),document.body),O&&(0,o.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[10000] flex items-center p-4 rounded-lg shadow-lg transition-all duration-300",children:(0,o.jsxs)("div",{className:`flex items-center space-x-3 ${"success"===O.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"} px-6 py-4 rounded-lg shadow-xl`,children:["success"===O.type?T({className:"w-5 h-5 text-green-600"}):X({className:"w-5 h-5 text-red-600"}),(0,o.jsx)("span",{className:"text-sm font-medium",children:O.message}),(0,o.jsx)("button",{onClick:()=>R(null),className:"ml-3 text-gray-400 hover:text-gray-600",children:X({className:"w-4 h-4"})})]})})]})},pe=()=>{const[e,t]=(0,n.useState)(""),[r,a]=(0,n.useState)(""),[s,i]=(0,n.useState)(""),[c,d]=(0,n.useState)("asc"),[u,m]=(0,n.useState)("users"),[x,f]=(0,n.useState)(null),[h,p]=(0,n.useState)({x:0,y:0}),[g,b]=(0,n.useState)(!1),[y,v]=(0,n.useState)(!1),[j,w]=(0,n.useState)(null),[N,k]=(0,n.useState)(null),[_,S]=(0,n.useState)("basic-info"),[C,E]=(0,n.useState)("basic-info"),[P,A]=(0,n.useState)({}),[L,T]=(0,n.useState)({}),[z,F]=(0,n.useState)({username:"",email:"",first_name:"",last_name:"",surname:"",phone_number:"",role:"user",is_active:!0,is_staff:!1,school_id:""}),[O,R]=(0,n.useState)([{id:"1",username:"john_doe",email:"john@example.com",first_name:"John",last_name:"Doe",surname:"",phone_number:"+1234567890",role:"admin",is_active:!0,is_staff:!0,image:"",is_email_active:!0,school:{id:"1",name:"Test School",slug:"test-school",subdomain:"test",domain:"test.com",address:"Test Address",phone:"+1234567890",email:"test@school.com",website:"https://test.com",logo:"",primary_color:"#000000",secondary_color:"#ffffff",timezone:"UTC",language:"en",currency:"USD",is_active:!0,max_students:1e3,academic_year_start:null,academic_year_end:null,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},school_id:"1",created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:"2",username:"jane_smith",email:"jane@example.com",first_name:"Jane",last_name:"Smith",surname:"",phone_number:"+1234567891",role:"user",is_active:!0,is_staff:!1,image:"",is_email_active:!0,school:{id:"1",name:"Test School",slug:"test-school",subdomain:"test",domain:"test.com",address:"Test Address",phone:"+1234567890",email:"test@school.com",website:"https://test.com",logo:"",primary_color:"#000000",secondary_color:"#ffffff",timezone:"UTC",language:"en",currency:"USD",is_active:!0,max_students:1e3,academic_year_start:null,academic_year_end:null,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},school_id:"1",created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"}]),[D,M]=(0,n.useState)(1),[U,$]=(0,n.useState)(1),[H,q]=(0,n.useState)(!1),[V,W]=(0,n.useState)(!1),[G,Q]=(0,n.useState)("admin");(0,n.useEffect)(()=>{const t=setTimeout(()=>{a(e)},500);return()=>clearTimeout(t)},[e]),(0,n.useEffect)(()=>{Y()},[r,s,c,D]);const Y=async()=>{q(!0);try{const e={page:D,search:r},t=await l.users.getAll(e);t.data&&t.data.results?(R(t.data.results),$(Math.ceil(t.data.count/10))):t.results&&(R(t.results),$(Math.ceil(t.count/10)))}catch(e){console.error("Error fetching users:",e),k({message:"Failed to fetch users",type:"error"})}finally{q(!1)}},J=e=>{w(e),v(!0)},ee=(e,t)=>{j&&w(r=>r?{...r,[e]:t}:null)},te=()=>{b(!1),F({username:"",email:"",first_name:"",last_name:"",surname:"",phone_number:"",role:"user",is_active:!0,is_staff:!1,school_id:""}),A({}),W(!1)},re=()=>{v(!1),w(null),T({})},ne=()=>{f(null)};return(0,n.useEffect)(()=>(document.addEventListener("click",ne),()=>document.removeEventListener("click",ne)),[]),(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Users Management"}),(0,o.jsx)(ce,{permissions:["manage_users"],children:(0,o.jsx)("button",{onClick:()=>b(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",children:"Add New User"})})]}),(0,o.jsx)("div",{className:"mb-6 flex gap-4",children:(0,o.jsx)("div",{className:"flex-1",children:(0,o.jsxs)("div",{className:"relative",children:[K({className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,o.jsx)("input",{type:"text",placeholder:"Search users...",value:e,onChange:e=>t(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})})}),(0,o.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(e=>(0,o.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,o.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,o.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[e.first_name.charAt(0),e.last_name.charAt(0)]})})}),(0,o.jsxs)("div",{className:"ml-4",children:[(0,o.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,o.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("admin"===e.role?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:e.role})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Inactive"})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>J(e),className:"text-blue-600 hover:text-blue-900",children:I({className:"w-4 h-4"})}),(0,o.jsx)("button",{onClick:t=>((e,t)=>{t.stopPropagation();const r=t.currentTarget.getBoundingClientRect();p({x:r.left,y:r.bottom}),f(x===e?null:e)})(e.id,t),className:"text-gray-400 hover:text-gray-600",children:B({className:"w-4 h-4"})})]})})]},e.id))})]})}),g&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-end z-50",children:(0,o.jsxs)("div",{className:"bg-white h-full w-96 shadow-2xl overflow-y-auto",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Add New User"}),(0,o.jsx)("p",{className:"text-xs text-gray-600",children:"Create a new user account"})]}),(0,o.jsx)("button",{onClick:te,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full",children:X({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Username *"]}),(0,o.jsx)("input",{type:"text",value:z.username,onChange:e=>F(t=>({...t,username:e.target.value})),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white",placeholder:"Enter username"})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"First Name *"]}),(0,o.jsx)("input",{type:"text",value:z.first_name,onChange:e=>F(t=>({...t,first_name:e.target.value})),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white",placeholder:"Enter first name"})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Last Name *"]}),(0,o.jsx)("input",{type:"text",value:z.last_name,onChange:e=>F(t=>({...t,last_name:e.target.value})),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white",placeholder:"Enter last name"})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Email *"]}),(0,o.jsx)("input",{type:"email",value:z.email,onChange:e=>F(t=>({...t,email:e.target.value})),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white",placeholder:"Enter email address"})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-teal-500 rounded-full mr-1.5"}),"Role *"]}),(0,o.jsxs)("select",{value:z.role,onChange:e=>F(t=>({...t,role:e.target.value})),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-100 focus:border-teal-500 transition-all duration-200 bg-white",children:[(0,o.jsx)("option",{value:"user",children:"User"}),(0,o.jsx)("option",{value:"admin",children:"Admin"})]})]})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:te,className:"px-4 py-2 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{try{await l.users.create(z),k({message:"User created successfully",type:"success"}),b(!1),W(!0),Y()}catch(e){console.error("Error creating user:",e),k({message:"Failed to create user",type:"error"})}},disabled:!z.username||!z.email||!z.first_name||!z.last_name,className:"px-4 py-2 text-xs bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-200 font-semibold shadow-sm hover:shadow-md",children:"Add User"})]})]})}),y&&j&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-end z-50",children:(0,o.jsxs)("div",{className:"bg-white h-full w-96 shadow-2xl overflow-y-auto",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Edit User"}),(0,o.jsx)("p",{className:"text-xs text-gray-600",children:"Update user information"})]}),(0,o.jsx)("button",{onClick:re,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full",children:X({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"Username *"]}),(0,o.jsx)("input",{type:"text",value:j.username,onChange:e=>ee("username",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white",placeholder:"Enter username"})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"First Name *"]}),(0,o.jsx)("input",{type:"text",value:j.first_name,onChange:e=>ee("first_name",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white",placeholder:"Enter first name"})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Last Name *"]}),(0,o.jsx)("input",{type:"text",value:j.last_name,onChange:e=>ee("last_name",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white",placeholder:"Enter last name"})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Email *"]}),(0,o.jsx)("input",{type:"email",value:j.email,onChange:e=>ee("email",e.target.value),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white",placeholder:"Enter email address"})]})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:re,className:"px-4 py-2 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:()=>{re()},className:"px-4 py-2 text-xs bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-semibold shadow-sm hover:shadow-md",children:"Update User"})]})]})}),N&&(0,o.jsx)("div",{className:"fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 "+("success"===N.type?"bg-green-500 text-white":"bg-red-500 text-white"),children:N.message}),x&&(0,le.createPortal)((0,o.jsxs)("div",{className:"fixed bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",style:{left:h.x,top:h.y,minWidth:"120px"},children:[(0,o.jsxs)("button",{onClick:()=>{const e=O.find(e=>e.id===x);e&&J(e),f(null)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[I({className:"w-4 h-4 mr-2"}),"Edit"]}),(0,o.jsxs)("button",{onClick:()=>{f(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-100 flex items-center",children:[Z({className:"w-4 h-4 mr-2"}),"Delete"]})]}),document.body)]})},ge=e=>{let{title:t,children:r,defaultExpanded:a=!0,isActive:s=!1,onSectionClick:l}=e;const[i,c]=(0,n.useState)(a);return(0,o.jsxs)("div",{className:"border rounded-lg transition-all duration-200 "+(s?"border-blue-300 bg-blue-50/30":"border-gray-200 hover:border-gray-300"),children:[(0,o.jsxs)("button",{onClick:()=>{c(!i),l&&l()},className:"w-full px-4 py-3 flex items-center justify-between text-sm font-semibold transition-all duration-200 rounded-t-lg "+(s?"text-blue-900 bg-blue-100/50 hover:bg-blue-100":"text-gray-900 bg-gray-50 hover:bg-gray-100"),children:[(0,o.jsx)("span",{children:t}),i?F({className:"w-4 h-4 transition-colors duration-200 "+(s?"text-blue-600":"text-gray-500")}):z({className:"w-4 h-4 transition-colors duration-200 "+(s?"text-blue-600":"text-gray-500")})]}),i&&(0,o.jsx)("div",{className:"p-4 space-y-4 transition-all duration-200 "+(s?"bg-blue-50/20":""),children:r})]})},be=()=>{const[e,t]=(0,n.useState)(""),[r,a]=(0,n.useState)(""),[s,i]=(0,n.useState)(""),[c,d]=(0,n.useState)("asc"),[u,m]=(0,n.useState)("schools"),[x,f]=(0,n.useState)(null),[h,p]=(0,n.useState)({x:0,y:0}),[g,b]=(0,n.useState)(!1),[y,v]=(0,n.useState)(null),[j,w]=(0,n.useState)(null),[N,k]=(0,n.useState)(!1),[_,S]=(0,n.useState)(null),[C,E]=(0,n.useState)("basic-info"),[P,A]=(0,n.useState)("basic-info"),[L,O]=(0,n.useState)({}),[R,D]=(0,n.useState)({}),[M,U]=(0,n.useState)({name:"",slug:"",subdomain:"",domain:"",address:"",phone:"",email:"",website:"",logo:"",primary_color:"#667eea",secondary_color:"#764ba2",timezone:"UTC",language:"en",currency:"USD",is_active:!0,max_students:1e3,academic_year_start:null,academic_year_end:null}),[$,q]=(0,n.useState)([]),[V,W]=(0,n.useState)(!0),[G,Q]=(0,n.useState)(1),[Y,J]=(0,n.useState)(0),[ee,te]=(0,n.useState)(!1),[re,ne]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const t=setTimeout(()=>{a(e)},500);return()=>clearTimeout(t)},[e]),(0,n.useEffect)(()=>{(async()=>{try{W(!0);const e=await l.schools.getAll(G,20,r||void 0,s?`${"desc"===c?"-":""}${s}`:void 0),t=(e.results||e||[]).map(e=>({...e,number_of_students:e.number_of_students||0}));q(t),J(e.count||0),te(!!e.next),ne(!!e.previous)}catch(e){console.error("Error loading schools:",e),q([]),J(0),te(!1),ne(!1)}finally{W(!1)}})()},[G,r,s,c]),(0,n.useEffect)(()=>{Q(1)},[r]);const ae=Math.ceil(Y/20),se=20*(G-1),ie=Math.min(se+20,Y),oe=e=>{s===e?d("asc"===c?"desc":"asc"):(i(e),d("asc"))},de=e=>s!==e?null:"asc"===c?F({className:"w-3 h-3"}):z({className:"w-3 h-3"});(0,n.useEffect)(()=>{const e=e=>{const t=e.target;t.closest("[data-dropdown-container]")||t.closest("[data-portal-dropdown]")||f(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const ue=()=>{k(!1),U({name:"",slug:"",subdomain:"",domain:"",address:"",phone:"",email:"",website:"",logo:"",primary_color:"#667eea",secondary_color:"#764ba2",timezone:"UTC",language:"en",currency:"USD",is_active:!0,max_students:1e3,academic_year_start:null,academic_year_end:null})},me=()=>{b(!1),v(null),w(null),D({})},xe=(e,t)=>{U(r=>({...r,[e]:t})),L[e]&&O(t=>{const r={...t};return delete r[e],r})},fe=(e,t)=>{y&&(v({...y,[e]:t}),R[e]&&D(t=>{const r={...t};return delete r[e],r}))},he=e=>{var t;return(null===(t=L[e])||void 0===t?void 0:t[0])||null},pe=e=>{var t;return(null===(t=R[e])||void 0===t?void 0:t[0])||null};return(0,o.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-4 mb-4",children:(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("nav",{className:"flex space-x-6",children:[(0,o.jsx)("button",{onClick:()=>m("schools"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("schools"===u?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Schools"}),(0,o.jsx)("button",{onClick:()=>m("departments"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("departments"===u?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Departments"}),(0,o.jsx)("button",{onClick:()=>m("facilities"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("facilities"===u?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Facilities"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",placeholder:"Search schools...",value:e,onChange:e=>t(e.target.value),className:"pl-8 pr-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-xs transition-colors duration-200"}),(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:K({className:"h-3 w-3 text-gray-400"})})]}),(0,o.jsx)("button",{className:"px-3 py-1.5 border border-gray-300 rounded-md text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:"Filter"}),(0,o.jsxs)("select",{value:s,onChange:e=>i(e.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-md text-xs focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:[(0,o.jsx)("option",{value:"",children:"Sort by"}),(0,o.jsx)("option",{value:"name",children:"Name"}),(0,o.jsx)("option",{value:"slug",children:"Slug"}),(0,o.jsx)("option",{value:"subdomain",children:"Subdomain"}),(0,o.jsx)("option",{value:"created_at",children:"Created Date"})]}),(0,o.jsx)(ce,{permissions:["create_school"],children:(0,o.jsx)("button",{onClick:()=>{k(!0),E("basic-info"),O({})},className:"px-4 py-1.5 bg-blue-600 text-white rounded-md text-xs font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200",children:"+ Add School"})})]})]})})}),"schools"===u&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm relative",children:V?(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading schools..."})]}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>oe("name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Name"}),de("name")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>oe("slug"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Slug"}),de("slug")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>oe("subdomain"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Subdomain"}),de("subdomain")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Website"}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Number of Students"}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>oe("created_at"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Created At"}),de("created_at")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:$.map((e,t)=>{return(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs font-medium text-gray-900",children:e.name}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e.slug})}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.subdomain})}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.website?(0,o.jsx)("a",{href:e.website.startsWith("http")?e.website:`https://${e.website}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline",children:e.website}):(0,o.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:e.number_of_students||0})}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:(r=e.created_at,new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("button",{onClick:()=>{},className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors duration-200",title:"View Details",children:H({className:"w-3 h-3"})}),(0,o.jsx)(ce,{permissions:["create_school"],children:(0,o.jsx)("div",{className:"relative","data-dropdown-container":!0,children:(0,o.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),((e,t)=>{if(x===e)f(null);else{const r=t.currentTarget.getBoundingClientRect(),n=window.innerHeight,a=window.innerWidth,s=80,l=128;let i=r.right-l,o=r.bottom+4;r.bottom+s>n&&(o=r.top-s-4),i<0&&(i=0),i+l>a&&(i=a-l),p({x:i,y:o}),f(e)}})(e.id,t)},className:"p-1 rounded-md transition-colors duration-200 cursor-pointer "+(x===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:B({className:"w-3 h-3"})})})})]})})]},e.id);var r})})]})})}),"departments"===u&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Department Management"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Manage school departments and academic divisions."})]})}),"facilities"===u&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Facility Management"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Manage school facilities and infrastructure."})]})}),"schools"===u&&(0,o.jsxs)("div",{className:"flex items-center justify-between mt-8",children:[(0,o.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(0,o.jsx)("span",{className:"font-medium",children:se+1})," to ",(0,o.jsx)("span",{className:"font-medium",children:ie})," of ",(0,o.jsx)("span",{className:"font-medium",children:Y})," results"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>{Q(e=>Math.max(e-1,1))},disabled:!re,className:"px-3 py-1.5 text-xs font-medium border rounded-lg transition-colors duration-200 text-gray-500 bg-white border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,o.jsxs)("span",{className:"px-3 py-1.5 text-xs font-medium text-gray-700",children:["Page ",G," of ",ae," (",ae>1?`${ae} pages`:"1 page",")"]}),(0,o.jsx)("button",{onClick:()=>{Q(e=>Math.min(e+1,ae))},disabled:!ee,className:"px-3 py-1.5 text-xs font-medium border rounded-lg transition-colors duration-200 text-gray-500 bg-white border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),(0,o.jsx)("div",{className:"fixed inset-0 bg-black transition-opacity duration-500 ease-out z-50 "+(g?"bg-opacity-50":"bg-opacity-0 pointer-events-none"),children:(0,o.jsx)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-500 ease-out flex flex-col "+(g?"translate-x-0":"translate-x-full"),children:y&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-elegant",children:"Edit School"}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1 font-modern",children:"Update school information"})]}),(0,o.jsx)("button",{onClick:me,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-all duration-200",children:X({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[Object.keys(R).length>0&&(0,o.jsxs)("div",{className:"mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,o.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:(0,o.jsx)("span",{className:"text-white text-xs font-bold",children:"!"})}),(0,o.jsx)("h3",{className:"text-sm font-semibold text-red-800",children:"Please fix the following errors:"})]}),(0,o.jsx)("ul",{className:"text-xs text-red-700 space-y-1",children:Object.entries(R).map(e=>{let[t,r]=e;const n=t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase());return(0,o.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,o.jsx)("span",{className:"text-red-500 mt-0.5",children:"\u2022"}),(0,o.jsxs)("span",{children:[(0,o.jsxs)("span",{className:"font-medium",children:[n,":"]})," ",r[0]]})]},t)})})]}),(0,o.jsxs)("div",{className:"p-6 space-y-4",children:[(0,o.jsxs)(ge,{title:"Basic Information *",defaultExpanded:!0,isActive:"basic-info"===P,onSectionClick:()=>A("basic-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"School Name *"}),(0,o.jsx)("input",{type:"text",value:y.name,onChange:e=>fe("name",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pe("name")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter school name"}),pe("name")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pe("name")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Slug *"}),(0,o.jsx)("input",{type:"text",value:y.slug,onChange:e=>fe("slug",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pe("slug")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter slug"}),pe("slug")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pe("slug")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Subdomain *"}),(0,o.jsx)("input",{type:"text",value:y.subdomain,onChange:e=>fe("subdomain",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pe("subdomain")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter subdomain"}),pe("subdomain")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pe("subdomain")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Domain"}),(0,o.jsx)("input",{type:"text",value:y.domain,onChange:e=>fe("domain",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pe("domain")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter domain"}),pe("domain")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pe("domain")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Email *"}),(0,o.jsx)("input",{type:"email",value:y.email,onChange:e=>fe("email",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pe("email")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter email address"}),pe("email")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pe("email")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Website"}),(0,o.jsx)("input",{type:"url",value:y.website,onChange:e=>fe("website",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pe("website")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter website URL"}),pe("website")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pe("website")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Max Students"}),(0,o.jsx)("input",{type:"number",value:y.max_students,onChange:e=>fe("max_students",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pe("max_students")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter max students"}),pe("max_students")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pe("max_students")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Active Status"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:"checkbox",checked:y.is_active,onChange:e=>fe("is_active",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,o.jsx)("span",{className:"text-xs text-gray-600",children:"School is active"})]})]})]}),(0,o.jsxs)(ge,{title:"Contact Information",defaultExpanded:!1,isActive:"contact-info"===P,onSectionClick:()=>A("contact-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Phone"}),(0,o.jsx)("input",{type:"tel",value:y.phone,onChange:e=>fe("phone",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pe("phone")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter phone number"}),pe("phone")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pe("phone")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Address"}),(0,o.jsx)("textarea",{value:y.address,onChange:e=>fe("address",e.target.value),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white resize-none text-xs "+(pe("address")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter address"}),pe("address")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pe("address")})]})]}),(0,o.jsxs)(ge,{title:"Settings",defaultExpanded:!1,isActive:"settings"===P,onSectionClick:()=>A("settings"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Timezone"}),(0,o.jsxs)("select",{value:y.timezone,onChange:e=>fe("timezone",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pe("timezone")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"UTC",children:"UTC"}),(0,o.jsx)("option",{value:"America/New_York",children:"Eastern Time"}),(0,o.jsx)("option",{value:"America/Chicago",children:"Central Time"}),(0,o.jsx)("option",{value:"America/Denver",children:"Mountain Time"}),(0,o.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time"})]}),pe("timezone")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pe("timezone")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Language"}),(0,o.jsxs)("select",{value:y.language,onChange:e=>fe("language",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pe("language")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"en",children:"English"}),(0,o.jsx)("option",{value:"es",children:"Spanish"}),(0,o.jsx)("option",{value:"fr",children:"French"}),(0,o.jsx)("option",{value:"de",children:"German"})]}),pe("language")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pe("language")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Currency"}),(0,o.jsxs)("select",{value:y.currency,onChange:e=>fe("currency",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(pe("currency")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"USD",children:"USD"}),(0,o.jsx)("option",{value:"EUR",children:"EUR"}),(0,o.jsx)("option",{value:"GBP",children:"GBP"}),(0,o.jsx)("option",{value:"CAD",children:"CAD"})]}),pe("currency")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:pe("currency")})]})]})]})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-100 flex-shrink-0",children:[(0,o.jsx)("button",{onClick:me,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if(y&&j)try{q(e=>e.map(e=>e.id===y.id?y:e)),S({message:"School updated successfully!",type:"success"}),D({}),me(),setTimeout(()=>{S(null)},3e3)}catch(r){var e,t;console.error("Error updating school:",r),null!==(e=r.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors?(D(r.response.data.errors),S({message:r.response.data.message||"Please fix the validation errors below.",type:"error"})):(D({}),S({message:"Failed to update school. Please try again.",type:"error"})),setTimeout(()=>{S(null)},5e3)}},className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-all duration-200 font-medium",children:"Save Changes"})]})]})})}),(0,o.jsx)("div",{className:"fixed inset-0 bg-black transition-opacity duration-500 ease-out z-50 "+(N?"bg-opacity-50":"bg-opacity-0 pointer-events-none"),children:(0,o.jsx)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-500 ease-out flex flex-col "+(N?"translate-x-0":"translate-x-full"),children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-elegant",children:"Add New School"}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1 font-modern",children:"Enter school information"})]}),(0,o.jsx)("button",{onClick:ue,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-all duration-200",children:X({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[Object.keys(L).length>0&&(0,o.jsxs)("div",{className:"mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,o.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:(0,o.jsx)("span",{className:"text-white text-xs font-bold",children:"!"})}),(0,o.jsx)("h3",{className:"text-sm font-semibold text-red-800",children:"Please fix the following errors:"})]}),(0,o.jsx)("ul",{className:"text-xs text-red-700 space-y-1",children:Object.entries(L).map(e=>{let[t,r]=e;const n=t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase());return(0,o.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,o.jsx)("span",{className:"text-red-500 mt-0.5",children:"\u2022"}),(0,o.jsxs)("span",{children:[(0,o.jsxs)("span",{className:"font-medium",children:[n,":"]})," ",r[0]]})]},t)})})]}),(0,o.jsxs)("div",{className:"p-6 space-y-4",children:[(0,o.jsxs)(ge,{title:"Basic Information *",defaultExpanded:!0,isActive:"basic-info"===C,onSectionClick:()=>E("basic-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"School Name *"}),(0,o.jsx)("input",{type:"text",value:M.name,onChange:e=>xe("name",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(he("name")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter school name"}),he("name")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:he("name")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Slug *"}),(0,o.jsx)("input",{type:"text",value:M.slug,onChange:e=>xe("slug",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(he("slug")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter slug"}),he("slug")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:he("slug")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Subdomain *"}),(0,o.jsx)("input",{type:"text",value:M.subdomain,onChange:e=>xe("subdomain",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(he("subdomain")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter subdomain"}),he("subdomain")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:he("subdomain")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Domain"}),(0,o.jsx)("input",{type:"text",value:M.domain,onChange:e=>xe("domain",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(he("domain")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter domain"}),he("domain")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:he("domain")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Email *"}),(0,o.jsx)("input",{type:"email",value:M.email,onChange:e=>xe("email",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(he("email")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter email address"}),he("email")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:he("email")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Website"}),(0,o.jsx)("input",{type:"url",value:M.website,onChange:e=>xe("website",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(he("website")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter website URL"}),he("website")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:he("website")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Max Students"}),(0,o.jsx)("input",{type:"number",value:M.max_students,onChange:e=>xe("max_students",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(he("max_students")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter max students"}),he("max_students")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:he("max_students")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Active Status"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:"checkbox",checked:M.is_active,onChange:e=>xe("is_active",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,o.jsx)("span",{className:"text-xs text-gray-600",children:"School is active"})]})]})]}),(0,o.jsxs)(ge,{title:"Contact Information",defaultExpanded:!1,isActive:"contact-info"===C,onSectionClick:()=>E("contact-info"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Phone"}),(0,o.jsx)("input",{type:"tel",value:M.phone,onChange:e=>xe("phone",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(he("phone")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter phone number"}),he("phone")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:he("phone")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Address"}),(0,o.jsx)("textarea",{value:M.address,onChange:e=>xe("address",e.target.value),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white resize-none text-xs "+(he("address")?"border-red-300 focus:ring-red-500":"border-gray-200"),placeholder:"Enter address"}),he("address")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:he("address")})]})]}),(0,o.jsxs)(ge,{title:"Settings",defaultExpanded:!1,isActive:"settings"===C,onSectionClick:()=>E("settings"),children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Timezone"}),(0,o.jsxs)("select",{value:M.timezone,onChange:e=>xe("timezone",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(he("timezone")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"UTC",children:"UTC"}),(0,o.jsx)("option",{value:"America/New_York",children:"Eastern Time"}),(0,o.jsx)("option",{value:"America/Chicago",children:"Central Time"}),(0,o.jsx)("option",{value:"America/Denver",children:"Mountain Time"}),(0,o.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time"})]}),he("timezone")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:he("timezone")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Language"}),(0,o.jsxs)("select",{value:M.language,onChange:e=>xe("language",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(he("language")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"en",children:"English"}),(0,o.jsx)("option",{value:"es",children:"Spanish"}),(0,o.jsx)("option",{value:"fr",children:"French"}),(0,o.jsx)("option",{value:"de",children:"German"})]}),he("language")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:he("language")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Currency"}),(0,o.jsxs)("select",{value:M.currency,onChange:e=>xe("currency",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs "+(he("currency")?"border-red-300 focus:ring-red-500":"border-gray-200"),children:[(0,o.jsx)("option",{value:"USD",children:"USD"}),(0,o.jsx)("option",{value:"EUR",children:"EUR"}),(0,o.jsx)("option",{value:"GBP",children:"GBP"}),(0,o.jsx)("option",{value:"CAD",children:"CAD"})]}),he("currency")&&(0,o.jsx)("p",{className:"text-xs text-red-600 mt-1",children:he("currency")})]})]})]})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-100 flex-shrink-0",children:[(0,o.jsx)("button",{onClick:ue,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{try{if(!M.name||!M.slug||!M.subdomain||!M.email)return void S({message:"Please fill in all required fields (Name, Slug, Subdomain, Email).",type:"error"});const e={name:M.name,slug:M.slug,subdomain:M.subdomain,domain:M.domain||"",address:M.address||"",phone:M.phone||"",email:M.email,website:M.website||"",timezone:M.timezone||"UTC",language:M.language||"en",currency:M.currency||"USD",is_active:void 0===M.is_active||M.is_active,max_students:M.max_students||1e3,primary_color:M.primary_color||"#667eea",secondary_color:M.secondary_color||"#764ba2"},t=await l.schools.create(e),r={id:t.id||Date.now().toString(),...t,created_at:t.created_at||(new Date).toISOString(),updated_at:t.updated_at||(new Date).toISOString(),number_of_students:0};q(e=>[...e,r]),S({message:"School added successfully!",type:"success"}),O({}),U({name:"",slug:"",subdomain:"",domain:"",address:"",phone:"",email:"",website:"",logo:"",primary_color:"#667eea",secondary_color:"#764ba2",timezone:"UTC",language:"en",currency:"USD",is_active:!0,max_students:1e3,academic_year_start:null,academic_year_end:null}),setTimeout(()=>{ue()},100),setTimeout(()=>{S(null)},3e3)}catch(r){var e,t;console.error("Error adding school:",r),null!==(e=r.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.errors?(O(r.response.data.errors),S({message:r.response.data.message||"Please fix the validation errors below.",type:"error"})):(O({}),S({message:r.message||"Failed to add school. Please try again.",type:"error"})),setTimeout(()=>{S(null)},5e3)}},disabled:!M.name||!M.slug||!M.subdomain||!M.email,className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium",children:"Add School"})]})]})})}),x&&(0,le.createPortal)((0,o.jsx)("div",{className:"fixed w-32 bg-white rounded-md shadow-lg border border-gray-200 z-[9999]","data-portal-dropdown":!0,style:{left:`${h.x}px`,top:`${h.y}px`},onClick:e=>e.stopPropagation(),children:(0,o.jsxs)("div",{className:"py-1",children:[(0,o.jsx)(ce,{permissions:["create_school"],children:(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=$.find(e=>e.id===x);t&&(e=>{v(e),w(e),b(!0),f(null),A("basic-info"),D({})})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-colors duration-200",children:[I({className:"w-3 h-3 mr-2"}),"Edit"]})}),(0,o.jsx)(ce,{permissions:["create_school"],children:(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=$.find(e=>e.id===x);t&&(async e=>{try{q(t=>t.filter(t=>t.id!==e.id)),f(null),S({message:"School deleted successfully!",type:"success"})}catch(t){console.error("Error deleting school:",t),S({message:"Failed to delete school. Please try again.",type:"error"})}})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-red-50 hover:text-red-700 transition-colors duration-200",children:[Z({className:"w-3 h-3 mr-2"}),"Delete"]})})]})}),document.body),_&&(0,o.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[10000] flex items-center p-4 rounded-lg shadow-lg transition-all duration-300",children:(0,o.jsxs)("div",{className:`flex items-center space-x-3 ${"success"===_.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"} px-6 py-4 rounded-lg shadow-xl`,children:["success"===_.type?T({className:"w-5 h-5 text-green-600"}):X({className:"w-5 h-5 text-red-600"}),(0,o.jsx)("span",{className:"text-sm font-medium",children:_.message}),(0,o.jsx)("button",{onClick:()=>S(null),className:"ml-3 text-gray-400 hover:text-gray-600",children:X({className:"w-4 h-4"})})]})})]})},ye=()=>{const[e,t]=(0,n.useState)(""),[r,a]=(0,n.useState)(""),[s,i]=(0,n.useState)(""),[c,d]=(0,n.useState)("asc"),[u,m]=(0,n.useState)("parents"),[x,f]=(0,n.useState)(null),[h,p]=(0,n.useState)({x:0,y:0}),[g,b]=(0,n.useState)(!1),[y,v]=(0,n.useState)(!1),[j,w]=(0,n.useState)(null),[N,k]=(0,n.useState)(null),[_,S]=(0,n.useState)(!1),[C,E]=(0,n.useState)(null),[P,A]=(0,n.useState)([]),[L,O]=(0,n.useState)(!1),[R,D]=(0,n.useState)({first_name:"",last_name:"",title:"",relationship:"",email:"",phone:"",phone_alt:"",address:"",occupation:""}),[M,U]=(0,n.useState)([]),[$,q]=(0,n.useState)(!0),[V,W]=(0,n.useState)(null),[G,Q]=(0,n.useState)(1),[Y]=(0,n.useState)(10),[J,te]=(0,n.useState)(0),[re,ne]=(0,n.useState)(0),[ae,se]=(0,n.useState)(!1),[ie,oe]=(0,n.useState)(!1),de=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;try{q(!0),W(null),Q(e);const r={page:e,page_size:Y,search:t||void 0,ordering:s?`${"desc"===c?"-":""}${s}`:void 0},n=await l.parents.getAll(r);U(n.results||[]),te(n.count||0),ne(Math.ceil((n.count||0)/Y)),se(!!n.next),oe(!!n.previous)}catch(n){console.error("Error fetching parents:",n),W("Failed to fetch parents")}finally{q(!1)}},[G,r,Y,s,c]);(0,n.useEffect)(()=>{de(1)},[de]),(0,n.useEffect)(()=>{const t=setTimeout(()=>{a(e),de(1,e)},500);return()=>clearTimeout(t)},[e,de]);const ue=e=>{s===e?d("asc"===c?"desc":"asc"):(i(e),d("asc")),de(1,r)},me=e=>s!==e?null:"asc"===c?F({className:"w-3 h-3"}):z({className:"w-3 h-3"}),xe=()=>{b(!1)},fe=(e,t)=>{D(r=>({...r,[e]:t}))},he=()=>{S(!1),E(null),A([])},pe=e=>{w(e),v(!0),f(null)},ge=()=>{v(!1),w(null)},be=(e,t)=>{j&&w({...j,[e]:t})};(0,n.useEffect)(()=>{const e=e=>{const t=e.target;t.closest("[data-dropdown-container]")||t.closest("[data-portal-dropdown]")||f(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const ye=e=>{const t={Father:{bg:"bg-blue-100",text:"text-blue-800",label:"Father"},Mother:{bg:"bg-pink-100",text:"text-pink-800",label:"Mother"},Guardian:{bg:"bg-purple-100",text:"text-purple-800",label:"Guardian"},Other:{bg:"bg-gray-100",text:"text-gray-800",label:"Other"}},r=t[e]||t.Other;return(0,o.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r.bg} ${r.text}`,children:r.label})};return(0,o.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-4 mb-4",children:(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("nav",{className:"flex space-x-6",children:[(0,o.jsx)("button",{onClick:()=>m("parents"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("parents"===u?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Parents"}),(0,o.jsx)("button",{onClick:()=>m("relationships"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("relationships"===u?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Relationships"}),(0,o.jsx)("button",{onClick:()=>m("communications"),className:"border-b-2 py-1 px-1 text-xs font-medium transition-colors duration-200 "+("communications"===u?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Communications"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",placeholder:"Search parents...",value:e,onChange:e=>t(e.target.value),className:"pl-8 pr-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-xs"}),(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:K({className:"h-3 w-3 text-gray-400"})})]}),(0,o.jsx)("button",{className:"px-3 py-1.5 border border-gray-300 rounded-md text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:"Filter"}),(0,o.jsxs)("select",{value:s,onChange:e=>i(e.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-md text-xs text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:[(0,o.jsx)("option",{value:"",children:"Sort by"}),(0,o.jsx)("option",{value:"full_name",children:"Full Name"}),(0,o.jsx)("option",{value:"relationship",children:"Relationship"}),(0,o.jsx)("option",{value:"email",children:"Email"}),(0,o.jsx)("option",{value:"phone",children:"Phone"}),(0,o.jsx)("option",{value:"created_at",children:"Created Date"})]}),(0,o.jsx)(ce,{permissions:["access_admin_panel"],children:(0,o.jsx)("button",{onClick:()=>{b(!0),D({first_name:"",last_name:"",title:"",relationship:"",email:"",phone:"",phone_alt:"",address:"",occupation:""})},className:"px-4 py-1.5 bg-blue-600 text-white rounded-md text-xs font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200",children:"+ Add Parent"})})]})]})})}),"parents"===u&&(0,o.jsxs)("div",{className:"bg-white rounded-md shadow-sm",children:[$&&(0,o.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Loading parents..."})]}),V&&(0,o.jsxs)("div",{className:"p-4 text-center",children:[(0,o.jsx)("div",{className:"text-red-600 text-sm mb-2",children:V}),(0,o.jsx)("button",{onClick:()=>de(1),className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors duration-200",children:"Retry"})]}),!$&&!V&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"overflow-x-auto border-0",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("full_name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Full Name"}),me("full_name")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("relationship"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Relationship"}),me("relationship")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("email"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Email"}),me("email")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("phone"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Phone"}),me("phone")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ue("created_at"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Created At"}),me("created_at")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map((e,t)=>(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs font-medium text-gray-900",children:e.full_name}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:ye(e.relationship)}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.email}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:e.phone}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:new Date(e.created_at).toLocaleDateString()}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[(0,o.jsx)("button",{onClick:()=>(async e=>{E(e),S(!0);try{O(!0);const t=await l.parents.getStudents(e.id);A(t.results||[])}catch(V){console.error("Error fetching parent students:",V),A([])}finally{O(!1)}})(e),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors duration-200",title:"View Details",children:H({className:"w-3 h-3"})}),(0,o.jsx)(ce,{permissions:["access_admin_panel"],children:(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)("button",{onClick:t=>{if(t.stopPropagation(),f(x===e.id?null:e.id),x!==e.id){const e=t.currentTarget.getBoundingClientRect();p({x:e.left,y:e.bottom+window.scrollY})}},className:"p-1 rounded-md transition-colors duration-200 "+(x===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:B({className:"w-3 h-3"})})})})]})})]},e.id))})]})})}),!$&&!V&&J>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"h-4 mt-8 rounded-t-lg",style:{backgroundColor:"rgb(249,250,251)"}}),(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-b-lg border-0",style:{backgroundColor:"rgb(249,250,251)"},children:[(0,o.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(0,o.jsx)("span",{className:"font-medium",children:(G-1)*Y+1})," to ",(0,o.jsx)("span",{className:"font-medium",children:Math.min(G*Y,J)})," of ",(0,o.jsx)("span",{className:"font-medium",children:J})," results"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>de(G-1),disabled:!ie,className:"px-3 py-1.5 text-xs font-medium border rounded-lg transition-colors duration-200 text-gray-500 border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"rgb(249,250,251)"},children:"Previous"}),(0,o.jsxs)("span",{className:"px-3 py-1.5 text-xs font-medium text-gray-700",children:["Page ",G," of ",re," (",re>1?`${re} pages`:"1 page",")"]}),(0,o.jsx)("button",{onClick:()=>de(G+1),disabled:!ae,className:"px-3 py-1.5 text-xs font-medium border rounded-lg transition-colors duration-200 text-gray-500 border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"rgb(249,250,251)"},children:"Next"})]})]})]})]}),"relationships"===u&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:ee({className:"mx-auto h-8 w-8"})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Relationship Management"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Manage parent-student relationships and family structures."})]})}),"communications"===u&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Communication Management"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Manage parent communications and notifications."})]})})]}),N&&(0,o.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[10000] flex items-center p-4 rounded-lg shadow-lg transition-all duration-300",children:(0,o.jsxs)("div",{className:`flex items-center space-x-3 ${"success"===N.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"} px-6 py-4 rounded-lg shadow-xl`,children:["success"===N.type?T({className:"w-5 h-5 text-green-600"}):X({className:"w-5 h-5 text-red-600"}),(0,o.jsx)("span",{className:"text-sm font-medium",children:N.message}),(0,o.jsx)("button",{onClick:()=>k(null),className:"ml-3 text-gray-400 hover:text-gray-600",children:X({className:"w-4 h-4"})})]})}),(0,o.jsx)("div",{className:"fixed inset-0 bg-black transition-opacity duration-500 ease-out z-50 "+(g?"bg-opacity-50":"bg-opacity-0 pointer-events-none"),children:(0,o.jsxs)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-500 ease-out flex flex-col "+(g?"translate-x-0":"translate-x-full"),children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-elegant",children:"Add New Parent"}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1 font-modern",children:"Enter parent information"})]}),(0,o.jsx)("button",{onClick:xe,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-all duration-200",children:X({className:"w-4 h-4"})})]}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,o.jsxs)("div",{className:"p-6 space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"First Name *"}),(0,o.jsx)("input",{type:"text",value:R.first_name,onChange:e=>fe("first_name",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"Enter first name"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Last Name *"}),(0,o.jsx)("input",{type:"text",value:R.last_name,onChange:e=>fe("last_name",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"Enter last name"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Title"}),(0,o.jsx)("input",{type:"text",value:R.title,onChange:e=>fe("title",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"e.g., Mr., Mrs., Dr."})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Relationship *"}),(0,o.jsxs)("select",{value:R.relationship,onChange:e=>fe("relationship",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",children:[(0,o.jsx)("option",{value:"",children:"Select relationship"}),(0,o.jsx)("option",{value:"Father",children:"Father"}),(0,o.jsx)("option",{value:"Mother",children:"Mother"}),(0,o.jsx)("option",{value:"Guardian",children:"Guardian"}),(0,o.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Email *"}),(0,o.jsx)("input",{type:"email",value:R.email,onChange:e=>fe("email",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"Enter email address"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Phone *"}),(0,o.jsx)("input",{type:"tel",value:R.phone,onChange:e=>fe("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"Enter phone number"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Alternative Phone"}),(0,o.jsx)("input",{type:"tel",value:R.phone_alt,onChange:e=>fe("phone_alt",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"Enter alternative phone number"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Address"}),(0,o.jsx)("textarea",{value:R.address,onChange:e=>fe("address",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"Enter address",rows:3})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Occupation"}),(0,o.jsx)("input",{type:"text",value:R.occupation,onChange:e=>fe("occupation",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"Enter occupation"})]})]})}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-100 flex-shrink-0",children:[(0,o.jsx)("button",{onClick:xe,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{try{await l.parents.create(R),k({message:"Parent created successfully!",type:"success"}),xe(),de(),setTimeout(()=>{k(null)},3e3)}catch(V){console.error("Error adding parent:",V),k({message:"Failed to add parent. Please try again.",type:"error"}),setTimeout(()=>{k(null)},5e3)}},disabled:!R.first_name||!R.last_name||!R.relationship||!R.email||!R.phone,className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium",children:"Add Parent"})]})]})}),(0,o.jsx)("div",{className:"fixed inset-0 bg-black transition-opacity duration-500 ease-out z-50 "+(y?"bg-opacity-50":"bg-opacity-0 pointer-events-none"),children:(0,o.jsx)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-500 ease-out flex flex-col "+(y?"translate-x-0":"translate-x-full"),children:j&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-xl font-bold text-gray-900 font-elegant",children:"Edit Parent"}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1 font-modern",children:"Update parent information"})]}),(0,o.jsx)("button",{onClick:ge,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-all duration-200",children:X({className:"w-4 h-4"})})]}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,o.jsxs)("div",{className:"p-6 space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Full Name *"}),(0,o.jsx)("input",{type:"text",value:j.full_name,onChange:e=>be("full_name",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"Enter full name"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Relationship *"}),(0,o.jsxs)("select",{value:j.relationship,onChange:e=>be("relationship",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",children:[(0,o.jsx)("option",{value:"Father",children:"Father"}),(0,o.jsx)("option",{value:"Mother",children:"Mother"}),(0,o.jsx)("option",{value:"Guardian",children:"Guardian"}),(0,o.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Email *"}),(0,o.jsx)("input",{type:"email",value:j.email,onChange:e=>be("email",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"Enter email address"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2 tracking-wide",children:"Phone *"}),(0,o.jsx)("input",{type:"tel",value:j.phone,onChange:e=>be("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs",placeholder:"Enter phone number"})]})]})}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-100 flex-shrink-0",children:[(0,o.jsx)("button",{onClick:ge,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if(j)try{const e={first_name:j.full_name.split(" ")[0]||"",last_name:j.full_name.split(" ").slice(1).join(" ")||"",relationship:j.relationship,email:j.email,phone:j.phone};await l.parents.update(j.id,e),de(),k({message:"Parent updated successfully!",type:"success"}),ge(),setTimeout(()=>{k(null)},3e3)}catch(V){console.error("Error updating parent:",V),k({message:"Failed to update parent. Please try again.",type:"error"}),setTimeout(()=>{k(null)},5e3)}},className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-all duration-200 font-medium",children:"Save Changes"})]})]})})}),x&&(0,le.createPortal)((0,o.jsx)("div",{className:"fixed w-32 bg-white rounded-md shadow-lg border border-gray-200 z-[9999]","data-portal-dropdown":!0,style:{left:`${h.x}px`,top:`${h.y}px`},onClick:e=>e.stopPropagation(),children:(0,o.jsxs)("div",{className:"py-1",children:[(0,o.jsx)(ce,{permissions:["access_admin_panel"],children:(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=M.find(e=>e.id===x);t&&pe(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-colors duration-200",children:[I({className:"w-3 h-3 mr-2"}),"Edit"]})}),(0,o.jsx)(ce,{permissions:["access_admin_panel"],children:(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=M.find(e=>e.id===x);t&&(async e=>{try{await l.parents.delete(e.id),U(t=>t.filter(t=>t.id!==e.id)),f(null),k({message:"Parent deleted successfully!",type:"success"}),setTimeout(()=>{k(null)},3e3)}catch(V){console.error("Error deleting parent:",V),k({message:"Failed to delete parent. Please try again.",type:"error"}),setTimeout(()=>{k(null)},5e3)}})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-red-50 hover:text-red-700 transition-colors duration-200",children:[Z({className:"w-3 h-3 mr-2"}),"Delete"]})})]})}),document.body),_&&C&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4",children:(0,o.jsxs)("div",{className:"bg-white shadow-xl max-w-4xl w-full max-h-[85vh] overflow-visible relative",children:[(0,o.jsx)("button",{onClick:he,className:"absolute -top-8 -right-8 w-12 h-12 bg-red-300/80 hover:bg-red-400/90 text-white rounded-full shadow-lg transition-all duration-200 z-[9999] flex items-center justify-center",children:X({className:"w-5 h-5"})}),(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-white",children:[(0,o.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-5 rounded-lg border border-blue-200 shadow-sm mr-6",children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center shadow-lg",children:ee({className:"w-12 h-12 text-white"})}),(0,o.jsx)("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-white shadow-sm",children:(0,o.jsx)("span",{className:"w-2 h-2 bg-white rounded-full"})})]})}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:C.full_name}),(0,o.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Relationship:"}),(0,o.jsx)("span",{children:ye(C.relationship)})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Status:"}),(0,o.jsx)("span",{className:"text-green-600 font-medium",children:"Active"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Email:"}),(0,o.jsx)("span",{children:C.email})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Phone:"}),(0,o.jsx)("span",{className:"font-mono",children:C.phone})]})]})]})]}),(0,o.jsx)("div",{className:"p-3 relative overflow-y-auto max-h-[60vh]",children:(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-2.5 border border-blue-200 shadow-sm",children:[(0,o.jsx)("div",{className:"flex items-center space-x-2 mb-3",children:(0,o.jsx)("h3",{className:"text-lg font-bold text-blue-900",children:"Parent Info"})}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-1.5 border-b border-blue-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-blue-700",children:"Parent ID:"}),(0,o.jsx)("span",{className:"text-xs font-medium text-blue-900 bg-blue-50 px-2 py-1 rounded",children:C.id})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1.5 border-b border-blue-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-blue-700",children:"Title:"}),(0,o.jsx)("span",{className:"text-xs font-medium text-blue-900 bg-blue-50 px-2 py-1 rounded",children:"Mr./Mrs./Dr."})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1.5 border-b border-blue-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-blue-700",children:"First Name:"}),(0,o.jsx)("span",{className:"text-xs text-blue-900",children:C.full_name.split(" ")[0]||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1.5 border-b border-blue-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-blue-700",children:"Last Name:"}),(0,o.jsx)("span",{className:"text-xs text-blue-900",children:C.full_name.split(" ").slice(1).join(" ")||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1.5",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-blue-700",children:"Full Name:"}),(0,o.jsx)("span",{className:"text-xs font-medium text-blue-900 bg-blue-50 px-2 py-1 rounded",children:C.full_name})]})]})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-2.5 border border-green-200 shadow-sm",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,o.jsx)("h3",{className:"text-lg font-bold text-green-900",children:"Students"}),(0,o.jsxs)("span",{className:"text-xs font-medium text-green-700 bg-green-100 px-2 py-1 rounded-full",children:[P.length," student",1!==P.length?"s":""]})]}),L?(0,o.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-600"}),(0,o.jsx)("span",{className:"ml-2 text-sm text-green-700",children:"Loading students..."})]}):0===P.length?(0,o.jsxs)("div",{className:"text-center py-4",children:[(0,o.jsx)("div",{className:"text-green-400 mb-2",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),(0,o.jsx)("p",{className:"text-sm text-green-600",children:"No students found for this parent"})]}):(0,o.jsx)("div",{className:"space-y-2",children:P.map((e,t)=>(0,o.jsxs)("div",{className:""+(t>0?"border-t border-green-200 pt-2":""),children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-green-700",children:"Name:"}),(0,o.jsx)("span",{className:"text-xs font-medium text-green-900 bg-green-50 px-2 py-1 rounded",children:e.student_details.pupil_name})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-green-700",children:"Admission #:"}),(0,o.jsx)("span",{className:"text-xs text-green-900",children:e.student_details.admission_number})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-200",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-green-700",children:"Class:"}),(0,o.jsx)("span",{className:"text-xs text-green-900",children:e.student_details.current_class})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-green-700",children:"Relationship:"}),(0,o.jsx)("span",{className:"text-xs text-green-900",children:e.relationship_type})]}),e.notes&&(0,o.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,o.jsx)("span",{className:"text-xs font-semibold text-green-700",children:"Notes:"}),(0,o.jsx)("span",{className:"text-xs text-green-900",children:e.notes})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,o.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.is_primary_contact&&(0,o.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Primary"}),e.is_emergency_contact&&(0,o.jsx)("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:"Emergency"}),e.can_pick_up&&(0,o.jsx)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"Pick Up"})]}),(0,o.jsxs)("button",{onClick:()=>(async e=>{if(null!==C&&void 0!==C&&C.id&&window.confirm("Are you sure you want to dis-associate this student from the parent?"))try{await l.students.disassociateParent(e.student_details.id,e.id),console.log("Student dis-associated successfully");const t=await l.parents.getStudents(C.id);A(t.results||[])}catch(V){console.error("Error dis-associating student:",V),alert("Failed to dis-associate student. Please try again.")}})(e),className:"text-xs bg-red-100 text-red-800 px-1.5 py-0.5 rounded hover:bg-red-200 transition-colors duration-200 flex items-center gap-1 ml-auto",title:"Dis-associate student",children:[Z({className:"w-3 h-3"}),"Remove"]})]})]},e.id))})]})]})}),(0,o.jsx)("div",{className:"bg-white border-t border-gray-200 p-4",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("div",{className:"text-xs text-gray-700 flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Last updated:"}),(0,o.jsx)("span",{className:"font-medium",children:(new Date).toLocaleDateString()})]}),(0,o.jsxs)("div",{className:"flex space-x-3",children:[(0,o.jsxs)("button",{onClick:()=>{he(),pe(C)},className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105",children:[I({className:"w-4 h-4"}),(0,o.jsx)("span",{className:"text-sm font-medium",children:"Edit"})]}),(0,o.jsxs)("button",{className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105",children:[H({className:"w-4 h-4"}),(0,o.jsx)("span",{className:"text-sm font-medium",children:"View Profile"})]})]})]})})]})})})]})},ve=()=>{const[e,t]=(0,n.useState)(null),[r,a]=(0,n.useState)(!0),[s,l]=(0,n.useState)(null),i={revenue:{currentMonth:125e4,lastMonth:118e4,percentageChange:5.93,currency:"KES"},subscriptions:{totalActive:45,byPlanType:[{planType:"Basic",count:15,percentage:33.3},{planType:"Standard",count:20,percentage:44.4},{planType:"Premium",count:8,percentage:17.8},{planType:"Enterprise",count:2,percentage:4.4}],newThisMonth:8},payments:{totalOutstanding:45e4,overdueInvoices:12,successRate:94.2},schoolActivity:{schoolsWithOverduePayments:8,recentPayments:[{id:"1",schoolName:"St. Mary's Academy",amount:75e3,date:"2024-01-15",status:"completed"},{id:"2",schoolName:"Bright Future School",amount:12e4,date:"2024-01-14",status:"completed"},{id:"3",schoolName:"Excellence Academy",amount:95e3,date:"2024-01-13",status:"pending"}],schoolsRequiringAttention:[{id:"1",name:"Delayed Payment School",currentPlan:"Premium",subscriptionStatus:"overdue",lastPaymentDate:"2023-12-01",outstandingAmount:15e4,requiresAttention:!0},{id:"2",name:"Payment Issues Academy",currentPlan:"Standard",subscriptionStatus:"overdue",lastPaymentDate:"2023-12-15",outstandingAmount:85e3,requiresAttention:!0}]}};(0,n.useEffect)(()=>{(async()=>{try{a(!0),setTimeout(()=>{t(i),a(!1)},1e3)}catch(e){l("Failed to load dashboard data"),a(!1)}})()},[]);const c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"KES";return new Intl.NumberFormat("en-KE",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:0}).format(e)},d=e=>{switch(e){case"completed":return"text-green-600";case"pending":return"text-yellow-600";case"failed":return"text-red-600";default:return"text-gray-600"}},u=e=>{switch(e){case"completed":return T({className:"w-4 h-4 text-green-600"});case"pending":return O({className:"w-4 h-4 text-yellow-600"});case"failed":return t={className:"w-4 h-4 text-red-600"},C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"},child:[]}]})(t);default:return O({className:"w-4 h-4 text-gray-600"})}var t};return r?(0,o.jsx)("div",{className:"p-6",children:(0,o.jsxs)("div",{className:"animate-pulse",children:[(0,o.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[...Array(4)].map((e,t)=>(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,o.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),(0,o.jsx)("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},t))})]})}):s?(0,o.jsx)("div",{className:"p-6",children:(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,o.jsx)("p",{className:"text-red-800",children:s})})}):e?(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Billing Dashboard"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Overview of all billing activity across the platform"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(m={className:"w-6 h-6 text-blue-600"},C({tag:"svg",attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"},child:[]}]})(m))}),(0,o.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"This Month"})]}),(0,o.jsx)("div",{className:"mb-2",children:(0,o.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:c(e.revenue.currentMonth,e.revenue.currency)})}),(0,o.jsxs)("div",{className:"flex items-center",children:[L({className:"w-4 h-4 "+(e.revenue.percentageChange>=0?"text-green-600":"text-red-600")}),(0,o.jsxs)("span",{className:"text-sm font-medium ml-1 "+(e.revenue.percentageChange>=0?"text-green-600":"text-red-600"),children:[e.revenue.percentageChange>=0?"+":"",e.revenue.percentageChange.toFixed(1),"%"]}),(0,o.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"vs last month"})]})]}),(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:ne({className:"w-6 h-6 text-green-600"})}),(0,o.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Active"})]}),(0,o.jsx)("div",{className:"mb-2",children:(0,o.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.subscriptions.totalActive})}),(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:[e.subscriptions.newThisMonth," new this month"]})]}),(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:U({className:"w-6 h-6 text-yellow-600"})}),(0,o.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Outstanding"})]}),(0,o.jsx)("div",{className:"mb-2",children:(0,o.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:c(e.payments.totalOutstanding,e.revenue.currency)})}),(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:[e.payments.overdueInvoices," overdue invoices"]})]}),(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:T({className:"w-6 h-6 text-purple-600"})}),(0,o.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Success Rate"})]}),(0,o.jsx)("div",{className:"mb-2",children:(0,o.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[e.payments.successRate,"%"]})}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Payment success rate"})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Subscriptions by Plan Type"}),(0,o.jsx)("div",{className:"space-y-4",children:e.subscriptions.byPlanType.map(e=>(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-3"}),(0,o.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.planType})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsxs)("span",{className:"text-sm text-gray-600",children:[e.count," schools"]}),(0,o.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[e.percentage,"%"]})]})]},e.planType))})]}),(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Payments"}),(0,o.jsx)("div",{className:"space-y-4",children:e.schoolActivity.recentPayments.map(t=>(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[u(t.status),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t.schoolName}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:new Date(t.date).toLocaleDateString()})]})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsx)("p",{className:"text-sm font-medium text-gray-900",children:c(t.amount,e.revenue.currency)}),(0,o.jsx)("p",{className:`text-xs ${d(t.status)}`,children:t.status})]})]},t.id))})]})]}),(0,o.jsxs)("div",{className:"mt-8 bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Schools Requiring Attention"}),(0,o.jsxs)("span",{className:"text-sm text-gray-500",children:[e.schoolActivity.schoolsRequiringAttention.length," schools"]})]}),(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"School Name"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Plan"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Payment"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outstanding Amount"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.schoolActivity.schoolsRequiringAttention.map(t=>(0,o.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsxs)("div",{className:"flex items-center",children:[Q({className:"w-4 h-4 text-gray-400 mr-2"}),(0,o.jsx)("span",{className:"text-sm font-medium text-gray-900",children:t.name})]})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.currentPlan}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("overdue"===t.subscriptionStatus?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:t.subscriptionStatus})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(t.lastPaymentDate).toLocaleDateString()}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-red-600",children:c(t.outstandingAmount,e.revenue.currency)})]},t.id))})]})})]})]}):null;var m},je={getDashboardStats:async()=>{try{return{success:!0,data:await i.authenticatedRequest("/billing/dashboard/",{method:"GET"})}}catch(e){throw new Error("Failed to fetch dashboard statistics")}},getSchoolsBilling:async()=>{try{return{success:!0,data:await i.authenticatedRequest("/billing/schools/",{method:"GET"})}}catch(e){throw new Error("Failed to fetch schools billing data")}},createBillingFeature:async e=>{try{return await i.authenticatedRequest("/billing/features/",{method:"POST",body:JSON.stringify(e)})}catch(t){throw new Error("Failed to create billing feature")}},updateBillingFeature:async(e,t)=>{try{return await i.authenticatedRequest(`/billing/features/${e}/`,{method:"PUT",body:JSON.stringify(t)})}catch(r){throw new Error("Failed to update billing feature")}},deleteBillingFeature:async e=>{try{return await i.authenticatedRequest(`/billing/features/${e}/`,{method:"DELETE"})}catch(t){throw new Error("Failed to delete billing feature")}},getBillingPlans:async e=>{try{const t=new URLSearchParams;null!==e&&void 0!==e&&e.ordering&&t.append("ordering",e.ordering),null!==e&&void 0!==e&&e.page&&t.append("page",e.page.toString()),null!==e&&void 0!==e&&e.search&&t.append("search",e.search);const r="/billing/plans/"+(t.toString()?`?${t.toString()}`:"");console.log("Making API call to:",r);const n=await i.authenticatedRequest(r,{method:"GET"});return console.log("API response:",n),n}catch(r){var t;throw console.error("Billing API error:",r),console.error("Error details:",{message:r.message,response:r.response,status:null===(t=r.response)||void 0===t?void 0:t.status}),new Error(`Failed to fetch billing plans: ${r.message}`)}},createBillingPlan:async e=>{try{return await i.authenticatedRequest("/billing/plans/",{method:"POST",body:JSON.stringify(e)})}catch(t){throw new Error("Failed to create billing plan")}},updateBillingPlan:async(e,t)=>{try{return await i.authenticatedRequest(`/billing/plans/${e}/`,{method:"PUT",body:JSON.stringify(t)})}catch(r){throw new Error("Failed to update billing plan")}},deleteBillingPlan:async e=>{try{return await i.authenticatedRequest(`/billing/plans/${e}/`,{method:"DELETE"})}catch(t){throw new Error("Failed to delete billing plan")}},getPlanFeatures:async e=>{try{return await i.authenticatedRequest(`/billing/plans/${e}/features/`,{method:"GET"})}catch(t){throw new Error("Failed to fetch plan features")}},getBillingFeatures:async e=>{try{const t=new URLSearchParams;null!==e&&void 0!==e&&e.ordering&&t.append("ordering",e.ordering),null!==e&&void 0!==e&&e.page&&t.append("page",e.page.toString()),null!==e&&void 0!==e&&e.search&&t.append("search",e.search);const r="/billing/features/"+(t.toString()?`?${t.toString()}`:"");console.log("Making API call to:",r);const n=await i.authenticatedRequest(r,{method:"GET"});return console.log("API response:",n),n}catch(r){var t;throw console.error("Billing Features API error:",r),console.error("Error details:",{message:r.message,response:r.response,status:null===(t=r.response)||void 0===t?void 0:t.status}),new Error(`Failed to fetch billing features: ${r.message}`)}},addFeatureToPlan:async(e,t)=>{try{return await i.authenticatedRequest(`/billing/plans/${e}/features/`,{method:"POST",body:JSON.stringify(t)})}catch(r){throw new Error("Failed to add feature to plan")}},getSchoolSubscriptions:async e=>{try{const t=new URLSearchParams;null!==e&&void 0!==e&&e.ordering&&t.append("ordering",e.ordering),null!==e&&void 0!==e&&e.page&&t.append("page",e.page.toString()),null!==e&&void 0!==e&&e.search&&t.append("search",e.search);const r="/billing/subscriptions/"+(t.toString()?`?${t.toString()}`:"");console.log("Making API call to:",r);const n=await i.authenticatedRequest(r,{method:"GET"});return console.log("API response:",n),n}catch(r){var t;throw console.error("School Subscriptions API error:",r),console.error("Error details:",{message:r.message,response:r.response,status:null===(t=r.response)||void 0===t?void 0:t.status}),new Error(`Failed to fetch school subscriptions: ${r.message}`)}},updateSchoolSubscription:async(e,t)=>{try{return await i.authenticatedRequest(`/billing/subscriptions/${e}/`,{method:"PUT",body:JSON.stringify(t)})}catch(r){throw new Error("Failed to update school subscription")}},getInvoices:async()=>{try{return{success:!0,data:await i.authenticatedRequest("/billing/invoices/",{method:"GET"})}}catch(e){throw new Error("Failed to fetch invoices")}},getInvoiceDetails:async e=>{try{return await i.authenticatedRequest(`/billing/invoices/${e}/`,{method:"GET"})}catch(t){throw new Error("Failed to fetch invoice details")}},sendInvoice:async e=>{try{return await i.authenticatedRequest(`/billing/invoices/${e}/send/`,{method:"POST"})}catch(t){throw new Error("Failed to send invoice")}},voidInvoice:async e=>{try{return await i.authenticatedRequest(`/billing/invoices/${e}/void/`,{method:"POST"})}catch(t){throw new Error("Failed to void invoice")}}},we=[{id:"1",name:"Basic Plan",plan_type:"basic",description:"Essential features for small schools",is_active:!0,is_default:!1,features:[],created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:"2",name:"Standard Plan",plan_type:"standard",description:"Comprehensive features for medium schools",is_active:!0,is_default:!0,features:[],created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"}],Ne=()=>{var e,t,r,a,s,l,i,c,d,u,m,x,f,h,p,g,b,y,v;const[j,w]=(0,n.useState)(""),[N,k]=(0,n.useState)(""),[_,S]=(0,n.useState)(""),[C,E]=(0,n.useState)("asc"),[P,A]=(0,n.useState)("plans"),[L,O]=(0,n.useState)(null),[R,D]=(0,n.useState)({x:0,y:0}),[M,U]=(0,n.useState)(null),[$,q]=(0,n.useState)(!1),[V,W]=(0,n.useState)(null),[Q,Y]=(0,n.useState)(!1),[J,ee]=(0,n.useState)([]),[te,re]=(0,n.useState)(""),[ne,ae]=(0,n.useState)(""),[se,ie]=(0,n.useState)(""),[oe,ce]=(0,n.useState)(""),[de,ue]=(0,n.useState)(!1),[me,xe]=(0,n.useState)(null),[fe,he]=(0,n.useState)(!1),[pe,ge]=(0,n.useState)([]),[be,ye]=(0,n.useState)([]),[ve,Ne]=(0,n.useState)({school:"",start_date:"",interval:"monthly",status:"active",end_date:"",auto_renew:!0,base_price:"",custom_price:"",discount_percent:"",notes:"",plan:"",custom_plan_name:""}),[ke,_e]=(0,n.useState)({}),[Se,Ce]=(0,n.useState)(""),[Ee,Pe]=(0,n.useState)(!1),[Ae,Le]=(0,n.useState)(null),[Te,ze]=(0,n.useState)({}),[Fe,Oe]=(0,n.useState)(""),[Re,De]=(0,n.useState)(1),[Me]=(0,n.useState)(20),[Ie,Be]=(0,n.useState)(0),[Ue,$e]=(0,n.useState)(0),[He,qe]=(0,n.useState)(!1),[Ve,We]=(0,n.useState)(!1),[Ge,Qe]=(0,n.useState)([]),[Ke,Ye]=(0,n.useState)(!1),[Je,Xe]=(0,n.useState)(null),[Ze,et]=(0,n.useState)([]),[tt,rt]=(0,n.useState)(!1),[nt,at]=(0,n.useState)(null),[st,lt]=(0,n.useState)(1),[it,ot]=(0,n.useState)(0),[ct,dt]=(0,n.useState)(0),[ut,mt]=(0,n.useState)(!1),[xt,ft]=(0,n.useState)(!1),[ht,pt]=(0,n.useState)([]),[gt,bt]=(0,n.useState)(!1),[yt,vt]=(0,n.useState)(null),jt=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;try{Ye(!0),Xe(null),De(e);const r=sessionStorage.getItem("authToken");console.log("Auth token exists:",!!r);const n={page:e};if(t&&(n.search=t),_){const e="desc"===C?`-${_}`:_;n.ordering=e}console.log("Fetching plans with params:",n);const a=await je.getBillingPlans(n);if(console.log("Full response:",a),"success"===a.status&&a.data)Qe(a.data.results),Be(a.data.count),$e(Math.ceil(a.data.count/Me)),qe(!!a.data.next),We(!!a.data.previous);else{if(!a.results||void 0===a.count)throw new Error("Failed to fetch billing plans");Qe(a.results),Be(a.count),$e(Math.ceil(a.count/Me)),qe(!!a.next),We(!!a.previous)}}catch(r){console.error("Error fetching plans:",r),Xe("Failed to fetch billing plans"),Qe(we),Be(we.length),$e(Math.ceil(we.length/Me)),qe(!1),We(!1)}finally{Ye(!1)}},[Me,_,C]),wt=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;try{rt(!0),at(null),lt(e);const r=sessionStorage.getItem("authToken");console.log("Auth token exists for features:",!!r);const n={page:e};if(t&&(n.search=t),_){const e="desc"===C?`-${_}`:_;n.ordering=e}console.log("Fetching features with params:",n);const a=await je.getBillingFeatures(n);if(console.log("Features response:",a),"success"===a.status&&a.data)et(a.data.results),ot(a.data.count),dt(Math.ceil(a.data.count/Me)),mt(!!a.data.next),ft(!!a.data.previous);else{if(!a.results||void 0===a.count)throw new Error("Failed to fetch billing features");et(a.results),ot(a.count),dt(Math.ceil(a.count/Me)),mt(!!a.next),ft(!!a.previous)}}catch(r){console.error("Error fetching features:",r),at("Failed to fetch billing features"),et([]),ot(0),dt(0),mt(!1),ft(!1)}finally{rt(!1)}},[Me,_,C]),Nt=(0,n.useCallback)(async()=>{try{bt(!0),vt(null);const e=sessionStorage.getItem("authToken");console.log("Auth token exists for subscriptions:",!!e),console.log("Fetching school subscriptions...");const t=await je.getSchoolSubscriptions();console.log("Subscriptions response:",t),"success"===t.status&&t.data?pt(t.data.results):t.results&&t.results.length>0?pt(t.results):pt([])}catch(e){console.error("Error fetching subscriptions:",e),vt("Failed to fetch school subscriptions"),pt([])}finally{bt(!1)}},[]);(0,n.useEffect)(()=>{(async()=>{try{console.log("Testing API connectivity...");const e=await fetch("http://127.0.0.1:8000/api/v1/billing/plans/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${sessionStorage.getItem("authToken")}`}});console.log("Test API response status:",e.status),console.log("Test API response headers:",e.headers),e.ok||console.error("Test API failed:",e.status,e.statusText)}catch(Je){console.error("Test API error:",Je)}})(),jt(1)},[jt]),(0,n.useEffect)(()=>{"features"===P&&wt(1)},[P,wt]),(0,n.useEffect)(()=>{"subscriptions"===P&&Nt()},[P,Nt]),(0,n.useEffect)(()=>{const e=setTimeout(()=>{k(j),"plans"===P?jt(1,j):"features"===P&&wt(1,j)},500);return()=>clearTimeout(e)},[j,jt,wt,P]);const kt=e=>{const t=e.charAt(0).toUpperCase()+e.slice(1);return(0,o.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${{basic:"bg-gray-100 text-gray-800",standard:"bg-blue-100 text-blue-800",premium:"bg-purple-100 text-purple-800",enterprise:"bg-green-100 text-green-800"}[e]||"bg-gray-100 text-gray-800"}`,children:t})},_t=Ge,St=e=>{_===e?E("asc"===C?"desc":"asc"):(S(e),E("asc")),jt(1,N)},Ct=e=>_!==e?null:"asc"===C?F({className:"w-3 h-3"}):z({className:"w-3 h-3"}),Et=(0,n.useCallback)(async()=>{try{const e=await fetch("http://127.0.0.1:8000/api/v1/schools",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${sessionStorage.getItem("authToken")}`}});if(e.ok){const t=await e.json();console.log("Schools API response:",t),t.data&&t.data.results&&Array.isArray(t.data.results)?(console.log("Setting schools from data.data.results:",t.data.results),ge(t.data.results)):t.results&&Array.isArray(t.results)?(console.log("Setting schools from data.results:",t.results),ge(t.results)):Array.isArray(t)?(console.log("Setting schools from direct array:",t),ge(t)):(console.error("Unexpected schools data format:",t),ge([]))}else console.error("Failed to fetch schools:",e.status),ge([])}catch(Je){console.error("Error fetching schools:",Je),ge([])}},[]),Pt=(0,n.useCallback)(async()=>{try{const e=await je.getBillingPlans();console.log("Billing plans API response:",e),e.results&&Array.isArray(e.results)?ye(e.results):e.data&&e.data.results&&Array.isArray(e.data.results)?ye(e.data.results):(console.error("Unexpected billing plans data format:",e),ye([]))}catch(Je){console.error("Error fetching billing plans for subscription:",Je),ye([])}},[]);return(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Billing Plans"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Create and manage global billing plans"})]}),(0,o.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:(0,o.jsx)("div",{className:"border-b border-gray-200",children:(0,o.jsxs)("div",{className:"flex items-center justify-between px-6",children:[(0,o.jsxs)("nav",{className:"flex space-x-8",children:[(0,o.jsx)("button",{onClick:()=>A("plans"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 "+("plans"===P?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Plans"}),(0,o.jsx)("button",{onClick:()=>A("features"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 "+("features"===P?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Features"}),(0,o.jsx)("button",{onClick:()=>A("subscriptions"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 "+("subscriptions"===P?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"School Subscriptions"}),(0,o.jsx)("button",{onClick:()=>A("pricing"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 "+("pricing"===P?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Pricing"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",placeholder:"features"===P?"Search features...":"subscriptions"===P?"Search subscriptions...":"Search plans...",value:j,onChange:e=>w(e.target.value),className:"pl-8 pr-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-xs"}),(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:K({className:"h-3 w-3 text-gray-400"})})]}),(0,o.jsx)("button",{className:"px-3 py-1.5 border border-gray-300 rounded-md text-xs text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:"Filter"}),(0,o.jsxs)("select",{value:_,onChange:e=>S(e.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-md text-xs text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",children:[(0,o.jsx)("option",{value:"",children:"Sort by"}),(0,o.jsx)("option",{value:"name",children:"Name"}),(0,o.jsx)("option",{value:"plan_type",children:"Plan Type"}),(0,o.jsx)("option",{value:"is_active",children:"Status"}),(0,o.jsx)("option",{value:"created_at",children:"Created Date"})]}),(0,o.jsxs)("button",{onClick:"subscriptions"===P?async()=>{try{console.log("Opening subscription drawer, current schools state:",pe),await Promise.all([Et(),Pt()]),Ne({school:"",start_date:"",interval:"monthly",status:"active",end_date:"",auto_renew:!0,base_price:"",custom_price:"",discount_percent:"",notes:"",plan:"",custom_plan_name:""}),_e({}),Ce(""),he(!0)}catch(Je){console.error("Error preparing subscription form:",Je),U({message:"Failed to load form data. Please try again.",type:"error"})}}:()=>U({message:"Add plan functionality coming soon!",type:"success"}),className:"px-4 py-1.5 bg-blue-600 text-white rounded-md text-xs font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200",children:["+ Add ","subscriptions"===P?"Subscription":"Plan"]})]})]})})}),"plans"===P&&(0,o.jsxs)("div",{className:"bg-white rounded-md shadow-sm",children:[Ke&&(0,o.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Loading plans..."})]}),Je&&(0,o.jsxs)("div",{className:"p-4 text-center",children:[(0,o.jsx)("div",{className:"text-red-600 text-sm mb-2",children:Je}),(0,o.jsx)("button",{onClick:()=>jt(1),className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors duration-200",children:"Retry"})]}),!Ke&&!Je&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"overflow-x-auto border-0",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>St("name"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Name"}),Ct("name")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>St("plan_type"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Plan Type"}),Ct("plan_type")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Description"})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>St("is_active"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Status"}),Ct("is_active")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Features"})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>St("created_at"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Created At"}),Ct("created_at")]})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Actions"})})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:_t.map((e,t)=>{return(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.is_default&&(0,o.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 ml-2",children:"Default"})]})}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:kt(e.plan_type)}),(0,o.jsx)("td",{className:"px-4 py-2",children:(0,o.jsx)("div",{className:"text-sm text-gray-900 max-w-xs truncate",title:e.description,children:e.description||"-"})}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:(r=e.is_active,(0,o.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(r?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:r?"Active":"Inactive"}))}),(0,o.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:[e.features.length," features"]}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:new Date(e.created_at).toLocaleDateString()}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,o.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{W(e),q(!0)})(e)},className:"p-1 rounded-md transition-colors duration-200 text-blue-600 hover:text-blue-700 hover:bg-blue-50",title:"View Plan Details",children:H({className:"w-3 h-3"})}),(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)("button",{onClick:t=>{if(t.stopPropagation(),O(L===e.id?null:e.id),L!==e.id){const e=t.currentTarget.getBoundingClientRect();D({x:e.left,y:e.bottom+window.scrollY})}},className:"p-1 rounded-md transition-colors duration-200 "+(L===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:B({className:"w-3 h-3"})})})]})})]},e.id);var r})})]})})}),!Ke&&!Je&&Ie>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"h-4 mt-8 rounded-t-lg",style:{backgroundColor:"rgb(249,250,251)"}}),(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-b-lg border-0",style:{backgroundColor:"rgb(249,250,251)"},children:[(0,o.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(0,o.jsx)("span",{className:"font-medium",children:(Re-1)*Me+1})," to ",(0,o.jsx)("span",{className:"font-medium",children:Math.min(Re*Me,Ie)})," of ",(0,o.jsx)("span",{className:"font-medium",children:Ie})," results"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>jt(Re-1),disabled:!Ve,className:"px-3 py-1.5 text-xs font-medium border rounded-lg transition-colors duration-200 text-gray-500 border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"rgb(249,250,251)"},children:"Previous"}),(0,o.jsxs)("span",{className:"px-3 py-1.5 text-xs font-medium text-gray-700",children:["Page ",Re," of ",Ue," (",Ue>1?`${Ue} pages`:"1 page",")"]}),(0,o.jsx)("button",{onClick:()=>jt(Re+1),disabled:!He,className:"px-3 py-1.5 text-xs font-medium border rounded-lg transition-colors duration-200 text-gray-500 border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"rgb(249,250,251)"},children:"Next"})]})]})]})]}),"features"===P&&(0,o.jsxs)("div",{className:"bg-white rounded-md shadow-sm",children:[tt&&(0,o.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Loading features..."})]}),nt&&(0,o.jsxs)("div",{className:"p-4 text-center",children:[(0,o.jsx)("div",{className:"text-red-600 text-sm mb-2",children:nt}),(0,o.jsx)("button",{onClick:()=>wt(1),className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors duration-200",children:"Retry"})]}),!tt&&!nt&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"overflow-x-auto border-0",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Name"})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Code"})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Description"})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Is Active"})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Is Billable"})})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Ze.map((e,t)=>(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-gray-900 font-mono",children:e.code})}),(0,o.jsx)("td",{className:"px-4 py-2",children:(0,o.jsx)("div",{className:"text-sm text-gray-900 max-w-xs truncate",title:e.description,children:e.description||"-"})}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:(0,o.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Inactive"})}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:(0,o.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.is_billable?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.is_billable?"Billable":"Non-Billable"})})]},e.id))})]})}),ct>1&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"h-4 mt-8 rounded-t-lg",style:{backgroundColor:"rgb(249,250,251)"}}),(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-b-lg border-0",style:{backgroundColor:"rgb(249,250,251)"},children:[(0,o.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(0,o.jsx)("span",{className:"font-medium",children:(st-1)*Me+1})," to ",(0,o.jsx)("span",{className:"font-medium",children:Math.min(st*Me,it)})," of ",(0,o.jsx)("span",{className:"font-medium",children:it})," results"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>wt(st-1),disabled:!xt,className:"px-3 py-1.5 text-xs font-medium border rounded-lg transition-colors duration-200 text-gray-500 border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"rgb(249,250,251)"},children:"Previous"}),(0,o.jsxs)("span",{className:"px-3 py-1.5 text-xs font-medium text-gray-700",children:["Page ",st," of ",ct," (",ct>1?`${ct} pages`:"1 page",")"]}),(0,o.jsx)("button",{onClick:()=>wt(st+1),disabled:!ut,className:"px-3 py-1.5 text-xs font-medium border rounded-lg transition-colors duration-200 text-gray-500 border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"rgb(249,250,251)"},children:"Next"})]})]})]})]})]}),"subscriptions"===P&&(0,o.jsxs)("div",{className:"bg-white rounded-md shadow-sm",children:[gt&&(0,o.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,o.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Loading subscriptions..."})]}),yt&&(0,o.jsxs)("div",{className:"p-4 text-center",children:[(0,o.jsx)("div",{className:"text-red-600 text-sm mb-2",children:yt}),(0,o.jsx)("button",{onClick:()=>Nt(),className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors duration-200",children:"Retry"})]}),!gt&&!yt&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"overflow-x-auto border-0",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"School Name"})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Plan Name"})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Interval"})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Status"})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Start Date"})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"End Date"})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Auto Renew"})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Students Count"})}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:(0,o.jsx)("span",{children:"Actions"})})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:ht.length>0?ht.map((e,t)=>{var r,n;return(0,o.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(null===(r=e.school_details)||void 0===r?void 0:r.name)||"N/A"})}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-gray-900",children:(null===(n=e.plan_details)||void 0===n?void 0:n.name)||e.custom_plan_name||"N/A"})}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-gray-900 capitalize",children:e.interval||"N/A"})}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:(0,o.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("active"===e.status?"bg-green-100 text-green-800":"canceled"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status||"N/A"})}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:e.start_date?new Date(e.start_date).toLocaleDateString():"N/A"}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:e.end_date?new Date(e.end_date).toLocaleDateString():"N/A"}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:(0,o.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.auto_renew?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.auto_renew?"Yes":"No"})}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:e.student_count||"0"}),(0,o.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 relative",children:(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,o.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{xe(e),ue(!0)})(e)},className:"p-1 rounded-md transition-colors duration-200 text-blue-600 hover:text-blue-700 hover:bg-blue-50",title:"View Subscription Details",children:H({className:"w-3 h-3"})}),(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)("button",{onClick:t=>{if(t.stopPropagation(),O(L===e.id?null:e.id),L!==e.id){const e=t.currentTarget.getBoundingClientRect();D({x:e.left,y:e.bottom+window.scrollY})}},className:"p-1 rounded-md transition-colors duration-200 "+(L===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"More Options",children:B({className:"w-3 h-3"})})})]})})]},e.id)}):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:9,className:"px-4 py-8 text-center text-sm text-gray-500",children:"No school subscriptions found"})})})]})})})]}),"pricing"===P&&(0,o.jsx)("div",{className:"bg-white rounded-md shadow-sm p-6",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-3",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Pricing Management"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Configure pricing and billing settings."})]})}),L&&"plans"===P&&(0,le.createPortal)((0,o.jsx)("div",{className:"fixed w-32 bg-white rounded-md shadow-lg border border-gray-200 z-[9999]","data-portal-dropdown":!0,style:{left:`${R.x}px`,top:`${R.y}px`},onClick:e=>e.stopPropagation(),children:(0,o.jsxs)("div",{className:"py-1",children:[(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=Ge.find(e=>e.id===L);t&&(O(null),U({message:"Edit functionality coming soon!",type:"success"}))},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-colors duration-200",children:[I({className:"w-3 h-3 mr-2"}),"Edit"]}),(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=Ge.find(e=>e.id===L);t&&(async e=>{try{Qe(t=>t.filter(t=>t.id!==e.id)),O(null),U({message:"Plan deleted successfully!",type:"success"})}catch(Je){console.error("Error deleting plan:",Je),U({message:"Failed to delete plan. Please try again.",type:"error"})}})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-red-50 hover:text-red-700 transition-colors duration-200",children:[Z({className:"w-3 h-3 mr-2"}),"Delete"]})]})}),document.body),L&&"subscriptions"===P&&(0,le.createPortal)((0,o.jsx)("div",{className:"fixed w-32 bg-white rounded-md shadow-lg border border-gray-200 z-[9999]","data-portal-dropdown":!0,style:{left:`${R.x}px`,top:`${R.y}px`},onClick:e=>e.stopPropagation(),children:(0,o.jsxs)("div",{className:"py-1",children:[(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();const t=ht.find(e=>e.id===L);t&&(async e=>{try{console.log("Opening edit subscription drawer for:",e),0===pe.length&&await Et(),0===be.length&&await Pt(),Le(e),Ne({school:e.school,start_date:e.start_date,interval:e.interval,status:e.status,end_date:e.end_date||"",auto_renew:e.auto_renew,base_price:e.base_price||"",custom_price:e.custom_price||"",discount_percent:e.discount_percent||"",notes:e.notes||"",plan:e.plan,custom_plan_name:e.custom_plan_name||""}),ze({}),Oe(""),Pe(!0)}catch(Je){console.error("Error preparing edit subscription form:",Je),U({message:"Failed to load subscription data. Please try again.",type:"error"})}})(t)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-colors duration-200",children:[I({className:"w-3 h-3 mr-2"}),"Edit"]}),(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation();ht.find(e=>e.id===L)&&U({message:"Delete subscription functionality coming soon!",type:"success"})},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-red-50 hover:text-red-700 transition-colors duration-200",children:[Z({className:"w-3 h-3 mr-2"}),"Delete"]})]})}),document.body),M&&(0,o.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[10000] flex items-center p-4 rounded-lg shadow-lg transition-all duration-300",children:(0,o.jsxs)("div",{className:`flex items-center space-x-3 ${"success"===M.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"} px-6 py-4 rounded-lg shadow-xl`,children:["success"===M.type?T({className:"w-5 h-5 text-green-600"}):X({className:"w-5 h-5 text-red-600"}),(0,o.jsx)("span",{className:"text-sm font-medium",children:M.message}),(0,o.jsx)("button",{onClick:()=>U(null),className:"ml-3 text-gray-400 hover:text-gray-600",children:X({className:"w-4 h-4"})})]})}),$&&V&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10001]",children:(0,o.jsxs)("div",{className:"bg-purple-50 rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[70vh] overflow-hidden",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-purple-200",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-purple-600 rounded flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,o.jsx)("h2",{className:"text-lg font-bold text-purple-900",children:V.name})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>(async()=>{try{const e=await je.getBillingFeatures();e.results&&e.results.length>0?ee(e.results):e.data&&e.data.results?ee(e.data.results):ee([]),re(""),ae(""),ie(""),ce(""),Y(!0)}catch(Je){console.error("Error fetching features:",Je),U({message:"Failed to load available features",type:"error"})}})(),className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center text-white hover:bg-purple-700 transition-colors duration-200",title:"Add Feature",children:G({className:"w-3 h-3"})}),(0,o.jsx)("button",{onClick:()=>q(!1),className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center text-white hover:bg-purple-700 transition-colors duration-200",children:(0,o.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,o.jsx)("div",{className:"p-4 overflow-y-auto max-h-[calc(70vh-120px)]",children:V.features&&V.features.length>0?(0,o.jsx)("div",{className:"space-y-3",children:V.features.map((e,t)=>{var r,n,a,s;return(0,o.jsxs)("div",{className:"bg-white rounded-lg p-3 border border-purple-200 relative",children:[(0,o.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-purple-900",children:(null===(r=e.feature_details)||void 0===r?void 0:r.name)||"Unknown Feature"}),(0,o.jsx)("span",{className:"inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:(null===(n=e.feature_details)||void 0===n?void 0:n.code)||"N/A"})]})}),(0,o.jsx)("div",{className:"mb-2 pb-2 border-b border-purple-100",children:(0,o.jsx)("p",{className:"text-xs text-gray-600",children:(null===(a=e.feature_details)||void 0===a?void 0:a.description)||"No description available"})}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-purple-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-purple-900",children:"Included Quantity:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:(null===(s=e.included_quantity)||void 0===s?void 0:s.toLocaleString())||"0"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-purple-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-purple-900",children:"Price Per Unit:"}),(0,o.jsxs)("span",{className:"text-xs text-gray-700 font-semibold",children:["$",e.price_per_unit||"0.00"]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-purple-900",children:"Overage Price:"}),(0,o.jsxs)("span",{className:"text-xs text-gray-700 font-semibold",children:["$",e.overage_price_per_unit||"0.00"]})]})]}),(0,o.jsx)("button",{onClick:()=>{return t=V,r=e.id,U({message:"Remove feature functionality coming soon!",type:"success"}),void console.log("Removing feature from plan:",t,"Feature ID:",r);var t,r},className:"absolute top-2 right-2 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-white hover:bg-red-600 transition-colors duration-200",title:"Remove Feature",children:Z({className:"w-2.5 h-2.5"})})]},e.id)})}):(0,o.jsxs)("div",{className:"text-center py-6",children:[(0,o.jsx)("div",{className:"text-purple-400 mb-2",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-purple-900 mb-1",children:"No Features Found"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"This plan doesn't have any features configured yet."})]})}),(0,o.jsx)("div",{className:"flex items-center justify-end p-4 border-t border-purple-200 bg-purple-50",children:(0,o.jsx)("button",{onClick:()=>q(!1),className:"px-4 py-1.5 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors duration-200 font-medium text-sm",children:"Close"})})]})}),Q&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-end z-[10002]",children:(0,o.jsxs)("div",{className:"bg-white h-full w-96 shadow-xl overflow-y-auto",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add Feature to Plan"}),(0,o.jsx)("button",{onClick:()=>Y(!1),className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:X({className:"w-6 h-6"})})]}),(0,o.jsxs)("div",{className:"p-6 space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plan"}),(0,o.jsx)("input",{type:"text",value:(null===V||void 0===V?void 0:V.name)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-700"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Feature *"}),(0,o.jsxs)("select",{value:te,onChange:e=>re(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,o.jsx)("option",{value:"",children:"Select a feature"}),J.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Included Quantity"}),(0,o.jsx)("input",{type:"number",value:se,onChange:e=>ie(e.target.value),placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Per Unit"}),(0,o.jsx)("input",{type:"number",step:"0.01",value:ne,onChange:e=>ae(e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Overage Price Per Unit"}),(0,o.jsx)("input",{type:"number",step:"0.01",value:oe,onChange:e=>ce(e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[(0,o.jsx)("button",{onClick:()=>Y(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if(te&&V)try{const e={plan:V.id,feature:te,included_quantity:parseInt(se)||0,price_per_unit:parseFloat(ne)||0,overage_price_per_unit:parseFloat(oe)||0};if(console.log("Adding feature to plan:",e),U({message:"Feature added successfully!",type:"success"}),Y(!1),V){const e=Ge.find(e=>e.id===V.id);e&&W(e)}}catch(Je){console.error("Error adding feature:",Je),U({message:"Failed to add feature",type:"error"})}else U({message:"Please select a feature",type:"error"})},className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors duration-200",children:"Add Feature"})]})]})}),fe&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-end z-[10002]",children:(0,o.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 h-full w-96 shadow-2xl overflow-y-auto border-l border-gray-100",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Add New Subscription"})]}),(0,o.jsx)("button",{onClick:()=>he(!1),className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:X({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[Se&&(0,o.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-4 shadow-sm",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-sm font-medium text-red-800",children:Se})})]})}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"School *"]}),(0,o.jsxs)("select",{value:ve.school,onChange:e=>Ne({...ve,school:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(ke.school?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select a school"}),Array.isArray(pe)&&pe.length>0?pe.map(e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id)):(0,o.jsx)("option",{value:"",disabled:!0,children:"Loading schools..."})]}),ke.school&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.school})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Plan *"]}),(0,o.jsxs)("select",{value:ve.plan,onChange:e=>Ne({...ve,plan:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(ke.plan?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select a plan"}),Array.isArray(be)&&be.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.name," (",e.plan_type,")"]},e.id))]}),ke.plan&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.plan})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Custom Plan Name"]}),(0,o.jsx)("input",{type:"text",value:ve.custom_plan_name,onChange:e=>Ne({...ve,custom_plan_name:e.target.value}),placeholder:"Enter custom plan name...",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+(ke.custom_plan_name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),ke.custom_plan_name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.custom_plan_name})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Start Date *"]}),(0,o.jsx)("input",{type:"date",value:ve.start_date,onChange:e=>Ne({...ve,start_date:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(ke.start_date?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),ke.start_date&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.start_date})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-1.5"}),"End Date"]}),(0,o.jsx)("input",{type:"date",value:ve.end_date,onChange:e=>Ne({...ve,end_date:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-100 focus:border-red-500 transition-all duration-200 bg-white "+(ke.end_date?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),ke.end_date&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.end_date})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Billing Interval *"]}),(0,o.jsxs)("select",{value:ve.interval,onChange:e=>Ne({...ve,interval:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+(ke.interval?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"monthly",children:"Monthly"}),(0,o.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,o.jsx)("option",{value:"yearly",children:"Yearly"}),(0,o.jsx)("option",{value:"custom",children:"Custom"})]}),ke.interval&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.interval})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-teal-500 rounded-full mr-1.5"}),"Status *"]}),(0,o.jsxs)("select",{value:ve.status,onChange:e=>Ne({...ve,status:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-100 focus:border-teal-500 transition-all duration-200 bg-white "+(ke.status?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"active",children:"Active"}),(0,o.jsx)("option",{value:"pending",children:"Pending"}),(0,o.jsx)("option",{value:"canceled",children:"Canceled"}),(0,o.jsx)("option",{value:"expired",children:"Expired"}),(0,o.jsx)("option",{value:"trial",children:"Trial"})]}),ke.status&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.status})]})]}),(0,o.jsx)("div",{children:(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",checked:ve.auto_renew,onChange:e=>Ne({...ve,auto_renew:e.target.checked}),className:"h-3 w-3 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsx)("span",{className:"ml-2 text-xs text-gray-700",children:"Auto Renew"})]})}),(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-1.5"}),"Base Price"]}),(0,o.jsx)("input",{type:"number",step:"0.01",value:ve.base_price,onChange:e=>Ne({...ve,base_price:e.target.value}),placeholder:"0.00",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-500 transition-all duration-200 bg-white "+(ke.base_price?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),ke.base_price&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.base_price})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"Custom Price"]}),(0,o.jsx)("input",{type:"number",step:"0.01",value:ve.custom_price,onChange:e=>Ne({...ve,custom_price:e.target.value}),placeholder:"0.00",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 transition-all duration-200 bg-white "+(ke.custom_price?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),ke.custom_price&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.custom_price})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-pink-500 rounded-full mr-1.5"}),"Discount %"]}),(0,o.jsx)("input",{type:"number",step:"0.01",value:ve.discount_percent,onChange:e=>Ne({...ve,discount_percent:e.target.value}),placeholder:"0.00",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-pink-500 transition-all duration-200 bg-white "+(ke.discount_percent?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),ke.discount_percent&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.discount_percent})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-violet-500 rounded-full mr-1.5"}),"Notes"]}),(0,o.jsx)("textarea",{value:ve.notes,onChange:e=>Ne({...ve,notes:e.target.value}),placeholder:"Enter notes...",rows:2,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-100 focus:border-violet-500 transition-all duration-200 bg-white resize-none "+(ke.notes?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),ke.notes&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:ke.notes})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:()=>he(!1),className:"px-4 py-2 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{try{if(console.log("Submitting subscription:",ve),!ve.school||!ve.plan||!ve.start_date)return void U({message:"Please fill in all required fields (School, Plan, Start Date)",type:"error"});const e=await fetch("http://127.0.0.1:8000/api/v1/billing/subscriptions/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${sessionStorage.getItem("authToken")}`},body:JSON.stringify({school:ve.school,start_date:ve.start_date,custom_plan_name:ve.custom_plan_name||"",interval:ve.interval,status:ve.status,end_date:ve.end_date||null,auto_renew:ve.auto_renew,base_price:ve.base_price||"",custom_price:ve.custom_price||"",discount_percent:ve.discount_percent||"",notes:ve.notes||"",plan:ve.plan})});if(e.ok){const t=await e.json();console.log("Subscription created successfully:",t),U({message:"Subscription created successfully!",type:"success"}),he(!1),Nt()}else{const t=await e.json().catch(()=>({}));if(console.error("Failed to create subscription:",e.status,t),_e({}),Ce(""),t.errors){const e={};Object.keys(t.errors).forEach(r=>{"non_field_errors"===r?Array.isArray(t.errors[r])?Ce(t.errors[r].join(", ")):Ce(t.errors[r]):Array.isArray(t.errors[r])?e[r]=t.errors[r].join(", "):e[r]=t.errors[r]}),_e(e)}else Ce(t.message||e.statusText||"Failed to create subscription")}}catch(Je){console.error("Error creating subscription:",Je),U({message:"Failed to create subscription. Please try again.",type:"error"})}},className:"px-4 py-2 text-xs bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-semibold shadow-sm hover:shadow-md",children:"Create Subscription"})]})]})}),Ee&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-end z-[10002]",children:(0,o.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 h-full w-96 shadow-2xl overflow-y-auto border-l border-gray-100",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,o.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Edit Subscription"})]}),(0,o.jsx)("button",{onClick:()=>Pe(!1),className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-200",children:X({className:"w-4 h-4"})})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[Fe&&(0,o.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-xl p-4 shadow-sm",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"h-4 w-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-sm font-medium text-red-800",children:Fe})})]})}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-1.5"}),"School *"]}),(0,o.jsxs)("select",{value:ve.school,onChange:e=>Ne({...ve,school:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white "+(Te.school?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select a school"}),Array.isArray(pe)&&pe.length>0?pe.map(e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id)):(0,o.jsx)("option",{value:"",disabled:!0,children:"Loading schools..."})]}),Te.school&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Te.school})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),"Plan *"]}),(0,o.jsxs)("select",{value:ve.plan,onChange:e=>Ne({...ve,plan:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all duration-200 bg-white "+(Te.plan?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"",children:"Select a plan"}),Array.isArray(be)&&be.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.name," (",e.plan_type,")"]},e.id))]}),Te.plan&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Te.plan})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1.5"}),"Custom Plan Name"]}),(0,o.jsx)("input",{type:"text",value:ve.custom_plan_name,onChange:e=>Ne({...ve,custom_plan_name:e.target.value}),placeholder:"Enter custom plan name...",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-100 focus:border-purple-500 transition-all duration-200 bg-white "+(Te.custom_plan_name?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Te.custom_plan_name&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Te.custom_plan_name})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1.5"}),"Start Date *"]}),(0,o.jsx)("input",{type:"date",value:ve.start_date,onChange:e=>Ne({...ve,start_date:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 bg-white "+(Te.start_date?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Te.start_date&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Te.start_date})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-1.5"}),"End Date"]}),(0,o.jsx)("input",{type:"date",value:ve.end_date,onChange:e=>Ne({...ve,end_date:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-100 focus:border-red-500 transition-all duration-200 bg-white "+(Te.end_date?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Te.end_date&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Te.end_date})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full mr-1.5"}),"Billing Interval *"]}),(0,o.jsxs)("select",{value:ve.interval,onChange:e=>Ne({...ve,interval:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 bg-white "+(Te.interval?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"monthly",children:"Monthly"}),(0,o.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,o.jsx)("option",{value:"yearly",children:"Yearly"}),(0,o.jsx)("option",{value:"custom",children:"Custom"})]}),Te.interval&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Te.interval})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-teal-500 rounded-full mr-1.5"}),"Status *"]}),(0,o.jsxs)("select",{value:ve.status,onChange:e=>Ne({...ve,status:e.target.value}),className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-100 focus:border-teal-500 transition-all duration-200 bg-white "+(Te.status?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"),children:[(0,o.jsx)("option",{value:"active",children:"Active"}),(0,o.jsx)("option",{value:"pending",children:"Pending"}),(0,o.jsx)("option",{value:"canceled",children:"Canceled"}),(0,o.jsx)("option",{value:"expired",children:"Expired"}),(0,o.jsx)("option",{value:"trial",children:"Trial"})]}),Te.status&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Te.status})]})]}),(0,o.jsx)("div",{children:(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",checked:ve.auto_renew,onChange:e=>Ne({...ve,auto_renew:e.target.checked}),className:"h-3 w-3 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsx)("span",{className:"ml-2 text-xs text-gray-700",children:"Auto Renew"})]})}),(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-1.5"}),"Base Price"]}),(0,o.jsx)("input",{type:"number",step:"0.01",value:ve.base_price,onChange:e=>Ne({...ve,base_price:e.target.value}),placeholder:"0.00",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-500 transition-all duration-200 bg-white "+(Te.base_price?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Te.base_price&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Te.base_price})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full mr-1.5"}),"Custom Price"]}),(0,o.jsx)("input",{type:"number",step:"0.01",value:ve.custom_price,onChange:e=>Ne({...ve,custom_price:e.target.value}),placeholder:"0.00",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-100 focus:border-cyan-500 transition-all duration-200 bg-white "+(Te.custom_price?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Te.custom_price&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Te.custom_price})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-pink-500 rounded-full mr-1.5"}),"Discount %"]}),(0,o.jsx)("input",{type:"number",step:"0.01",value:ve.discount_percent,onChange:e=>Ne({...ve,discount_percent:e.target.value}),placeholder:"0.00",className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-pink-500 transition-all duration-200 bg-white "+(Te.discount_percent?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Te.discount_percent&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Te.discount_percent})]})]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center",children:[(0,o.jsx)("span",{className:"w-1.5 h-1.5 bg-violet-500 rounded-full mr-1.5"}),"Notes"]}),(0,o.jsx)("textarea",{value:ve.notes,onChange:e=>Ne({...ve,notes:e.target.value}),placeholder:"Enter notes...",rows:2,className:"w-full px-3 py-2 text-xs border rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-100 focus:border-violet-500 transition-all duration-200 bg-white resize-none "+(Te.notes?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400")}),Te.notes&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:Te.notes})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[(0,o.jsx)("button",{onClick:()=>Pe(!1),className:"px-4 py-2 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{try{if(console.log("Updating subscription:",ve),!Ae)return void U({message:"No subscription selected for editing",type:"error"});if(!ve.school||!ve.plan||!ve.start_date)return void U({message:"Please fill in all required fields (School, Plan, Start Date)",type:"error"});const e=await fetch(`http://127.0.0.1:8000/api/v1/billing/subscriptions/${Ae.id}/`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${sessionStorage.getItem("authToken")}`},body:JSON.stringify({school:ve.school,start_date:ve.start_date,custom_plan_name:ve.custom_plan_name||"",interval:ve.interval,status:ve.status,end_date:ve.end_date||null,auto_renew:ve.auto_renew,base_price:ve.base_price||"",custom_price:ve.custom_price||"",discount_percent:ve.discount_percent||"",notes:ve.notes||"",plan:ve.plan})});if(e.ok){const t=await e.json();console.log("Subscription updated successfully:",t),U({message:"Subscription updated successfully!",type:"success"}),Pe(!1),Nt()}else{const t=await e.json().catch(()=>({}));if(console.error("Failed to update subscription:",e.status,t),ze({}),Oe(""),t.errors){const e={};Object.keys(t.errors).forEach(r=>{"non_field_errors"===r?Array.isArray(t.errors[r])?Oe(t.errors[r].join(", ")):Oe(t.errors[r]):Array.isArray(t.errors[r])?e[r]=t.errors[r].join(", "):e[r]=t.errors[r]}),ze(e)}else Oe(t.message||e.statusText||"Failed to update subscription")}}catch(Je){console.error("Error updating subscription:",Je),U({message:"Failed to update subscription. Please try again.",type:"error"})}},className:"px-4 py-2 text-xs bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-semibold shadow-sm hover:shadow-md",children:"Update Subscription"})]})]})}),de&&me&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10001]",children:(0,o.jsxs)("div",{className:"bg-purple-50 rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[70vh] overflow-hidden",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-purple-200",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-purple-600 rounded flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,o.jsxs)("h2",{className:"text-lg font-bold text-purple-900",children:[null===(e=me.school_details)||void 0===e?void 0:e.name," - Subscription"]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>U({message:"Add feature functionality coming soon!",type:"success"}),className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center text-white hover:bg-purple-700 transition-colors duration-200",title:"Add Feature",children:G({className:"w-3 h-3"})}),(0,o.jsx)("button",{onClick:()=>ue(!1),className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center text-white hover:bg-purple-700 transition-colors duration-200",children:(0,o.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,o.jsxs)("div",{className:"p-4 overflow-y-auto max-h-[calc(70vh-120px)] space-y-4",children:[(0,o.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[(0,o.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-blue-900",children:"School Details"}),(0,o.jsx)("span",{className:"inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full "+(null!==(t=me.school_details)&&void 0!==t&&t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:null!==(r=me.school_details)&&void 0!==r&&r.is_active?"Active":"Inactive"})]})}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-blue-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-blue-900",children:"School Name:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:(null===(a=me.school_details)||void 0===a?void 0:a.name)||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-blue-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-blue-900",children:"Domain:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:(null===(s=me.school_details)||void 0===s?void 0:s.domain)||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-blue-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-blue-900",children:"Email:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:(null===(l=me.school_details)||void 0===l?void 0:l.email)||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-blue-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-blue-900",children:"Phone:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:(null===(i=me.school_details)||void 0===i?void 0:i.phone)||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-blue-900",children:"Max Students:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:(null===(c=me.school_details)||void 0===c||null===(d=c.max_students)||void 0===d?void 0:d.toLocaleString())||"0"})]})]})]}),(0,o.jsxs)("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200",children:[(0,o.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-green-900",children:"Subscription Details"}),(0,o.jsx)("span",{className:"inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full "+("active"===me.status?"bg-green-100 text-green-800":"canceled"===me.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:me.status||"N/A"})]})}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-green-900",children:"Billing Interval:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold capitalize",children:me.interval||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-green-900",children:"Start Date:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:me.start_date?new Date(me.start_date).toLocaleDateString():"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-green-900",children:"End Date:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:me.end_date?new Date(me.end_date).toLocaleDateString():"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-green-900",children:"Auto Renew:"}),(0,o.jsx)("span",{className:"inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full "+(me.auto_renew?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:me.auto_renew?"Yes":"No"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-green-900",children:"Student Count:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:(null===(u=me.student_count)||void 0===u?void 0:u.toLocaleString())||"0"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-green-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-green-900",children:"Pricing Option:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold capitalize",children:(null===(m=me.pricing_option)||void 0===m?void 0:m.replace("_"," "))||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-green-900",children:"Notes:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:me.notes||"N/A"})]})]})]}),(0,o.jsxs)("div",{className:"bg-purple-50 rounded-lg p-3 border border-purple-200",children:[(0,o.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-purple-900",children:"Plan Details"}),(0,o.jsx)("span",{className:"inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:(null===(x=me.plan_details)||void 0===x?void 0:x.plan_type)||"N/A"})]})}),(0,o.jsx)("div",{className:"mb-2 pb-2 border-b border-purple-100",children:(0,o.jsx)("p",{className:"text-xs text-gray-600",children:(null===(f=me.plan_details)||void 0===f?void 0:f.description)||"No description available"})}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-purple-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-purple-900",children:"Plan Name:"}),(0,o.jsx)("span",{className:"text-xs text-gray-700 font-semibold",children:(null===(h=me.plan_details)||void 0===h?void 0:h.name)||me.custom_plan_name||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-purple-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-purple-900",children:"Plan Status:"}),(0,o.jsx)("span",{className:"inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full "+(null!==(p=me.plan_details)&&void 0!==p&&p.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:null!==(g=me.plan_details)&&void 0!==g&&g.is_active?"Active":"Inactive"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-purple-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-purple-900",children:"Is Default:"}),(0,o.jsx)("span",{className:"inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full "+(null!==(b=me.plan_details)&&void 0!==b&&b.is_default?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:null!==(y=me.plan_details)&&void 0!==y&&y.is_default?"Yes":"No"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-purple-100",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-purple-900",children:"Base Price:"}),(0,o.jsxs)("span",{className:"text-xs text-gray-700 font-semibold",children:["$",me.base_price||"0.00"]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-purple-900",children:"Custom Price:"}),(0,o.jsxs)("span",{className:"text-xs text-gray-700 font-semibold",children:["$",me.custom_price||"0.00"]})]})]})]}),null!==(v=me.plan_details)&&void 0!==v&&v.features&&me.plan_details.features.length>0?(0,o.jsxs)("div",{className:"bg-orange-50 rounded-lg p-3 border border-orange-200",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-orange-900",children:"Plan Features"}),(0,o.jsxs)("span",{className:"inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full bg-orange-100 text-orange-800",children:[me.plan_details.features.length," features"]})]}),(0,o.jsx)("div",{className:"space-y-3",children:me.plan_details.features.map((e,t)=>{var r,n,a,s;return(0,o.jsxs)("div",{className:"bg-white rounded-lg p-3 border border-orange-200 relative",children:[(0,o.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("h4",{className:"text-sm font-semibold text-gray-900",children:(null===(r=e.feature_details)||void 0===r?void 0:r.name)||"Unknown Feature"}),(0,o.jsx)("span",{className:"inline-flex px-1.5 py-0.5 text-xs font-semibold rounded-full bg-orange-100 text-orange-800",children:(null===(n=e.feature_details)||void 0===n?void 0:n.code)||"N/A"})]})}),(0,o.jsx)("div",{className:"mb-2 pb-2 border-b border-orange-200",children:(0,o.jsx)("p",{className:"text-xs text-gray-600",children:(null===(a=e.feature_details)||void 0===a?void 0:a.description)||"No description available"})}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-orange-200",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-orange-900",children:"Included Quantity:"}),(0,o.jsx)("span",{className:"text-xs text-gray-900 font-semibold",children:(null===(s=e.included_quantity)||void 0===s?void 0:s.toLocaleString())||"0"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-orange-200",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-orange-900",children:"Price Per Unit:"}),(0,o.jsxs)("span",{className:"text-xs text-gray-900 font-semibold",children:["$",e.price_per_unit||"0.00"]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-orange-900",children:"Overage Price:"}),(0,o.jsxs)("span",{className:"text-xs text-gray-900 font-semibold",children:["$",e.overage_price_per_unit||"0.00"]})]})]}),(0,o.jsx)("button",{onClick:()=>U({message:"Remove feature functionality coming soon!",type:"success"}),className:"absolute top-2 right-2 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-white hover:bg-red-600 transition-colors duration-200",title:"Remove Feature",children:Z({className:"w-2.5 h-2.5"})})]},e.id)})})]}):(0,o.jsx)("div",{className:"bg-orange-50 rounded-lg p-3 border border-orange-200",children:(0,o.jsxs)("div",{className:"text-center py-6",children:[(0,o.jsx)("div",{className:"text-orange-400 mb-2",children:(0,o.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,o.jsx)("h3",{className:"text-sm font-medium text-orange-900 mb-1",children:"No Features Found"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"This subscription doesn't have any features configured yet."})]})})]}),(0,o.jsx)("div",{className:"flex items-center justify-end p-4 border-t border-purple-200 bg-purple-50",children:(0,o.jsx)("button",{onClick:()=>ue(!1),className:"px-4 py-1.5 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors duration-200 font-medium text-sm",children:"Close"})})]})})]})},ke=()=>(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Billing Features"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Create and manage billable features"})]}),(0,o.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow border border-gray-200 text-center",children:[W({className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Billing Features Management"}),(0,o.jsx)("p",{className:"text-gray-600 mb-6",children:"This page will allow you to create and manage billable features, including feature codes, descriptions, and billing configurations."}),(0,o.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,o.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,o.jsx)("strong",{children:"Coming Soon:"})," Feature creation, code management, billing settings, and feature-to-plan assignment capabilities."]})})]})]}),_e=()=>(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Plan Features"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Manage features associated with billing plans"})]}),(0,o.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow border border-gray-200 text-center",children:[D({className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Plan Features Management"}),(0,o.jsx)("p",{className:"text-gray-600 mb-6",children:"This page will allow you to manage which features are included in each billing plan, including quantities, pricing, and overage costs."}),(0,o.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,o.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,o.jsx)("strong",{children:"Coming Soon:"})," Feature-to-plan assignment, quantity management, pricing configuration, and overage settings."]})})]})]}),Se=()=>(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"School Subscriptions"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Manage billing for existing schools"})]}),(0,o.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow border border-gray-200 text-center",children:[Q({className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"School Subscriptions Management"}),(0,o.jsx)("p",{className:"text-gray-600 mb-6",children:"This page will allow you to view and manage school subscriptions, including plan changes, billing settings, and subscription status."}),(0,o.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,o.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,o.jsx)("strong",{children:"Coming Soon:"})," School subscription overview, plan management, billing settings, and subscription status monitoring."]})})]})]}),Ce=()=>(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Invoices"}),(0,o.jsx)("p",{className:"text-gray-600",children:"View and manage all invoices across the platform"})]}),(0,o.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow border border-gray-200 text-center",children:[q({className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Invoice Management"}),(0,o.jsx)("p",{className:"text-gray-600 mb-6",children:"This page will allow you to view and manage all invoices, including invoice details, payment processing, and invoice status tracking."}),(0,o.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,o.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,o.jsx)("strong",{children:"Coming Soon:"})," Invoice listing, payment processing, PDF generation, email notifications, and invoice status management."]})})]})]}),Ee=()=>{const[e,t]=(0,n.useState)("students");return(0,o.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,o.jsx)(ae,{currentPage:e,onPageChange:t}),(0,o.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,o.jsx)(se,{pageTitle:(r=e,{students:"Students",ebook:"EBook",enrollments:"Enrollments",reports:"Reports",profile:"Manage Profile","admin-panel":"Admin Panel","admin-schools":"Admin - Schools","admin-users":"Admin - Users","admin-parents":"Admin - Parents","admin-features":"Admin - Switch Board","admin-billing":"Admin - Billing","admin-billing-dashboard":"Admin - Billing Dashboard","admin-billing-plans":"Admin - Billing Plans","admin-billing-features":"Admin - Billing Features","admin-billing-plan-features":"Admin - Plan Features","admin-billing-subscriptions":"Admin - School Subscriptions","admin-billing-invoices":"Admin - Invoices"}[r]||"Dashboard")}),(0,o.jsx)("div",{className:"flex-1",children:(()=>{switch(e){case"students":default:return(0,o.jsx)(xe,{});case"ebook":return(0,o.jsx)("div",{className:"p-6 text-center text-gray-500",children:"EBook page coming soon..."});case"enrollments":return(0,o.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Enrollments page coming soon..."});case"reports":return(0,o.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Reports page coming soon..."});case"profile":return(0,o.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Profile page coming soon..."});case"admin-panel":return(0,o.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Admin Panel - Select a sub-item from the sidebar"});case"admin-schools":return(0,o.jsx)(be,{});case"admin-users":return(0,o.jsx)(pe,{});case"admin-parents":return(0,o.jsx)(ye,{});case"admin-features":return(0,o.jsx)(he,{});case"admin-billing":return(0,o.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Billing - Select a sub-item from the sidebar"});case"admin-billing-dashboard":return(0,o.jsx)(ve,{});case"admin-billing-plans":return(0,o.jsx)(Ne,{});case"admin-billing-features":return(0,o.jsx)(ke,{});case"admin-billing-plan-features":return(0,o.jsx)(_e,{});case"admin-billing-subscriptions":return(0,o.jsx)(Se,{});case"admin-billing-invoices":return(0,o.jsx)(Ce,{})}})()})]})]});var r},Pe=()=>(0,o.jsxs)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 relative overflow-hidden",children:[(0,o.jsxs)("div",{className:"absolute inset-0",children:[(0,o.jsx)("div",{className:"absolute top-20 left-10 w-32 h-32 bg-blue-200 rounded-full opacity-30"}),(0,o.jsx)("div",{className:"absolute bottom-20 right-10 w-24 h-24 bg-blue-300 rounded-full opacity-20"}),(0,o.jsx)("div",{className:"absolute top-1/2 left-1/4 w-16 h-16 bg-blue-100 rounded-full opacity-40"})]}),(0,o.jsxs)("div",{className:"relative z-10 max-w-md",children:[(0,o.jsxs)("svg",{viewBox:"0 0 400 300",className:"w-full h-auto",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("rect",{x:"50",y:"200",width:"300",height:"20",fill:"#8B5CF6",rx:"4"}),(0,o.jsx)("rect",{x:"120",y:"140",width:"160",height:"100",fill:"#1F2937",rx:"8"}),(0,o.jsx)("rect",{x:"125",y:"145",width:"150",height:"85",fill:"#3B82F6",rx:"4"}),(0,o.jsx)("rect",{x:"130",y:"150",width:"140",height:"75",fill:"#1E40AF",rx:"2"}),(0,o.jsx)("rect",{x:"140",y:"160",width:"120",height:"8",fill:"#60A5FA",rx:"2"}),(0,o.jsx)("rect",{x:"140",y:"175",width:"80",height:"8",fill:"#60A5FA",rx:"2"}),(0,o.jsx)("rect",{x:"140",y:"190",width:"100",height:"8",fill:"#60A5FA",rx:"2"}),(0,o.jsx)("rect",{x:"140",y:"205",width:"60",height:"8",fill:"#60A5FA",rx:"2"}),(0,o.jsx)("circle",{cx:"200",cy:"120",r:"25",fill:"#F59E0B"}),(0,o.jsx)("rect",{x:"185",y:"145",width:"30",height:"40",fill:"#F59E0B"}),(0,o.jsx)("rect",{x:"175",y:"155",width:"15",height:"8",fill:"#F59E0B",rx:"4"}),(0,o.jsx)("rect",{x:"210",y:"155",width:"15",height:"8",fill:"#F59E0B",rx:"4"}),(0,o.jsx)("rect",{x:"280",y:"180",width:"20",height:"25",fill:"#EF4444",rx:"2"}),(0,o.jsx)("rect",{x:"285",y:"175",width:"10",height:"8",fill:"#EF4444",rx:"2"}),(0,o.jsx)("rect",{x:"80",y:"180",width:"8",height:"20",fill:"#059669"}),(0,o.jsx)("circle",{cx:"84",cy:"175",r:"12",fill:"#10B981"}),(0,o.jsx)("circle",{cx:"78",cy:"170",r:"8",fill:"#34D399"}),(0,o.jsx)("circle",{cx:"90",cy:"170",r:"6",fill:"#6EE7B7"}),(0,o.jsx)("rect",{x:"320",y:"160",width:"40",height:"50",fill:"#F3F4F6",rx:"2"}),(0,o.jsx)("rect",{x:"325",y:"165",width:"30",height:"3",fill:"#D1D5DB"}),(0,o.jsx)("rect",{x:"325",y:"175",width:"25",height:"3",fill:"#D1D5DB"}),(0,o.jsx)("rect",{x:"325",y:"185",width:"30",height:"3",fill:"#D1D5DB"}),(0,o.jsx)("rect",{x:"325",y:"195",width:"20",height:"3",fill:"#D1D5DB"})]}),(0,o.jsxs)("div",{className:"text-center mt-8",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Welcome Back"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Sign in to continue your learning journey"})]})]})]}),Ae=e=>{let{onSwitchToRegister:t}=e;const[r,a]=(0,n.useState)(""),[s,l]=(0,n.useState)(""),[i,c]=(0,n.useState)(!1),{login:u,isLoading:m,error:x}=d();return(0,o.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center p-8",children:(0,o.jsx)("div",{className:"w-3/4 h-3/4 bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"hidden lg:flex lg:w-1/2",children:(0,o.jsx)(Pe,{})}),(0,o.jsx)("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:(0,o.jsxs)("div",{className:"w-full max-w-md",children:[(0,o.jsx)("div",{className:"text-center mb-8",children:(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Login"})}),x&&(0,o.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,o.jsx)("p",{className:"text-red-600 text-sm",children:x})}),(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await u({email:r,password:s})},className:"space-y-6",children:[(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:re({className:"h-5 w-5 text-gray-400"})}),(0,o.jsx)("input",{id:"email",type:"email",value:r,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-4 bg-transparent border-b border-gray-200 text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400 transition-all duration-200",placeholder:"Email address",required:!0,disabled:m})]})}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,o.jsx)("div",{className:"w-5 h-5 flex items-center justify-center",children:(0,o.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full"})})}),(0,o.jsx)("input",{id:"password",type:i?"text":"password",value:s,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-12 py-4 bg-transparent border-b border-gray-200 text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400 transition-all duration-200",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,disabled:m}),(0,o.jsx)("button",{type:"button",onClick:()=>c(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:m,children:i?$({className:"h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors"}):H({className:"h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors"})})]})}),(0,o.jsx)("div",{className:"flex justify-end",children:(0,o.jsx)("button",{type:"button",className:"text-sm text-blue-600 hover:text-blue-800 hover:underline transition-colors duration-200",disabled:m,children:"Forgot Password?"})}),(0,o.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-[#4292F0] hover:bg-[#3B82F6] text-white font-semibold py-3 px-4 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Signing In...":"Login"})]}),(0,o.jsx)("div",{className:"mt-8 text-center",children:(0,o.jsxs)("p",{className:"text-gray-600",children:["Don't have account?"," ",(0,o.jsx)("button",{type:"button",onClick:t,className:"text-blue-600 hover:text-blue-800 font-medium hover:underline transition-colors duration-200",disabled:m,children:"Let's Get Started For Free"})]})})]})})]})})})},Le=e=>{let{onSwitchToLogin:t}=e;const[r,a]=(0,n.useState)(""),[s,l]=(0,n.useState)(""),[i,c]=(0,n.useState)(""),[u,m]=(0,n.useState)(""),[x,f]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),{register:g,isLoading:b,error:y}=d();return(0,o.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center p-8",children:(0,o.jsx)("div",{className:"w-3/4 h-3/4 bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"hidden lg:flex lg:w-1/2",children:(0,o.jsx)(Pe,{})}),(0,o.jsx)("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:(0,o.jsxs)("div",{className:"w-full max-w-md",children:[(0,o.jsx)("div",{className:"text-center mb-8",children:(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Account"})}),y&&(0,o.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,o.jsx)("p",{className:"text-red-600 text-sm",children:y})}),(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i===u&&await g({name:r,email:s,password:i,confirmPassword:u})},className:"space-y-6",children:[(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:re({className:"h-5 w-5 text-gray-400"})}),(0,o.jsx)("input",{id:"name",type:"text",value:r,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-4 bg-transparent border-b border-gray-200 text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400 transition-all duration-200",placeholder:"Full Name",required:!0,disabled:b})]})}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(v={className:"h-5 w-5 text-gray-400"},C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(v))}),(0,o.jsx)("input",{id:"email",type:"email",value:s,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-4 bg-transparent border-b border-gray-200 text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400 transition-all duration-200",placeholder:"Email Address",required:!0,disabled:b})]})}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,o.jsx)("div",{className:"w-5 h-5 flex items-center justify-center",children:(0,o.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full"})})}),(0,o.jsx)("input",{id:"password",type:x?"text":"password",value:i,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-12 py-4 bg-transparent border-b border-gray-200 text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400 transition-all duration-200",placeholder:"Password",required:!0,disabled:b}),(0,o.jsx)("button",{type:"button",onClick:()=>f(!x),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:b,children:x?$({className:"h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors"}):H({className:"h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors"})})]})}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,o.jsx)("div",{className:"w-5 h-5 flex items-center justify-center",children:(0,o.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full"})})}),(0,o.jsx)("input",{id:"confirmPassword",type:h?"text":"password",value:u,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-12 py-4 bg-transparent border-b border-gray-200 text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400 transition-all duration-200",placeholder:"Confirm Password",required:!0,disabled:b}),(0,o.jsx)("button",{type:"button",onClick:()=>p(!h),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:b,children:h?$({className:"h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors"}):H({className:"h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors"})})]})}),(0,o.jsx)("button",{type:"submit",disabled:b,className:"w-full bg-[#4292F0] hover:bg-[#3B82F6] text-white font-semibold py-3 px-4 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Creating Account...":"Sign Up"})]}),(0,o.jsx)("div",{className:"mt-8 text-center",children:(0,o.jsxs)("p",{className:"text-gray-600",children:["Already have an account?"," ",(0,o.jsx)("button",{type:"button",onClick:t,className:"text-blue-600 hover:text-blue-800 font-medium hover:underline transition-colors duration-200",disabled:b,children:"Sign In"})]})})]})})]})})});var v},Te=()=>{const[e,t]=(0,n.useState)("login");return(0,o.jsx)("div",{children:"login"===e?(0,o.jsx)(Ae,{onSwitchToRegister:()=>t("register")}):(0,o.jsx)(Le,{onSwitchToLogin:()=>t("login")})})};function ze(){const{isAuthenticated:e,isLoading:t}=d();return t?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):e?(0,o.jsx)(Ee,{}):(0,o.jsx)(Te,{})}const Fe=function(){return(0,o.jsx)(u,{children:(0,o.jsx)(g,{children:(0,o.jsx)(x,{children:(0,o.jsx)(ze,{})})})})},Oe=e=>{e&&e instanceof Function&&r.e(453).then(r.bind(r,453)).then(t=>{let{getCLS:r,getFID:n,getFCP:a,getLCP:s,getTTFB:l}=t;r(e),n(e),a(e),s(e),l(e)})};a.createRoot(document.getElementById("root")).render((0,o.jsx)(n.StrictMode,{children:(0,o.jsx)(Fe,{})})),Oe()})();
//# sourceMappingURL=main.ac021e48.js.map